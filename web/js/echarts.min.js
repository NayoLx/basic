

Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
License); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

httpwww.apache.orglicensesLICENSE-2.0

Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
AS IS BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
under the License.



!function(t,e){object==typeof exports&&undefined!=typeof modulee(exports)function==typeof define&&define.amddefine([exports],e)e(t.echarts={})}(this,function(t){use strict;function e(t,e){createCanvas===t&&(q_=null),j_[t]=e}function i(t){if(null==tobject!=typeof t)return t;var e=t,n=G_.call(t);if([object Array]===n){if(!O(t)){e=[];for(var o=0,a=t.length;oa;o++)e[o]=i(t[o])}}else if(V_[n]){if(!O(t)){var r=t.constructor;if(t.constructor.from)e=r.from(t);else{e=new r(t.length);for(var o=0,a=t.length;oa;o++)e[o]=i(t[o])}}}else if(!B_[n]&&!O(t)&&!M(t)){e={};for(var s in t)t.hasOwnProperty(s)&&(e[s]=i(t[s]))}return e}function n(t,e,o){if(!w(e)!w(t))return oi(e)t;for(var a in e)if(e.hasOwnProperty(a)){var r=t[a],s=e[a];!w(s)!w(r)y(s)y(r)M(s)M(r)b(s)b(r)O(s)O(r)!o&&a in t(t[a]=i(e[a],!0))n(r,s,o)}return t}function o(t,e){for(var i=t[0],o=1,a=t.length;oa;o++)i=n(i,t[o],e);return i}function a(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function r(t,e,i){for(var n in e)e.hasOwnProperty(n)&&(inull!=e[n]null==t[n])&&(t[n]=e[n]);return t}function s(){return q_(q_=Y_().getContext(2d)),q_}function l(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;in;i++)if(t[i]===e)return i}return-1}function u(t,e){function i(){}var n=t.prototype;i.prototype=e.prototype,t.prototype=new i;for(var o in n)t.prototype[o]=n[o];t.prototype.constructor=t,t.superClass=e}function h(t,e,i){r(t=prototypein tt.prototypet,e=prototypein ee.prototypee,i)}function c(t){if(t)returnstring!=typeof t&&number==typeof t.length}function d(t,e,i){if(t&&e)if(t.forEach&&t.forEach===W_)t.forEach(e,i);else if(t.length===+t.length)for(var n=0,o=t.length;no;n++)e.call(i,t[n],n,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(i,t[a],a,t)}function f(t,e,i){if(t&&e){if(t.map&&t.map===U_)return t.map(e,i);for(var n=[],o=0,a=t.length;oa;o++)n.push(e.call(i,t[o],o,t));return n}}function p(t,e,i,n){if(t&&e){if(t.reduce&&t.reduce===X_)return t.reduce(e,i,n);for(var o=0,a=t.length;oa;o++)i=e.call(n,i,t[o],o,t);return i}}function g(t,e,i){if(t&&e){if(t.filter&&t.filter===H_)return t.filter(e,i);for(var n=[],o=0,a=t.length;oa;o++)e.call(i,t[o],o,t)&&n.push(t[o]);return n}}function m(t,e){var i=Z_.call(arguments,2);return function(){return t.apply(e,i.concat(Z_.call(arguments)))}}function v(t){var e=Z_.call(arguments,1);return function(){return t.apply(this,e.concat(Z_.call(arguments)))}}function y(t){return[object Array]===G_.call(t)}function x(t){returnfunction==typeof t}function _(t){return[object String]===G_.call(t)}function w(t){var e=typeof t;returnfunction===e!!t&&object==e}function b(t){return!!B_[G_.call(t)]}function S(t){return!!V_[G_.call(t)]}function M(t){returnobject==typeof t&&number==typeof t.nodeType&&object==typeof t.ownerDocument}function I(t){return t!==t}function T(t){for(var e=0,i=arguments.length;ei;e++)if(null!=arguments[e])return arguments[e]}function A(t,e){return null!=tte}function D(t,e,i){return null!=ttnull!=eei}function C(){return Function.call.apply(Z_,arguments)}function L(t){if(number==typeof t)return[t,t,t,t];var e=t.length;return 2===e[t[0],t[1],t[0],t[1]]3===e[t[0],t[1],t[2],t[1]]t}function k(t,e){if(!t)throw new Error(e)}function P(t){return null==tnullfunction==typeof t.trimt.trim()t.replace(^[suFEFFxA0]+[suFEFFxA0]+$g,)}function N(t){t[K_]=!0}function O(t){return t[K_]}function E(t){function e(t,e){in.set(t,e)n.set(e,t)}var i=y(t);this.data={};var n=this;t instanceof Et.each(e)t&&d(t,e)}function R(t){return new E(t)}function z(t,e){for(var i=new t.constructor(t.length+e.length),n=0;nt.length;n++)i[n]=t[n];var o=t.length;for(n=0;ne.length;n++)i[n+o]=e[n];return i}function B(){}function V(t,e){var i=new J_(2);return null==t&&(t=0),null==e&&(e=0),i[0]=t,i[1]=e,i}function G(t,e){return t[0]=e[0],t[1]=e[1],t}function F(t){var e=new J_(2);return e[0]=t[0],e[1]=t[1],e}function W(t,e,i){return t[0]=e,t[1]=i,t}function H(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Z(t,e,i,n){return t[0]=e[0]+i[0]n,t[1]=e[1]+i[1]n,t}function U(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function X(t){return Math.sqrt(j(t))}function j(t){return t[0]t[0]+t[1]t[1]}function Y(t,e,i){return t[0]=e[0]i,t[1]=e[1]i,t}function q(t,e){var i=X(e);return 0===i(t[0]=0,t[1]=0)(t[0]=e[0]i,t[1]=e[1]i),t}function K(t,e){return Math.sqrt((t[0]-e[0])(t[0]-e[0])+(t[1]-e[1])(t[1]-e[1]))}function $(t,e){return(t[0]-e[0])(t[0]-e[0])+(t[1]-e[1])(t[1]-e[1])}function J(t,e,i,n){return t[0]=e[0]+n(i[0]-e[0]),t[1]=e[1]+n(i[1]-e[1]),t}function Q(t,e,i){var n=e[0],o=e[1];return t[0]=i[0]n+i[2]o+i[4],t[1]=i[1]n+i[3]o+i[5],t}function tt(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function et(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function it(){this.on(mousedown,this._dragStart,this),this.on(mousemove,this._drag,this),this.on(mouseup,this._dragEnd,this),this.on(globalout,this._dragEnd,this)}function nt(t,e){return{targett,topTargete&&e.topTarget}}function ot(t,e){var i=t._$eventProcessor;return null!=e&&i&&i.normalizeQuery&&(e=i.normalizeQuery(e)),e}function at(t){return t.getBoundingClientRectt.getBoundingClientRect(){left0,top0}}function rt(t,e,i,n){return i=i{},n!z_.canvasSupportedst(t,e,i)z_.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX(i.zrX=e.layerX,i.zrY=e.layerY)null!=e.offsetX(i.zrX=e.offsetX,i.zrY=e.offsetY)st(t,e,i),i}function st(t,e,i){var n=at(t);i.zrX=e.clientX-n.left,i.zrY=e.clientY-n.top}function lt(t,e,i){if(null!=(e=ewindow.event).zrX)return e;var n=e.type;if(n&&n.indexOf(touch)=0){var o=touchend!=ne.targetTouches[0]e.changedTouches[0];o&&rt(t,o,e,i)}else rt(t,e,e,i),e.zrDelta=e.wheelDeltae.wheelDelta120-(e.detail0)3;var a=e.button;return null==e.which&&void 0!==a&&sw.test(e.type)&&(e.which=1&a12&a34&a20),e}function ut(t,e,i){rwt.addEventListener(e,i)t.attachEvent(on+e,i)}function ht(t,e,i){rwt.removeEventListener(e,i)t.detachEvent(on+e,i)}function ct(t){return t.which1}function dt(t,e,i){return{typet,eventi,targete.target,topTargete.topTarget,cancelBubble!1,offsetXi.zrX,offsetYi.zrY,gestureEventi.gestureEvent,pinchXi.pinchX,pinchYi.pinchY,pinchScalei.pinchScale,wheelDeltai.zrDelta,zrByTouchi.zrByTouch,whichi.which,stopft}}function ft(t){lw(this.event)}function pt(){}function gt(t,e,i){if(t[t.rectHoverrectContaincontain](e,i)){for(var n,o=t;o;){if(o.clipPath&&!o.clipPath.contain(e,i))return!1;o.silent&&(n=!0),o=o.parent}return!nuw}return!1}function mt(){var t=new dw(6);return vt(t),t}function vt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function xt(t,e,i){var n=e[0]i[0]+e[2]i[1],o=e[1]i[0]+e[3]i[1],a=e[0]i[2]+e[2]i[3],r=e[1]i[2]+e[3]i[3],s=e[0]i[4]+e[2]i[5]+e[4],l=e[1]i[4]+e[3]i[5]+e[5];return t[0]=n,t[1]=o,t[2]=a,t[3]=r,t[4]=s,t[5]=l,t}function _t(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t}function wt(t,e,i){var n=e[0],o=e[2],a=e[4],r=e[1],s=e[3],l=e[5],u=Math.sin(i),h=Math.cos(i);return t[0]=nh+ru,t[1]=-nu+rh,t[2]=oh+su,t[3]=-ou+hs,t[4]=ha+ul,t[5]=hl-ua,t}function bt(t,e,i){var n=i[0],o=i[1];return t[0]=e[0]n,t[1]=e[1]o,t[2]=e[2]n,t[3]=e[3]o,t[4]=e[4]n,t[5]=e[5]o,t}function St(t,e){var i=e[0],n=e[2],o=e[4],a=e[1],r=e[3],s=e[5],l=ir-an;return l(l=1l,t[0]=rl,t[1]=-al,t[2]=-nl,t[3]=il,t[4]=(ns-ro)l,t[5]=(ao-is)l,t)null}function Mt(t){var e=mt();return yt(e,t),e}function It(t){return tgwt-gw}function Tt(t){this._target=t.target,this._life=t.life1e3,this._delay=t.delay0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap0,this.easing=t.easingLinear,this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}function At(t){return(t=Math.round(t))00t255255t}function Dt(t){return(t=Math.round(t))00t360360t}function Ct(t){return t00t11t}function Lt(t){return At(t.length&&%===t.charAt(t.length-1)parseFloat(t)100255parseInt(t,10))}function kt(t){return Ct(t.length&&%===t.charAt(t.length-1)parseFloat(t)100parseFloat(t))}function Pt(t,e,i){return i0i+=1i1&&(i-=1),6i1t+(e-t)i62i1e3i2t+(e-t)(23-i)6t}function Nt(t,e,i){return t+(e-t)i}function Ot(t,e,i,n,o){return t[0]=e,t[1]=i,t[2]=n,t[3]=o,t}function Et(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Rt(t,e){Cw&&Et(Cw,e),Cw=Dw.put(t,Cwe.slice())}function zt(t,e){if(t){e=e[];var i=Dw.get(t);if(i)return Et(e,i);var n=(t+=).replace( g,).toLowerCase();if(n in Aw)return Et(e,Aw[n]),Rt(t,e),e;if(#!==n.charAt(0)){var o=n.indexOf((),a=n.indexOf());if(-1!==o&&a+1===n.length){var r=n.substr(0,o),s=n.substr(o+1,a-(o+1)).split(,),l=1;switch(r){casergbaif(4!==s.length)return void Ot(e,0,0,0,1);l=kt(s.pop());casergbreturn 3!==s.lengthvoid Ot(e,0,0,0,1)(Ot(e,Lt(s[0]),Lt(s[1]),Lt(s[2]),l),Rt(t,e),e);casehslareturn 4!==s.lengthvoid Ot(e,0,0,0,1)(s[3]=kt(s[3]),Bt(s,e),Rt(t,e),e);casehslreturn 3!==s.lengthvoid Ot(e,0,0,0,1)(Bt(s,e),Rt(t,e),e);defaultreturn}}Ot(e,0,0,0,1)}else{if(4===n.length)return(u=parseInt(n.substr(1),16))=0&&u=4095(Ot(e,(3840&u)4(3840&u)8,240&u(240&u)4,15&u(15&u)4,1),Rt(t,e),e)void Ot(e,0,0,0,1);if(7===n.length){var u=parseInt(n.substr(1),16);return u=0&&u=16777215(Ot(e,(16711680&u)16,(65280&u)8,255&u,1),Rt(t,e),e)void Ot(e,0,0,0,1)}}}}function Bt(t,e){var i=(parseFloat(t[0])%360+360)%360360,n=kt(t[1]),o=kt(t[2]),a=o=.5o(n+1)o+n-on,r=2o-a;return e=e[],Ot(e,At(255Pt(r,a,i+13)),At(255Pt(r,a,i)),At(255Pt(r,a,i-13)),1),4===t.length&&(e[3]=t[3]),e}function Vt(t){if(t){var e,i,n=t[0]255,o=t[1]255,a=t[2]255,r=Math.min(n,o,a),s=Math.max(n,o,a),l=s-r,u=(s+r)2;if(0===l)e=0,i=0;else{i=u.5l(s+r)l(2-s-r);var h=((s-n)6+l2)l,c=((s-o)6+l2)l,d=((s-a)6+l2)l;n===se=d-co===se=13+h-da===s&&(e=23+c-h),e0&&(e+=1),e1&&(e-=1)}var f=[360e,i,u];return null!=t[3]&&f.push(t[3]),f}}function Gt(t,e){var i=zt(t);if(i){for(var n=0;n3;n++)i[n]=e0i[n](1-e)0(255-i[n])e+i[n]0,i[n]255i[n]=255t[n]0&&(i[n]=0);return Xt(i,4===i.lengthrgbargb)}}function Ft(t){var e=zt(t);if(e)return((124)+(e[0]16)+(e[1]8)+ +e[2]).toString(16).slice(1)}function Wt(t,e,i){if(e&&e.length&&t=0&&t=1){i=i[];var n=t(e.length-1),o=Math.floor(n),a=Math.ceil(n),r=e[o],s=e[a],l=n-o;return i[0]=At(Nt(r[0],s[0],l)),i[1]=At(Nt(r[1],s[1],l)),i[2]=At(Nt(r[2],s[2],l)),i[3]=Ct(Nt(r[3],s[3],l)),i}}function Ht(t,e,i){if(e&&e.length&&t=0&&t=1){var n=t(e.length-1),o=Math.floor(n),a=Math.ceil(n),r=zt(e[o]),s=zt(e[a]),l=n-o,u=Xt([At(Nt(r[0],s[0],l)),At(Nt(r[1],s[1],l)),At(Nt(r[2],s[2],l)),Ct(Nt(r[3],s[3],l))],rgba);return i{coloru,leftIndexo,rightIndexa,valuen}u}}function Zt(t,e,i,n){if(t=zt(t))return t=Vt(t),null!=e&&(t[0]=Dt(e)),null!=i&&(t[1]=kt(i)),null!=n&&(t[2]=kt(n)),Xt(Bt(t),rgba)}function Ut(t,e){if((t=zt(t))&&null!=e)return t[3]=Ct(e),Xt(t,rgba)}function Xt(t,e){if(t&&t.length){var i=t[0]+,+t[1]+,+t[2];returnrgba!==e&&hsva!==e&&hsla!==e(i+=,+t[3]),e+(+i+)}}function jt(t,e){return t[e]}function Yt(t,e,i){t[e]=i}function qt(t,e,i){return(e-t)i+t}function Kt(t,e,i){return i.5et}function $t(t,e,i,n,o){var a=t.length;if(1==o)for(s=0;sa;s++)n[s]=qt(t[s],e[s],i);else for(var r=a&&t[0].length,s=0;sa;s++)for(var l=0;lr;l++)n[s][l]=qt(t[s][l],e[s][l],i)}function Jt(t,e,i){var n=t.length,o=e.length;if(n!==o)if(no)t.length=o;else for(r=n;ro;r++)t.push(1===ie[r]Nw.call(e[r]));for(var a=t[0]&&t[0].length,r=0;rt.length;r++)if(1===i)isNaN(t[r])&&(t[r]=e[r]);else for(var s=0;sa;s++)isNaN(t[r][s])&&(t[r][s]=e[r][s])}function Qt(t,e,i){if(t===e)return!0;var n=t.length;if(n!==e.length)return!1;if(1===i){for(a=0;an;a++)if(t[a]!==e[a])return!1}else for(var o=t[0].length,a=0;an;a++)for(var r=0;ro;r++)if(t[a][r]!==e[a][r])return!1;return!0}function te(t,e,i,n,o,a,r,s,l){var u=t.length;if(1==l)for(c=0;cu;c++)s[c]=ee(t[c],e[c],i[c],n[c],o,a,r);else for(var h=t[0].length,c=0;cu;c++)for(var d=0;dh;d++)s[c][d]=ee(t[c][d],e[c][d],i[c][d],n[c][d],o,a,r)}function ee(t,e,i,n,o,a,r){var s=.5(i-t),l=.5(n-e);return(2(e-i)+s+l)r+(-3(e-i)-2s-l)a+so+e}function ie(t){if(c(t)){var e=t.length;if(c(t[0])){for(var i=[],n=0;ne;n++)i.push(Nw.call(t[n]));return i}return Nw.call(t)}return t}function ne(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),rgba(+t.join(,)+)}function oe(t){var e=t[t.length-1].value;return c(e&&e[0])21}function ae(t,e,i,n,o,a){var r=t._getter,s=t._setter,l=spline===e,u=n.length;if(u){var h,d=c(n[0].value),f=!1,p=!1,g=doe(n)0;n.sort(function(t,e){return t.time-e.time}),h=n[u-1].time;for(var m=[],v=[],y=n[0].value,x=!0,_=0;_u;_++){m.push(n[_].timeh);var w=n[_].value;if(d&&Qt(w,y,g)!d&&w===y(x=!1),y=w,string==typeof w){var b=zt(w);b(w=b,f=!0)p=!0}v.push(w)}if(a!x){for(var S=v[u-1],_=0;_u-1;_++)dJt(v[_],S,g)!isNaN(v[_])isNaN(S)pf(v[_]=S);d&&Jt(r(t._target,o),S,g);var M,I,T,A,D,C,L=0,k=0;if(f)var P=[0,0,0,0];var N=new Tt({targett._target,lifeh,loopt._loop,delayt._delay,onframefunction(t,e){var i;if(e0)i=0;else if(ek){for(i=M=Math.min(L+1,u-1);i=0&&!(m[i]=e);i--);i=Math.min(i,u-2)}else{for(i=L;iu&&!(m[i]e);i++);i=Math.min(i-1,u-2)}L=i,k=e;var n=m[i+1]-m[i];if(0!==n)if(I=(e-m[i])n,l)if(A=v[i],T=v[0===iii-1],D=v[iu-2u-1i+1],C=v[iu-3u-1i+2],d)te(T,A,D,C,I,II,III,r(t,o),g);else{if(f)a=te(T,A,D,C,I,II,III,P,1),a=ne(P);else{if(p)return Kt(A,D,I);a=ee(T,A,D,C,I,II,III)}s(t,o,a)}else if(d)$t(v[i],v[i+1],I,r(t,o),g);else{var a;if(f)$t(v[i],v[i+1],I,P,1),a=ne(P);else{if(p)return Kt(v[i],v[i+1],I);a=qt(v[i],v[i+1],I)}s(t,o,a)}},ondestroyi});return e&&spline!==e&&(N.easing=e),N}}}function re(t,e,i,n,o,a,r,s){_(n)(a=o,o=n,n=0)x(o)(a=o,o=linear,n=0)x(n)(a=n,n=0)x(i)(a=i,i=500)i(i=500),t.stopAnimation(),se(t,,t,e,i,n,s);var l=t.animators.slice(),u=l.length;ua&&a();for(var h=0;hl.length;h++)l[h].done(function(){--ua&&a()}).start(o,r)}function se(t,e,i,n,o,a,r){var s={},l=0;for(var u in n)n.hasOwnProperty(u)&&(null!=i[u]w(n[u])&&!c(n[u])se(t,ee+.+uu,i[u],n[u],o,a,r)(r(s[u]=i[u],le(t,e,u,n[u]))s[u]=n[u],l++)null==n[u]rle(t,e,u,n[u]));l0&&t.animate(e,!1).when(null==o500o,s).delay(a0)}function le(t,e,i,n){if(e){var o={};o[e]={},o[e][i]=n,t.attr(o)}else t.attr(i,n)}function ue(t,e,i,n){i0&&(t+=i,i=-i),n0&&(e+=n,n=-n),this.x=t,this.y=e,this.width=i,this.height=n}function he(t){for(var e=0;t=Uw;)e=1&t,t=1;return t+e}function ce(t,e,i,n){var o=e+1;if(o===i)return 1;if(n(t[o++],t[e])0){for(;oi&&n(t[o],t[o-1])0;)o++;de(t,e,o)}else for(;oi&&n(t[o],t[o-1])=0;)o++;return o-e}function de(t,e,i){for(i--;ei;){var n=t[e];t[e++]=t[i],t[i--]=n}}function fe(t,e,i,n,o){for(n===e&&n++;ni;n++){for(var a,r=t[n],s=e,l=n;sl;)o(r,t[a=s+l1])0l=as=a+1;var u=n-s;switch(u){case 3t[s+3]=t[s+2];case 2t[s+2]=t[s+1];case 1t[s+1]=t[s];break;defaultfor(;u0;)t[s+u]=t[s+u-1],u--}t[s]=r}}function pe(t,e,i,n,o,a){var r=0,s=0,l=1;if(a(t,e[i+o])0){for(s=n-o;ls&&a(t,e[i+o+l])0;)r=l,(l=1+(l1))=0&&(l=s);ls&&(l=s),r+=o,l+=o}else{for(s=o+1;ls&&a(t,e[i+o-l])=0;)r=l,(l=1+(l1))=0&&(l=s);ls&&(l=s);var u=r;r=o-l,l=o-u}for(r++;rl;){var h=r+(l-r1);a(t,e[i+h])0r=h+1l=h}return l}function ge(t,e,i,n,o,a){var r=0,s=0,l=1;if(a(t,e[i+o])0){for(s=o+1;ls&&a(t,e[i+o-l])0;)r=l,(l=1+(l1))=0&&(l=s);ls&&(l=s);var u=r;r=o-l,l=o-u}else{for(s=n-o;ls&&a(t,e[i+o+l])=0;)r=l,(l=1+(l1))=0&&(l=s);ls&&(l=s),r+=o,l+=o}for(r++;rl;){var h=r+(l-r1);a(t,e[i+h])0l=hr=h+1}return l}function me(t,e){function i(i){var s=a[i],u=r[i],h=a[i+1],c=r[i+1];r[i]=u+c,i===l-3&&(a[i+1]=a[i+2],r[i+1]=r[i+2]),l--;var d=ge(t[h],t,s,u,0,e);s+=d,0!==(u-=d)&&0!==(c=pe(t[s+u-1],t,h,c,c-1,e))&&(u=cn(s,u,h,c)o(s,u,h,c))}function n(i,n,o,a){var r=0;for(r=0;rn;r++)u[r]=t[i+r];var l=0,h=o,c=i;if(t[c++]=t[h++],0!=--a)if(1!==n){for(var d,f,p,g=s;;){d=0,f=0,p=!1;do{if(e(t[h],u[l])0){if(t[c++]=t[h++],f++,d=0,0==--a){p=!0;break}}else if(t[c++]=u[l++],d++,f=0,1==--n){p=!0;break}}while((df)g);if(p)break;do{if(0!==(d=ge(t[h],u,l,n,0,e))){for(r=0;rd;r++)t[c+r]=u[l+r];if(c+=d,l+=d,(n-=d)=1){p=!0;break}}if(t[c++]=t[h++],0==--a){p=!0;break}if(0!==(f=pe(u[l],t,h,a,0,e))){for(r=0;rf;r++)t[c+r]=t[h+r];if(c+=f,h+=f,0===(a-=f)){p=!0;break}}if(t[c++]=u[l++],1==--n){p=!0;break}g--}while(d=Xwf=Xw);if(p)break;g0&&(g=0),g+=2}if((s=g)1&&(s=1),1===n){for(r=0;ra;r++)t[c+r]=t[h+r];t[c+a]=u[l]}else{if(0===n)throw new Error;for(r=0;rn;r++)t[c+r]=u[l+r]}}else{for(r=0;ra;r++)t[c+r]=t[h+r];t[c+a]=u[l]}else for(r=0;rn;r++)t[c+r]=u[l+r]}function o(i,n,o,a){var r=0;for(r=0;ra;r++)u[r]=t[o+r];var l=i+n-1,h=a-1,c=o+a-1,d=0,f=0;if(t[c--]=t[l--],0!=--n)if(1!==a){for(var p=s;;){var g=0,m=0,v=!1;do{if(e(u[h],t[l])0){if(t[c--]=t[l--],g++,m=0,0==--n){v=!0;break}}else if(t[c--]=u[h--],m++,g=0,1==--a){v=!0;break}}while((gm)p);if(v)break;do{if(0!=(g=n-ge(u[h],t,i,n,n-1,e))){for(n-=g,f=(c-=g)+1,d=(l-=g)+1,r=g-1;r=0;r--)t[f+r]=t[d+r];if(0===n){v=!0;break}}if(t[c--]=u[h--],1==--a){v=!0;break}if(0!=(m=a-pe(t[l],u,0,a,a-1,e))){for(a-=m,f=(c-=m)+1,d=(h-=m)+1,r=0;rm;r++)t[f+r]=u[d+r];if(a=1){v=!0;break}}if(t[c--]=t[l--],0==--n){v=!0;break}p--}while(g=Xwm=Xw);if(v)break;p0&&(p=0),p+=2}if((s=p)1&&(s=1),1===a){for(f=(c-=n)+1,d=(l-=n)+1,r=n-1;r=0;r--)t[f+r]=t[d+r];t[c]=u[h]}else{if(0===a)throw new Error;for(d=c-(a-1),r=0;ra;r++)t[d+r]=u[r]}}else{for(f=(c-=n)+1,d=(l-=n)+1,r=n-1;r=0;r--)t[f+r]=t[d+r];t[c]=u[h]}else for(d=c-(a-1),r=0;ra;r++)t[d+r]=u[r]}var a,r,s=Xw,l=0,u=[];a=[],r=[],this.mergeRuns=function(){for(;l1;){var t=l-2;if(t=1&&r[t-1]=r[t]+r[t+1]t=2&&r[t-2]=r[t]+r[t-1])r[t-1]r[t+1]&&t--;else if(r[t]r[t+1])break;i(t)}},this.forceMergeRuns=function(){for(;l1;){var t=l-2;t0&&r[t-1]r[t+1]&&t--,i(t)}},this.pushRun=function(t,e){a[l]=t,r[l]=e,l+=1}}function ve(t,e,i,n){i(i=0),n(n=t.length);var o=n-i;if(!(o2)){var a=0;if(oUw)return a=ce(t,i,n,e),void fe(t,i,n,i+a,e);var r=new me(t,e),s=he(o);do{if((a=ce(t,i,n,e))s){var l=o;ls&&(l=s),fe(t,i,i+l,i+a,e),a=l}r.pushRun(i,a),r.mergeRuns(),o-=a,i+=a}while(0!==o);r.forceMergeRuns()}}function ye(t,e){return t.zlevel===e.zlevelt.z===e.zt.z2-e.z2t.z-e.zt.zlevel-e.zlevel}function xe(t,e,i){var n=null==e.x0e.x,o=null==e.x21e.x2,a=null==e.y0e.y,r=null==e.y20e.y2;return e.global(n=ni.width+i.x,o=oi.width+i.x,a=ai.height+i.y,r=ri.height+i.y),n=isNaN(n)0n,o=isNaN(o)1o,a=isNaN(a)0a,r=isNaN(r)0r,t.createLinearGradient(n,a,o,r)}function _e(t,e,i){var n=i.width,o=i.height,a=Math.min(n,o),r=null==e.x.5e.x,s=null==e.y.5e.y,l=null==e.r.5e.r;return e.global(r=rn+i.x,s=so+i.y,l=a),t.createRadialGradient(r,s,0,r,s,l)}function we(){return!1}function be(t,e,i){var n=Y_(),o=e.getWidth(),a=e.getHeight(),r=n.style;return r&&(r.position=absolute,r.left=0,r.top=0,r.width=o+px,r.height=a+px,n.setAttribute(data-zr-dom-id,t)),n.width=oi,n.height=ai,n}function Se(t){if(string==typeof t){var e=ob.get(t);return e&&e.image}return t}function Me(t,e,i,n,o){if(t){if(string==typeof t){if(e&&e.__zrImageSrc===t!i)return e;var a=ob.get(t),r={hostEli,cbn,cbPayloado};return a!Te(e=a.image)&&a.pending.push(r)(!e&&(e=new Image),e.onload=e.onerror=Ie,ob.put(t,e.__cachedImgObj={imagee,pending[r]}),e.src=e.__zrImageSrc=t),e}return t}return e}function Ie(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;et.pending.length;e++){var i=t.pending[e],n=i.cb;n&&n(this,i.cbPayload),i.hostEl.dirty()}t.pending.length=0}function Te(t){return t&&t.width&&t.height}function Ae(t,e){var i=t++(e=eub);if(ab[i])return ab[i];for(var n=(t+).split(n),o=0,a=0,r=n.length;ar;a++)o=Math.max(Ve(n[a],e).width,o);return rbsb&&(rb=0,ab={}),rb++,ab[i]=o,o}function De(t,e,i,n,o,a,r){return aLe(t,e,i,n,o,a,r)Ce(t,e,i,n,o,r)}function Ce(t,e,i,n,o,a){var r=Ge(t,e,o,a),s=Ae(t,e);o&&(s+=o[1]+o[3]);var l=r.outerHeight,u=new ue(ke(0,s,i),Pe(0,l,n),s,l);return u.lineHeight=r.lineHeight,u}function Le(t,e,i,n,o,a,r){var s=Fe(t,{richa,truncater,fonte,textAligni,textPaddingo}),l=s.outerWidth,u=s.outerHeight;return new ue(ke(0,l,i),Pe(0,u,n),l,u)}function ke(t,e,i){returnright===it-=ecenter===i&&(t-=e2),t}function Pe(t,e,i){returnmiddle===it-=e2bottom===i&&(t-=e),t}function Ne(t,e,i){var n=e.x,o=e.y,a=e.height,r=e.width,s=a2,l=left,u=top;switch(t){caseleftn-=i,o+=s,l=right,u=middle;break;caserightn+=i+r,o+=s,u=middle;break;casetopn+=r2,o-=i,l=center,u=bottom;break;casebottomn+=r2,o+=a+i,l=center;break;caseinsiden+=r2,o+=s,l=center,u=middle;break;caseinsideLeftn+=i,o+=s,u=middle;break;caseinsideRightn+=r-i,o+=s,l=right,u=middle;break;caseinsideTopn+=r2,o+=i,l=center;break;caseinsideBottomn+=r2,o+=a-i,l=center,u=bottom;break;caseinsideTopLeftn+=i,o+=i;break;caseinsideTopRightn+=r-i,o+=i,l=right;break;caseinsideBottomLeftn+=i,o+=a-i,u=bottom;break;caseinsideBottomRightn+=r-i,o+=a-i,l=right,u=bottom}return{xn,yo,textAlignl,textVerticalAlignu}}function Oe(t,e,i,n,o){if(!e)return;var a=(t+).split(n);o=Ee(e,i,n,o);for(var r=0,s=a.length;rs;r++)a[r]=Re(a[r],o);return a.join(n)}function Ee(t,e,i,n){(n=a({},n)).font=e;var i=A(i,...);n.maxIterations=A(n.maxIterations,2);var o=n.minChar=A(n.minChar,0);n.cnCharWidth=Ae(鍥�,e);var r=n.ascCharWidth=Ae(a,e);n.placeholder=A(n.placeholder,);for(var s=t=Math.max(0,t-1),l=0;lo&&s=r;l++)s-=r;var u=Ae(i);return us&&(i=,u=0),s=t-u,n.ellipsis=i,n.ellipsisWidth=u,n.contentWidth=s,n.containerWidth=t,n}function Re(t,e){var i=e.containerWidth,n=e.font,o=e.contentWidth;if(!i)return;var a=Ae(t,n);if(a=i)return t;for(var r=0;;r++){if(a=or=e.maxIterations){t+=e.ellipsis;break}var s=0===rze(t,o,e.ascCharWidth,e.cnCharWidth)a0Math.floor(t.lengthoa)0;a=Ae(t=t.substr(0,s),n)}return===t&&(t=e.placeholder),t}function ze(t,e,i,n){for(var o=0,a=0,r=t.length;ar&&oe;a++){var s=t.charCodeAt(a);o+=0=s&&s=127in}return a}function Be(t){return Ae(鍥�,t)}function Ve(t,e){return hb.measureText(t,e)}function Ge(t,e,i,n){null!=t&&(t+=);var o=Be(e),a=tt.split(n)[],r=a.lengtho,s=r;if(i&&(s+=i[0]+i[2]),t&&n){var l=n.outerHeight,u=n.outerWidth;if(null!=l&&sl)t=,a=[];else if(null!=u)for(var h=Ee(u-(ii[1]+i[3]0),e,n.ellipsis,{minCharn.minChar,placeholdern.placeholder}),c=0,d=a.length;cd;c++)a[c]=Re(a[c],h)}return{linesa,heightr,outerHeights,lineHeighto}}function Fe(t,e){var i={lines[],width0,height0};if(null!=t&&(t+=),!t)return i;for(var n,o=lb.lastIndex=0;null!=(n=lb.exec(t));){var a=n.index;ao&&We(i,t.substring(o,a)),We(i,n[2],n[1]),o=lb.lastIndex}ot.length&&We(i,t.substring(o,t.length));var r=i.lines,s=0,l=0,u=[],h=e.textPadding,c=e.truncate,d=c&&c.outerWidth,f=c&&c.outerHeight;h&&(null!=d&&(d-=h[1]+h[3]),null!=f&&(f-=h[0]+h[2]));for(L=0;Lr.length;L++){for(var p=r[L],g=0,m=0,v=0;vp.tokens.length;v++){var y=(k=p.tokens[v]).styleName&&e.rich[k.styleName]{},x=k.textPadding=y.textPadding,_=k.font=y.fonte.font,w=k.textHeight=A(y.textHeight,Be(_));if(x&&(w+=x[0]+x[2]),k.height=w,k.lineHeight=D(y.textLineHeight,e.textLineHeight,w),k.textAlign=y&&y.textAligne.textAlign,k.textVerticalAlign=y&&y.textVerticalAlignmiddle,null!=f&&s+k.lineHeightf)return{lines[],width0,height0};k.textWidth=Ae(k.text,_);var b=y.textWidth,S=null==bauto===b;if(string==typeof b&&%===b.charAt(b.length-1))k.percentWidth=b,u.push(k),b=0;else{if(S){b=k.textWidth;var M=y.textBackgroundColor,I=M&&M.image;I&&Te(I=Se(I))&&(b=Math.max(b,I.widthwI.height))}var T=xx[1]+x[3]0;b+=T;var C=null!=dd-mnull;null!=C&&Cb&&(!SCT(k.text=,k.textWidth=b=0)(k.text=Oe(k.text,C-T,_,c.ellipsis,{minCharc.minChar}),k.textWidth=Ae(k.text,_),b=k.textWidth+T))}m+=k.width=b,y&&(g=Math.max(g,k.lineHeight))}p.width=m,p.lineHeight=g,s+=g,l=Math.max(l,m)}i.outerWidth=i.width=A(e.textWidth,l),i.outerHeight=i.height=A(e.textHeight,s),h&&(i.outerWidth+=h[1]+h[3],i.outerHeight+=h[0]+h[2]);for(var L=0;Lu.length;L++){var k=u[L],P=k.percentWidth;k.width=parseInt(P,10)100l}return i}function We(t,e,i){for(var n====e,o=e.split(n),a=t.lines,r=0;ro.length;r++){var s=o[r],l={styleNamei,texts,isLineHolder!s&&!n};if(r)a.push({tokens[l]});else{var u=(a[a.length-1](a[0]={tokens[]})).tokens,h=u.length;1===h&&u[0].isLineHolderu[0]=l(s!hn)&&u.push(l)}}}function He(t){var e=(t.fontSizet.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize12)+px,t.fontFamilysans-serif].join( );return e&&P(e)t.textFontt.font}function Ze(t,e){var i,n,o,a,r=e.x,s=e.y,l=e.width,u=e.height,h=e.r;l0&&(r+=l,l=-l),u0&&(s+=u,u=-u),number==typeof hi=n=o=a=hh instanceof Array1===h.lengthi=n=o=a=h[0]2===h.length(i=o=h[0],n=a=h[1])3===h.length(i=h[0],n=a=h[1],o=h[2])(i=h[0],n=h[1],o=h[2],a=h[3])i=n=o=a=0;var c;i+nl&&(i=l(c=i+n),n=lc),o+al&&(o=l(c=o+a),a=lc),n+ou&&(n=u(c=n+o),o=uc),i+au&&(i=u(c=i+a),a=uc),t.moveTo(r+i,s),t.lineTo(r+l-n,s),0!==n&&t.arc(r+l-n,s+n,n,-Math.PI2,0),t.lineTo(r+l,s+u-o),0!==o&&t.arc(r+l-o,s+u-o,o,0,Math.PI2),t.lineTo(r+a,s+u),0!==a&&t.arc(r+a,s+u-a,a,Math.PI2,Math.PI),t.lineTo(r,s+i),0!==i&&t.arc(r+i,s+i,i,Math.PI,1.5Math.PI)}function Ue(t){return Xe(t),d(t.rich,Xe),t}function Xe(t){if(t){t.font=He(t);var e=t.textAlign;middle===e&&(e=center),t.textAlign=null==ecb[e]eleft;var i=t.textVerticalAlignt.textBaseline;center===i&&(i=middle),t.textVerticalAlign=null==idb[i]itop,t.textPadding&&(t.textPadding=L(t.textPadding))}}function je(t,e,i,n,o,a){n.richqe(t,e,i,n,o)Ye(t,e,i,n,o,a)}function Ye(t,e,i,n,o,a){var r=a&&a.style,s=r&&text===a.type,l=n.fontub;s&&l===(r.fontub)(e.font=l);var u=t.__computedFont;t.__styleFont!==l&&(t.__styleFont=l,u=t.__computedFont=e.font);var h=n.textPadding,c=t.__textCotentBlock;c&&!t.__dirtyText(c=t.__textCotentBlock=Ge(i,u,h,n.truncate));var d=c.outerHeight,f=c.lines,p=c.lineHeight,g=ii(d,n,o),m=g.baseX,v=g.baseY,y=g.textAlignleft,x=g.textVerticalAlign;$e(e,n,o,m,v);var _=Pe(v,d,x),w=m,b=_,S=Qe(n);if(Sh){var M=Ae(i,u);h&&(M+=h[1]+h[3]);var I=ke(m,M,y);S&&ti(t,e,n,I,_,M,d),h&&(w=si(m,y,h),b+=h[0])}e.textAlign=y,e.textBaseline=middle;for(R=0;Rfb.length;R++){var T=fb[R],A=T[0],D=T[1],C=n[A];s&&C===r[A](e[D]=qw(e,D,CT[2]))}b+=p2;var L=n.textStrokeWidth,k=sr.textStrokeWidthnull,P=!sL!==k,N=!sPn.textStroke!==r.textStroke,O=oi(n.textStroke,L),E=ai(n.textFill);if(O&&(P&&(e.lineWidth=L),N&&(e.strokeStyle=O)),E&&(s&&n.textFill===r.textFill&&!r.textBackgroundColor(e.fillStyle=E)),1===f.length)O&&e.strokeText(f[0],w,b),E&&e.fillText(f[0],w,b);else for(var R=0;Rf.length;R++)O&&e.strokeText(f[R],w,b),E&&e.fillText(f[R],w,b),b+=p}function qe(t,e,i,n,o){var a=t.__textCotentBlock;a&&!t.__dirtyText(a=t.__textCotentBlock=Fe(i,n)),Ke(t,e,a,n,o)}function Ke(t,e,i,n,o){var a=i.width,r=i.outerWidth,s=i.outerHeight,l=n.textPadding,u=ii(s,n,o),h=u.baseX,c=u.baseY,d=u.textAlign,f=u.textVerticalAlign;$e(e,n,o,h,c);var p=ke(h,r,d),g=Pe(c,s,f),m=p,v=g;l&&(m+=l[3],v+=l[0]);var y=m+a;Qe(n)&&ti(t,e,n,p,g,r,s);for(var x=0;xi.lines.length;x++){for(var _,w=i.lines[x],b=w.tokens,S=b.length,M=w.lineHeight,I=w.width,T=0,A=m,D=y,C=S-1;TS&&(!(_=b[T]).textAlignleft===_.textAlign);)Je(t,e,_,n,M,v,A,left),I-=_.width,A+=_.width,T++;for(;C=0&&right===(_=b[C]).textAlign;)Je(t,e,_,n,M,v,D,right),I-=_.width,D-=_.width,C--;for(A+=(a-(A-m)-(y-D)-I)2;T=C;)Je(t,e,_=b[T],n,M,v,A+_.width2,center),A+=_.width,T++;v+=M}}function $e(t,e,i,n,o){if(i&&e.textRotation){var a=e.textOrigin;center===a(n=i.width2+i.x,o=i.height2+i.y)a&&(n=a[0]+i.x,o=a[1]+i.y),t.translate(n,o),t.rotate(-e.textRotation),t.translate(-n,-o)}}function Je(t,e,i,n,o,a,r,s){var l=n.rich[i.styleName]{};l.text=i.text;var u=i.textVerticalAlign,h=a+o2;top===uh=a+i.height2bottom===u&&(h=a+o-i.height2),!i.isLineHolder&&Qe(l)&&ti(t,e,l,right===sr-i.widthcenter===sr-i.width2r,h-i.height2,i.width,i.height);var c=i.textPadding;c&&(r=si(r,s,c),h-=i.height2-c[2]-i.textHeight2),ni(e,shadowBlur,D(l.textShadowBlur,n.textShadowBlur,0)),ni(e,shadowColor,l.textShadowColorn.textShadowColortransparent),ni(e,shadowOffsetX,D(l.textShadowOffsetX,n.textShadowOffsetX,0)),ni(e,shadowOffsetY,D(l.textShadowOffsetY,n.textShadowOffsetY,0)),ni(e,textAlign,s),ni(e,textBaseline,middle),ni(e,font,i.fontub);var d=oi(l.textStroken.textStroke,p),f=ai(l.textFilln.textFill),p=A(l.textStrokeWidth,n.textStrokeWidth);d&&(ni(e,lineWidth,p),ni(e,strokeStyle,d),e.strokeText(i.text,r,h)),f&&(ni(e,fillStyle,f),e.fillText(i.text,r,h))}function Qe(t){return t.textBackgroundColort.textBorderWidth&&t.textBorderColor}function ti(t,e,i,n,o,a,r){var s=i.textBackgroundColor,l=i.textBorderWidth,u=i.textBorderColor,h=_(s);if(ni(e,shadowBlur,i.textBoxShadowBlur0),ni(e,shadowColor,i.textBoxShadowColortransparent),ni(e,shadowOffsetX,i.textBoxShadowOffsetX0),ni(e,shadowOffsetY,i.textBoxShadowOffsetY0),hl&&u){e.beginPath();var c=i.textBorderRadius;cZe(e,{xn,yo,widtha,heightr,rc})e.rect(n,o,a,r),e.closePath()}if(h)if(ni(e,fillStyle,s),null!=i.fillOpacity){f=e.globalAlpha;e.globalAlpha=i.fillOpacityi.opacity,e.fill(),e.globalAlpha=f}else e.fill();else if(x(s))ni(e,fillStyle,s(i)),e.fill();else if(w(s)){var d=s.image;(d=Me(d,null,t,ei,s))&&Te(d)&&e.drawImage(d,n,o,a,r)}if(l&&u)if(ni(e,lineWidth,l),ni(e,strokeStyle,u),null!=i.strokeOpacity){var f=e.globalAlpha;e.globalAlpha=i.strokeOpacityi.opacity,e.stroke(),e.globalAlpha=f}else e.stroke()}function ei(t,e){e.image=t}function ii(t,e,i){var n=e.x0,o=e.y0,a=e.textAlign,r=e.textVerticalAlign;if(i){var s=e.textPosition;if(s instanceof Array)n=i.x+ri(s[0],i.width),o=i.y+ri(s[1],i.height);else{var l=Ne(s,i,e.textDistance);n=l.x,o=l.y,a=al.textAlign,r=rl.textVerticalAlign}var u=e.textOffset;u&&(n+=u[0],o+=u[1])}return{baseXn,baseYo,textAligna,textVerticalAlignr}}function ni(t,e,i){return t[e]=qw(t,e,i),t[e]}function oi(t,e){return null==te=0transparent===tnone===tnullt.imaget.colorStops#000t}function ai(t){return null==tnone===tnullt.imaget.colorStops#000t}function ri(t,e){returnstring==typeof tt.lastIndexOf(%)=0parseFloat(t)100eparseFloat(t)t}function si(t,e,i){returnright===et-i[1]center===et+i[3]2-i[1]2t+i[3]}function li(t,e){return null!=t&&(te.textBackgroundColore.textBorderWidth&&e.textBorderColore.textPadding)}function ui(t){t=t{},Gw.call(this,t);for(var e in t)t.hasOwnProperty(e)&&style!==e&&(this[e]=t[e]);this.style=new $w(t.style,this),this._rect=null,this.__clipPaths=[]}function hi(t){ui.call(this,t)}function ci(t){return parseInt(t,10)}function di(t){return!!t&&(!!t.__builtin__function==typeof t.resize&&function==typeof t.refresh)}function fi(t,e,i){return mb.copy(t.getBoundingRect()),t.transform&&mb.applyTransform(t.transform),vb.width=e,vb.height=i,!mb.intersect(vb)}function pi(t,e){if(t==e)return!1;if(!t!et.length!==e.length)return!0;for(var i=0;it.length;i++)if(t[i]!==e[i])return!0}function gi(t,e){for(var i=0;it.length;i++){var n=t[i];n.setTransform(e),e.beginPath(),n.buildPath(e,n.shape),e.clip(),n.restoreTransform(e)}}function mi(t,e){var i=document.createElement(div);return i.style.cssText=[positionrelative,overflowhidden,width+t+px,height+e+px,padding0,margin0,border-width0].join(;)+;,i}function vi(t){var e=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return Math.sqrt(ee+ii)}function yi(t){return[(t[0][0]+t[1][0])2,(t[0][1]+t[1][1])2]}function xi(t){returnmousewheel===t&&z_.browser.firefoxDOMMouseScrollt}function _i(t,e,i){var n=t._gestureMgr;start===i&&n.clear();var o=n.recognize(e,t.handler.findHover(e.zrX,e.zrY,null).target,t.dom);if(end===i&&n.clear(),o){var a=o.type;e.gestureEvent=a,t.handler.dispatchToElement({targeto.target},a,o.event)}}function wi(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}function bi(t){var e=t.pointerType;returnpen===etouch===e}function Si(t){function e(t,e){return function(){if(!e._touching)return t.apply(e,arguments)}}d(Sb,function(e){t._handlers[e]=m(Tb[e],t)}),d(Ib,function(e){t._handlers[e]=m(Tb[e],t)}),d(bb,function(i){t._handlers[i]=e(Tb[i],t)})}function Mi(t){function e(e,i){d(e,function(e){ut(t,xi(e),i._handlers[e])},i)}aw.call(this),this.dom=t,this._touching=!1,this._touchTimer,this._gestureMgr=new _b,this._handlers={},Si(this),z_.pointerEventsSupportede(Ib,this)(z_.touchEventsSupported&&e(Sb,this),e(bb,this))}function Ii(t,e){var i=new kb(E_(),t,e);return Lb[i.id]=i,i}function Ti(t,e){Cb[t]=e}function Ai(t){delete Lb[t]}function Di(t){return t instanceof Arraytnull==t[][t]}function Ci(t,e,i){if(t){t[e]=t[e]{},t.emphasis=t.emphasis{},t.emphasis[e]=t.emphasis[e]{};for(var n=0,o=i.length;no;n++){var a=i[n];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}}function Li(t){return!Ob(t)Eb(t)t instanceof Datett.value}function ki(t){return Ob(t)&&!(t instanceof Array)}function Pi(t,e){e=(e[]).slice();var i=f(t[],function(t,e){return{existt}});return Nb(e,function(t,n){if(Ob(t)){for(o=0;oi.length;o++)if(!i[o].option&&null!=t.id&&i[o].exist.id===t.id+)return i[o].option=t,void(e[n]=null);for(var o=0;oi.length;o++){var a=i[o].exist;if(!(i[o].optionnull!=a.id&&null!=t.idnull==t.nameEi(t)Ei(a)a.name!==t.name+))return i[o].option=t,void(e[n]=null)}}}),Nb(e,function(t,e){if(Ob(t)){for(var n=0;ni.length;n++){var o=i[n].exist;if(!i[n].option&&!Ei(o)&&null==t.id){i[n].option=t;break}}n=i.length&&i.push({optiont})}}),i}function Ni(t){var e=R();Nb(t,function(t,i){var n=t.exist;n&&e.set(n.id,t)}),Nb(t,function(t,i){var n=t.option;k(!nnull==n.id!e.get(n.id)e.get(n.id)===t,id duplicates +(n&&n.id)),n&&null!=n.id&&e.set(n.id,t),!t.keyInfo&&(t.keyInfo={})}),Nb(t,function(t,i){var n=t.exist,o=t.option,a=t.keyInfo;if(Ob(o)){if(a.name=null!=o.nameo.name+nn.nameRb+i,n)a.id=n.id;else if(null!=o.id)a.id=o.id+;else{var r=0;do{a.id=0+a.name+0+r++}while(e.get(a.id))}e.set(a.id,t)}})}function Oi(t){var e=t.name;return!(!e!e.indexOf(Rb))}function Ei(t){return Ob(t)&&t.id&&0===(t.id+).indexOf(0_ec_0)}function Ri(t,e){function i(t,e,i){for(var n=0,o=t.length;no;n++)for(var a=t[n].seriesId,r=Di(t[n].dataIndex),s=i&&i[a],l=0,u=r.length;lu;l++){var h=r[l];s&&s[h]s[h]=null(e[a](e[a]={}))[h]=1}}function n(t,e){var i=[];for(var o in t)if(t.hasOwnProperty(o)&&null!=t[o])if(e)i.push(+o);else{var a=n(t[o],!0);a.length&&i.push({seriesIdo,dataIndexa})}return i}var o={},a={};return i(t[],o),i(e[],a,o),[n(o),n(a)]}function zi(t,e){return null!=e.dataIndexInsidee.dataIndexInsidenull!=e.dataIndexy(e.dataIndex)f(e.dataIndex,function(e){return t.indexOfRawIndex(e)})t.indexOfRawIndex(e.dataIndex)null!=e.namey(e.name)f(e.name,function(e){return t.indexOfName(e)})t.indexOfName(e.name)void 0}function Bi(){var t=__0ec_inner_+Bb+++_+Math.random().toFixed(5);return function(e){return e[t](e[t]={})}}function Vi(t,e,i){if(_(e)){var n={};n[e+Index]=0,e=n}var o=i&&i.defaultMainType;!oGi(e,o+Index)Gi(e,o+Id)Gi(e,o+Name)(e[o+Index]=0);var a={};return Nb(e,function(n,o){var n=e[o];if(dataIndex!==o&&dataIndexInside!==o){var r=o.match(^(w+)(IndexIdName)$)[],s=r[1],u=(r[2]).toLowerCase();if(!(!s!unull==nindex===u&&none===ni&&i.includeMainTypes&&l(i.includeMainTypes,s)0)){var h={mainTypes};index===u&&all===n(h[u]=n);var c=t.queryComponents(h);a[s+Models]=c,a[s+Model]=c[0]}}else a[o]=n}),a}function Gi(t,e){return t&&t.hasOwnProperty(e)}function Fi(t,e,i){t.setAttributet.setAttribute(e,i)t[e]=i}function Wi(t,e){return t.getAttributet.getAttribute(e)t[e]}function Hi(t){returnauto===tz_.domSupportedhtmlrichTextthtml}function Zi(t){var e={main,sub};return t&&(t=t.split(Vb),e.main=t[0],e.sub=t[1]),e}function Ui(t){k(^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)$.test(t),'componentType '+t+' illegal')}function Xi(t,e){t.$constructor=t,t.extend=function(t){var e=this,i=function(){t.$constructort.$constructor.apply(this,arguments)e.apply(this,arguments)};return a(i.prototype,t),i.extend=this.extend,i.superCall=Yi,i.superApply=qi,u(i,this),i.superClass=e,i}}function ji(t){var e=[__0is_clz,Fb++,Math.random().toFixed(3)].join(_);t.prototype[e]=!0,t.isInstance=function(t){return!(!t!t[e])}}function Yi(t,e){var i=C(arguments,2);return this.superClass.prototype[e].apply(t,i)}function qi(t,e,i){return this.superClass.prototype[e].apply(t,i)}function Ki(t,e){function i(t){var e=n[t.main];return e&&e[Gb]((e=n[t.main]={})[Gb]=!0),e}e=e{};var n={};if(t.registerClass=function(t,e){return e&&(Ui(e),(e=Zi(e)).sube.sub!==Gb&&(i(e)[e.sub]=t)n[e.main]=t),t},t.getClass=function(t,e,i){var o=n[t];if(o&&o[Gb]&&(o=eo[e]null),i&&!o)throw new Error(eComponent +t+.+(e)+ not exists. Load it first.t+.type should be specified.);return o},t.getClassesByMainType=function(t){t=Zi(t);var e=[],i=n[t.main];return i&&i[Gb]d(i,function(t,i){i!==Gb&&e.push(t)})e.push(i),e},t.hasClass=function(t){return t=Zi(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return d(n,function(e,i){t.push(i)}),t},t.hasSubTypes=function(t){t=Zi(t);var e=n[t.main];return e&&e[Gb]},t.parseClassType=Zi,e.registerWhenExtend){var o=t.extend;o&&(t.extend=function(e){var i=o.call(this,e);return t.registerClass(i,e.type)})}return t}function $i(t){return t-qb&&tqb}function Ji(t){return tqbt-qb}function Qi(t,e,i,n,o){var a=1-o;return aa(at+3oe)+oo(on+3ai)}function tn(t,e,i,n,o){var a=1-o;return 3(((e-t)a+2(i-e)o)a+(n-i)oo)}function en(t,e,i,n,o,a){var r=n+3(e-i)-t,s=3(i-2e+t),l=3(e-t),u=t-o,h=ss-3rl,c=sl-9ru,d=ll-3su,f=0;if($i(h)&&$i(c))$i(s)a[0]=0(M=-ls)=0&&M=1&&(a[f++]=M);else{var p=cc-4hd;if($i(p)){var g=ch,m=-g2;(M=-sr+g)=0&&M=1&&(a[f++]=M),m=0&&m=1&&(a[f++]=m)}else if(p0){var v=Yb(p),y=hs+1.5r(-c+v),x=hs+1.5r(-c-v);(M=(-s-((y=y0-jb(-y,Jb)jb(y,Jb))+(x=x0-jb(-x,Jb)jb(x,Jb))))(3r))=0&&M=1&&(a[f++]=M)}else{var _=(2hs-3rc)(2Yb(hhh)),w=Math.acos(_)3,b=Yb(h),S=Math.cos(w),M=(-s-2bS)(3r),m=(-s+b(S+$bMath.sin(w)))(3r),I=(-s+b(S-$bMath.sin(w)))(3r);M=0&&M=1&&(a[f++]=M),m=0&&m=1&&(a[f++]=m),I=0&&I=1&&(a[f++]=I)}}return f}function nn(t,e,i,n,o){var a=6i-12e+6t,r=9e+3n-3t-9i,s=3e-3t,l=0;if($i(r))Ji(a)&&(c=-sa)=0&&c=1&&(o[l++]=c);else{var u=aa-4rs;if($i(u))o[0]=-a(2r);else if(u0){var h=Yb(u),c=(-a+h)(2r),d=(-a-h)(2r);c=0&&c=1&&(o[l++]=c),d=0&&d=1&&(o[l++]=d)}}return l}function on(t,e,i,n,o,a){var r=(e-t)o+t,s=(i-e)o+e,l=(n-i)o+i,u=(s-r)o+r,h=(l-s)o+s,c=(h-u)o+u;a[0]=t,a[1]=r,a[2]=u,a[3]=c,a[4]=c,a[5]=h,a[6]=l,a[7]=n}function an(t,e,i,n,o,a,r,s,l,u,h){var c,d,f,p,g,m=.005,v=10;Qb[0]=l,Qb[1]=u;for(var y=0;y1;y+=.05)tS[0]=Qi(t,i,o,r,y),tS[1]=Qi(e,n,a,s,y),(p=iw(Qb,tS))v&&(c=y,v=p);v=10;for(var x=0;x32&&!(mKb);x++)d=c-m,f=c+m,tS[0]=Qi(t,i,o,r,d),tS[1]=Qi(e,n,a,s,d),p=iw(tS,Qb),d=0&&pv(c=d,v=p)(eS[0]=Qi(t,i,o,r,f),eS[1]=Qi(e,n,a,s,f),g=iw(eS,Qb),f=1&&gv(c=f,v=g)m=.5);return h&&(h[0]=Qi(t,i,o,r,c),h[1]=Qi(e,n,a,s,c)),Yb(v)}function rn(t,e,i,n){var o=1-n;return o(ot+2ne)+nni}function sn(t,e,i,n){return 2((1-n)(e-t)+n(i-e))}function ln(t,e,i,n,o){var a=t-2e+i,r=2(e-t),s=t-n,l=0;if($i(a))Ji(r)&&(c=-sr)=0&&c=1&&(o[l++]=c);else{var u=rr-4as;if($i(u))(c=-r(2a))=0&&c=1&&(o[l++]=c);else if(u0){var h=Yb(u),c=(-r+h)(2a),d=(-r-h)(2a);c=0&&c=1&&(o[l++]=c),d=0&&d=1&&(o[l++]=d)}}return l}function un(t,e,i){var n=t+i-2e;return 0===n.5(t-e)n}function hn(t,e,i,n,o){var a=(e-t)n+t,r=(i-e)n+e,s=(r-a)n+a;o[0]=t,o[1]=a,o[2]=s,o[3]=s,o[4]=r,o[5]=i}function cn(t,e,i,n,o,a,r,s,l){var u,h=.005,c=10;Qb[0]=r,Qb[1]=s;for(var d=0;d1;d+=.05)tS[0]=rn(t,i,o,d),tS[1]=rn(e,n,a,d),(m=iw(Qb,tS))c&&(u=d,c=m);c=10;for(var f=0;f32&&!(hKb);f++){var p=u-h,g=u+h;tS[0]=rn(t,i,o,p),tS[1]=rn(e,n,a,p);var m=iw(tS,Qb);if(p=0&&mc)u=p,c=m;else{eS[0]=rn(t,i,o,g),eS[1]=rn(e,n,a,g);var v=iw(eS,Qb);g=1&&vc(u=g,c=v)h=.5}}return l&&(l[0]=rn(t,i,o,u),l[1]=rn(e,n,a,u)),Yb(c)}function dn(t,e,i){if(0!==t.length){var n,o=t[0],a=o[0],r=o[0],s=o[1],l=o[1];for(n=1;nt.length;n++)o=t[n],a=iS(a,o[0]),r=nS(r,o[0]),s=iS(s,o[1]),l=nS(l,o[1]);e[0]=a,e[1]=s,i[0]=r,i[1]=l}}function fn(t,e,i,n,o,a){o[0]=iS(t,i),o[1]=iS(e,n),a[0]=nS(t,i),a[1]=nS(e,n)}function pn(t,e,i,n,o,a,r,s,l,u){var h,c=nn,d=Qi,f=c(t,i,o,r,hS);for(l[0]=10,l[1]=10,u[0]=-10,u[1]=-10,h=0;hf;h++){var p=d(t,i,o,r,hS[h]);l[0]=iS(p,l[0]),u[0]=nS(p,u[0])}for(f=c(e,n,a,s,cS),h=0;hf;h++){var g=d(e,n,a,s,cS[h]);l[1]=iS(g,l[1]),u[1]=nS(g,u[1])}l[0]=iS(t,l[0]),u[0]=nS(t,u[0]),l[0]=iS(r,l[0]),u[0]=nS(r,u[0]),l[1]=iS(e,l[1]),u[1]=nS(e,u[1]),l[1]=iS(s,l[1]),u[1]=nS(s,u[1])}function gn(t,e,i,n,o,a,r,s){var l=un,u=rn,h=nS(iS(l(t,i,o),1),0),c=nS(iS(l(e,n,a),1),0),d=u(t,i,o,h),f=u(e,n,a,c);r[0]=iS(t,o,d),r[1]=iS(e,a,f),s[0]=nS(t,o,d),s[1]=nS(e,a,f)}function mn(t,e,i,n,o,a,r,s,l){var u=tt,h=et,c=Math.abs(o-a);if(c%rS1e-4&&c1e-4)return s[0]=t-i,s[1]=e-n,l[0]=t+i,void(l[1]=e+n);if(sS[0]=aS(o)i+t,sS[1]=oS(o)n+e,lS[0]=aS(a)i+t,lS[1]=oS(a)n+e,u(s,sS,lS),h(l,sS,lS),(o%=rS)0&&(o+=rS),(a%=rS)0&&(a+=rS),oa&&!ra+=rSoa&&r&&(o+=rS),r){var d=a;a=o,o=d}for(var f=0;fa;f+=Math.PI2)fo&&(uS[0]=aS(f)i+t,uS[1]=oS(f)n+e,u(s,uS,s),h(l,uS,l))}function vn(t,e,i,n,o,a,r){if(0===o)return!1;var s=o,l=0,u=t;if(re+s&&rn+sre-s&&rn-sat+s&&ai+sat-s&&ai-s)return!1;if(t===i)return Math.abs(a-t)=s2;var h=(l=(e-n)(t-i))a-r+(u=(tn-ie)(t-i));return hh(ll+1)=s2s2}function yn(t,e,i,n,o,a,r,s,l,u,h){if(0===l)return!1;var c=l;return!(he+c&&hn+c&&ha+c&&hs+che-c&&hn-c&&ha-c&&hs-cut+c&&ui+c&&uo+c&&ur+cut-c&&ui-c&&uo-c&&ur-c)&&an(t,e,i,n,o,a,r,s,u,h,null)=c2}function xn(t,e,i,n,o,a,r,s,l){if(0===r)return!1;var u=r;return!(le+u&&ln+u&&la+ule-u&&ln-u&&la-ust+u&&si+u&&so+ust-u&&si-u&&so-u)&&cn(t,e,i,n,o,a,s,l,null)=u2}function _n(t){return(t%=IS)0&&(t+=IS),t}function wn(t,e,i,n,o,a,r,s,l){if(0===r)return!1;var u=r;s-=t,l-=e;var h=Math.sqrt(ss+ll);if(h-uih+ui)return!1;if(Math.abs(n-o)%TS1e-4)return!0;if(a){var c=n;n=_n(o),o=_n(c)}else n=_n(n),o=_n(o);no&&(o+=TS);var d=Math.atan2(l,s);return d0&&(d+=TS),d=n&&d=od+TS=n&&d+TS=o}function bn(t,e,i,n,o,a){if(ae&&anae&&an)return 0;if(n===e)return 0;var r=ne1-1,s=(a-e)(n-e);1!==s&&0!==s(r=ne.5-.5);var l=s(i-t)+t;return l===o10lor0}function Sn(t,e){return Math.abs(t-e)CS}function Mn(){var t=kS[0];kS[0]=kS[1],kS[1]=t}function In(t,e,i,n,o,a,r,s,l,u){if(ue&&un&&ua&&usue&&un&&ua&&us)return 0;var h=en(e,n,a,s,u,LS);if(0===h)return 0;for(var c,d,f=0,p=-1,g=0;gh;g++){var m=LS[g],v=0===m1===m.51;Qi(t,i,o,r,m)l(p0&&(p=nn(e,n,a,s,kS),kS[1]kS[0]&&p1&&Mn(),c=Qi(e,n,a,s,kS[0]),p1&&(d=Qi(e,n,a,s,kS[1]))),2==pmkS[0]f+=cev-vmkS[1]f+=dcv-vf+=sdv-vmkS[0]f+=cev-vf+=scv-v)}return f}function Tn(t,e,i,n,o,a,r,s){if(se&&sn&&sase&&sn&&sa)return 0;var l=ln(e,n,a,s,LS);if(0===l)return 0;var u=un(e,n,a);if(u=0&&u=1){for(var h=0,c=rn(e,n,a,u),d=0;dl;d++){f=0===LS[d]1===LS[d].51;(p=rn(t,i,o,LS[d]))r(LS[d]uh+=cef-fh+=acf-f)}return h}var f=0===LS[0]1===LS[0].51,p=rn(t,i,o,LS[0]);return pr0aef-f}function An(t,e,i,n,o,a,r,s){if((s-=e)is-i)return 0;u=Math.sqrt(ii-ss);LS[0]=-u,LS[1]=u;var l=Math.abs(n-o);if(l1e-4)return 0;if(l%DS1e-4){n=0,o=DS;p=a1-1;return r=LS[0]+t&&r=LS[1]+tp0}if(a){var u=n;n=_n(o),o=_n(u)}else n=_n(n),o=_n(o);no&&(o+=DS);for(var h=0,c=0;c2;c++){var d=LS[c];if(d+tr){var f=Math.atan2(s,d),p=a1-1;f0&&(f=DS+f),(f=n&&f=of+DS=n&&f+DS=o)&&(fMath.PI2&&f1.5Math.PI&&(p=-p),h+=p)}}return h}function Dn(t,e,i,n,o){for(var a=0,r=0,s=0,l=0,u=0,h=0;ht.length;){var c=t[h++];switch(c===AS.M&&h1&&(i(a+=bn(r,s,l,u,n,o))),1==h&&(l=r=t[h],u=s=t[h+1]),c){case AS.Mr=l=t[h++],s=u=t[h++];break;case AS.Lif(i){if(vn(r,s,t[h],t[h+1],e,n,o))return!0}else a+=bn(r,s,t[h],t[h+1],n,o)0;r=t[h++],s=t[h++];break;case AS.Cif(i){if(yn(r,s,t[h++],t[h++],t[h++],t[h++],t[h],t[h+1],e,n,o))return!0}else a+=In(r,s,t[h++],t[h++],t[h++],t[h++],t[h],t[h+1],n,o)0;r=t[h++],s=t[h++];break;case AS.Qif(i){if(xn(r,s,t[h++],t[h++],t[h],t[h+1],e,n,o))return!0}else a+=Tn(r,s,t[h++],t[h++],t[h],t[h+1],n,o)0;r=t[h++],s=t[h++];break;case AS.Avar d=t[h++],f=t[h++],p=t[h++],g=t[h++],m=t[h++],v=t[h++],y=(t[h++],1-t[h++]),x=Math.cos(m)p+d,_=Math.sin(m)g+f;h1a+=bn(r,s,x,_,n,o)(l=x,u=_);var w=(n-d)gp+d;if(i){if(wn(d,f,g,m,m+v,y,e,w,o))return!0}else a+=An(d,f,g,m,m+v,y,w,o);r=Math.cos(m+v)p+d,s=Math.sin(m+v)g+f;break;case AS.Rl=r=t[h++],u=s=t[h++];var x=l+t[h++],_=u+t[h++];if(i){if(vn(l,u,x,u,e,n,o)vn(x,u,x,_,e,n,o)vn(x,_,l,_,e,n,o)vn(l,_,l,u,e,n,o))return!0}else a+=bn(x,u,x,_,n,o),a+=bn(l,_,l,u,n,o);break;case AS.Zif(i){if(vn(r,s,l,u,e,n,o))return!0}else a+=bn(r,s,l,u,n,o);r=l,s=u}}return iSn(s,u)(a+=bn(r,s,l,u,n,o)0),0!==a}function Cn(t,e,i){return Dn(t,0,!1,e,i)}function Ln(t,e,i,n){return Dn(t,e,!0,i,n)}function kn(t){ui.call(this,t),this.path=null}function Pn(t,e,i,n,o,a,r,s,l,u,h){var c=l(HS180),d=WS(c)(t-i)2+FS(c)(e-n)2,f=-1FS(c)(t-i)2+WS(c)(e-n)2,p=dd(rr)+ff(ss);p1&&(r=GS(p),s=GS(p));var g=(o===a-11)GS((rr(ss)-rr(ff)-ss(dd))(rr(ff)+ss(dd)))0,m=grfs,v=g-sdr,y=(t+i)2+WS(c)m-FS(c)v,x=(e+n)2+FS(c)m+WS(c)v,_=XS([1,0],[(d-m)r,(f-v)s]),w=[(d-m)r,(f-v)s],b=[(-1d-m)r,(-1f-v)s],S=XS(w,b);US(w,b)=-1&&(S=HS),US(w,b)=1&&(S=0),0===a&&S0&&(S-=2HS),1===a&&S0&&(S+=2HS),h.addData(u,y,x,r,s,_,S,c,a)}function Nn(t){if(!t)return new MS;for(var e,i=0,n=0,o=i,a=n,r=new MS,s=MS.CMD,l=t.match(jS),u=0;ul.length;u++){for(var h,c=l[u],d=c.charAt(0),f=c.match(YS)[],p=f.length,g=0;gp;g++)f[g]=parseFloat(f[g]);for(var m=0;mp;){var v,y,x,_,w,b,S,M=i,I=n;switch(d){caseli+=f[m++],n+=f[m++],h=s.L,r.addData(h,i,n);break;caseLi=f[m++],n=f[m++],h=s.L,r.addData(h,i,n);break;casemi+=f[m++],n+=f[m++],h=s.M,r.addData(h,i,n),o=i,a=n,d=l;break;caseMi=f[m++],n=f[m++],h=s.M,r.addData(h,i,n),o=i,a=n,d=L;break;casehi+=f[m++],h=s.L,r.addData(h,i,n);break;caseHi=f[m++],h=s.L,r.addData(h,i,n);break;casevn+=f[m++],h=s.L,r.addData(h,i,n);break;caseVn=f[m++],h=s.L,r.addData(h,i,n);break;caseCh=s.C,r.addData(h,f[m++],f[m++],f[m++],f[m++],f[m++],f[m++]),i=f[m-2],n=f[m-1];break;casech=s.C,r.addData(h,f[m++]+i,f[m++]+n,f[m++]+i,f[m++]+n,f[m++]+i,f[m++]+n),i+=f[m-2],n+=f[m-1];break;caseSv=i,y=n;var T=r.len(),A=r.data;e===s.C&&(v+=i-A[T-4],y+=n-A[T-3]),h=s.C,M=f[m++],I=f[m++],i=f[m++],n=f[m++],r.addData(h,v,y,M,I,i,n);break;casesv=i,y=n;var T=r.len(),A=r.data;e===s.C&&(v+=i-A[T-4],y+=n-A[T-3]),h=s.C,M=i+f[m++],I=n+f[m++],i+=f[m++],n+=f[m++],r.addData(h,v,y,M,I,i,n);break;caseQM=f[m++],I=f[m++],i=f[m++],n=f[m++],h=s.Q,r.addData(h,M,I,i,n);break;caseqM=f[m++]+i,I=f[m++]+n,i+=f[m++],n+=f[m++],h=s.Q,r.addData(h,M,I,i,n);break;caseTv=i,y=n;var T=r.len(),A=r.data;e===s.Q&&(v+=i-A[T-4],y+=n-A[T-3]),i=f[m++],n=f[m++],h=s.Q,r.addData(h,v,y,i,n);break;casetv=i,y=n;var T=r.len(),A=r.data;e===s.Q&&(v+=i-A[T-4],y+=n-A[T-3]),i+=f[m++],n+=f[m++],h=s.Q,r.addData(h,v,y,i,n);break;caseAx=f[m++],_=f[m++],w=f[m++],b=f[m++],S=f[m++],Pn(M=i,I=n,i=f[m++],n=f[m++],b,S,x,_,w,h=s.A,r);break;caseax=f[m++],_=f[m++],w=f[m++],b=f[m++],S=f[m++],Pn(M=i,I=n,i+=f[m++],n+=f[m++],b,S,x,_,w,h=s.A,r)}}z!==d&&Z!==d(h=s.Z,r.addData(h),i=o,n=a),e=h}return r.toStatic(),r}function On(t,e){var i=Nn(t);return e=e{},e.buildPath=function(t){if(t.setData)t.setData(i.data),(e=t.getContext())&&t.rebuildPath(e);else{var e=t;i.rebuildPath(e)}},e.applyTransform=function(t){VS(i,t),this.dirty(!0)},e}function En(t,e){return new kn(On(t,e))}function Rn(t,e){return kn.extend(On(t,e))}function zn(t,e,i,n,o,a,r){var s=.5(i-t),l=.5(n-e);return(2(e-i)+s+l)r+(-3(e-i)-2s-l)a+so+e}function Bn(t,e,i){var n=e.points,o=e.smooth;if(n&&n.length=2){if(o&&spline!==o){var a=iM(n,o,i,e.smoothConstraint);t.moveTo(n[0][0],n[0][1]);for(var r=n.length,s=0;s(irr-1);s++){var l=a[2s],u=a[2s+1],h=n[(s+1)%r];t.bezierCurveTo(l[0],l[1],u[0],u[1],h[0],h[1])}}else{spline===o&&(n=eM(n,i)),t.moveTo(n[0][0],n[0][1]);for(var s=1,c=n.length;sc;s++)t.lineTo(n[s][0],n[s][1])}i&&t.closePath()}}function Vn(t,e,i){var n=t.cpx2,o=t.cpy2;return null===nnull===o[(itnQi)(t.x1,t.cpx1,t.cpx2,t.x2,e),(itnQi)(t.y1,t.cpy1,t.cpy2,t.y2,e)][(isnrn)(t.x1,t.cpx1,t.x2,e),(isnrn)(t.y1,t.cpy1,t.y2,e)]}function Gn(t){ui.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}function Fn(t){return kn.extend(t)}function Wn(t,e,i,n){var o=En(t,e);return i&&(center===n&&(i=Zn(i,o.getBoundingRect())),Un(o,i)),o}function Hn(t,e,i){var n=new hi({style{imaget,xe.x,ye.y,widthe.width,heighte.height},onloadfunction(t){if(center===i){var o={widtht.width,heightt.height};n.setStyle(Zn(e,o))}}});return n}function Zn(t,e){var i,n=e.widthe.height,o=t.heightn;return i=o=t.widtht.height(o=t.width)n,{xt.x+t.width2-o2,yt.y+t.height2-i2,widtho,heighti}}function Un(t,e){if(t.applyTransform){var i=t.getBoundingRect().calculateTransform(e);t.applyTransform(i)}}function Xn(t){var e=t.shape,i=t.style.lineWidth;return gM(2e.x1)===gM(2e.x2)&&(e.x1=e.x2=Yn(e.x1,i,!0)),gM(2e.y1)===gM(2e.y2)&&(e.y1=e.y2=Yn(e.y1,i,!0)),t}function jn(t){var e=t.shape,i=t.style.lineWidth,n=e.x,o=e.y,a=e.width,r=e.height;return e.x=Yn(e.x,i,!0),e.y=Yn(e.y,i,!0),e.width=Math.max(Yn(n+a,i,!1)-e.x,0===a01),e.height=Math.max(Yn(o+r,i,!1)-e.y,0===r01),t}function Yn(t,e,i){var n=gM(2t);return(n+gM(e))%2==0n2(n+(i1-1))2}function qn(t){return null!=t&&none!==t}function Kn(t){if(string!=typeof t)return t;var e=_M.get(t);return e(e=Gt(t,-.1),wM1e4&&(_M.set(t,e),wM++)),e}function $n(t){if(t.__hoverStlDirty){t.__hoverStlDirty=!1;var e=t.__hoverStl;if(e){var i=t.__normalStl={},n=t.style;for(var o in e)null!=e[o]&&(i[o]=n[o]);i.fill=n.fill,i.stroke=n.stroke}else t.__normalStl=null}}function Jn(t){var e=t.__hoverStl;if(e&&!t.__highlighted){var i=t.useHoverLayer;t.__highlighted=ilayerplain;var n=t.__zr;if(n!i){var o=t,a=t.style;i&&(a=(o=n.addHover(t)).style),xo(a),i$n(o),a.extendFrom(e),Qn(a,e,fill),Qn(a,e,stroke),yo(a),i(t.dirty(!1),t.z2+=1)}}}function Qn(t,e,i){!qn(e[i])&&qn(t[i])&&(t[i]=Kn(t[i]))}function to(t){t.__highlighted&&(eo(t),t.__highlighted=!1)}function eo(t){var e=t.__highlighted;if(layer===e)t.__zr&&t.__zr.removeHover(t);else if(e){var i=t.style,n=t.__normalStl;n&&(xo(i),t.setStyle(n),yo(i),t.z2-=1)}}function io(t,e){t.isGroupt.traverse(function(t){!t.isGroup&&e(t)})e(t)}function no(t,e){e=t.__hoverStl=!1!==e&&(e{}),t.__hoverStlDirty=!0,t.__highlighted&&(to(t),Jn(t))}function oo(t){return t&&t.__isEmphasisEntered}function ao(t){this.__hoverSilentOnTouch&&t.zrByTouch!this.__isEmphasisEntered&&io(this,Jn)}function ro(t){this.__hoverSilentOnTouch&&t.zrByTouch!this.__isEmphasisEntered&&io(this,to)}function so(){this.__isEmphasisEntered=!0,io(this,Jn)}function lo(){this.__isEmphasisEntered=!1,io(this,to)}function uo(t,e,i){t.isGroupt.traverse(function(t){!t.isGroup&&no(t,t.hoverStylee)})no(t,t.hoverStylee),ho(t,i)}function ho(t,e){var i=!1===e;if(t.__hoverSilentOnTouch=null!=e&&e.hoverSilentOnTouch,!it.__hoverStyleTrigger){var n=ioffon;t[n](mouseover,ao)[n](mouseout,ro),t[n](emphasis,so)[n](normal,lo),t.__hoverStyleTrigger=!i}}function co(t,e,i,n,o,a,r){var s,l=(o=oyM).labelFetcher,u=o.labelDataIndex,h=o.labelDimIndex,c=i.getShallow(show),d=n.getShallow(show);(cd)&&(l&&(s=l.getFormattedLabel(u,normal,null,h)),null==s&&(s=x(o.defaultText)o.defaultText(u,o)o.defaultText));var f=csnull,p=dA(ll.getFormattedLabel(u,emphasis,null,h)null,s)null;null==f&&null==p(fo(t,i,a,o),fo(e,n,r,o,!0)),t.text=f,e.text=p}function fo(t,e,i,n,o){return po(t,e,n,o),i&&a(t,i),t}function po(t,e,i,n){if((i=iyM).isRectText){var o=e.getShallow(position)(nnullinside);outside===o&&(o=top),t.textPosition=o,t.textOffset=e.getShallow(offset);var a=e.getShallow(rotate);null!=a&&(a=Math.PI180),t.textRotation=a,t.textDistance=A(e.getShallow(distance),nnull5)}var r,s=e.ecModel,l=s&&s.option.textStyle,u=go(e);if(u){r={};for(var h in u)if(u.hasOwnProperty(h)){var c=e.getModel([rich,h]);mo(r[h]={},c,l,i,n)}}return t.rich=r,mo(t,e,l,i,n,!0),i.forceRich&&!i.textStyle&&(i.textStyle={}),t}function go(t){for(var e;t&&t!==t.ecModel;){var i=(t.optionyM).rich;if(i){e=e{};for(var n in i)i.hasOwnProperty(n)&&(e[n]=1)}t=t.parentModel}return e}function mo(t,e,i,n,o,a){i=!o&&iyM,t.textFill=vo(e.getShallow(color),n)i.color,t.textStroke=vo(e.getShallow(textBorderColor),n)i.textBorderColor,t.textStrokeWidth=A(e.getShallow(textBorderWidth),i.textBorderWidth),t.insideRawTextPosition=t.textPosition,o(a&&(t.insideRollbackOpt=n,yo(t)),null==t.textFill&&(t.textFill=n.autoColor)),t.fontStyle=e.getShallow(fontStyle)i.fontStyle,t.fontWeight=e.getShallow(fontWeight)i.fontWeight,t.fontSize=e.getShallow(fontSize)i.fontSize,t.fontFamily=e.getShallow(fontFamily)i.fontFamily,t.textAlign=e.getShallow(align),t.textVerticalAlign=e.getShallow(verticalAlign)e.getShallow(baseline),t.textLineHeight=e.getShallow(lineHeight),t.textWidth=e.getShallow(width),t.textHeight=e.getShallow(height),t.textTag=e.getShallow(tag),a&&n.disableBox(t.textBackgroundColor=vo(e.getShallow(backgroundColor),n),t.textPadding=e.getShallow(padding),t.textBorderColor=vo(e.getShallow(borderColor),n),t.textBorderWidth=e.getShallow(borderWidth),t.textBorderRadius=e.getShallow(borderRadius),t.textBoxShadowColor=e.getShallow(shadowColor),t.textBoxShadowBlur=e.getShallow(shadowBlur),t.textBoxShadowOffsetX=e.getShallow(shadowOffsetX),t.textBoxShadowOffsetY=e.getShallow(shadowOffsetY)),t.textShadowColor=e.getShallow(textShadowColor)i.textShadowColor,t.textShadowBlur=e.getShallow(textShadowBlur)i.textShadowBlur,t.textShadowOffsetX=e.getShallow(textShadowOffsetX)i.textShadowOffsetX,t.textShadowOffsetY=e.getShallow(textShadowOffsetY)i.textShadowOffsetY}function vo(t,e){returnauto!==tte&&e.autoColore.autoColornull}function yo(t){var e=t.insideRollbackOpt;if(e&&null==t.textFill){var i,n=e.useInsideStyle,o=t.insideRawTextPosition,a=e.autoColor;!1!==n&&(!0===ne.isRectText&&o&&string==typeof o&&o.indexOf(inside)=0)(i={textFillnull,textStroket.textStroke,textStrokeWidtht.textStrokeWidth},t.textFill=#fff,null==t.textStroke&&(t.textStroke=a,null==t.textStrokeWidth&&(t.textStrokeWidth=2)))null!=a&&(i={textFillnull},t.textFill=a),i&&(t.insideRollback=i)}}function xo(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth,t.insideRollback=null)}function _o(t,e){var i=ee.getModel(textStyle);return P([t.fontStylei&&i.getShallow(fontStyle),t.fontWeighti&&i.getShallow(fontWeight),(t.fontSizei&&i.getShallow(fontSize)12)+px,t.fontFamilyi&&i.getShallow(fontFamily)sans-serif].join( ))}function wo(t,e,i,n,o,a){if(function==typeof o&&(a=o,o=null),n&&n.isAnimationEnabled()){var r=tUpdate,s=n.getShallow(animationDuration+r),l=n.getShallow(animationEasing+r),u=n.getShallow(animationDelay+r);function==typeof u&&(u=u(o,n.getAnimationDelayParamsn.getAnimationDelayParams(e,o)null)),function==typeof s&&(s=s(o)),s0e.animateTo(i,s,u0,l,a,!!a)(e.stopAnimation(),e.attr(i),a&&a())}else e.stopAnimation(),e.attr(i),a&&a()}function bo(t,e,i,n,o){wo(!0,t,e,i,n,o)}function So(t,e,i,n,o){wo(!1,t,e,i,n,o)}function Mo(t,e){for(var i=vt([]);t&&t!==e;)xt(i,t.getLocalTransform(),i),t=t.parent;return i}function Io(t,e,i){return e&&!c(e)&&(e=mw.getLocalTransform(e)),i&&(e=St([],e)),Q([],t,e)}function To(t,e,i){var n=0===e[4]0===e[5]0===e[0]1Math.abs(2e[4]e[0]),o=0===e[4]0===e[5]0===e[2]1Math.abs(2e[4]e[2]),a=[left===t-nright===tn0,top===t-obottom===to0];return a=Io(a,e,i),Math.abs(a[0])Math.abs(a[1])a[0]0rightlefta[1]0bottomtop}function Ao(t,e,i,n){function o(t){var e={positionF(t.position),rotationt.rotation};return t.shape&&(e.shape=a({},t.shape)),e}if(t&&e){var r=function(t){var e={};return t.traverse(function(t){!t.isGroup&&t.anid&&(e[t.anid]=t)}),e}(t);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=r[t.anid];if(e){var n=o(t);t.attr(o(e)),bo(t,n,i,t.dataIndex)}}})}}function Do(t,e){return f(t,function(t){var i=t[0];i=mM(i,e.x),i=vM(i,e.x+e.width);var n=t[1];return n=mM(n,e.y),n=vM(n,e.y+e.height),[i,n]})}function Co(t,e,i){var n=(e=a({rectHover!0},e)).style={strokeNoScale!0};if(i=i{x-1,y-1,width2,height2},t)return 0===t.indexOf(image)(n.image=t.slice(8),r(n,i),new hi(e))Wn(t.replace(path,),e,i,center)}function Lo(t,e,i){this.parentModel=e,this.ecModel=i,this.option=t}function ko(t,e,i){for(var n=0;ne.length&&(!e[n]null!=(t=t&&object==typeof tt[e[n]]null));n++);return null==t&&i&&(t=i.get(e)),t}function Po(t,e){var i=DM(t).getParent;return ii.call(t,e)t.parentModel}function No(t){return[t,CM++,Math.random().toFixed(5)].join(_)}function Oo(t){return t.replace(^s+,).replace(s+$,)}function Eo(t,e,i,n){var o=e[1]-e[0],a=i[1]-i[0];if(0===o)return 0===ai[0](i[0]+i[1])2;if(n)if(o0){if(t=e[0])return i[0];if(t=e[1])return i[1]}else{if(t=e[0])return i[0];if(t=e[1])return i[1]}else{if(t===e[0])return i[0];if(t===e[1])return i[1]}return(t-e[0])oa+i[0]}function Ro(t,e){switch(t){casecentercasemiddlet=50%;break;caseleftcasetopt=0%;break;caserightcasebottomt=100%}returnstring==typeof tOo(t).match(%$)parseFloat(t)100eparseFloat(t)null==tNaN+t}function zo(t,e,i){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),it+t}function Bo(t){return t.sort(function(t,e){return t-e}),t}function Vo(t){if(t=+t,isNaN(t))return 0;for(var e=1,i=0;Math.round(te)e!==t;)e=10,i++;return i}function Go(t){var e=t.toString(),i=e.indexOf(e);if(i0){var n=+e.slice(i+1);return n0-n0}var o=e.indexOf(.);return o00e.length-1-o}function Fo(t,e){var i=Math.log,n=Math.LN10,o=Math.floor(i(t[1]-t[0])n),a=Math.round(i(Math.abs(e[1]-e[0]))n),r=Math.min(Math.max(-o+a,0),20);return isFinite(r)r20}function Wo(t,e,i){if(!t[e])return 0;var n=p(t,function(t,e){return t+(isNaN(e)0e)},0);if(0===n)return 0;for(var o=Math.pow(10,i),a=f(t,function(t){return(isNaN(t)0t)no100}),r=100o,s=f(a,function(t){return Math.floor(t)}),l=p(s,function(t,e){return t+e},0),u=f(a,function(t,e){return t-s[e]});lr;){for(var h=Number.NEGATIVE_INFINITY,c=null,d=0,g=u.length;dg;++d)u[d]h&&(h=u[d],c=d);++s[c],u[c]=0,++l}return s[e]o}function Ho(t){var e=2Math.PI;return(t%e+e)%e}function Zo(t){return t-LM&&tLM}function Uo(t){if(t instanceof Date)return t;if(string==typeof t){var e=PM.exec(t);if(!e)return new Date(NaN);if(e[8]){var i=+e[4]0;returnZ!==e[8].toUpperCase()&&(i-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]1)-1,+e[3]1,i,+(e[5]0),+e[6]0,+e[7]0))}return new Date(+e[1],+(e[2]1)-1,+e[3]1,+e[4]0,+(e[5]0),+e[6]0,+e[7]0)}return null==tnew Date(NaN)new Date(Math.round(t))}function Xo(t){return Math.pow(10,jo(t))}function jo(t){return Math.floor(Math.log(t)Math.LN10)}function Yo(t,e){var i,n=jo(t),o=Math.pow(10,n),a=to;return i=ea1.51a2.52a43a7510a11a22a33a5510,t=io,n=-20+t.toFixed(n0-n0)t}function qo(t){function e(t,i,n){return t.interval[n]i.interval[n]t.interval[n]===i.interval[n]&&(t.close[n]-i.close[n]==(n-11)!n&&e(t,i,1))}t.sort(function(t,i){return e(t,i,0)-11});for(var i=-10,n=1,o=0;ot.length;){for(var a=t[o].interval,r=t[o].close,s=0;s2;s++)a[s]=i&&(a[s]=i,r[s]=s11-n),i=a[s],n=r[s];a[0]===a[1]&&r[0]r[1]!=1t.splice(o,1)o++}return t}function Ko(t){return t-parseFloat(t)=0}function $o(t){return isNaN(t)-(t=(t+).split(.))[0].replace((d{1,3})(=(d{3})+(!d))g,$1,)+(t.length1.+t[1])}function Jo(t,e){return t=(t).toLowerCase().replace(-(.)g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}function Qo(t){return null==t(t+).replace(EM,function(t,e){return RM[e]})}function ta(t,e,i){y(e)(e=[e]);var n=e.length;if(!n)return;for(var o=e[0].$vars[],a=0;ao.length;a++){var r=zM[a];t=t.replace(BM(r),BM(r,0))}for(var s=0;sn;s++)for(var l=0;lo.length;l++){var u=e[s][o[l]];t=t.replace(BM(zM[l],s),iQo(u)u)}return t}function ea(t,e,i){return d(e,function(e,n){t=t.replace({+n+},iQo(e)e)}),t}function ia(t,e){var i=(t=_(t){colort,extraCssTexte}t{}).color,n=t.type,e=t.extraCssText,o=t.renderModehtml,a=t.markerIdX;return ihtml===osubItem===n'span style=displayinline-block;vertical-alignmiddle;margin-right8px;margin-left3px;border-radius4px;width4px;height4px;background-color'+Qo(i)+;+(e)+'span''span style=displayinline-block;margin-right5px;border-radius10px;width10px;height10px;background-color'+Qo(i)+;+(e)+'span'{renderModeo,content{marker+a+}  ,style{colori}}}function na(t,e){return t+=,0000.substr(0,e-t.length)+t}function oa(t,e,i){week!==t&&month!==t&&quarter!==t&&half-year!==t&&year!==t(t=MM-ddnyyyy);var n=Uo(e),o=iUTC,a=n[get+o+FullYear](),r=n[get+o+Month]()+1,s=n[get+o+Date](),l=n[get+o+Hours](),u=n[get+o+Minutes](),h=n[get+o+Seconds](),c=n[get+o+Milliseconds]();return t=t.replace(MM,na(r,2)).replace(M,r).replace(yyyy,a).replace(yy,a%100).replace(dd,na(s,2)).replace(d,s).replace(hh,na(l,2)).replace(h,l).replace(mm,na(u,2)).replace(m,u).replace(ss,na(h,2)).replace(s,h).replace(SSS,na(c,3))}function aa(t){return tt.charAt(0).toUpperCase()+t.substr(1)t}function ra(t,e,i,n,o){var a=0,r=0;null==n&&(n=10),null==o&&(o=10);var s=0;e.eachChild(function(l,u){var h,c,d=l.position,f=l.getBoundingRect(),p=e.childAt(u+1),g=p&&p.getBoundingRect();if(horizontal===t){var m=f.width+(g-g.x+f.x0);(h=a+m)nl.newline(a=0,h=m,r+=s+i,s=f.height)s=Math.max(s,f.height)}else{var v=f.height+(g-g.y+f.y0);(c=r+v)ol.newline(a+=s+i,r=0,c=v,s=f.width)s=Math.max(s,f.width)}l.newline(d[0]=a,d[1]=r,horizontal===ta=h+ir=c+i)})}function sa(t,e,i){var n=e.width,o=e.height,a=Ro(t.x,n),r=Ro(t.y,o),s=Ro(t.x2,n),l=Ro(t.y2,o);return(isNaN(a)isNaN(parseFloat(t.x)))&&(a=0),(isNaN(s)isNaN(parseFloat(t.x2)))&&(s=n),(isNaN(r)isNaN(parseFloat(t.y)))&&(r=0),(isNaN(l)isNaN(parseFloat(t.y2)))&&(l=o),i=OM(i0),{widthMath.max(s-a-i[1]-i[3],0),heightMath.max(l-r-i[0]-i[2],0)}}function la(t,e,i){i=OM(i0);var n=e.width,o=e.height,a=Ro(t.left,n),r=Ro(t.top,o),s=Ro(t.right,n),l=Ro(t.bottom,o),u=Ro(t.width,n),h=Ro(t.height,o),c=i[2]+i[0],d=i[1]+i[3],f=t.aspect;switch(isNaN(u)&&(u=n-s-d-a),isNaN(h)&&(h=o-l-c-r),null!=f&&(isNaN(u)&&isNaN(h)&&(fnou=.8nh=.8o),isNaN(u)&&(u=fh),isNaN(h)&&(h=uf)),isNaN(a)&&(a=n-s-u-d),isNaN(r)&&(r=o-l-h-c),t.leftt.right){casecentera=n2-u2-i[3];break;caserighta=n-u-d}switch(t.topt.bottom){casemiddlecasecenterr=o2-h2-i[0];break;casebottomr=o-h-c}a=a0,r=r0,isNaN(u)&&(u=n-d-a-(s0)),isNaN(h)&&(h=o-c-r-(l0));var p=new ue(a+i[3],r+i[0],u,h);return p.margin=i,p}function ua(t,e,i,n,o){var a=!o!o.hvo.hv[0],s=!o!o.hvo.hv[1],l=o&&o.boundingModeall;if(as){var u;if(raw===l)u=group===t.typenew ue(0,0,+e.width0,+e.height0)t.getBoundingRect();else if(u=t.getBoundingRect(),t.needLocalTransform()){var h=t.getLocalTransform();(u=u.clone()).applyTransform(h)}e=la(r({widthu.width,heightu.height},e),i,n);var c=t.position,d=ae.x-u.x0,f=se.y-u.y0;t.attr(position,raw===l[d,f][c[0]+d,c[1]+f])}}function ha(t,e){return null!=t[ZM[e][0]]null!=t[ZM[e][1]]&&null!=t[ZM[e][2]]}function ca(t,e,i){function n(i,n){var r={},l=0,u={},h=0;if(WM(i,function(e){u[e]=t[e]}),WM(i,function(t){o(e,t)&&(r[t]=u[t]=e[t]),a(r,t)&&l++,a(u,t)&&h++}),s[n])return a(e,i[1])u[i[2]]=nulla(e,i[2])&&(u[i[1]]=null),u;if(2!==h&&l){if(l=2)return r;for(var c=0;ci.length;c++){var d=i[c];if(!o(r,d)&&o(t,d)){r[d]=t[d];break}}return r}return u}function o(t,e){return t.hasOwnProperty(e)}function a(t,e){return null!=t[e]&&auto!==t[e]}function r(t,e,i){WM(t,function(t){e[t]=i[t]})}!w(i)&&(i={});var s=i.ignoreSize;!y(s)&&(s=[s,s]);var l=n(ZM[0],0),u=n(ZM[1],1);r(ZM[0],t,l),r(ZM[1],t,u)}function da(t){return fa({},t)}function fa(t,e){return e&&t&&WM(HM,function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t}function pa(t,e){for(var i=t.length,n=0;ni;n++)if(t[n].lengthe)return t[n];return t[i-1]}function ga(t){var e=t.get(coordinateSystem),i={coordSysNamee,coordSysDims[],axisMapR(),categoryAxisMapR()},n=QM[e];if(n)return n(t,i,i.axisMap,i.categoryAxisMap),i}function ma(t){returncategory===t.get(type)}function va(t){this.fromDataset=t.fromDataset,this.data=t.data(t.sourceFormat===nI{}[]),this.sourceFormat=t.sourceFormatoI,this.seriesLayoutBy=t.seriesLayoutByrI,this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&R(t.encodeDefine),this.startIndex=t.startIndex0,this.dimensionsDetectCount=t.dimensionsDetectCount}function ya(t){var e=t.option.source,i=oI;if(S(e))i=aI;else if(y(e)){0===e.length&&(i=eI);for(var n=0,o=e.length;no;n++){var a=e[n];if(null!=a){if(y(a)){i=eI;break}if(w(a)){i=iI;break}}}}else if(w(e)){for(var r in e)if(e.hasOwnProperty(r)&&c(e[r])){i=nI;break}}else if(null!=e)throw new Error(Invalid data);lI(t).sourceFormat=i}function xa(t){return lI(t).source}function _a(t){lI(t).datasetMap=R()}function wa(t){var e=t.option,i=e.data,n=S(i)aItI,o=!1,a=e.seriesLayoutBy,r=e.sourceHeader,s=e.dimensions,l=Aa(t);if(l){var u=l.option;i=u.source,n=lI(l).sourceFormat,o=!0,a=au.seriesLayoutBy,null==r&&(r=u.sourceHeader),s=su.dimensions}var h=ba(i,n,a,r,s),c=e.encode;!c&&l&&(c=Ta(t,l,i,n,a,h)),lI(t).source=new va({datai,fromDataseto,seriesLayoutBya,sourceFormatn,dimensionsDefineh.dimensionsDefine,startIndexh.startIndex,dimensionsDetectCounth.dimensionsDetectCount,encodeDefinec})}function ba(t,e,i,n,o){if(!t)return{dimensionsDefineSa(o)};var a,r,s;if(e===eI)auto===nnull==nMa(function(t){null!=t&&-!==t&&(_(t)null==r&&(r=1)r=0)},i,t,10)r=n10,o1!==r(o=[],Ma(function(t,e){o[e]=null!=tt},i,t)),a=oo.lengthi===sIt.lengtht[0]t[0].lengthnull;else if(e===iI)o(o=Ia(t),s=!0);else if(e===nI)o(o=[],s=!0,d(t,function(t,e){o.push(e)}));else if(e===tI){var l=Li(t[0]);a=y(l)&&l.length1}var u;return s&&d(o,function(t,e){name===(w(t)t.namet)&&(u=e)}),{startIndexr,dimensionsDefineSa(o),dimensionsDetectCounta,potentialNameDimIndexu}}function Sa(t){if(t){var e=R();return f(t,function(t,i){if(null==(t=a({},w(t)t{namet})).name)return t;t.name+=,null==t.displayName&&(t.displayName=t.name);var n=e.get(t.name);return nt.name+=-+n.count++e.set(t.name,{count1}),t})}}function Ma(t,e,i,n){if(null==n&&(n=10),e===sI)for(a=0;ai.length&&an;a++)t(i[a]i[a][0]null,a);else for(var o=i[0][],a=0;ao.length&&an;a++)t(o[a],a)}function Ia(t){for(var e,i=0;it.length&&!(e=t[i++]););if(e){var n=[];return d(e,function(t,e){n.push(e)}),n}}function Ta(t,e,i,n,o,a){var r=ga(t),s={},l=[],u=[],h=t.subType,c=R([pie,map,funnel]),f=R([line,bar,pictorialBar,scatter,effectScatter,candlestick,boxplot]);if(r&&null!=f.get(h)){var p=t.ecModel,g=lI(p).datasetMap,m=e.uid+_+o,v=g.get(m)g.set(m,{categoryWayDim1,valueWayDim0});d(r.coordSysDims,function(t){if(null==r.firstCategoryDimIndex){e=v.valueWayDim++;s[t]=e,u.push(e)}else if(r.categoryAxisMap.get(t))s[t]=0,l.push(0);else{var e=v.categoryWayDim++;s[t]=e,u.push(e)}})}else if(null!=c.get(h)){for(var y,x=0;x5&&null==y;x++)Ca(i,n,o,a.dimensionsDefine,a.startIndex,x)(y=x);if(null!=y){s.value=y;var _=a.potentialNameDimIndexMath.max(y-1,0);u.push(_),l.push(_)}}return l.length&&(s.itemName=l),u.length&&(s.seriesName=u),s}function Aa(t){var e=t.option;if(!e.data)return t.ecModel.getComponent(dataset,e.datasetIndex0)}function Da(t,e){return Ca(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function Ca(t,e,i,n,o,a){function r(t){return(null==t!isFinite(t)===t)&&(!(!_(t)-===t)void 0)}var s;if(S(t))return!1;var l;if(n&&(l=w(l=n[a])l.namel),e===eI)if(i===sI){for(var u=t[a],h=0;h(u[]).length&&h5;h++)if(null!=(s=r(u[o+h])))return s}else for(h=0;ht.length&&h5;h++){var c=t[o+h];if(c&&null!=(s=r(c[a])))return s}else if(e===iI){if(!l)return;for(h=0;ht.length&&h5;h++)if((d=t[h])&&null!=(s=r(d[l])))return s}else if(e===nI){if(!l)return;if(!(u=t[l])S(u))return!1;for(h=0;hu.length&&h5;h++)if(null!=(s=r(u[h])))return s}else if(e===tI)for(h=0;ht.length&&h5;h++){var d=t[h],f=Li(d);if(!y(f))return!1;if(null!=(s=r(f[a])))return s}return!1}function La(t,e){if(e){var i=e.seiresIndex,n=e.seriesId,o=e.seriesName;return null!=i&&t.componentIndex!==inull!=n&&t.id!==nnull!=o&&t.name!==o}}function ka(t,e){var o=t.color&&!t.colorLayer;d(e,function(e,a){colorLayer===a&&oYM.hasClass(a)(object==typeof et[a]=t[a]n(t[a],e,!1)i(e)null==t[a]&&(t[a]=e))})}function Pa(t){t=t,this.option={},this.option[uI]=1,this._componentsMap=R({series[]}),this._seriesIndices,this._seriesIndicesMap,ka(t,this._theme.option),n(t,KM,!1),this.mergeOption(t)}function Na(t,e){y(e)(e=e[e][]);var i={};return d(e,function(e){i[e]=(t.get(e)[]).slice()}),i}function Oa(t,e,i){return e.typee.typeii.subTypeYM.determineSubType(t,e)}function Ea(t,e){t._seriesIndicesMap=R(t._seriesIndices=f(e,function(t){return t.componentIndex})[])}function Ra(t,e){return e.hasOwnProperty(subType)g(t,function(t){return t.subType===e.subType})t}function za(t){d(cI,function(e){this[e]=m(t[e],t)},this)}function Ba(){this._coordinateSystems=[]}function Va(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function Ga(t,e,i){var n,o,a=[],r=[],s=t.timeline;if(t.baseOption&&(o=t.baseOption),(st.options)&&(o=o{},a=(t.options[]).slice()),t.media){o=o{};var l=t.media;fI(l,function(t){t&&t.option&&(t.queryr.push(t)n(n=t))})}return o(o=t),o.timeline(o.timeline=s),fI([o].concat(a).concat(f(r,function(t){return t.option})),function(t){fI(e,function(e){e(t,i)})}),{baseOptiono,timelineOptionsa,mediaDefaultn,mediaListr}}function Fa(t,e,i){var n={widthe,heighti,aspectratioei},o=!0;return d(t,function(t,e){var i=e.match(vI);if(i&&i[1]&&i[2]){var a=i[1],r=i[2].toLowerCase();Wa(n[r],t,a)(o=!1)}}),o}function Wa(t,e,i){returnmin===it=emax===it=et===e}function Ha(t,e){return t.join(,)===e.join(,)}function Za(t,e){fI(e=e{},function(e,i){if(null!=e){var n=t[i];if(YM.hasClass(i)){e=Di(e);var o=Pi(n=Di(n),e);t[i]=gI(o,function(t){return t.option&&t.existmI(t.exist,t.option,!0)t.existt.option})}else t[i]=mI(n,e,!0)}})}function Ua(t){var e=t&&t.itemStyle;if(e)for(var i=0,o=_I.length;io;i++){var a=_I[i],r=e.normal,s=e.emphasis;r&&r[a]&&(t[a]=t[a]{},t[a].normaln(t[a].normal,r[a])t[a].normal=r[a],r[a]=null),s&&s[a]&&(t[a]=t[a]{},t[a].emphasisn(t[a].emphasis,s[a])t[a].emphasis=s[a],s[a]=null)}}function Xa(t,e,i){if(t&&t[e]&&(t[e].normalt[e].emphasis)){var n=t[e].normal,o=t[e].emphasis;n&&(i(t[e].normal=t[e].emphasis=null,r(t[e],n))t[e]=n),o&&(t.emphasis=t.emphasis{},t.emphasis[e]=o)}}function ja(t){Xa(t,itemStyle),Xa(t,lineStyle),Xa(t,areaStyle),Xa(t,label),Xa(t,labelLine),Xa(t,upperLabel),Xa(t,edgeLabel)}function Ya(t,e){var i=xI(t)&&t[e],n=xI(i)&&i.textStyle;if(n)for(var o=0,a=zb.length;oa;o++){var e=zb[o];n.hasOwnProperty(e)&&(i[e]=n[e])}}function qa(t){t&&(ja(t),Ya(t,label),t.emphasis&&Ya(t.emphasis,label))}function Ka(t){if(xI(t)){Ua(t),ja(t),Ya(t,label),Ya(t,upperLabel),Ya(t,edgeLabel),t.emphasis&&(Ya(t.emphasis,label),Ya(t.emphasis,upperLabel),Ya(t.emphasis,edgeLabel));var e=t.markPoint;e&&(Ua(e),qa(e));var i=t.markLine;i&&(Ua(i),qa(i));var n=t.markArea;n&&qa(n);var o=t.data;if(graph===t.type){o=ot.nodes;var a=t.linkst.edges;if(a&&!S(a))for(s=0;sa.length;s++)qa(a[s]);d(t.categories,function(t){ja(t)})}if(o&&!S(o))for(s=0;so.length;s++)qa(o[s]);if((e=t.markPoint)&&e.data)for(var r=e.data,s=0;sr.length;s++)qa(r[s]);if((i=t.markLine)&&i.data)for(var l=i.data,s=0;sl.length;s++)y(l[s])(qa(l[s][0]),qa(l[s][1]))qa(l[s]);gauge===t.type(Ya(t,axisLabel),Ya(t,title),Ya(t,detail))treemap===t.type(Xa(t.breadcrumb,itemStyle),d(t.levels,function(t){ja(t)}))tree===t.type&&ja(t.leaves)}}function $a(t){return y(t)tt[t][]}function Ja(t){return(y(t)t[0]t){}}function Qa(t,e){e=e.split(,);for(var i=t,n=0;ne.length&&null!=(i=i&&i[e[n]]);n++);return i}function tr(t,e,i,n){e=e.split(,);for(var o,a=t,r=0;re.length-1;r++)null==a[o=e[r]]&&(a[o]={}),a=a[o];(nnull==a[e[r]])&&(a[e[r]]=i)}function er(t){d(bI,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}function ir(t){d(t,function(e,i){var n=[],o=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],r=e.data,s=e.isStackedByIndex,l=r.map(a,function(a,l,u){var h=r.get(e.stackedDimension,u);if(isNaN(h))return o;var c,d;sd=r.getRawIndex(u)c=r.get(e.stackedByDimension,u);for(var f=NaN,p=i-1;p=0;p--){var g=t[p];if(s(d=g.data.rawIndexOf(g.stackedByDimension,c)),d=0){var m=g.data.getByRawIndex(g.stackResultDimension,d);if(h=0&&m0h=0&&m0){h+=m,f=m;break}}}return n[0]=h,n[1]=f,n});r.hostModel.setData(l),e.data=l})}function nr(t,e){va.isInstance(t)(t=va.seriesDataToSource(t)),this._source=t;var i=this._data=t.data,n=t.sourceFormat;n===aI&&(this._offset=0,this._dimSize=e,this._data=i),a(this,TI[n===eIn+_+t.seriesLayoutByn])}function or(){return this._data.length}function ar(t){return this._data[t]}function rr(t){for(var e=0;et.length;e++)this._data.push(t[e])}function sr(t,e,i,n){return null!=it[i]t}function lr(t,e,i,n){return ur(t[n],this._dimensionInfos[e])}function ur(t,e){var i=e&&e.type;if(ordinal===i){var n=e&&e.ordinalMeta;return nn.parseAndCollect(t)t}returntime===i&&number!=typeof t&&null!=t&&-!==t&&(t=+Uo(t)),null==t===tNaN+t}function hr(t,e,i){if(t){var n=t.getRawDataItem(e);if(null!=n){var o,a,r=t.getProvider().getSource().sourceFormat,s=t.getDimensionInfo(i);return s&&(o=s.name,a=s.index),AI[r](n,e,a,o)}}}function cr(t,e,i){if(t){var n=t.getProvider().getSource().sourceFormat;if(n===tIn===iI){var o=t.getRawDataItem(e);return n!==tIw(o)(o=null),oo[i]void 0}}}function dr(t){return new fr(t)}function fr(t){t=t{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0,this.context}function pr(t,e,i,n,o,a){PI.reset(i,n,o,a),t._callingProgress=e,t._callingProgress({starti,endn,countn-i,nextPI.next},t.context)}function gr(t,e){t._dueIndex=t._outputDueEnd=t._dueEnd=0,t._settedOutputEnd=null;var i,n;!e&&t._reset&&((i=t._reset(t.context))&&i.progress&&(n=i.forceFirstProgress,i=i.progress),y(i)&&!i.length&&(i=null)),t._progress=i,t._modBy=t._modDataCount=null;var o=t._downstream;return o&&o.dirty(),n}function mr(t){var e=t.name;Oi(t)(t.name=vr(t)e)}function vr(t){var e=t.getRawData(),i=[];return d(e.mapDimension(seriesName,!0),function(t){var n=e.getDimensionInfo(t);n.displayName&&i.push(n.displayName)}),i.join( )}function yr(t){return t.model.getRawData().count()}function xr(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),_r}function _r(t,e){t.ende.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function wr(t,e){d(t.CHANGABLE_METHODS,function(i){t.wrapMethod(i,v(br,e))})}function br(t){var e=Sr(t);e&&e.setOutputEnd(this.count())}function Sr(t){var e=(t.ecModel{}).scheduler,i=e&&e.getPipeline(t.uid);if(i){var n=i.currentTask;if(n){var o=n.agentStubMap;o&&(n=o.get(t.uid))}return n}}function Mr(){this.group=new Zw,this.uid=No(viewChart),this.renderTask=dr({planAr,resetDr}),this.renderTask.context={viewthis}}function Ir(t,e){if(t&&(t.trigger(e),group===t.type))for(var i=0;it.childCount();i++)Ir(t.childAt(i),e)}function Tr(t,e,i){var n=zi(t,e);null!=nd(Di(n),function(e){Ir(t.getItemGraphicEl(e),i)})t.eachItemGraphicEl(function(t){Ir(t,i)})}function Ar(t){return VI(t.model)}function Dr(t){var e=t.model,i=t.ecModel,n=t.api,o=t.payload,a=e.pipelineContext.progressiveRender,r=t.view,s=o&&BI(o).updateMethod,l=aincrementalPrepareRenders&&r[s]srender;returnrender!==l&&r[l](e,i,n,o),FI[l]}function Cr(t,e,i){function n(){h=(new Date).getTime(),c=null,t.apply(r,s[])}var o,a,r,s,l,u=0,h=0,c=null;e=e0;var d=function(){o=(new Date).getTime(),r=this,s=arguments;var t=le,d=li;l=null,a=o-(duh)-t,clearTimeout(c),dc=setTimeout(n,t)a=0n()c=setTimeout(n,-a),u=o};return d.clear=function(){c&&(clearTimeout(c),c=null)},d.debounceNextCall=function(t){l=t},d}function Lr(t,e,i,n){var o=t[e];if(o){var a=o[WI]o,r=o[ZI];if(o[HI]!==ir!==n){if(null==i!n)return t[e]=a;(o=t[e]=Cr(a,i,debounce===n))[WI]=a,o[ZI]=n,o[HI]=i}return o}}function kr(t,e){var i=t[e];i&&i[WI]&&(t[e]=i[WI])}function Pr(t,e,i,n){this.ecInstance=t,this.api=e,this.unfinished;var i=this._dataProcessorHandlers=i.slice(),n=this._visualHandlers=n.slice();this._allHandlers=i.concat(n),this._stageTaskMap=R()}function Nr(t,e,i,n,o){function a(t,e){return t.setDirty&&(!t.dirtyMapt.dirtyMap.get(e.__pipeline.id))}o=o{};var r;d(e,function(e,s){if(!o.visualTypeo.visualType===e.visualType){var l=t._stageTaskMap.get(e.uid),u=l.seriesTaskMap,h=l.overallTask;if(h){var c,d=h.agentStubMap;d.each(function(t){a(o,t)&&(t.dirty(),c=!0)}),c&&h.dirty(),KI(h,n);var f=t.getPerformArgs(h,o.block);d.each(function(t){t.perform(f)}),r=h.perform(f)}else u&&u.each(function(s,l){a(o,s)&&s.dirty();var u=t.getPerformArgs(s,o.block);u.skip=!e.performRawSeries&&i.isSeriesFiltered(s.context.model),KI(s,n),r=s.perform(u)})}}),t.unfinished=r}function Or(t,e,i,n,o){function a(i){var a=i.uid,s=r.get(a)r.set(a,dr({planGr,resetFr,countHr}));s.context={modeli,ecModeln,apio,useClearVisuale.isVisual&&!e.isLayout,plane.plan,resete.reset,schedulert},Zr(t,i,s)}var r=i.seriesTaskMap(i.seriesTaskMap=R()),s=e.seriesType,l=e.getTargetSeries;e.createOnAllSeriesn.eachRawSeries(a)sn.eachRawSeriesByType(s,a)l&&l(n,o).each(a);var u=t._pipelineMap;r.each(function(t,e){u.get(e)(t.dispose(),r.removeKey(e))})}function Er(t,e,i,n,o){function a(e){var i=e.uid,n=s.get(i);n(n=s.set(i,dr({resetzr,onDirtyVr})),r.dirty()),n.context={modele,overallProgressh,modifyOutputEndc},n.agent=r,n.__block=h,Zr(t,e,n)}var r=i.overallTask=i.overallTaskdr({resetRr});r.context={ecModeln,apio,overallResete.overallReset,schedulert};var s=r.agentStubMap=r.agentStubMapR(),l=e.seriesType,u=e.getTargetSeries,h=!0,c=e.modifyOutputEnd;ln.eachRawSeriesByType(l,a)uu(n,o).each(a)(h=!1,d(n.getSeries(),a));var f=t._pipelineMap;s.each(function(t,e){f.get(e)(t.dispose(),r.dirty(),s.removeKey(e))})}function Rr(t){t.overallReset(t.ecModel,t.api,t.payload)}function zr(t,e){return t.overallProgress&&Br}function Br(){this.agent.dirty(),this.getDownstream().dirty()}function Vr(){this.agent&&this.agent.dirty()}function Gr(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function Fr(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=Di(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length1f(e,function(t,e){return Wr(e)})$I}function Wr(t){return function(e,i){var n=i.data,o=i.resetDefines[t];if(o&&o.dataEach)for(var a=e.start;ae.end;a++)o.dataEach(n,a);else o&&o.progress&&o.progress(e,n)}}function Hr(t){return t.data.count()}function Zr(t,e,i){var n=e.uid,o=t._pipelineMap.get(n);!o.head&&(o.head=i),o.tail&&o.tail.pipe(i),o.tail=i,i.__idxInPipeline=o.count++,i.__pipeline=o}function Ur(t){JI=null;try{t(QI,tT)}catch(t){}return JI}function Xr(t,e){for(var i in e.prototype)t[i]=B}function jr(t){for(_(t)&&(t=(new DOMParser).parseFromString(t,textxml)),9===t.nodeType&&(t=t.firstChild);svg!==t.nodeName.toLowerCase()1!==t.nodeType;)t=t.nextSibling;return t}function Yr(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}function qr(t,e){for(var i=t.firstChild;i;){if(1===i.nodeType){var n=i.getAttribute(offset);n=n.indexOf(%)0parseInt(n,10)100nparseFloat(n)0;var o=i.getAttribute(stop-color)#000000;e.addColorStop(n,o)}i=i.nextSibling}}function Kr(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle(e.__inheritedStyle={}),r(e.__inheritedStyle,t.__inheritedStyle))}function $r(t){for(var e=P(t).split(rT),i=[],n=0;ne.length;n+=2){var o=parseFloat(e[n]),a=parseFloat(e[n+1]);i.push([o,a])}return i}function Jr(t,e,i,n){var o=e.__inheritedStyle{},r=text===e.type;if(1===t.nodeType&&(ts(t,e),a(o,es(t)),!n))for(var s in uT)if(uT.hasOwnProperty(s)){var l=t.getAttribute(s);null!=l&&(o[uT[s]]=l)}var u=rtextFillfill,h=rtextStrokestroke;e.style=e.stylenew $w;var c=e.style;null!=o.fill&&c.set(u,Qr(o.fill,i)),null!=o.stroke&&c.set(h,Qr(o.stroke,i)),d([lineWidth,opacity,fillOpacity,strokeOpacity,miterLimit,fontSize],function(t){var e=lineWidth===t&&rtextStrokeWidtht;null!=o[t]&&c.set(e,parseFloat(o[t]))}),o.textBaseline&&auto!==o.textBaseline(o.textBaseline=alphabetic),alphabetic===o.textBaseline&&(o.textBaseline=bottom),start===o.textAlign&&(o.textAlign=left),end===o.textAlign&&(o.textAlign=right),d([lineDashOffset,lineCap,lineJoin,fontWeight,fontFamily,fontStyle,textAlign,textBaseline],function(t){null!=o[t]&&c.set(t,o[t])}),o.lineDash&&(e.style.lineDash=P(o.lineDash).split(rT)),c[h]&&none!==c[h]&&(e[h]=!0),e.__inheritedStyle=o}function Qr(t,e){var i=e&&t&&t.match(hT);return ie[P(i[1])]t}function ts(t,e){var i=t.getAttribute(transform);if(i){var n=null,o=[];(i=i.replace(,g, )).replace(cT,function(t,e,i){o.push(e,i)});for(var a=o.length-1;a0;a-=2){var r=o[a],s=o[a-1];switch(n=nmt(),s){casetranslater=P(r).split(rT),_t(n,n,[parseFloat(r[0]),parseFloat(r[1]0)]);break;casescaler=P(r).split(rT),bt(n,n,[parseFloat(r[0]),parseFloat(r[1]r[0])]);break;caserotater=P(r).split(rT),wt(n,n,parseFloat(r[0]));break;caseskewr=P(r).split(rT),console.warn(Skew transform is not supported yet);break;casematrixr=P(r).split(rT);n[0]=parseFloat(r[0]),n[1]=parseFloat(r[1]),n[2]=parseFloat(r[2]),n[3]=parseFloat(r[3]),n[4]=parseFloat(r[4]),n[5]=parseFloat(r[5])}}}e.setLocalTransform(n)}function es(t){var e=t.getAttribute(style),i={};if(!e)return i;var n={};dT.lastIndex=0;for(var o;null!=(o=dT.exec(e));)n[o[1]]=o[2];for(var a in uT)uT.hasOwnProperty(a)&&null!=n[a]&&(i[uT[a]]=n[a]);return i}function is(t,e,i){var n=et.width,o=it.height,a=Math.min(n,o);return{scale[a,a],position[-(t.x+t.width2)a+e2,-(t.y+t.height2)a+i2]}}function ns(t,e){return(new Yr).parse(t,e)}function os(t){return function(e,i,n){e=e&&e.toLowerCase(),aw.prototype[t].call(this,e,i,n)}}function as(){aw.call(this)}function rs(t,e,n){function o(t,e){return t.__prio-e.__prio}n=n{},string==typeof e&&(e=BT[e]),this.id,this.group,this._dom=t;var a=this._zr=Ii(t,{renderern.renderercanvas,devicePixelRation.devicePixelRatio,widthn.width,heightn.height});this._throttledZrFlush=Cr(m(a.flush,a),17),(e=i(e))&&MI(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new Ba;var r=this._api=Ms(this);ve(zT,o),ve(OT,o),this._scheduler=new Pr(this,r,OT,zT),aw.call(this,this._ecEventProcessor=new Is),this._messageCenter=new as,this._initEvents(),this.resize=m(this.resize,this),this._pendingActions=[],a.animation.on(frame,this._onframe,this),ps(a,this),N(this)}function ss(t,e,i){var n,o=this._model,a=this._coordSysMgr.getCoordinateSystems();e=Vi(o,e);for(var r=0;ra.length;r++){var s=a[r];if(s[t]&&null!=(n=s[t](o,e,i)))return n}}function ls(t){var e=t._model,i=t._scheduler;i.restorePipelines(e),i.prepareStageTasks(),gs(t,component,e,i),gs(t,chart,e,i),i.plan()}function us(t,e,i,n,o){function a(n){n&&n.__alive&&n[e]&&n[e](n.__model,r,t._api,i)}var r=t._model;if(n){var s={};s[n+Id]=i[n+Id],s[n+Index]=i[n+Index],s[n+Name]=i[n+Name];var l={mainTypen,querys};o&&(l.subType=o);var u=i.excludeSeriesId;null!=u&&(u=R(Di(u))),r&&r.eachComponent(l,function(e){u&&null!=u.get(e.id)a(t[series===n_chartsMap_componentsMap][e.__viewId])},t)}else vT(t._componentsViews.concat(t._chartsViews),a)}function hs(t,e){var i=t._chartsMap,n=t._scheduler;e.eachSeries(function(t){n.updateStreamModes(t,i[t.__viewId])})}function cs(t,e){var i=t.type,n=t.escapeConnect,o=PT[i],s=o.actionInfo,l=(s.updateupdate).split(),u=l.pop();l=null!=l[0]&&_T(l[0]),this[TT]=!0;var h=[t],c=!1;t.batch&&(c=!0,h=f(t.batch,function(e){return e=r(a({},e),t),e.batch=null,e}));var d,p=[],g=highlight===idownplay===i;vT(h,function(t){d=o.action(t,this._model,this._api),(d=da({},t)).type=s.eventd.type,p.push(d),gus(this,u,t,series)l&&us(this,u,t,l.main,l.sub)},this),none===ugl(this[AT](ls(this),LT.update.call(this,t),this[AT]=!1)LT[u].call(this,t)),d=c{types.eventi,escapeConnectn,batchp}p[0],this[TT]=!1,!e&&this._messageCenter.trigger(d.type,d)}function ds(t){for(var e=this._pendingActions;e.length;){var i=e.shift();cs.call(this,i,t)}}function fs(t){!t&&this.trigger(updated)}function ps(t,e){t.on(rendered,function(){e.trigger(rendered),!t.animation.isFinished()e[AT]e._scheduler.unfinishede._pendingActions.lengthe.trigger(finished)})}function gs(t,e,i,n){function o(t){var e=_ec_+t.id+_+t.type,o=s[e];if(!o){var h=_T(t.type);(o=new(aEI.getClass(h.main,h.sub)Mr.getClass(h.sub))).init(i,u),s[e]=o,r.push(o),l.add(o.group)}t.__viewId=o.__id=e,o.__alive=!0,o.__model=t,o.group.__ecComponentInfo={mainTypet.mainType,indext.componentIndex},!a&&n.prepareView(o,t,i,u)}for(var a=component===e,r=at._componentsViewst._chartsViews,s=at._componentsMapt._chartsMap,l=t._zr,u=t._api,h=0;hr.length;h++)r[h].__alive=!1;ai.eachComponent(function(t,e){series!==t&&o(e)})i.eachSeries(o);for(h=0;hr.length;){var c=r[h];c.__aliveh++(!a&&c.renderTask.dispose(),l.remove(c.group),c.dispose(i,u),r.splice(h,1),delete s[c.__id],c.__id=c.group.__ecComponentInfo=null)}}function ms(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})}function vs(t,e,i,n){ys(t,e,i,n),vT(t._chartsViews,function(t){t.__alive=!1}),xs(t,e,i,n),vT(t._chartsViews,function(t){t.__alivet.remove(e,i)})}function ys(t,e,i,n,o){vT(ot._componentsViews,function(t){var o=t.__model;t.render(o,e,i,n),Ss(o,t)})}function xs(t,e,i,n,o){var a,r=t._scheduler;e.eachSeries(function(e){var i=t._chartsMap[e.__viewId];i.__alive=!0;var s=i.renderTask;r.updatePayload(s,n),o&&o.get(e.uid)&&s.dirty(),a=s.perform(r.getPerformArgs(s)),i.group.silent=!!e.get(silent),Ss(e,i),bs(e,i)}),r.unfinished=a,ws(t._zr,e),jI(t._zr.dom,e)}function _s(t,e){vT(RT,function(i){i(t,e)})}function ws(t,e){var i=t.storage,n=0;i.traverse(function(t){t.isGroupn++}),ne.get(hoverLayerThreshold)&&!z_.node&&i.traverse(function(t){t.isGroup(t.useHoverLayer=!0)})}function bs(t,e){var i=t.get(blendMode)null;e.group.traverse(function(t){t.isGroupt.style.blend!==i&&t.setStyle(blend,i),t.eachPendingDisplayable&&t.eachPendingDisplayable(function(t){t.setStyle(blend,i)})})}function Ss(t,e){var i=t.get(z),n=t.get(zlevel);e.group.traverse(function(t){group!==t.type&&(null!=i&&(t.z=i),null!=n&&(t.zlevel=n))})}function Ms(t){var e=t._coordSysMgr;return a(new za(t),{getCoordinateSystemsm(e.getCoordinateSystems,e),getComponentByElementfunction(e){for(;e;){var i=e.__ecComponentInfo;if(null!=i)return t._model.getComponent(i.mainType,i.index);e=e.parent}}})}function Is(){this.eventInfo}function Ts(t){function e(t,e){for(var n=0;nt.length;n++)t[n][i]=e}var i=__connectUpdateStatus;vT(NT,function(n,o){t._messageCenter.on(o,function(n){if(FT[t.group]&&0!==t[i]){if(n&&n.escapeConnect)return;var o=t.makeActionFromEvent(n),a=[];vT(GT,function(e){e!==t&&e.group===t.group&&a.push(e)}),e(a,0),vT(a,function(t){1!==t[i]&&t.dispatchAction(o)}),e(a,2)}})})}function As(t){FT[t]=!1}function Ds(t){return GT[Wi(t,ZT)]}function Cs(t,e){BT[t]=e}function Ls(t){ET.push(t)}function ks(t,e){Rs(OT,t,e,bT)}function Ps(t,e,i){function==typeof e&&(i=e,e=);var n=xT(t)t.type[t,t={evente}][0];t.event=(t.eventn).toLowerCase(),e=t.event,mT(DT.test(n)&&DT.test(e)),PT[n](PT[n]={actioni,actionInfot}),NT[e]=n}function Ns(t,e){Ba.register(t,e)}function Os(t,e){Rs(zT,t,e,ST,layout)}function Es(t,e){Rs(zT,t,e,MT,visual)}function Rs(t,e,i,n,o){(yT(e)xT(e))&&(i=e,e=n);var a=Pr.wrapStageHandler(i,o);return a.__prio=e,a.__raw=i,t.push(a),a}function zs(t,e){VT[t]=e}function Bs(t){return YM.extend(t)}function Vs(t){return EI.extend(t)}function Gs(t){return OI.extend(t)}function Fs(t){return Mr.extend(t)}function Ws(t){return t}function Hs(t,e,i,n,o){this._old=t,this._new=e,this._oldKeyGetter=iWs,this._newKeyGetter=nWs,this.context=o}function Zs(t,e,i,n,o){for(var a=0;at.length;a++){var r=_ec_+o[n](t[a],a),s=e[r];null==s(i.push(r),e[r]=a)(s.length(e[r]=s=[s]),s.push(a))}}function Us(t){var e={},i=e.encode={},n=R(),o=[],a=[];d(t.dimensions,function(e){var r=t.getDimensionInfo(e),s=r.coordDim;if(s){var l=i[s];i.hasOwnProperty(s)(l=i[s]=[]),l[r.coordDimIndex]=e,r.isExtraCoord(n.set(s,1),js(r.type)&&(o[0]=e)),r.defaultTooltip&&a.push(e)}jT.each(function(t,e){var n=i[e];i.hasOwnProperty(e)(n=i[e]=[]);var o=r.otherDims[e];null!=o&&!1!==o&&(n[o]=r.name)})});var r=[],s={};n.each(function(t,e){var n=i[e];s[e]=n[0],r=r.concat(n)}),e.dataDimsOnCoord=r,e.encodeFirstDimNotExtra=s;var l=i.label;l&&l.length&&(o=l.slice());var u=i.tooltip;return u&&u.lengtha=u.slice()a.length(a=o.slice()),i.defaultedLabel=o,i.defaultedTooltip=a,e}function Xs(t){returncategory===tordinaltime===ttimefloat}function js(t){return!(ordinal===ttime===t)}function Ys(t){return t._rawCount65535$TJT}function qs(t){var e=t.constructor;return e===Arrayt.slice()new e(t)}function Ks(t,e){d(QT.concat(e.__wrappedMethods[]),function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t.__wrappedMethods=e.__wrappedMethods,d(tA,function(n){t[n]=i(e[n])}),t._calculationInfo=a(e._calculationInfo)}function $s(t){var e=t._invertedIndicesMap;d(e,function(i,n){var o=t._dimensionInfos[n].ordinalMeta;if(o){i=e[n]=new $T(o.categories.length);for(a=0;ai.length;a++)i[a]=NaN;for(var a=0;at._count;a++)i[t.get(n,a)]=a}})}function Js(t,e,i){var n;if(null!=e){var o=t._chunkSize,a=Math.floor(io),r=i%o,s=t.dimensions[e],l=t._storage[s][a];if(l){n=l[r];var u=t._dimensionInfos[s].ordinalMeta;u&&u.categories.length&&(n=u.categories[n])}}return n}function Qs(t){return t}function tl(t){return tthis._count&&t=0this._indices[t]-1}function el(t,e){var i=t._idList[e];return null==i&&(i=Js(t,t._idDimIdx,e)),null==i&&(i=qT+e),i}function il(t){return y(t)(t=[t]),t}function nl(t,e){var i=t.dimensions,n=new eA(f(i,t.getDimensionInfo,t),t.hostModel);Ks(n,t);for(var o=n._storage={},a=t._storage,r=0;ri.length;r++){var s=i[r];a[s]&&(l(e,s)=0(o[s]=ol(a[s]),n._rawExtent[s]=al(),n._extent[s]=null)o[s]=a[s])}return n}function ol(t){for(var e=new Array(t.length),i=0;it.length;i++)e[i]=qs(t[i]);return e}function al(){return[10,-10]}function rl(t,e,n){function o(t,e,i){null!=jT.get(e)t.otherDims[e]=i(t.coordDim=e,t.coordDimIndex=i,h.set(e,!0))}va.isInstance(e)(e=va.seriesDataToSource(e)),n=n{},t=(t[]).slice();for(var s=(n.dimsDef[]).slice(),l=R(n.encodeDef),u=R(),h=R(),c=[],f=sl(e,t,s,n.dimCount),p=0;pf;p++){var g=s[p]=a({},w(s[p])s[p]{names[p]}),m=g.name,v=c[p]={otherDims{}};null!=m&&null==u.get(m)&&(v.name=v.displayName=m,u.set(m,p)),null!=g.type&&(v.type=g.type),null!=g.displayName&&(v.displayName=g.displayName)}l.each(function(t,e){if(1===(t=Di(t).slice()).length&&t[0]0)l.set(e,!1);else{var i=l.set(e,[]);d(t,function(t,n){_(t)&&(t=u.get(t)),null!=t&&tf&&(i[n]=t,o(c[t],e,n))})}});var y=0;d(t,function(t,e){var n,t,a,s;if(_(t))n=t,t={};else{n=t.name;var u=t.ordinalMeta;t.ordinalMeta=null,(t=i(t)).ordinalMeta=u,a=t.dimsDef,s=t.otherDims,t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}var h=l.get(n);if(!1!==h){if(!(h=Di(h)).length)for(var f=0;f(a&&a.length1);f++){for(;yc.length&&null!=c[y].coordDim;)y++;yc.length&&h.push(y++)}d(h,function(e,i){var l=c[e];if(o(r(l,t),n,i),null==l.name&&a){var u=a[i];!w(u)&&(u={nameu}),l.name=l.displayName=u.name,l.defaultTooltip=u.defaultTooltip}s&&r(l.otherDims,s)})}});var x=n.generateCoord,b=n.generateCoordCount,S=null!=b;b=xb10;for(var M=xvalue,I=0;If;I++)null==(v=c[I]=c[I]{}).coordDim&&(v.coordDim=ll(M,h,S),v.coordDimIndex=0,(!xb=0)&&(v.isExtraCoord=!0),b--),null==v.name&&(v.name=ll(v.coordDim,u)),null==v.type&&Da(e,I,v.name)&&(v.type=ordinal);return c}function sl(t,e,i,n){var o=Math.max(t.dimensionsDetectCount1,e.length,i.length,n0);return d(e,function(t){var e=t.dimsDef;e&&(o=Math.max(o,e.length))}),o}function ll(t,e,i){if(inull!=e.get(t)){for(var n=0;null!=e.get(t+n);)n++;t+=n}return e.set(t,!0),t}function ul(t,e,i){var n,o,a,r,s=(i=i{}).byIndex,l=i.stackedCoordDimension,u=!(!t!t.get(stack));if(d(e,function(t,i){_(t)&&(e[i]=t={namet}),u&&!t.isExtraCoord&&(sn!t.ordinalMeta(n=t),oordinal===t.typetime===t.typel&&l!==t.coordDim(o=t))}),!osn(s=!0),o){a=__0ecstackresult,r=__0ecstackedover,n&&(n.createInvertedIndices=!0);var h=o.coordDim,c=o.type,f=0;d(e,function(t){t.coordDim===h&&f++}),e.push({namea,coordDimh,coordDimIndexf,typec,isExtraCoord!0,isCalculationCoord!0}),f++,e.push({namer,coordDimr,coordDimIndexf,typec,isExtraCoord!0,isCalculationCoord!0})}return{stackedDimensiono&&o.name,stackedByDimensionn&&n.name,isStackedByIndexs,stackedOverDimensionr,stackResultDimensiona}}function hl(t,e){return!!e&&e===t.getCalculationInfo(stackedDimension)}function cl(t,e){return hl(t,e)t.getCalculationInfo(stackResultDimension)e}function dl(t,e,i){i=i{},va.isInstance(t)(t=va.seriesDataToSource(t));var n,o=e.get(coordinateSystem),a=Ba.get(o),r=ga(e);r&&(n=f(r.coordSysDims,function(t){var e={namet},i=r.axisMap.get(t);if(i){var n=i.get(type);e.type=Xs(n)}return e})),n(n=a&&(a.getDimensionsInfoa.getDimensionsInfo()a.dimensions.slice())[x,y]);var s,l,u=oA(t,{coordDimensionsn,generateCoordi.generateCoord});r&&d(u,function(t,e){var i=t.coordDim,n=r.categoryAxisMap.get(i);n&&(null==s&&(s=e),t.ordinalMeta=n.getOrdinalMeta()),null!=t.otherDims.itemName&&(l=!0)}),lnull==s(u[s].otherDims.itemName=0);var h=ul(e,u),c=new eA(u,e);c.setCalculationInfo(h);var p=null!=s&&fl(t)function(t,e,i,n){return n===sithis.defaultDimValueGetter(t,e,i,n)}null;return c.hasItemOption=!1,c.initData(t,null,p),c}function fl(t){if(t.sourceFormat===tI){var e=pl(t.data[]);return null!=e&&!y(Li(e))}}function pl(t){for(var e=0;et.length&&null==t[e];)e++;return t[e]}function gl(t){this._setting=t{},this._extent=[10,-10],this._interval=0,this.init&&this.init.apply(this,arguments)}function ml(t){this.categories=t.categories[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this._map}function vl(t){return t._map(t._map=R(t.categories))}function yl(t){return w(t)&&null!=t.valuet.valuet+}function xl(t,e,i,n){var o={},a=t[1]-t[0],r=o.interval=Yo(ae,!0);null!=i&&ri&&(r=o.interval=i),null!=n&&rn&&(r=o.interval=n);var s=o.intervalPrecision=_l(r);return bl(o.niceTickExtent=[lA(Math.ceil(t[0]r)r,s),lA(Math.floor(t[1]r)r,s)],t),o}function _l(t){return Go(t)+2}function wl(t,e,i){t[e]=Math.max(Math.min(t[e],i[1]),i[0])}function bl(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),wl(t,0,e),wl(t,1,e),t[0]t[1]&&(t[0]=t[1])}function Sl(t,e,i,n){var o=[];if(!t)return o;e[0]i[0]&&o.push(e[0]);for(var a=i[0];a=i[1]&&(o.push(a),(a=lA(a+t,n))!==o[o.length-1]);)if(o.length1e4)return[];return e[1](o.lengtho[o.length-1]i[1])&&o.push(e[1]),o}function Ml(t){return t.get(stack)cA+t.seriesIndex}function Il(t){return t.dim+t.index}function Tl(t){var e=[],i=t.axis;if(category===i.type){for(var n=i.getBandWidth(),o=0;ot.count;o++)e.push(r({bandWidthn,axisKeyaxis0,stackIdcA+o},t));for(var a=Cl(e),s=[],o=0;ot.count;o++){var l=a.axis0[cA+o];l.offsetCenter=l.offset+l.width2,s.push(l)}return s}}function Al(t,e){var i=[];return e.eachSeriesByType(t,function(t){Pl(t)&&!Nl(t)&&i.push(t)}),i}function Dl(t){var e=[];return d(t,function(t){var i=t.getData(),n=t.coordinateSystem.getBaseAxis(),o=n.getExtent(),a=category===n.typen.getBandWidth()Math.abs(o[1]-o[0])i.count(),r=Ro(t.get(barWidth),a),s=Ro(t.get(barMaxWidth),a),l=t.get(barGap),u=t.get(barCategoryGap);e.push({bandWidtha,barWidthr,barMaxWidths,barGapl,barCategoryGapu,axisKeyIl(n),stackIdMl(t)})}),Cl(e)}function Cl(t){var e={};d(t,function(t,i){var n=t.axisKey,o=t.bandWidth,a=e[n]{bandWidtho,remainedWidtho,autoWidthCount0,categoryGap20%,gap30%,stacks{}},r=a.stacks;e[n]=a;var s=t.stackId;r[s]a.autoWidthCount++,r[s]=r[s]{width0,maxWidth0};var l=t.barWidth;l&&!r[s].width&&(r[s].width=l,l=Math.min(a.remainedWidth,l),a.remainedWidth-=l);var u=t.barMaxWidth;u&&(r[s].maxWidth=u);var h=t.barGap;null!=h&&(a.gap=h);var c=t.barCategoryGap;null!=c&&(a.categoryGap=c)});var i={};return d(e,function(t,e){i[e]={};var n=t.stacks,o=t.bandWidth,a=Ro(t.categoryGap,o),r=Ro(t.gap,1),s=t.remainedWidth,l=t.autoWidthCount,u=(s-a)(l+(l-1)r);u=Math.max(u,0),d(n,function(t,e){var i=t.maxWidth;i&&iu&&(i=Math.min(i,s),t.width&&(i=Math.min(i,t.width)),s-=i,t.width=i,l--)}),u=(s-a)(l+(l-1)r),u=Math.max(u,0);var h,c=0;d(n,function(t,e){t.width(t.width=u),h=t,c+=t.width(1+r)}),h&&(c-=h.widthr);var f=-c2;d(n,function(t,n){i[e][n]=i[e][n]{offsetf,widtht.width},f+=t.width(1+r)})}),i}function Ll(t,e,i){if(t&&e){var n=t[Il(e)];return null!=n&&null!=i&&(n=n[Ml(i)]),n}}function kl(t,e){var i=Al(t,e),n=Dl(i),o={};d(i,function(t){var e=t.getData(),i=t.coordinateSystem,a=i.getBaseAxis(),r=Ml(t),s=n[Il(a)][r],l=s.offset,u=s.width,h=i.getOtherAxis(a),c=t.get(barMinHeight)0;o[r]=o[r][],e.setLayout({offsetl,sizeu});for(var d=e.mapDimension(h.dim),f=e.mapDimension(a.dim),p=hl(e,d),g=h.isHorizontal(),m=Ol(a,h,p),v=0,y=e.count();vy;v++){var x=e.get(d,v),_=e.get(f,v);if(!isNaN(x)){var w=x=0pn,b=m;p&&(o[r][_](o[r][_]={pm,nm}),b=o[r][_][w]);var S,M,I,T;if(g)S=b,M=(A=i.dataToPoint([x,_]))[1]+l,I=A[0]-m,T=u,Math.abs(I)c&&(I=(I0-11)c),p&&(o[r][_][w]+=I);else{var A=i.dataToPoint([_,x]);S=A[0]+l,M=b,I=u,T=A[1]-m,Math.abs(T)c&&(T=(T=0-11)c),p&&(o[r][_][w]+=T)}e.setItemLayout(v,{xS,yM,widthI,heightT})}}},this)}function Pl(t){return t.coordinateSystem&&cartesian2d===t.coordinateSystem.type}function Nl(t){return t.pipelineContext&&t.pipelineContext.large}function Ol(t,e,i){var n,o,a=e.getGlobalExtent();a[0]a[1](n=a[1],o=a[0])(n=a[0],o=a[1]);var r=e.toGlobalCoord(e.dataToCoord(0));return rn&&(r=n),ro&&(r=o),r}function El(t,e){return SA(t,bA(e))}function Rl(t,e){var i,n,o,a=t.type,r=e.getMin(),s=e.getMax(),l=null!=r,u=null!=s,h=t.getExtent();ordinal===ai=e.getCategories().length(y(n=e.get(boundaryGap))(n=[n0,n0]),boolean==typeof n[0]&&(n=[0,0]),n[0]=Ro(n[0],1),n[1]=Ro(n[1],1),o=h[1]-h[0]Math.abs(h[0])),null==r&&(r=ordinal===ai0NaNh[0]-n[0]o),null==s&&(s=ordinal===aii-1NaNh[1]+n[1]o),dataMin===rr=h[0]function==typeof r&&(r=r({minh[0],maxh[1]})),dataMax===ss=h[1]function==typeof s&&(s=s({minh[0],maxh[1]})),(null==r!isFinite(r))&&(r=NaN),(null==s!isFinite(s))&&(s=NaN),t.setBlank(I(r)I(s)ordinal===a&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(r0&&s0&&!l&&(r=0),r0&&s0&&!u&&(s=0));var c=e.ecModel;if(c&&time===a){var f,p=Al(bar,c);if(d(p,function(t){f=t.getBaseAxis()===e.axis}),f){var g=Dl(p),m=zl(r,s,e,g);r=m.min,s=m.max}}return[r,s]}function zl(t,e,i,n){var o=i.axis.getExtent(),a=o[1]-o[0],r=Ll(n,i.axis);if(void 0===r)return{mint,maxe};var s=10;d(r,function(t){s=Math.min(t.offset,s)});var l=-10;d(r,function(t){l=Math.max(t.offset+t.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,h=e-t,c=h(1-(s+l)a)-h;return e+=c(lu),t-=c(su),{mint,maxe}}function Bl(t,e){var i=Rl(t,e),n=null!=e.getMin(),o=null!=e.getMax(),a=e.get(splitNumber);log===t.type&&(t.base=e.get(logBase));var r=t.type;t.setExtent(i[0],i[1]),t.niceExtent({splitNumbera,fixMinn,fixMaxo,minIntervalinterval===rtime===re.get(minInterval)null,maxIntervalinterval===rtime===re.get(maxInterval)null});var s=e.get(interval);null!=s&&t.setInterval&&t.setInterval(s)}function Vl(t,e){if(e=et.get(type))switch(e){casecategoryreturn new sA(t.getOrdinalMetat.getOrdinalMeta()t.getCategories(),[10,-10]);casevaluereturn new hA;defaultreturn(gl.getClass(e)hA).create(t)}}function Gl(t){var e=t.scale.getExtent(),i=e[0],n=e[1];return!(i0&&n0i0&&n0)}function Fl(t){var e=t.getLabelModel().get(formatter),i=category===t.typet.scale.getExtent()[0]null;returnstring==typeof ee=function(e){return function(i){return i=t.scale.getLabel(i),e.replace({value},null!=ii)}}(e)function==typeof efunction(n,o){return null!=i&&(o=n-i),e(Wl(t,n),o)}function(e){return t.scale.getLabel(e)}}function Wl(t,e){returncategory===t.typet.scale.getLabel(e)e}function Hl(t){var e=t.model,i=t.scale;if(e.get(axisLabel.show)&&!i.isBlank()){var n,o,a=category===t.type,r=i.getExtent();o=ai.count()(n=i.getTicks()).length;var s,l=t.getLabelModel(),u=Fl(t),h=1;o40&&(h=Math.ceil(o40));for(var c=0;co;c+=h){var d=u(nn[c]r[0]+c),f=Zl(l.getTextRect(d),l.get(rotate)0);ss.union(f)s=f}return s}}function Zl(t,e){var i=eMath.PI180,n=t.plain(),o=n.width,a=n.height,r=oMath.cos(i)+aMath.sin(i),s=oMath.sin(i)+aMath.cos(i);return new ue(n.x,n.y,r,s)}function Ul(t,e){if(image!==this.type){var i=this.style,n=this.shape;n&&line===n.symbolTypei.stroke=tthis.__isEmptyBrush(i.stroke=t,i.fill=e#fff)(i.fill&&(i.fill=t),i.stroke&&(i.stroke=t)),this.dirty(!1)}}function Xl(t,e,i,n,o,a,r){var s=0===t.indexOf(empty);s&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var l;return l=0===t.indexOf(image)Hn(t.slice(8),new ue(e,i,n,o),rcentercover)0===t.indexOf(path)Wn(t.slice(7),{},new ue(e,i,n,o),rcentercover)new RA({shape{symbolTypet,xe,yi,widthn,heighto}}),l.__isEmptyBrush=s,l.setColor=Ul,l.setColor(a),l}function jl(t,e){return Math.abs(t-e)VA}function Yl(t,e,i){var n=0,o=t[0];if(!o)return!1;for(var a=1;at.length;a++){var r=t[a];n+=bn(o[0],o[1],r[0],r[1],e,i),o=r}var s=t[0];return jl(o[0],s[0])&&jl(o[1],s[1])(n+=bn(o[0],o[1],s[0],s[1],e,i)),0!==n}function ql(t,e,i){if(this.name=t,this.geometries=e,i)i=[i[0],i[1]];else{var n=this.getBoundingRect();i=[n.x+n.width2,n.y+n.height2]}this.center=i}function Kl(t){if(!t.UTF8Encoding)return t;var e=t.UTF8Scale;null==e&&(e=1024);for(var i=t.features,n=0;ni.length;n++)for(var o=i[n].geometry,a=o.coordinates,r=o.encodeOffsets,s=0;sa.length;s++){var l=a[s];if(Polygon===o.type)a[s]=$l(l,r[s],e);else if(MultiPolygon===o.type)for(var u=0;ul.length;u++){var h=l[u];l[u]=$l(h,r[s][u],e)}}return t.UTF8Encoding=!1,t}function $l(t,e,i){for(var n=[],o=e[0],a=e[1],r=0;rt.length;r+=2){var s=t.charCodeAt(r)-64,l=t.charCodeAt(r+1)-64;s=s1^-(1&s),l=l1^-(1&l),o=s+=o,a=l+=a,n.push([si,li])}return n}function Jl(t){returncategory===t.typetu(t)nu(t)}function Ql(t,e){returncategory===t.typeiu(t,e){tickst.scale.getTicks()}}function tu(t){var e=t.getLabelModel(),i=eu(t,e);return!e.get(show)t.scale.isBlank(){labels[],labelCategoryIntervali.labelCategoryInterval}i}function eu(t,e){var i=ou(t,labels),n=du(e),o=au(i,n);if(o)return o;var a,r;return a=x(n)cu(t,n)hu(t,r=auto===nsu(t)n),ru(i,n,{labelsa,labelCategoryIntervalr})}function iu(t,e){var i=ou(t,ticks),n=du(e),o=au(i,n);if(o)return o;var a,r;if(e.get(show)&&!t.scale.isBlank()(a=[]),x(n))a=cu(t,n,!0);else if(auto===n){var s=eu(t,t.getLabelModel());r=s.labelCategoryInterval,a=f(s.labels,function(t){return t.tickValue})}else a=hu(t,r=n,!0);return ru(i,n,{ticksa,tickCategoryIntervalr})}function nu(t){var e=t.scale.getTicks(),i=Fl(t);return{labelsf(e,function(e,n){return{formattedLabeli(e,n),rawLabelt.scale.getLabel(e),tickValuee}})}}function ou(t,e){return FA(t)[e](FA(t)[e]=[])}function au(t,e){for(var i=0;it.length;i++)if(t[i].key===e)return t[i].value}function ru(t,e,i){return t.push({keye,valuei}),i}function su(t){var e=FA(t).autoInterval;return null!=eeFA(t).autoInterval=t.calculateCategoryInterval()}function lu(t){var e=uu(t),i=Fl(t),n=(e.axisRotate-e.labelRotate)180Math.PI,o=t.scale,a=o.getExtent(),r=o.count();if(a[1]-a[0]1)return 0;var s=1;r40&&(s=Math.max(1,Math.floor(r40)));for(var l=a[0],u=t.dataToCoord(l+1)-t.dataToCoord(l),h=Math.abs(uMath.cos(n)),c=Math.abs(uMath.sin(n)),d=0,f=0;l=a[1];l+=s){var p=0,g=0,m=De(i(l),e.font,center,top);p=1.3m.width,g=1.3m.height,d=Math.max(d,p,7),f=Math.max(f,g,7)}var v=dh,y=fc;isNaN(v)&&(v=10),isNaN(y)&&(y=10);var x=Math.max(0,Math.floor(Math.min(v,y))),_=FA(t.model),w=_.lastAutoInterval,b=_.lastTickCount;return null!=w&&null!=b&&Math.abs(w-x)=1&&Math.abs(b-r)=1&&wxx=w(_.lastTickCount=r,_.lastAutoInterval=x),x}function uu(t){var e=t.getLabelModel();return{axisRotatet.getRotatet.getRotate()t.isHorizontal&&!t.isHorizontal()900,labelRotatee.get(rotate)0,fonte.getFont()}}function hu(t,e,i){function n(t){l.push(it{formattedLabelo(t),rawLabela.getLabel(t),tickValuet})}var o=Fl(t),a=t.scale,r=a.getExtent(),s=t.getLabelModel(),l=[],u=Math.max((e0)+1,1),h=r[0],c=a.count();0!==h&&u1&&cu2&&(h=Math.round(Math.ceil(hu)u));var d={mins.get(showMinLabel),maxs.get(showMaxLabel)};d.min&&h!==r[0]&&n(r[0]);for(var f=h;f=r[1];f+=u)n(f);return d.max&&f!==r[1]&&n(r[1]),l}function cu(t,e,i){var n=t.scale,o=Fl(t),a=[];return d(n.getTicks(),function(t){var r=n.getLabel(t);e(t,r)&&a.push(it{formattedLabelo(t),rawLabelr,tickValuet})}),a}function du(t){var e=t.get(interval);return null==eautoe}function fu(t,e){var i=(t[1]-t[0])e2;t[0]+=i,t[1]-=i}function pu(t,e,i,n,o){function a(t,e){return htete}var r=e.length;if(t.onBand&&!n&&r){var s,l=t.getExtent();if(1===r)e[0].coord=l[0],s=e[1]={coordl[0]};else{var u=e[1].coord-e[0].coord;d(e,function(t){t.coord-=u2;var e=e0;e%20&&(t.coord-=u(2(e+1)))}),s={coorde[r-1].coord+u},e.push(s)}var h=l[0]l[1];a(e[0].coord,l[0])&&(oe[0].coord=l[0]e.shift()),o&&a(l[0],e[0].coord)&&e.unshift({coordl[0]}),a(l[1],s.coord)&&(os.coord=l[1]e.pop()),o&&a(s.coord,l[1])&&e.push({coordl[1]})}}function gu(t,e){var i=t.mapDimension(defaultedLabel,!0),n=i.length;if(1===n)return hr(t,e,i[0]);if(n){for(var o=[],a=0;ai.length;a++){var r=hr(t,e,i[a]);o.push(r)}return o.join( )}}function mu(t,e,i){Zw.call(this),this.updateData(t,e,i)}function vu(t){return[t[0]2,t[1]2]}function yu(t,e){this.parent.drift(t,e)}function xu(){!oo(this)&&wu.call(this)}function _u(){!oo(this)&&bu.call(this)}function wu(){if(!this.incremental&&!this.useHoverLayer){var t=this.__symbolOriginalScale,e=t[1]t[0];this.animateTo({scale[Math.max(1.1t[0],t[0]+3),Math.max(1.1t[1],t[1]+3e)]},400,elasticOut)}}function bu(){this.incrementalthis.useHoverLayerthis.animateTo({scalethis.__symbolOriginalScale},400,elasticOut)}function Su(t){this.group=new Zw,this._symbolCtor=tmu}function Mu(t,e,i,n){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(n.isIgnore&&n.isIgnore(i))&&!(n.clipShape&&!n.clipShape.contain(e[0],e[1]))&&none!==t.getItemVisual(i,symbol)}function Iu(t){return null==tw(t)(t={isIgnoret}),t{}}function Tu(t){var e=t.hostModel;return{itemStylee.getModel(itemStyle).getItemStyle([color]),hoverItemStylee.getModel(emphasis.itemStyle).getItemStyle(),symbolRotatee.get(symbolRotate),symbolOffsete.get(symbolOffset),hoverAnimatione.get(hoverAnimation),labelModele.getModel(label),hoverLabelModele.getModel(emphasis.label),cursorStylee.get(cursor)}}function Au(t,e,i){var n,o=t.getBaseAxis(),a=t.getOtherAxis(o),r=Du(a,i),s=o.dim,l=a.dim,u=e.mapDimension(l),h=e.mapDimension(s),c=x===lradius===l10,d=f(t.dimensions,function(t){return e.mapDimension(t)}),p=e.getCalculationInfo(stackResultDimension);return(n=hl(e,d[0]))&&(d[0]=p),(n=hl(e,d[1]))&&(d[1]=p),{dataDimsForPointd,valueStartr,valueAxisDiml,baseAxisDims,stacked!!n,valueDimu,baseDimh,baseDataOffsetc,stackedOverDimensione.getCalculationInfo(stackedOverDimension)}}function Du(t,e){var i=0,n=t.scale.getExtent();returnstart===ei=n[0]end===ei=n[1]n[0]0i=n[0]n[1]0&&(i=n[1]),i}function Cu(t,e,i,n){var o=NaN;t.stacked&&(o=i.get(i.getCalculationInfo(stackedOverDimension),n)),isNaN(o)&&(o=t.valueStart);var a=t.baseDataOffset,r=[];return r[a]=i.get(t.baseDim,n),r[1-a]=o,e.dataToPoint(r)}function Lu(t,e){var i=[];return e.diff(t).add(function(t){i.push({cmd+,idxt})}).update(function(t,e){i.push({cmd=,idxe,idx1t})}).remove(function(t){i.push({cmd-,idxt})}).execute(),i}function ku(t){return isNaN(t[0])isNaN(t[1])}function Pu(t,e,i,n,o,a,r,s,l,u,h){returnnone!==u&&uNu.apply(this,arguments)Ou.apply(this,arguments)}function Nu(t,e,i,n,o,a,r,s,l,u,h){for(var c=0,d=i,f=0;fn;f++){var p=e[d];if(d=od0)break;if(ku(p)){if(h){d+=a;continue}break}if(d===i)t[a0moveTolineTo](p[0],p[1]);else if(l0){var g=e[c],m=y===u10,v=(p[m]-g[m])l;oD(rD,g),rD[m]=g[m]+v,oD(sD,p),sD[m]=p[m]-v,t.bezierCurveTo(rD[0],rD[1],sD[0],sD[1],p[0],p[1])}else t.lineTo(p[0],p[1]);c=d,d+=a}return f}function Ou(t,e,i,n,o,a,r,s,l,u,h){for(var c=0,d=i,f=0;fn;f++){var p=e[d];if(d=od0)break;if(ku(p)){if(h){d+=a;continue}break}if(d===i)t[a0moveTolineTo](p[0],p[1]),oD(rD,p);else if(l0){var g=d+a,m=e[g];if(h)for(;m&&ku(e[g]);)m=e[g+=a];var v=.5,y=e[c];if(!(m=e[g])ku(m))oD(sD,p);else{ku(m)&&!h&&(m=p),U(aD,m,y);var x,_;if(x===uy===u){var w=x===u01;x=Math.abs(p[w]-y[w]),_=Math.abs(p[w]-m[w])}else x=ew(p,y),_=ew(p,m);nD(sD,p,aD,-l(1-(v=_(_+x))))}eD(rD,rD,s),iD(rD,rD,r),eD(sD,sD,s),iD(sD,sD,r),t.bezierCurveTo(rD[0],rD[1],sD[0],sD[1],p[0],p[1]),nD(rD,p,aD,lv)}else t.lineTo(p[0],p[1]);c=d,d+=a}return f}function Eu(t,e){var i=[10,10],n=[-10,-10];if(e)for(var o=0;ot.length;o++){var a=t[o];a[0]i[0]&&(i[0]=a[0]),a[1]i[1]&&(i[1]=a[1]),a[0]n[0]&&(n[0]=a[0]),a[1]n[1]&&(n[1]=a[1])}return{minein,maxeni}}function Ru(t,e){if(t.length===e.length){for(var i=0;it.length;i++){var n=t[i],o=e[i];if(n[0]!==o[0]n[1]!==o[1])return}return!0}}function zu(t){returnnumber==typeof ttt.50}function Bu(t){var e=t.getGlobalExtent();if(t.onBand){var i=t.getBandWidth()2-1,n=e[1]e[0]1-1;e[0]+=ni,e[1]-=ni}return e}function Vu(t,e,i){if(!i.valueDim)return[];for(var n=[],o=0,a=e.count();oa;o++)n.push(Cu(i,t,e,o));return n}function Gu(t,e,i,n){var o=Bu(t.getAxis(x)),a=Bu(t.getAxis(y)),r=t.getBaseAxis().isHorizontal(),s=Math.min(o[0],o[1]),l=Math.min(a[0],a[1]),u=Math.max(o[0],o[1])-s,h=Math.max(a[0],a[1])-l;if(i)s-=.5,u+=.5,l-=.5,h+=.5;else{var c=n.get(lineStyle.width)2,d=n.get(clipOverflow)c2Math.max(u,h);r(l-=d,h+=2d)(s-=d,u+=2d)}var f=new aM({shape{xs,yl,widthu,heighth}});return e&&(f.shape[rwidthheight]=0,So(f,{shape{widthu,heighth}},n)),f}function Fu(t,e,i,n){var o=t.getAngleAxis(),a=t.getRadiusAxis().getExtent().slice();a[0]a[1]&&a.reverse();var r=o.getExtent(),s=Math.PI180;i&&(a[0]-=.5,a[1]+=.5);var l=new QS({shape{cxzo(t.cx,1),cyzo(t.cy,1),r0zo(a[0],1),rzo(a[1],1),startAngle-r[0]s,endAngle-r[1]s,clockwiseo.inverse}});return e&&(l.shape.endAngle=-r[0]s,So(l,{shape{endAngle-r[1]s}},n)),l}function Wu(t,e,i,n){returnpolar===t.typeFu(t,e,i,n)Gu(t,e,i,n)}function Hu(t,e,i){for(var n=e.getBaseAxis(),o=x===n.dimradius===n.dim01,a=[],r=0;rt.length-1;r++){var s=t[r+1],l=t[r];a.push(l);var u=[];switch(i){caseendu[o]=s[o],u[1-o]=l[1-o],a.push(u);break;casemiddlevar h=(l[o]+s[o])2,c=[];u[o]=c[o]=h,u[1-o]=l[1-o],c[1-o]=s[1-o],a.push(u),a.push(c);break;defaultu[o]=l[o],u[1-o]=s[1-o],a.push(u)}}return t[r]&&a.push(t[r]),a}function Zu(t,e){var i=t.getVisual(visualMeta);if(i&&i.length&&t.count()&&cartesian2d===e.type){for(var n,o,a=i.length-1;a=0;a--){var r=i[a].dimension,s=t.dimensions[r],l=t.getDimensionInfo(s);if(x===(n=l&&l.coordDim)y===n){o=i[a];break}}if(o){var u=e.getAxis(n),h=f(o.stops,function(t){return{coordu.toGlobalCoord(u.dataToCoord(t.value)),colort.color}}),c=h.length,p=o.outerColors.slice();c&&h[0].coordh[c-1].coord&&(h.reverse(),p.reverse());var g=h[0].coord-10,m=h[c-1].coord+10,v=m-g;if(v.001)returntransparent;d(h,function(t){t.offset=(t.coord-g)v}),h.push({offsetch[c-1].offset.5,colorp[1]transparent}),h.unshift({offsetch[0].offset.5,colorp[0]transparent});var y=new dM(0,0,0,0,h,!0);return y[n]=g,y[n+2]=m,y}}}function Uu(t,e,i){var n=t.get(showAllSymbol),o=auto===n;if(!no){var a=i.getAxesByScale(ordinal)[0];if(a&&(!o!Xu(a,e))){var r=e.mapDimension(a.dim),s={};return d(a.getViewLabels(),function(t){s[t.tickValue]=1}),function(t){return!s.hasOwnProperty(e.get(r,t))}}}}function Xu(t,e){var i=t.getExtent(),n=Math.abs(i[1]-i[0])t.scale.count();isNaN(n)&&(n=0);for(var o=e.count(),a=Math.max(1,Math.round(o5)),r=0;ro;r+=a)if(1.5mu.getSymbolSize(e,r)[t.isHorizontal()10]n)return!1;return!0}function ju(t){return this._axes[t]}function Yu(t){pD.call(this,t)}function qu(t,e){return e.type(e.datacategoryvalue)}function Ku(t,e,i){return t.getCoordSysModel()===e}function $u(t,e,i){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,i),this.model=t}function Ju(t,e,i,n){function o(t){return t.dim+_+t.index}i.getAxesOnZeroOf=function(){return a[a][]};var a,r=t[e],s=i.model,l=s.get(axisLine.onZero),u=s.get(axisLine.onZeroAxisIndex);if(l){if(null!=u)Qu(r[u])&&(a=r[u]);else for(var h in r)if(r.hasOwnProperty(h)&&Qu(r[h])&&!n[o(r[h])]){a=r[h];break}a&&(n[o(a)]=!0)}}function Qu(t){return t&&category!==t.type&&time!==t.type&&Gl(t)}function th(t,e){var i=t.getExtent(),n=i[0]+i[1];t.toGlobalCoord=x===t.dimfunction(t){return t+e}function(t){return n-t+e},t.toLocalCoord=x===t.dimfunction(t){return t-e}function(t){return n-t+e}}function eh(t,e){return f(SD,function(e){return t.getReferringComponents(e)[0]})}function ih(t){returncartesian2d===t.get(coordinateSystem)}function nh(t){var e={componentTypet.mainType,componentIndext.componentIndex};return e[t.mainType+Index]=t.componentIndex,e}function oh(t,e,i,n){var o,a,r=Ho(i-t.rotation),s=n[0]n[1],l=start===e&&!sstart!==e&&s;return Zo(r-MD2)(a=lbottomtop,o=center)Zo(r-1.5MD)(a=ltopbottom,o=center)(a=middle,o=r1.5MD&&rMD2lleftrightlrightleft),{rotationr,textAligno,textVerticalAligna}}function ah(t){var e=t.get(tooltip);return t.get(silent)!(t.get(triggerEvent)e&&e.show)}function rh(t,e,i){var n=t.get(axisLabel.showMinLabel),o=t.get(axisLabel.showMaxLabel);e=e[],i=i[];var a=e[0],r=e[1],s=e[e.length-1],l=e[e.length-2],u=i[0],h=i[1],c=i[i.length-1],d=i[i.length-2];!1===n(sh(a),sh(u))lh(a,r)&&(n(sh(r),sh(h))(sh(a),sh(u))),!1===o(sh(s),sh(c))lh(l,s)&&(o(sh(l),sh(d))(sh(s),sh(c)))}function sh(t){t&&(t.ignore=!0)}function lh(t,e,i){var n=t&&t.getBoundingRect().clone(),o=e&&e.getBoundingRect().clone();if(n&&o){var a=vt([]);return wt(a,a,-t.rotation),n.applyTransform(xt([],a,t.getLocalTransform())),o.applyTransform(xt([],a,e.getLocalTransform())),n.intersect(o)}}function uh(t){returnmiddle===tcenter===t}function hh(t,e,i){var n=e.axis;if(e.get(axisTick.show)&&!n.scale.isBlank()){for(var o=e.getModel(axisTick),a=o.getModel(lineStyle),s=o.get(length),l=n.getTicksCoords(),u=[],h=[],c=t._transform,d=[],f=0;fl.length;f++){var p=l[f].coord;u[0]=p,u[1]=0,h[0]=p,h[1]=i.tickDirections,c&&(Q(u,u,c),Q(h,h,c));var g=new rM(Xn({anidtick_+l[f].tickValue,shape{x1u[0],y1u[1],x2h[0],y2h[1]},styler(a.getLineStyle(),{strokee.get(axisLine.lineStyle.color)}),z22,silent!0}));t.group.add(g),d.push(g)}return d}}function ch(t,e,i){var n=e.axis;if(T(i.axisLabelShow,e.get(axisLabel.show))&&!n.scale.isBlank()){var o=e.getModel(axisLabel),a=o.get(margin),r=n.getViewLabels(),s=(T(i.labelRotate,o.get(rotate))0)MD180,l=AD(i.rotation,s,i.labelDirection),u=e.getCategories(!0),h=[],c=ah(e),f=e.get(triggerEvent);return d(r,function(r,s){var d=r.tickValue,p=r.formattedLabel,g=r.rawLabel,m=o;u&&u[d]&&u[d].textStyle&&(m=new Lo(u[d].textStyle,o,e.ecModel));var v=m.getTextColor()e.get(axisLine.lineStyle.color),y=[n.dataToCoord(d),i.labelOffset+i.labelDirectiona],x=new qS({anidlabel_+d,positiony,rotationl.rotation,silentc,z210});fo(x.style,m,{textp,textAlignm.getShallow(align,!0)l.textAlign,textVerticalAlignm.getShallow(verticalAlign,!0)m.getShallow(baseline,!0)l.textVerticalAlign,textFillfunction==typeof vv(category===n.typegvalue===n.typed+d,s)v}),f&&(x.eventData=nh(e),x.eventData.targetType=axisLabel,x.eventData.value=g),t._dumbGroup.add(x),x.updateTransform(),h.push(x),t.group.add(x),x.decomposeTransform()}),h}}function dh(t,e){var i={axesInfo{},seriesInvolved!1,coordSysAxesInfo{},coordSysMap{}};return fh(i,t,e),i.seriesInvolved&&gh(i,t),i}function fh(t,e,i){var n=e.getComponent(tooltip),o=e.getComponent(axisPointer),a=o.get(link,!0)[],r=[];DD(i.getCoordinateSystems(),function(i){function s(n,s,l){var c=l.model.getModel(axisPointer,o),d=c.get(show);if(d&&(auto!==dnwh(c))){null==s&&(s=c.get(triggerTooltip));var f=(c=nph(l,h,o,e,n,s)c).get(snap),p=bh(l.model),g=sfcategory===l.type,m=t.axesInfo[p]={keyp,axisl,coordSysi,axisPointerModelc,triggerTooltips,involveSeriesg,snapf,useHandlewh(c),seriesModels[]};u[p]=m,t.seriesInvolved=g;var v=mh(a,l);if(null!=v){var y=r[v](r[v]={axesInfo{}});y.axesInfo[p]=m,y.mapper=a[v].mapper,m.linkGroup=y}}}if(i.axisPointerEnabled){var l=bh(i.model),u=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=i;var h=i.model.getModel(tooltip,n);if(DD(i.getAxes(),CD(s,!1,null)),i.getTooltipAxes&&n&&h.get(show)){var c=axis===h.get(trigger),d=cross===h.get(axisPointer.type),f=i.getTooltipAxes(h.get(axisPointer.axis));(cd)&&DD(f.baseAxes,CD(s,!dcross,c)),d&&DD(f.otherAxes,CD(s,cross,!1))}}})}function ph(t,e,n,o,a,s){var l=e.getModel(axisPointer),u={};DD([type,snap,lineStyle,shadowStyle,label,animation,animationDurationUpdate,animationEasingUpdate,z],function(t){u[t]=i(l.get(t))}),u.snap=category!==t.type&&!!s,cross===l.get(type)&&(u.type=line);var h=u.label(u.label={});if(null==h.show&&(h.show=!1),cross===a){var c=l.get(label.show);if(h.show=null==cc,!s){var d=u.lineStyle=l.get(crossStyle);d&&r(h,d.textStyle)}}return t.model.getModel(axisPointer,new Lo(u,n,o))}function gh(t,e){e.eachSeries(function(e){var i=e.coordinateSystem,n=e.get(tooltip.trigger,!0),o=e.get(tooltip.show,!0);i&&none!==n&&!1!==n&&item!==n&&!1!==o&&!1!==e.get(axisPointer.show,!0)&&DD(t.coordSysAxesInfo[bh(i.model)],function(t){var n=t.axis;i.getAxis(n.dim)===n&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())})},this)}function mh(t,e){for(var i=e.model,n=e.dim,o=0;ot.length;o++){var a=t[o]{};if(vh(a[n+AxisId],i.id)vh(a[n+AxisIndex],i.componentIndex)vh(a[n+AxisName],i.name))return o}}function vh(t,e){returnall===ty(t)&&l(t,e)=0t===e}function yh(t){var e=xh(t);if(e){var i=e.axisPointerModel,n=e.axis.scale,o=i.option,a=i.get(status),r=i.get(value);null!=r&&(r=n.parse(r));var s=wh(i);null==a&&(o.status=sshowhide);var l=n.getExtent().slice();l[0]l[1]&&l.reverse(),(null==rrl[1])&&(r=l[1]),rl[0]&&(r=l[0]),o.value=r,s&&(o.status=e.axis.scale.isBlank()hideshow)}}function xh(t){var e=(t.ecModel.getComponent(axisPointer){}).coordSysAxesInfo;return e&&e.axesInfo[bh(t)]}function _h(t){var e=xh(t);return e&&e.axisPointerModel}function wh(t){return!!t.get(handle.show)}function bh(t){return t.type++t.id}function Sh(t,e,i,n,o,a){var r=LD.getAxisPointerClass(t.axisPointerClass);if(r){var s=_h(e);s(t._axisPointer(t._axisPointer=new r)).render(e,s,n,a)Mh(t,n)}}function Mh(t,e,i){var n=t._axisPointer;n&&n.dispose(e,i),t._axisPointer=null}function Ih(t,e,i){i=i{};var n=t.coordinateSystem,o=e.axis,a={},r=o.getAxesOnZeroOf()[0],s=o.position,l=ronZeros,u=o.dim,h=n.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],d={left0,right1,top0,bottom1,onZero2},f=e.get(offset)0,p=x===u[c[2]-f,c[3]+f][c[0]-f,c[1]+f];if(r){var g=r.toGlobalCoord(r.dataToCoord(0));p[d.onZero]=Math.max(Math.min(g,p[1]),p[0])}a.position=[y===up[d[l]]c[0],x===up[d[l]]c[3]],a.rotation=Math.PI2(x===u01);var m={top-1,bottom1,left-1,right1};a.labelDirection=a.tickDirection=a.nameDirection=m[s],a.labelOffset=rp[d[s]]-p[d.onZero]0,e.get(axisTick.inside)&&(a.tickDirection=-a.tickDirection),T(i.labelInside,e.get(axisLabel.inside))&&(a.labelDirection=-a.labelDirection);var v=e.get(axisLabel.rotate);return a.labelRotate=top===l-vv,a.z2=1,a}function Th(t,e,i,n,o,a,r){co(t,e,i.getModel(label),i.getModel(emphasis.label),{labelFetchero,labelDataIndexa,defaultTextgu(o.getData(),a),isRectText!0,autoColorn}),Ah(t),Ah(e)}function Ah(t,e){outside===t.textPosition&&(t.textPosition=e)}function Dh(t,e,i){i.style.text=null,bo(i,{shape{width0}},e,t,function(){i.parent&&i.parent.remove(i)})}function Ch(t,e,i){i.style.text=null,bo(i,{shape{ri.shape.r0}},e,t,function(){i.parent&&i.parent.remove(i)})}function Lh(t,e,i,n,o,a,s,l){var u=e.getItemVisual(i,color),h=e.getItemVisual(i,opacity),c=n.getModel(itemStyle),d=n.getModel(emphasis.itemStyle).getBarItemStyle();lt.setShape(r,c.get(barBorderRadius)0),t.useStyle(r({fillu,opacityh},c.getBarItemStyle()));var f=n.getShallow(cursor);f&&t.attr(cursor,f);var p=so.height0bottomtopo.width0leftright;lTh(t.style,d,n,u,a,i,p),uo(t,d)}function kh(t,e){var i=t.get(BD)0;return Math.min(i,Math.abs(e.width),Math.abs(e.height))}function Ph(t,e,i){var n=t.getData(),o=[],a=n.getLayout(valueAxisHorizontal)10;o[1-a]=n.getLayout(valueAxisStart);var r=new FD({shape{pointsn.getLayout(largePoints)},incremental!!i,__startPointo,__valueIdxa});e.add(r),Nh(r,t,n)}function Nh(t,e,i){var n=i.getVisual(borderColor)i.getVisual(color),o=e.getModel(itemStyle).getItemStyle([color,borderColor]);t.useStyle(o),t.style.fill=null,t.style.stroke=n,t.style.lineWidth=i.getLayout(barWidth)}function Oh(t,e,i,n){var o=e.getData(),a=this.dataIndex,r=o.getName(a),s=e.get(selectedOffset);n.dispatchAction({typepieToggleSelect,fromt,namer,seriesIde.id}),o.each(function(t){Eh(o.getItemGraphicEl(t),o.getItemLayout(t),e.isSelected(o.getName(t)),s,i)})}function Eh(t,e,i,n,o){var a=(e.startAngle+e.endAngle)2,r=Math.cos(a),s=Math.sin(a),l=in0,u=[rl,sl];ot.animate().when(200,{positionu}).start(bounceOut)t.attr(position,u)}function Rh(t,e){function i(){a.ignore=a.hoverIgnore,r.ignore=r.hoverIgnore}function n(){a.ignore=a.normalIgnore,r.ignore=r.normalIgnore}Zw.call(this);var o=new QS({z22}),a=new oM,r=new qS;this.add(o),this.add(a),this.add(r),this.updateData(t,e,!0),this.on(emphasis,i).on(normal,n).on(mouseover,i).on(mouseout,n)}function zh(t,e,i,n,o,a,r){function s(e,i){for(var n=e;n=0&&(t[n].y-=i,!(n0&&t[n].yt[n-1].y+t[n-1].height));n--);}function l(t,e,i,n,o,a){for(var r=eNumber.MAX_VALUE0,s=0,l=t.length;sl;s++)if(center!==t[s].position){var u=Math.abs(t[s].y-n),h=t[s].len,c=t[s].len2,d=uo+hMath.sqrt((o+h+c)(o+h+c)-uu)Math.abs(t[s].x-i);e&&d=r&&(d=r-10),!e&&d=r&&(d=r+10),t[s].x=i+da,r=d}}t.sort(function(t,e){return t.y-e.y});for(var u,h=0,c=t.length,d=[],f=[],p=0;pc;p++)(u=t[p].y-h)0&&function(e,i,n,o){for(var a=e;ai;a++)if(t[a].y+=n,ae&&a+1i&&t[a+1].yt[a].y+t[a].height)return void s(a,n2);s(i-1,n2)}(p,c,-u),h=t[p].y+t[p].height;r-h0&&s(c-1,h-r);for(p=0;pc;p++)t[p].y=if.push(t[p])d.push(t[p]);l(d,!1,e,i,n,o),l(f,!0,e,i,n,o)}function Bh(t,e,i,n,o,a){for(var r=[],s=[],l=0;lt.length;l++)t[l].xer.push(t[l])s.push(t[l]);zh(s,e,i,n,1,o,a),zh(r,e,i,n,-1,o,a);for(l=0;lt.length;l++){var u=t[l].linePoints;if(u){var h=u[1][0]-u[2][0];t[l].xeu[2][0]=t[l].x+3u[2][0]=t[l].x-3,u[1][1]=u[2][1]=t[l].y,u[1][0]=u[2][0]+h}}}function Vh(){this.group=new Zw}function Gh(t,e,i){HA.call(this,t,e,i),this.type=value,this.angle=0,this.name=,this.model}function Fh(t,e,i){this._model=t,this.dimensions=[],this._indicatorAxes=f(t.getIndicatorModels(),function(t,e){var i=indicator_+e,n=new Gh(i,new hA);return n.name=t.get(name),n.model=t,t.axis=n,this.dimensions.push(i),n},this),this.resize(t,i),this.cx,this.cy,this.r,this.r0,this.startAngle}function Wh(t,e){return r({showe},t)}function Hh(t){return y(t)(t=[+t,+t]),t}function Zh(){mw.call(this)}function Uh(t){this.name=t,this.zoomLimit,mw.call(this),this._roamTransformable=new Zh,this._rawTransformable=new Zh,this._center,this._zoom}function Xh(t,e,i,n){var o=i.seriesModel,a=oo.coordinateSystemnull;return a===thisa[t](n)null}function jh(t){for(var e,i=0;it.length;i++){var n=t[i].getBoundingRect();(e=en.clone()).union(n)}return e}function Yh(t,e){var i,n,o=t.svgXML;try{k(null!=(n=(i=o&&ns(o,{ignoreViewBox!0,ignoreRootClip!0}){}).root))}catch(t){throw new Error(Invalid svg formatn+t.message)}var a=i.width,r=i.height,s=i.viewBoxRect;if(e(e=null==anull==rn.getBoundingRect()new ue(0,0,0,0),null!=a&&(e.width=a),null!=r&&(e.height=r)),s){var l=is(s,e.width,e.height),u=n;(n=new Zw).add(u),u.scale=l.scale,u.position=l.position}return n.setClipPath(new aM({shapee.plain()})),{rootn,boundingRecte}}function qh(t){return function(e,i){var n=[];return d(Kh(e),function(o){var a=yC[o.type][t];a&&n.push(a(e,o,i))}),n}}function Kh(t){return pT.retrieveMap(t)[]}function $h(t,e,i,n){Uh.call(this,t),this.map=e;var o=xC.load(e,i);this._nameCoordMap=o.nameCoordMap,this._regionsMap=o.nameCoordMap,this._invertLongitute=null==nn,this.regions=o.regions,this._rect=o.boundingRect}function Jh(t,e,i,n){var o=i.geoModel,a=i.seriesModel,r=oo.coordinateSystemaa.coordinateSystem(a.getReferringComponents(geo)[0]{}).coordinateSystemnull;return r===thisr[t](n)null}function Qh(t,e){var i=t.get(boundingCoords);if(null!=i){var n=i[0],o=i[1];isNaN(n[0])isNaN(n[1])isNaN(o[0])isNaN(o[1])this.setBoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1])}var a,r=this.getBoundingRect(),s=t.get(layoutCenter),l=t.get(layoutSize),u=e.getWidth(),h=e.getHeight(),c=r.widthr.heightthis.aspectScale,d=!1;s&&l&&(s=[Ro(s[0],u),Ro(s[1],h)],l=Ro(l,Math.min(u,h)),isNaN(s[0])isNaN(s[1])isNaN(l)(d=!0));if(d){var f={};c1(f.width=l,f.height=lc)(f.height=l,f.width=lc),f.y=s[1]-f.height2,f.x=s[0]-f.width2}else(a=t.getBoxLayoutParams()).aspect=c,f=la(a,{widthu,heighth});this.setViewRect(f.x,f.y,f.width,f.height),this.setCenter(t.get(center)),this.setZoom(t.get(zoom))}function tc(t,e){d(e.get(geoCoord),function(e,i){t.addGeoCoord(i,e)})}function ec(t,e,i){oc(t)[e]=i}function ic(t,e,i){var n=oc(t);n[e]===i&&(n[e]=null)}function nc(t,e){return!!oc(t)[e]}function oc(t){return t[bC](t[bC]={})}function ac(t){this.pointerChecker,this._zr=t,this._opt={};var e=m,n=e(rc,this),o=e(sc,this),a=e(lc,this),s=e(uc,this),l=e(hc,this);aw.call(this),this.setPointerChecker=function(t){this.pointerChecker=t},this.enable=function(e,u){this.disable(),this._opt=r(i(u){},{zoomOnMouseWheel!0,moveOnMouseMove!0,moveOnMouseWheel!1,preventDefaultMouseMove!0}),null==e&&(e=!0),!0!==e&&move!==e&&pan!==e(t.on(mousedown,n),t.on(mousemove,o),t.on(mouseup,a)),!0!==e&&scale!==e&&zoom!==e(t.on(mousewheel,s),t.on(pinch,l))},this.disable=function(){t.off(mousedown,n),t.off(mousemove,o),t.off(mouseup,a),t.off(mousewheel,s),t.off(pinch,l)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function rc(t){if(!(ct(t)t.target&&t.target.draggable)){var e=t.offsetX,i=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,i)&&(this._x=e,this._y=i,this._dragging=!0)}}function sc(t){if(!ct(t)&&fc(moveOnMouseMove,t,this._opt)&&this._dragging&&pinch!==t.gestureEvent&&!nc(this._zr,globalPan)){var e=t.offsetX,i=t.offsetY,n=this._x,o=this._y,a=e-n,r=i-o;this._x=e,this._y=i,this._opt.preventDefaultMouseMove&&lw(t.event),dc(this,pan,moveOnMouseMove,t,{dxa,dyr,oldXn,oldYo,newXe,newYi})}}function lc(t){ct(t)(this._dragging=!1)}function uc(t){var e=fc(zoomOnMouseWheel,t,this._opt),i=fc(moveOnMouseWheel,t,this._opt),n=t.wheelDelta,o=Math.abs(n),a=t.offsetX,r=t.offsetY;if(0!==n&&(ei)){if(e){var s=o31.4o11.21.1;cc(this,zoom,zoomOnMouseWheel,t,{scalen0s1s,originXa,originYr})}if(i){var l=Math.abs(n);cc(this,scrollMove,moveOnMouseWheel,t,{scrollDelta(n01-1)(l3.4l1.15.05),originXa,originYr})}}}function hc(t){nc(this._zr,globalPan)cc(this,zoom,null,t,{scalet.pinchScale11.111.1,originXt.pinchX,originYt.pinchY})}function cc(t,e,i,n,o){t.pointerChecker&&t.pointerChecker(n,o.originX,o.originY)&&(lw(n.event),dc(t,e,i,n,o))}function dc(t,e,i,n,o){o.isAvailableBehavior=m(fc,null,i,n),t.trigger(e,o)}function fc(t,e,i){var n=i[t];return!tn&&(!_(n)e.event[n+Key])}function pc(t,e,i){var n=t.target,o=n.position;o[0]+=e,o[1]+=i,n.dirty()}function gc(t,e,i,n){var o=t.target,a=t.zoomLimit,r=o.position,s=o.scale,l=t.zoom=t.zoom1;if(l=e,a){var u=a.min0,h=a.max10;l=Math.max(Math.min(h,l),u)}var c=lt.zoom;t.zoom=l,r[0]-=(i-r[0])(c-1),r[1]-=(n-r[1])(c-1),s[0]=c,s[1]=c,o.dirty()}function mc(t,e,i){var n=e.getComponentByElement(t.topTarget),o=n&&n.coordinateSystem;return n&&n!==i&&!SC[n.mainType]&&o&&o.model!==i}function vc(t,e){var i=t.getItemStyle(),n=t.get(areaColor);return null!=n&&(i.fill=n),i}function yc(t,e,i,n,o){i.off(click),i.off(mousedown),e.get(selectedMode)&&(i.on(mousedown,function(){t._mouseDownFlag=!0}),i.on(click,function(a){if(t._mouseDownFlag){t._mouseDownFlag=!1;for(var r=a.target;!r.__regions;)r=r.parent;if(r){var s={type(geo===e.mainTypegeomap)+ToggleSelect,batchf(r.__regions,function(t){return{namet.name,fromo.uid}})};s[e.mainType+Id]=e.id,n.dispatchAction(s),xc(e,i)}}}))}function xc(t,e){e.eachChild(function(e){d(e.__regions,function(i){e.trigger(t.isSelected(i.name)emphasisnormal)})})}function _c(t,e){var i=new Zw;this.uid=No(ec_map_draw),this._controller=new ac(t.getZr()),this._controllerHost={targeteinull},this.group=i,this._updateGroup=e,this._mouseDownFlag,this._mapName,this._initialized,i.add(this._regionsGroup=new Zw),i.add(this._backgroundGroup=new Zw)}function wc(t,e,i){var n=t.getZoom(),o=t.getCenter(),a=e.zoom,r=t.dataToPoint(o);if(null!=e.dx&&null!=e.dy){r[0]-=e.dx,r[1]-=e.dy;o=t.pointToData(r);t.setCenter(o)}if(null!=a){if(i){var s=i.min0,l=i.max10;a=Math.max(Math.min(na,l),s)n}t.scale[0]=a,t.scale[1]=a;var u=t.position,h=(e.originX-u[0])(a-1),c=(e.originY-u[1])(a-1);u[0]-=h,u[1]-=c,t.updateTransform();o=t.pointToData(r);t.setCenter(o),t.setZoom(an)}return{centert.getCenter(),zoomt.getZoom()}}function bc(t,e){var i={};return d(t,function(t){t.each(t.mapDimension(value),function(e,n){var o=ec-+t.getName(n);i[o]=i[o][],isNaN(e)i[o].push(e)})}),t[0].map(t[0].mapDimension(value),function(n,o){for(var a=ec-+t[0].getName(o),r=0,s=10,l=-10,u=i[a].length,h=0;hu;h++)s=Math.min(s,i[a][h]),l=Math.max(l,i[a][h]),r+=i[a][h];var c;return c=min===esmax===elaverage===erur,0===uNaNc})}function Sc(t){var e=t.mainData,i=t.datas;i(i={maine},t.datasAttr={maindata}),t.datas=t.mainData=null,Cc(e,i,t),MC(i,function(i){MC(e.TRANSFERABLE_METHODS,function(e){i.wrapMethod(e,v(Mc,t))})}),e.wrapMethod(cloneShallow,v(Tc,t)),MC(e.CHANGABLE_METHODS,function(i){e.wrapMethod(i,v(Ic,t))}),k(i[e.dataType]===e)}function Mc(t,e){if(Dc(this)){var i=a({},this[IC]);i[this.dataType]=e,Cc(e,i,t)}else Lc(e,this.dataType,this[TC],t);return e}function Ic(t,e){return t.struct&&t.struct.update(this),e}function Tc(t,e){return MC(e[IC],function(i,n){i!==e&&Lc(i.cloneShallow(),n,e,t)}),e}function Ac(t){var e=this[TC];return null==tnull==eee[IC][t]}function Dc(t){return t[TC]===t}function Cc(t,e,i){t[IC]={},MC(e,function(e,n){Lc(e,n,t,i)})}function Lc(t,e,i,n){i[IC][e]=t,t[TC]=i,t.dataType=e,n.struct&&(t[n.structAttr]=n.struct,n.struct[n.datasAttr[e]]=t),t.getLinkedData=Ac}function kc(t,e,i){this.root,this.data,this._nodes=[],this.hostModel=t,this.levelModels=f(e[],function(e){return new Lo(e,t,t.ecModel)}),this.leavesModel=new Lo(i{},t,t.ecModel)}function Pc(t,e){var i=e.children;t.parentNode!==e&&(i.push(t),t.parentNode=e)}function Nc(t){t.hierNode={defaultAncestornull,ancestort,prelim0,modifier0,change0,shift0,i0,threadnull};for(var e,i,n=[t];e=n.pop();)if(i=e.children,e.isExpand&&i.length)for(var o=i.length-1;o=0;o--){var a=i[o];a.hierNode={defaultAncestornull,ancestora,prelim0,modifier0,change0,shift0,io,threadnull},n.push(a)}}function Oc(t,e){var i=t.isExpandt.children[],n=t.parentNode.children,o=t.hierNode.in[t.hierNode.i-1]null;if(i.length){Vc(t);var a=(i[0].hierNode.prelim+i[i.length-1].hierNode.prelim)2;o(t.hierNode.prelim=o.hierNode.prelim+e(t,o),t.hierNode.modifier=t.hierNode.prelim-a)t.hierNode.prelim=a}else o&&(t.hierNode.prelim=o.hierNode.prelim+e(t,o));t.parentNode.hierNode.defaultAncestor=Gc(t,o,t.parentNode.hierNode.defaultAncestorn[0],e)}function Ec(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({xe},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function Rc(t){return arguments.lengthtUc}function zc(t,e){var i={};return t-=Math.PI2,i.x=eMath.cos(t),i.y=eMath.sin(t),i}function Bc(t,e){return la(t.getBoxLayoutParams(),{widthe.getWidth(),heighte.getHeight()})}function Vc(t){for(var e=t.children,i=e.length,n=0,o=0;--i=0;){var a=e[i];a.hierNode.prelim+=n,a.hierNode.modifier+=n,o+=a.hierNode.change,n+=a.hierNode.shift+o}}function Gc(t,e,i,n){if(e){for(var o=t,a=t,r=a.parentNode.children[0],s=e,l=o.hierNode.modifier,u=a.hierNode.modifier,h=r.hierNode.modifier,c=s.hierNode.modifier;s=Fc(s),a=Wc(a),s&&a;){o=Fc(o),r=Wc(r),o.hierNode.ancestor=t;var d=s.hierNode.prelim+c-a.hierNode.prelim-u+n(s,a);d0&&(Zc(Hc(s,t,i),t,d),u+=d,l+=d),c+=s.hierNode.modifier,u+=a.hierNode.modifier,l+=o.hierNode.modifier,h+=r.hierNode.modifier}s&&!Fc(o)&&(o.hierNode.thread=s,o.hierNode.modifier+=c-l),a&&!Wc(r)&&(r.hierNode.thread=a,r.hierNode.modifier+=u-h,i=t)}return i}function Fc(t){var e=t.children;return e.length&&t.isExpande[e.length-1]t.hierNode.thread}function Wc(t){var e=t.children;return e.length&&t.isExpande[0]t.hierNode.thread}function Hc(t,e,i){return t.hierNode.ancestor.parentNode===e.parentNodet.hierNode.ancestori}function Zc(t,e,i){var n=i(e.hierNode.i-t.hierNode.i);e.hierNode.change-=n,e.hierNode.shift+=i,e.hierNode.modifier+=i,e.hierNode.prelim+=i,t.hierNode.change+=n}function Uc(t,e){return t.parentNode===e.parentNode12}function Xc(t,e){var i=t.getItemLayout(e);return i&&!isNaN(i.x)&&!isNaN(i.y)&&none!==t.getItemVisual(e,symbol)}function jc(t,e,i){return i.itemModel=e,i.itemStyle=e.getModel(itemStyle).getItemStyle(),i.hoverItemStyle=e.getModel(emphasis.itemStyle).getItemStyle(),i.lineStyle=e.getModel(lineStyle).getLineStyle(),i.labelModel=e.getModel(label),i.hoverLabelModel=e.getModel(emphasis.label),!1===t.isExpand&&0!==t.children.lengthi.symbolInnerColor=i.itemStyle.filli.symbolInnerColor=#fff,i}function Yc(t,e,i,n,o,a){var s=!i,l=t.tree.getNodeByDataIndex(e),a=jc(l,l.getModel(),a),u=t.tree.root,h=l.parentNode===ull.parentNodel,c=t.getItemGraphicEl(h.dataIndex),d=h.getLayout(),f=c{xc.position[0],yc.position[1],rawXc.__radialOldRawX,rawYc.__radialOldRawY}d,p=l.getLayout();s(i=new mu(t,e,a)).attr(position,[f.x,f.y])i.updateData(t,e,a),i.__radialOldRawX=i.__radialRawX,i.__radialOldRawY=i.__radialRawY,i.__radialRawX=p.rawX,i.__radialRawY=p.rawY,n.add(i),t.setItemGraphicEl(e,i),bo(i,{position[p.x,p.y]},o);var g=i.getSymbolPath();if(radial===a.layout){var m,v,y=u.children[0],x=y.getLayout(),_=y.children.length;if(p.x===x.x&&!0===l.isExpand){var w={};w.x=(y.children[0].getLayout().x+y.children[_-1].getLayout().x)2,w.y=(y.children[0].getLayout().y+y.children[_-1].getLayout().y)2,(m=Math.atan2(w.y-x.y,w.x-x.x))0&&(m=2Math.PI+m),(v=w.xx.x)&&(m-=Math.PI)}else(m=Math.atan2(p.y-x.y,p.x-x.x))0&&(m=2Math.PI+m),0===l.children.length0!==l.children.length&&!1===l.isExpand(v=p.xx.x)&&(m-=Math.PI)(v=p.xx.x)(m-=Math.PI);var b=vleftright;g.setStyle({textPositionb,textRotation-m,textOrigincenter,verticalAlignmiddle})}if(l.parentNode&&l.parentNode!==u){var S=i.__edge;S(S=i.__edge=new lM({shapeKc(a,f,f),styler({opacity0,strokeNoScale!0},a.lineStyle)})),bo(S,{shapeKc(a,d,p),style{opacity1}},o),n.add(S)}}function qc(t,e,i,n,o,a){for(var r,s=t.tree.getNodeByDataIndex(e),l=t.tree.root,a=jc(s,s.getModel(),a),u=s.parentNode===lss.parentNodes;null==(r=u.getLayout());)u=u.parentNode===luu.parentNodeu;bo(i,{position[r.x+1,r.y+1]},o,function(){n.remove(i),t.setItemGraphicEl(e,null)}),i.fadeOut(null,{keepLabel!0});var h=i.__edge;h&&bo(h,{shapeKc(a,r,r),style{opacity0}},o,function(){n.remove(h)})}function Kc(t,e,i){var n,o,a,r,s,l,u,h,c=t.orient;if(radial===t.layout){s=e.rawX,u=e.rawY,l=i.rawX,h=i.rawY;var d=zc(s,u),f=zc(s,u+(h-u)t.curvature),p=zc(l,h+(u-h)t.curvature),g=zc(l,h);return{x1d.x,y1d.y,x2g.x,y2g.y,cpx1f.x,cpy1f.y,cpx2p.x,cpy2p.y}}return s=e.x,u=e.y,l=i.x,h=i.y,LR!==c&&RL!==c(n=s+(l-s)t.curvature,o=u,a=l+(s-l)t.curvature,r=h),TB!==c&&BT!==c(n=s,o=u+(h-u)t.curvature,a=l,r=h+(u-h)t.curvature),{x1s,y1u,x2l,y2h,cpx1n,cpy1o,cpx2a,cpy2r}}function $c(t,e,i){for(var n,o=[t],a=[];n=o.pop();)if(a.push(n),n.isExpand){var r=n.children;if(r.length)for(var s=0;sr.length;s++)o.push(r[s])}for(;n=a.pop();)e(n,i)}function Jc(t,e){for(var i,n=[t];i=n.pop();)if(e(i),i.isExpand){var o=i.children;if(o.length)for(var a=o.length-1;a=0;a--)n.push(o[a])}}function Qc(t,e){var i=Bc(t,e);t.layoutInfo=i;var n=t.get(layout),o=0,a=0,r=null;radial===n(o=2Math.PI,a=Math.min(i.height,i.width)2,r=Rc(function(t,e){return(t.parentNode===e.parentNode12)t.depth}))(o=i.width,a=i.height,r=Rc());var s=t.getData().tree.root,l=s.children[0];if(l){Nc(s),$c(l,Oc,r),s.hierNode.modifier=-l.hierNode.prelim,Jc(l,Ec);var u=l,h=l,c=l;Jc(l,function(t){var e=t.getLayout().x;eu.getLayout().x&&(u=t),eh.getLayout().x&&(h=t),t.depthc.depth&&(c=t)});var d=u===h1r(u,h)2,f=d-u.getLayout().x,p=0,g=0,m=0,v=0;if(radial===n)p=o(h.getLayout().x+d+f),g=a(c.depth-11),Jc(l,function(t){m=(t.getLayout().x+f)p,v=(t.depth-1)g;var e=zc(m,v);t.setLayout({xe.x,ye.y,rawXm,rawYv},!0)});else{var y=t.getOrient();RL===yLR===y(g=a(h.getLayout().x+d+f),p=o(c.depth-11),Jc(l,function(t){v=(t.getLayout().x+f)g,m=LR===y(t.depth-1)po-(t.depth-1)p,t.setLayout({xm,yv},!0)}))TB!==y&&BT!==y(p=o(h.getLayout().x+d+f),g=a(c.depth-11),Jc(l,function(t){m=(t.getLayout().x+f)p,v=TB===y(t.depth-1)ga-(t.depth-1)g,t.setLayout({xm,yv},!0)}))}}}function td(t,e,i){if(t&&l(e,t.type)=0){var n=i.getData().tree.root,o=t.targetNode;if(string==typeof o&&(o=n.getNodeById(o)),o&&n.contains(o))return{nodeo};var a=t.targetNodeId;if(null!=a&&(o=n.getNodeById(a)))return{nodeo}}}function ed(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function id(t,e){return l(ed(t),e)=0}function nd(t,e){for(var i=[];t;){var n=t.dataIndex;i.push({namet.name,dataIndexn,valuee.getRawValue(n)}),t=t.parentNode}return i.reverse(),i}function od(t){var e=0;d(t.children,function(t){od(t);var i=t.value;y(i)&&(i=i[0]),e+=i});var i=t.value;y(i)&&(i=i[0]),(null==iisNaN(i))&&(i=e),i0&&(i=0),y(t.value)t.value[0]=it.value=i}function ad(t,e){var i=e.get(color);if(i){var n;return d(t=t[],function(t){var e=new Lo(t),i=e.get(color);(e.get(itemStyle.color)i&&none!==i)&&(n=!0)}),n((t[0](t[0]={})).color=i.slice()),t}}function rd(t){this.group=new Zw,t.add(this.group)}function sd(t,e,i,n,o,a){var r=[[ott-DC,e],[t+i,e],[t+i,e+n],[ott-DC,e+n]];return!a&&r.splice(2,0,[t+i+DC,e+n2]),!o&&r.push([t,e+n2]),r}function ld(t,e,i){t.eventData={componentTypeseries,componentSubTypetreemap,componentIndexe.componentIndex,seriesIndexe.componentIndex,seriesNamee.name,seriesTypetreemap,selfTypebreadcrumb,nodeData{dataIndexi&&i.dataIndex,namei&&i.name},treePathInfoi&&nd(i,e)}}function ud(){var t,e=[],i={};return{addfunction(t,n,o,a,r){return _(a)&&(r=a,a=0),!i[t.id]&&(i[t.id]=1,e.push({elt,targetn,timeo,delaya,easingr}),!0)},donefunction(e){return t=e,this},startfunction(){for(var n=e.length,o=0,a=e.length;oa;o++){var r=e[o];r.el.animateTo(r.target,r.time,r.delay,r.easing,function(){--n(e.length=0,i={},t&&t())})}return this}}}function hd(t,e,n,o,r,s,l,u,h,c){function d(t,e){w!t.invisible&&s.push(t)(e(),t.__tmWillVisible(t.invisible=!1))}function f(e,n,o,a,r,s){var u=l.getModel(),h=T(t.getFormattedLabel(l.dataIndex,normal,null,null,supperLabellabel),u.get(name));if(!s&&v.isLeafRoot){var c=t.get(drillDownIcon,!0);h=cc+ +hh}var d=u.getModel(sECNC),f=u.getModel(sRCOC),p=d.getShallow(show);co(e,n,d,f,{defaultTextphnull,autoColoro,isRectText!0}),s&&(e.textRect=i(s)),e.truncate=p&&d.get(ellipsis){outerWidtha,outerHeightr,minChar2}null}function p(t,i,o,a){var s=null!=S&&n[t][S],l=r[t];return s(n[t][S]=null,g(l,s,t))w((s=new i({zcd(o,a)})).__tmDepth=o,s.__tmStorageName=t,m(l,s,t)),e[t][b]=s}function g(t,e,i){(t[b]={}).old=nodeGroup===ie.position.slice()a({},e.shape)}function m(t,e,i){var n=t[b]={},a=l.parentNode;if(a&&(!odrillDown===o.direction)){var s=0,u=0,h=r.background[a.getRawIndex()];!o&&h&&h.old&&(s=h.old.width,u=h.old.height),n.old=nodeGroup===i[0,u]{xs,yu,width0,height0}}n.fadein=nodeGroup!==i}if(l){var v=l.getLayout();if(v&&v.isInView){var y=v.width,x=v.height,_=v.borderWidth,w=v.invisible,b=l.getRawIndex(),S=u&&u.getRawIndex(),M=l.viewChildren,I=v.upperHeight,A=M&&M.length,D=l.getModel(itemStyle),C=l.getModel(emphasis.itemStyle),L=p(nodeGroup,LC);if(L){if(h.add(L),L.attr(position,[v.x0,v.y0]),L.__tmNodeWidth=y,L.__tmNodeHeight=x,v.isAboveViewRoot)return L;var k=p(background,kC,c,BC);if(k&&function(e,i,n){i.dataIndex=l.dataIndex,i.seriesIndex=t.seriesIndex,i.setShape({x0,y0,widthy,heightx});var o=l.getVisual(borderColor,!0),a=C.get(borderColor);d(i,function(){var t=FC(D);t.fill=o;var e=GC(C);if(e.fill=a,n){var r=y-2_;f(t,e,o,r,I,{x_,y0,widthr,heightI})}else t.text=e.text=null;i.setStyle(t),uo(i,e)}),e.add(i)}(L,k,A&&v.upperHeight),!A){var P=p(content,kC,c,VC);P&&function(e,i){i.dataIndex=l.dataIndex,i.seriesIndex=t.seriesIndex;var n=Math.max(y-2_,0),o=Math.max(x-2_,0);i.culling=!0,i.setShape({x_,y_,widthn,heighto});var a=l.getVisual(color,!0);d(i,function(){var t=FC(D);t.fill=a;var e=GC(C);f(t,e,a,n,o),i.setStyle(t),uo(i,e)}),e.add(i)}(L,P)}return L}}}}function cd(t,e){var i=tzC+e;return(i-1)i}function dd(t){var e=t.pieceList;t.hasSpecialVisual=!1,d(e,function(e,i){e.originIndex=i,null!=e.visual&&(t.hasSpecialVisual=!0)})}function fd(t){var e=t.categories,i=t.visual,n=t.categoryMap={};if(ZC(e,function(t,e){n[t]=e}),!y(i)){var o=[];w(i)ZC(i,function(t,e){var i=n[e];o[null!=iiXC]=t})o[XC]=i,i=bd(t,o)}for(var a=e.length-1;a=0;a--)null==i[a]&&(delete n[e[a]],e.pop())}function pd(t,e){var i=t.visual,n=[];w(i)ZC(i,function(t){n.push(t)})null!=i&&n.push(i);var o={color1,symbol1};e1!==n.lengtho.hasOwnProperty(t.type)(n[1]=n[0]),bd(t,n)}function gd(t){return{applyVisualfunction(e,i,n){e=this.mapValueToVisual(e),n(color,t(i(color),e))},_doMap_d([0,1])}}function md(t){var e=this.option.visual;return e[Math.round(Eo(t,[0,1],[0,e.length-1],!0))]{}}function vd(t){return function(e,i,n){n(t,this.mapValueToVisual(e))}}function yd(t){var e=this.option.visual;return e[this.option.loop&&t!==XCt%e.lengtht]}function xd(){return this.option.visual[0]}function _d(t){return{linearfunction(e){return Eo(e,t,this.option.visual,!0)},categoryyd,piecewisefunction(e,i){var n=wd.call(this,i);return null==n&&(n=Eo(e,t,this.option.visual,!0)),n},fixedxd}}function wd(t){var e=this.option,i=e.pieceList;if(e.hasSpecialVisual){var n=i[jC.findPieceIndex(t,i)];if(n&&n.visual)return n.visual[this.type]}}function bd(t,e){return t.visual=e,color===t.type&&(t.parsedVisual=f(e,function(t){return zt(t)})),e}function Sd(t,e,i){return te=iei}function Md(t,e,i,n,o,a){var r=t.getModel(),s=t.getLayout();if(s&&!s.invisible&&s.isInView){var l,u=t.getModel($C),h=Id(u,e,i[t.depth],n),c=u.get(borderColor),f=u.get(borderColorSaturation);null!=f&&(c=Ad(f,l=Td(h))),t.setVisual(borderColor,c);var p=t.viewChildren;if(p&&p.length){var g=Cd(t,r,s,u,h,p);d(p,function(t,e){(t.depth=o.lengtht===o[t.depth])&&Md(t,kd(r,h,t,e,g,a),i,n,o,a)})}else l=Td(h),t.setVisual(color,l)}}function Id(t,e,i,n){var o=a({},e);return d([color,colorAlpha,colorSaturation],function(a){var r=t.get(a,!0);null==r&&i&&(r=i[a]),null==r&&(r=e[a]),null==r&&(r=n.get(a)),null!=r&&(o[a]=r)}),o}function Td(t){var e=Dd(t,color);if(e){var i=Dd(t,colorAlpha),n=Dd(t,colorSaturation);return n&&(e=Zt(e,null,null,n)),i&&(e=Ut(e,i)),e}}function Ad(t,e){return null!=eZt(e,null,null,t)null}function Dd(t,e){var i=t[e];if(null!=i&&none!==i)return i}function Cd(t,e,i,n,o,a){if(a&&a.length){var r=Ld(e,color)null!=o.color&&none!==o.color&&(Ld(e,colorAlpha)Ld(e,colorSaturation));if(r){var s=e.get(visualMin),l=e.get(visualMax),u=i.dataExtent.slice();null!=s&&su[0]&&(u[0]=s),null!=l&&lu[1]&&(u[1]=l);var h=e.get(colorMappingBy),c={typer.name,dataExtentu,visualr.range};color!==c.typeindex!==h&&id!==hc.mappingMethod=linear(c.mappingMethod=category,c.loop=!0);var d=new jC(c);return d.__drColorMappingBy=h,d}}}function Ld(t,e){var i=t.get(e);return KC(i)&&i.length{namee,rangei}null}function kd(t,e,i,n,o,r){var s=a({},e);if(o){var l=o.type,u=color===l&&o.__drColorMappingBy,h=index===unid===ur.mapIdToIndex(i.getId())i.getValue(t.get(visualDimension));s[l]=o.mapValueToVisual(h)}return s}function Pd(t,e,i,n){var o,a;if(!t.isRemoved()){var r=t.getLayout();o=r.width,a=r.height;var s=(f=t.getModel()).get(nL),l=f.get(oL)2,u=Wd(f),h=Math.max(s,u),c=s-l,d=h-l,f=t.getModel();t.setLayout({borderWidths,upperHeighth,upperLabelHeightu},!0);var p=(o=QC(o-2c,0))(a=QC(a-c-d,0)),g=Nd(t,f,p,e,i,n);if(g.length){var m={xc,yd,widtho,heighta},v=tL(o,a),y=10,x=[];x.area=0;for(var _=0,w=g.length;_w;){var b=g[_];x.push(b),x.area+=b.getLayout().area;var S=zd(x,v,e.squareRatio);S=y(_++,y=S)(x.area-=x.pop().getLayout().area,Bd(x,v,m,l,!1),v=tL(m.width,m.height),x.length=x.area=0,y=10)}if(x.length&&Bd(x,v,m,l,!0),!i){var M=f.get(childrenVisibleMin);null!=M&&pM&&(i=!0)}for(var _=0,w=g.length;_w;_++)Pd(g[_],e,i,n+1)}}}function Nd(t,e,i,n,o,a){var r=t.children[],s=n.sort;asc!==s&&desc!==s&&(s=null);var l=null!=n.leafDepth&&n.leafDepth=a;if(o&&!l)return t.viewChildren=[];Ed(r=g(r,function(t){return!t.isRemoved()}),s);var u=Rd(e,r,s);if(0===u.sum)return t.viewChildren=[];if(u.sum=Od(e,i,u.sum,s,r),0===u.sum)return t.viewChildren=[];for(var h=0,c=r.length;hc;h++){var d=r[h].getValue()u.sumi;r[h].setLayout({aread})}return l&&(r.length&&t.setLayout({isLeafRoot!0},!0),r.length=0),t.viewChildren=r,t.setLayout({dataExtentu.dataExtent},!0),r}function Od(t,e,i,n,o){if(!n)return i;for(var a=t.get(visibleMin),r=o.length,s=r,l=r-1;l=0;l--){var u=o[asc===nr-l-1l].getValue();uiea&&(s=l,i-=u)}returnasc===no.splice(0,r-s)o.splice(s,r-s),i}function Ed(t,e){return e&&t.sort(function(t,i){var n=asc===et.getValue()-i.getValue()i.getValue()-t.getValue();return 0===nasc===et.dataIndex-i.dataIndexi.dataIndex-t.dataIndexn}),t}function Rd(t,e,i){for(var n=0,o=0,a=e.length;oa;o++)n+=e[o].getValue();var r=t.get(visualDimension);if(e&&e.length)if(value===r&&i)s=[e[e.length-1].getValue(),e[0].getValue()],asc===i&&s.reverse();else{var s=[10,-10];iL(e,function(t){var e=t.getValue(r);es[0]&&(s[0]=e),es[1]&&(s[1]=e)})}else s=[NaN,NaN];return{sumn,dataExtents}}function zd(t,e,i){for(var n,o=0,a=10,r=0,s=t.length;rs;r++)(n=t[r].getLayout().area)&&(na&&(a=n),no&&(o=n));var l=t.areat.area,u=eei;return lQC(uol,l(ua))10}function Bd(t,e,i,n,o){var a=e===i.width01,r=1-a,s=[x,y],l=[width,height],u=i[s[a]],h=et.areae0;(ohi[l[r]])&&(h=i[l[r]]);for(var c=0,d=t.length;cd;c++){var f=t[c],p={},g=hf.getLayout().areah0,m=p[l[r]]=QC(h-2n,0),v=i[s[a]]+i[l[a]]-u,y=c===d-1vgvg,x=p[l[a]]=QC(y-2n,0);p[s[r]]=i[s[r]]+tL(n,m2),p[s[a]]=u+tL(n,x2),u+=y,f.setLayout(p,!0)}i[s[r]]+=h,i[l[r]]-=h}function Vd(t,e,i,n,o){var a=(e{}).node,r=[n,o];if(!aa===i)return r;for(var s,l=no,u=lt.option.zoomToNodeRatio;s=a.parentNode;){for(var h=0,c=s.children,d=0,f=c.length;df;d++)h+=c[d].getValue();var p=a.getValue();if(0===p)return r;u=hp;var g=s.getModel(),m=g.get(nL);(u+=4mm+(3m+Math.max(m,Wd(g)))Math.pow(u,.5))kM&&(u=kM),a=s}ul&&(u=l);var v=Math.pow(ul,.5);return[nv,ov]}function Gd(t,e,i){if(e)return{xe.x,ye.y};var n={x0,y0};if(!i)return n;var o=i.node,a=o.getLayout();if(!a)return n;for(var r=[a.width2,a.height2],s=o;s;){var l=s.getLayout();r[0]+=l.x,r[1]+=l.y,s=s.parentNode}return{xt.width2-r[0],yt.height2-r[1]}}function Fd(t,e,i,n,o){var a=t.getLayout(),r=i[o],s=r&&r===t;if(!(r&&!so===i.length&&t!==n)){t.setLayout({isInView!0,invisible!s&&!e.intersect(a),isAboveViewRoots},!0);var l=new ue(e.x-a.x,e.y-a.y,e.width,e.height);iL(t.viewChildren[],function(t){Fd(t,l,i,n,o+1)})}}function Wd(t){return t.get(aL)t.get(rL)0}function Hd(t){return_EC_+t}function Zd(t,e){this.id=null==tt,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==e-1e}function Ud(t,e,i){this.node1=t,this.node2=e,this.dataIndex=null==i-1i}function Xd(t){return isNaN(+t.cpx1)isNaN(+t.cpy1)}function jd(t){return_+t+Type}function Yd(t,e,i){var n=e.getItemVisual(i,color),o=e.getItemVisual(i,t),a=e.getItemVisual(i,t+Size);if(o&&none!==o){y(a)(a=[a,a]);var r=Xl(o,-a[0]2,-a[1]2,a[0],a[1],n);return r.name=t,r}}function qd(t){var e=new gL({nameline});return Kd(e.shape,t),e}function Kd(t,e){var i=e[0],n=e[1],o=e[2];t.x1=i[0],t.y1=i[1],t.x2=n[0],t.y2=n[1],t.percent=1,o(t.cpx1=o[0],t.cpy1=o[1])(t.cpx1=NaN,t.cpy1=NaN)}function $d(t,e,i){Zw.call(this),this._createLine(t,e,i)}function Jd(t){this._ctor=t$d,this.group=new Zw}function Qd(t,e,i,n){if(of(e.getItemLayout(i))){var o=new t._ctor(e,i,n);e.setItemGraphicEl(i,o),t.group.add(o)}}function tf(t,e,i,n,o,a){var r=e.getItemGraphicEl(n);of(i.getItemLayout(o))(rr.updateData(i,o,a)r=new t._ctor(i,o,a),i.setItemGraphicEl(o,r),t.group.add(r))t.group.remove(r)}function ef(t){var e=t.hostModel;return{lineStylee.getModel(lineStyle).getLineStyle(),hoverLineStylee.getModel(emphasis.lineStyle).getLineStyle(),labelModele.getModel(label),hoverLabelModele.getModel(emphasis.label)}}function nf(t){return isNaN(t[0])isNaN(t[1])}function of(t){return!nf(t[0])&&!nf(t[1])}function af(t,e,i){for(var n,o=t[0],a=t[1],r=t[2],s=10,l=ii,u=.1,h=.1;h=.9;h+=.1)xL[0]=bL(o[0],a[0],r[0],h),xL[1]=bL(o[1],a[1],r[1],h),(f=ML(SL(xL,e)-l))s&&(s=f,n=h);for(var c=0;c32;c++){var d=n+u;_L[0]=bL(o[0],a[0],r[0],n),_L[1]=bL(o[1],a[1],r[1],n),wL[0]=bL(o[0],a[0],r[0],d),wL[1]=bL(o[1],a[1],r[1],d);var f=SL(_L,e)-l;if(ML(f).01)break;var p=SL(wL,e)-l;u=2,f0p=0n+=un-=up=0n-=un+=u}return n}function rf(t,e){return t.getVisual(opacity)t.getModel().get(e)}function sf(t,e,i){var n=t.getGraphicEl(),o=rf(t,e);null!=i&&(null==o&&(o=1),o=i),n.downplay&&n.downplay(),n.traverse(function(t){group!==t.type&&t.setStyle(opacity,o)})}function lf(t,e){var i=rf(t,e),n=t.getGraphicEl();n.highlight&&n.highlight(),n.traverse(function(t){group!==t.type&&t.setStyle(opacity,i)})}function uf(t){return t instanceof Array(t=[t,t]),t}function hf(t){var e=t.coordinateSystem;if(!eview===e.type){var i=t.getGraph();i.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get(x),+e.get(y)])}),cf(i)}}function cf(t){t.eachEdge(function(t){var e=t.getModel().get(lineStyle.curveness)0,i=F(t.node1.getLayout()),n=F(t.node2.getLayout()),o=[i,n];+e&&o.push([(i[0]+n[0])2-(i[1]-n[1])e,(i[1]+n[1])2-(n[0]-i[0])e]),t.setLayout(o)})}function df(t){var e=t.coordinateSystem;if(!eview===e.type){var i=e.getBoundingRect(),n=t.getData(),o=n.graph,a=0,r=n.getSum(value),s=2Math.PI(rn.count()),l=i.width2+i.x,u=i.height2+i.y,h=Math.min(i.width,i.height)2;o.eachNode(function(t){var e=t.getValue(value);a+=s(re1)2,t.setLayout([hMath.cos(a)+l,hMath.sin(a)+u]),a+=s(re1)2}),n.setLayout({cxl,cyu}),o.eachEdge(function(t){var e,i=t.getModel().get(lineStyle.curveness)0,n=F(t.node1.getLayout()),o=F(t.node2.getLayout()),a=(n[0]+o[0])2,r=(n[1]+o[1])2;+i&&(e=[l(i=3)+a(1-i),ui+r(1-i)]),t.setLayout([n,o,e])})}}function ff(t,e,i){for(var n=i.rect,o=n.width,a=n.height,r=[n.x+o2,n.y+a2],s=null==i.gravity.1i.gravity,l=0;lt.length;l++){var u=t[l];u.p(u.p=V(o(Math.random()-.5)+r[0],a(Math.random()-.5)+r[1])),u.pp=F(u.p),u.edges=null}var h=.6;return{warmUpfunction(){h=.5},setFixedfunction(e){t[e].fixed=!0},setUnfixedfunction(e){t[e].fixed=!1},stepfunction(i){for(var n=[],o=t.length,a=0;ae.length;a++){var l=e[a],u=l.n1;U(n,(p=l.n2).p,u.p);var c=X(n)-l.d,d=p.w(u.w+p.w);isNaN(d)&&(d=0),q(n,n),!u.fixed&&DL(u.p,u.p,n,dch),!p.fixed&&DL(p.p,p.p,n,-(1-d)ch)}for(a=0;ao;a++)(v=t[a]).fixed(U(n,r,v.p),DL(v.p,v.p,n,sh));for(a=0;ao;a++)for(var u=t[a],f=a+1;fo;f++){var p=t[f];U(n,p.p,u.p),0===(c=X(n))&&(W(n,Math.random()-.5,Math.random()-.5),c=1);var g=(u.rep+p.rep)cc;!u.fixed&&DL(u.pp,u.pp,n,g),!p.fixed&&DL(p.pp,p.pp,n,-g)}for(var m=[],a=0;ao;a++){var v=t[a];v.fixed(U(m,v.p,v.pp),DL(v.p,v.p,m,h),G(v.pp,v.p))}h=.992,i&&i(t,e,h.01)}}}function pf(t,e,i){var n=t.getBoxLayoutParams();return n.aspect=i,la(n,{widthe.getWidth(),heighte.getHeight()})}function gf(t,e){var i=t.get(center),n=e.getWidth(),o=e.getHeight(),a=Math.min(n,o);return{cxRo(i[0],e.getWidth()),cyRo(i[1],e.getHeight()),rRo(t.get(radius),a2)}}function mf(t,e){return e&&(string==typeof et=e.replace({value},null!=tt)function==typeof e&&(t=e(t))),t}function vf(t,e){function i(){a.ignore=a.hoverIgnore,r.ignore=r.hoverIgnore}function n(){a.ignore=a.normalIgnore,r.ignore=r.normalIgnore}Zw.call(this);var o=new nM,a=new oM,r=new qS;this.add(o),this.add(a),this.add(r),this.updateData(t,e,!0),this.on(emphasis,i).on(normal,n).on(mouseover,i).on(mouseout,n)}function yf(t,e){return la(t.getBoxLayoutParams(),{widthe.getWidth(),heighte.getHeight()})}function xf(t,e){for(var i=t.mapDimension(value),n=t.mapArray(i,function(t){return t}),o=[],a=ascending===e,r=0,s=t.count();rs;r++)o[r]=r;returnfunction==typeof eo.sort(e)none!==e&&o.sort(function(t,e){return an[t]-n[e]n[e]-n[t]}),o}function _f(t){t.each(function(e){var i,n,o,a,r=t.getItemModel(e),s=r.getModel(label).get(position),l=r.getModel(labelLine),u=t.getItemLayout(e),h=u.points,c=inner===sinside===scenter===s;if(c)i=center,a=[[n=(h[0][0]+h[1][0]+h[2][0]+h[3][0])4,o=(h[0][1]+h[1][1]+h[2][1]+h[3][1])4],[n,o]];else{var d,f,p,g=l.get(length);left===s(d=(h[3][0]+h[0][0])2,f=(h[3][1]+h[0][1])2,n=(p=d-g)-5,i=right)(d=(h[1][0]+h[2][0])2,f=(h[1][1]+h[2][1])2,n=(p=d+g)+5,i=left);var m=f;a=[[d,f],[p,m]],o=m}u.label={linePointsa,xn,yo,verticalAlignmiddle,textAligni,insidec}})}function wf(t){if(!t.parallel){var e=!1;d(t.series,function(t){t&&parallel===t.type&&(e=!0)}),e&&(t.parallel=[{}])}}function bf(t){d(Di(t.parallelAxis),function(e){if(w(e)){var i=e.parallelIndex0,o=Di(t.parallel)[i];o&&o.parallelAxisDefault&&n(e,o.parallelAxisDefault,!1)}})}function Sf(t,e){var i=t[e]-t[1-e];return{spanMath.abs(i),signi0-1i01e-11}}function Mf(t,e){return Math.min(e[1],Math.max(e[0],t))}function If(t,e,i){this._axesMap=R(),this._axesLayout={},this.dimensions=t.dimensions,this._rect,this._model=t,this._init(t,e,i)}function Tf(t,e){return zL(BL(t,e[0]),e[1])}function Af(t,e){var i=e.layoutLength(e.axisCount-1);return{positionit,axisNameAvailableWidthi,axisLabelShow!0}}function Df(t,e){var i,n,o=e.layoutLength,a=e.axisExpandWidth,r=e.axisCount,s=e.axisCollapseWidth,l=e.winInnerIndices,u=s,h=!1;return tl[0](i=ts,n=s)t=l[1](i=e.axisExpandWindow0Pos+ta-e.axisExpandWindow[0],u=a,h=!0)(i=o-(r-1-t)s,n=s),{positioni,axisNameAvailableWidthu,axisLabelShowh,nameTruncateMaxWidthn}}function Cf(t){aw.call(this),this._zr=t,this.group=new Zw,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,this._uid=brushController_+ok++,this._handlers={},XL(ak,function(t,e){this._handlers[e]=m(t,this)},this)}function Lf(t,e){var o=t._zr;t._enableGlobalPanec(o,tk,t._uid),XL(t._handlers,function(t,e){o.on(e,t)}),t._brushType=e.brushType,t._brushOption=n(i(nk),e,!0)}function kf(t){var e=t._zr;ic(e,tk,t._uid),XL(t._handlers,function(t,i){e.off(i,t)}),t._brushType=t._brushOption=null}function Pf(t,e){var i=rk[e.brushType].createCover(t,e);return i.__brushOption=e,Ef(i,e),t.group.add(i),i}function Nf(t,e){var i=zf(e);return i.endCreating&&(i.endCreating(t,e),Ef(e,e.__brushOption)),e}function Of(t,e){var i=e.__brushOption;zf(e).updateCoverShape(t,e,i.range,i)}function Ef(t,e){var i=e.z;null==i&&(i=$L),t.traverse(function(t){t.z=i,t.z2=i})}function Rf(t,e){zf(e).updateCommon(t,e),Of(t,e)}function zf(t){return rk[t.__brushOption.brushType]}function Bf(t,e,i){var n=t._panels;if(!n)return!0;var o,a=t._transform;return XL(n,function(t){t.isTargetByCursor(e,i,a)&&(o=t)}),o}function Vf(t,e){var i=t._panels;if(!i)return!0;var n=e.__brushOption.panelId;return null==ni[n]}function Gf(t){var e=t._covers,i=e.length;return XL(e,function(e){t.group.remove(e)},t),e.length=0,!!i}function Ff(t,e){var n=jL(t._covers,function(t){var e=t.__brushOption,n=i(e.range);return{brushTypee.brushType,panelIde.panelId,rangen}});t.trigger(brush,n,{isEnd!!e.isEnd,removeOnClick!!e.removeOnClick})}function Wf(t){var e=t._track;if(!e.length)return!1;var i=e[e.length-1],n=e[0],o=i[0]-n[0],a=i[1]-n[1];return KL(oo+aa,.5)JL}function Hf(t){var e=t.length-1;return e0&&(e=0),[t[0],t[e]]}function Zf(t,e,i,n){var o=new Zw;return o.add(new aM({namemain,styleYf(i),silent!0,draggable!0,cursormove,driftUL(t,e,o,nswe),ondragendUL(Ff,e,{isEnd!0})})),XL(n,function(i){o.add(new aM({namei,style{opacity0},draggable!0,silent!0,invisible!0,driftUL(t,e,o,i),ondragendUL(Ff,e,{isEnd!0})}))}),o}function Uf(t,e,i,n){var o=n.brushStyle.lineWidth0,a=qL(o,QL),r=i[0][0],s=i[1][0],l=r-o2,u=s-o2,h=i[0][1],c=i[1][1],d=h-a+o2,f=c-a+o2,p=h-r,g=c-s,m=p+o,v=g+o;jf(t,e,main,r,s,p,g),n.transformable&&(jf(t,e,w,l,u,a,v),jf(t,e,e,d,u,a,v),jf(t,e,n,l,u,m,a),jf(t,e,s,l,f,m,a),jf(t,e,nw,l,u,a,a),jf(t,e,ne,d,u,a,a),jf(t,e,sw,l,f,a,a),jf(t,e,se,d,f,a,a))}function Xf(t,e){var i=e.__brushOption,n=i.transformable,o=e.childAt(0);o.useStyle(Yf(i)),o.attr({silent!n,cursornmovedefault}),XL([w,e,n,s,se,sw,ne,nw],function(i){var o=e.childOfName(i),a=$f(t,i);o&&o.attr({silent!n,invisible!n,cursornik[a]+-resizenull})})}function jf(t,e,i,n,o,a,r){var s=e.childOfName(i);s&&s.setShape(ip(ep(t,e,[[n,o],[n+a,o+r]])))}function Yf(t){return r({strokeNoScale!0},t.brushStyle)}function qf(t,e,i,n){var o=[YL(t,i),YL(e,n)],a=[qL(t,i),qL(e,n)];return[[o[0],a[0]],[o[1],a[1]]]}function Kf(t){return Mo(t.group)}function $f(t,e){if(e.length1)return(e===(n=[$f(t,(e=e.split())[0]),$f(t,e[1])])[0]w===n[0])&&n.reverse(),n.join();var i={leftw,righte,topn,bottoms},n=To({wleft,eright,ntop,sbottom}[e],Kf(t));return i[n]}function Jf(t,e,i,n,o,a,r,s){var l=n.__brushOption,u=t(l.range),h=tp(i,a,r);XL(o.split(),function(t){var e=ek[t];u[e[0]][e[1]]+=h[e[0]]}),l.range=e(qf(u[0][0],u[1][0],u[0][1],u[1][1])),Rf(i,n),Ff(i,{isEnd!1})}function Qf(t,e,i,n,o){var a=e.__brushOption.range,r=tp(t,i,n);XL(a,function(t){t[0]+=r[0],t[1]+=r[1]}),Rf(t,e),Ff(t,{isEnd!1})}function tp(t,e,i){var n=t.group,o=n.transformCoordToLocal(e,i),a=n.transformCoordToLocal(0,0);return[o[0]-a[0],o[1]-a[1]]}function ep(t,e,n){var o=Vf(t,e);return o&&!0!==oo.clipPath(n,t._transform)i(n)}function ip(t){var e=YL(t[0][0],t[1][0]),i=YL(t[0][1],t[1][1]);return{xe,yi,widthqL(t[0][0],t[1][0])-e,heightqL(t[0][1],t[1][1])-i}}function np(t,e,i){if(t._brushType){var n=t._zr,o=t._covers,a=Bf(t,e,i);if(!t._dragging)for(var r=0;ro.length;r++){var s=o[r].__brushOption;if(a&&(!0===as.panelId===a.panelId)&&rk[s.brushType].contain(o[r],i[0],i[1]))return}a&&n.setCursorStyle(crosshair)}}function op(t){var e=t.event;e.preventDefault&&e.preventDefault()}function ap(t,e,i){return t.childOfName(main).contain(e,i)}function rp(t,e,n,o){var a,r=t._creatingCover,s=t._creatingPanel,l=t._brushOption;if(t._track.push(n.slice()),Wf(t)r){if(s&&!r){single===l.brushMode&&Gf(t);var u=i(l);u.brushType=sp(u.brushType,s),u.panelId=!0===snulls.panelId,r=t._creatingCover=Pf(t,u),t._covers.push(r)}if(r){var h=rk[sp(t._brushType,s)];r.__brushOption.range=h.getCreatingRange(ep(t,r,t._track)),o&&(Nf(t,r),h.updateCommon(t,r)),Of(t,r),a={isEndo}}}else o&&single===l.brushMode&&l.removeOnClick&&Bf(t,e,n)&&Gf(t)&&(a={isEndo,removeOnClick!0});return a}function sp(t,e){returnauto===te.defaultBrushTypet}function lp(t){if(this._dragging){op(t);var e=rp(this,t,this.group.transformCoordToLocal(t.offsetX,t.offsetY),!0);this._dragging=!1,this._track=[],this._creatingCover=null,e&&Ff(this,e)}}function up(t){return{createCoverfunction(e,i){return Zf(UL(Jf,function(e){var i=[e,[0,100]];return t&&i.reverse(),i},function(e){return e[t]}),e,i,[[w,e],[n,s]][t])},getCreatingRangefunction(e){var i=Hf(e);return[YL(i[0][t],i[1][t]),qL(i[0][t],i[1][t])]},updateCoverShapefunction(e,i,n,o){var a,r=Vf(e,i);if(!0!==r&&r.getLinearBrushOtherExtent)a=r.getLinearBrushOtherExtent(t,e._transform);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[n,a];t&&l.reverse(),Uf(e,i,l,o)},updateCommonXf,containap}}function hp(t){return t=fp(t),function(e,i){return Do(e,t)}}function cp(t,e){return t=fp(t),function(i){var n=null!=eei,o=nt.widtht.height,a=nt.xt.y;return[a,a+(o0)]}}function dp(t,e,i){return t=fp(t),function(n,o,a){return t.contain(o[0],o[1])&&!mc(n,e,i)}}function fp(t){return ue.create(t)}function pp(t,e,i){return i&&axisAreaSelect===i.type&&e.findComponents({mainTypeparallelAxis,queryi})[0]===t}function gp(t){var e=t.axis;return f(t.activeIntervals,function(t){return{brushTypelineX,panelIdpl,range[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function mp(t,e){return e.getComponent(parallel,t.get(parallelIndex))}function vp(t,e){var i=t._model;return i.get(axisExpandable)&&i.get(axisExpandTriggerOn)===e}function yp(t,e){if(!t.encodeDefine){var i=e.ecModel.getComponent(parallel,e.get(parallelIndex));if(i){var n=t.encodeDefine=R();d(i.dimensions,function(t){var e=xp(t);n.set(t,e)})}}}function xp(t){return+t.replace(dim,)}function _p(t,e,i){var n=t.model,o=t.getRect(),a=new aM({shape{xo.x,yo.y,widtho.width,heighto.height}}),r=horizontal===n.get(layout)widthheight;return a.setShape(r,0),So(a,{shape{widtho.width,heighto.height}},e,i),a}function wp(t,e,i,n){for(var o=[],a=0;ai.length;a++){var r=i[a],s=t.get(t.mapDimension(r),e);Ip(s,n.getAxis(r).type)o.push(n.dataToPoint(s,r))}return o}function bp(t,e,i,n,o){var a=wp(t,i,n,o),r=new oM({shape{pointsa},silent!0,z210});return e.add(r),t.setItemGraphicEl(i,r),r}function Sp(t){var e=t.get(smooth,!0);return!0===e&&(e=hk),{lineStylet.getModel(lineStyle).getLineStyle(),smoothnull!=eehk}}function Mp(t,e,i,n){var o=n.lineStyle;e.hasItemOption&&(o=e.getItemModel(i).getModel(lineStyle).getLineStyle()),t.useStyle(o);var a=t.style;a.fill=null,a.stroke=e.getItemVisual(i,color),a.opacity=e.getItemVisual(i,opacity),n.smooth&&(t.shape.smooth=n.smooth)}function Ip(t,e){returncategory===enull==tnull==tisNaN(t)}function Tp(t,e){return t.getVisual(opacity)t.getModel().get(e)}function Ap(t,e,i){var n=t.getGraphicEl(),o=Tp(t,e);null!=i&&(null==o&&(o=1),o=i),n.downplay&&n.downplay(),n.traverse(function(t){group!==t.type&&t.setStyle(opacity,o)})}function Dp(t,e){var i=Tp(t,e),n=t.getGraphicEl();n.highlight&&n.highlight(),n.traverse(function(t){group!==t.type&&t.setStyle(opacity,i)})}function Cp(t,e,i){var n=new aM({shape{xt.x-10,yt.y-10,width0,heightt.height+20}});return So(n,{shape{widtht.width+20,heightt.height+20}},e,i),n}function Lp(){function t(e,n){if(n=i.length)return e;for(var o=-1,a=e.length,r=i[n++],s={},l={};++oa;){var u=r(e[o]),h=l[u];hh.push(e[o])l[u]=[e[o]]}return d(l,function(e,i){s[i]=t(e,n)}),s}function e(t,o){if(o=i.length)return t;var a=[],r=n[o++];return d(t,function(t,i){a.push({keyi,valuese(t,o)})}),ra.sort(function(t,e){return r(t.key,e.key)})a}var i=[],n=[];return{keyfunction(t){return i.push(t),this},sortKeysfunction(t){return n[i.length-1]=t,this},entriesfunction(i){return e(t(i,0),0)}}}function kp(t,e){return la(t.getBoxLayoutParams(),{widthe.getWidth(),heighte.getHeight()})}function Pp(t,e,i,n,o,a,r,s){Op(t,e,i,o,a,s),zp(t,e,a,o,n,r,s),Yp(t,s)}function Np(t){d(t,function(t){var e=Xp(t.outEdges,Up),i=Xp(t.inEdges,Up),n=Math.max(e,i);t.setLayout({valuen},!0)})}function Op(t,e,i,n,o,a){for(var r=[],s=[],l=[],u=[],h=0,c=0;ce.length;c++)r[c]=1;for(c=0;ct.length;c++)s[c]=t[c].inEdges.length,0===s[c]&&l.push(t[c]);for(;l.length;){for(var d=0;dl.length;d++){var f=l[d];vertical===a(f.setLayout({yh},!0),f.setLayout({dyi},!0))(f.setLayout({xh},!0),f.setLayout({dxi},!0));for(var p=0;pf.outEdges.length;p++){var g=f.outEdges[p];r[e.indexOf(g)]=0;var m=g.node2;0==--s[t.indexOf(m)]&&u.push(m)}}++h,l=u,u=[]}for(c=0;cr.length;c++);Ep(t,h,a),Rp(t,vertical===a(o-i)(h-1)(n-i)(h-1),a)}function Ep(t,e,i){d(t,function(t){t.outEdges.length(vertical===it.setLayout({ye-1},!0)t.setLayout({xe-1},!0))})}function Rp(t,e,i){d(t,function(t){if(vertical===i){var n=t.getLayout().ye;t.setLayout({yn},!0)}else{var o=t.getLayout().xe;t.setLayout({xo},!0)}})}function zp(t,e,i,n,o,a,r){var s=Lp().key(Bp(r)).sortKeys(function(t,e){return t-e}).entries(t).map(function(t){return t.values});Vp(t,s,e,i,n,o,r),Gp(s,o,i,n,r);for(var l=1;a0;a--)Fp(s,l=.99,r),Gp(s,o,i,n,r),jp(s,l,r),Gp(s,o,i,n,r)}function Bp(t){returnvertical===tfunction(t){return t.getLayout().y}function(t){return t.getLayout().x}}function Vp(t,e,i,n,o,a,r){var s=[];d(e,function(t){var e=t.length,i=0,l=0;d(t,function(t){i+=t.getLayout().value}),l=vertical===r(o-(e-1)a)i(n-(e-1)a)i,s.push(l)}),s.sort(function(t,e){return t-e});var l=s[0];d(e,function(t){d(t,function(t,e){var i=t.getLayout().valuel;vertical===r(t.setLayout({xe},!0),t.setLayout({dxi},!0))(t.setLayout({ye},!0),t.setLayout({dyi},!0))})}),d(i,function(t){var e=+t.getValue()l;t.setLayout({dye},!0)})}function Gp(t,e,i,n,o){d(t,function(t){var a,r,s,l=0,u=t.length;if(vertical===o){var h;for(t.sort(function(t,e){return t.getLayout().x-e.getLayout().x}),s=0;su;s++)(r=l-(a=t[s]).getLayout().x)0&&(h=a.getLayout().x+r,a.setLayout({xh},!0)),l=a.getLayout().x+a.getLayout().dx+e;if((r=l-e-n)0)for(h=a.getLayout().x-r,a.setLayout({xh},!0),l=h,s=u-2;s=0;--s)(r=(a=t[s]).getLayout().x+a.getLayout().dx+e-l)0&&(h=a.getLayout().x-r,a.setLayout({xh},!0)),l=a.getLayout().x}else{var c;for(t.sort(function(t,e){return t.getLayout().y-e.getLayout().y}),s=0;su;s++)(r=l-(a=t[s]).getLayout().y)0&&(c=a.getLayout().y+r,a.setLayout({yc},!0)),l=a.getLayout().y+a.getLayout().dy+e;if((r=l-e-i)0)for(c=a.getLayout().y-r,a.setLayout({yc},!0),l=c,s=u-2;s=0;--s)(r=(a=t[s]).getLayout().y+a.getLayout().dy+e-l)0&&(c=a.getLayout().y-r,a.setLayout({yc},!0)),l=a.getLayout().y}})}function Fp(t,e,i){d(t.slice().reverse(),function(t){d(t,function(t){if(t.outEdges.length){var n=Xp(t.outEdges,Wp,i)Xp(t.outEdges,Up,i);if(vertical===i){var o=t.getLayout().x+(n-Zp(t,i))e;t.setLayout({xo},!0)}else{var a=t.getLayout().y+(n-Zp(t,i))e;t.setLayout({ya},!0)}}})})}function Wp(t,e){return Zp(t.node2,e)t.getValue()}function Hp(t,e){return Zp(t.node1,e)t.getValue()}function Zp(t,e){returnvertical===et.getLayout().x+t.getLayout().dx2t.getLayout().y+t.getLayout().dy2}function Up(t){return t.getValue()}function Xp(t,e,i){for(var n=0,o=t.length,a=-1;++ao;){var r=+e.call(t,t[a],i);isNaN(r)(n+=r)}return n}function jp(t,e,i){d(t,function(t){d(t,function(t){if(t.inEdges.length){var n=Xp(t.inEdges,Hp,i)Xp(t.inEdges,Up,i);if(vertical===i){var o=t.getLayout().x+(n-Zp(t,i))e;t.setLayout({xo},!0)}else{var a=t.getLayout().y+(n-Zp(t,i))e;t.setLayout({ya},!0)}}})})}function Yp(t,e){d(t,function(t){vertical===e(t.outEdges.sort(function(t,e){return t.node2.getLayout().x-e.node2.getLayout().x}),t.inEdges.sort(function(t,e){return t.node1.getLayout().x-e.node1.getLayout().x}))(t.outEdges.sort(function(t,e){return t.node2.getLayout().y-e.node2.getLayout().y}),t.inEdges.sort(function(t,e){return t.node1.getLayout().y-e.node1.getLayout().y}))}),d(t,function(t){var e=0,i=0;d(t.outEdges,function(t){t.setLayout({sye},!0),e+=t.getLayout().dy}),d(t.inEdges,function(t){t.setLayout({tyi},!0),i+=t.getLayout().dy})})}function qp(t,e,i,n,o){var a=t.ends,r=new xk({shape{pointso$p(a,n,t)a}});return Kp(t,r,e,i,o),r}function Kp(t,e,i,n,o){var a=i.hostModel;(0,bM[oinitPropsupdateProps])(e,{shape{pointst.ends}},a,n);var r=i.getItemModel(n),s=r.getModel(vk),l=i.getItemVisual(n,color),u=s.getItemStyle([borderColor]);u.stroke=l,u.strokeNoScale=!0,e.useStyle(u),e.z2=100,uo(e,r.getModel(yk).getItemStyle())}function $p(t,e,i){return f(t,function(t){return t=t.slice(),t[e]=i.initBaseline,t})}function Jp(t){var e=[],i=[];return t.eachSeriesByType(boxplot,function(t){var n=t.getBaseAxis(),o=l(i,n);o0&&(o=i.length,i[o]=n,e[o]={axisn,seriesModels[]}),e[o].seriesModels.push(t)}),e}function Qp(t){var e,i,n=t.axis,o=t.seriesModels,a=o.length,r=t.boxWidthList=[],s=t.boxOffsetList=[],l=[];if(category===n.type)i=n.getBandWidth();else{var u=0;wk(o,function(t){u=Math.max(u,t.getData().count())}),e=n.getExtent(),Math.abs(e[1]-e[0])}wk(o,function(t){var e=t.get(boxWidth);y(e)(e=[e,e]),l.push([Ro(e[0],i)0,Ro(e[1],i)0])});var h=.8i-2,c=ha.3,d=(h-c(a-1))a,f=d2-h2;wk(o,function(t,e){s.push(f),f+=c+d,r.push(Math.min(Math.max(d,l[e][0]),l[e][1]))})}function tg(t,e,i){function n(t,i,n){var o=s.get(i,n),a=[];a[u]=t,a[h]=o;var l;return isNaN(t)isNaN(o)l=[NaN,NaN](l=r.dataToPoint(a))[u]+=e,l}function o(t,e,i){var n=e.slice(),o=e.slice();n[u]+=l,o[u]-=l,it.push(n,o)t.push(o,n)}function a(t,e){var i=e.slice(),n=e.slice();i[u]-=l,n[u]+=l,t.push(i,n)}var r=t.coordinateSystem,s=t.getData(),l=i2,u=horizontal===t.get(layout)01,h=1-u,c=[x,y],d=s.mapDimension(c[u]),f=s.mapDimension(c[h],!0);if(!(null==df.length5))for(var p=0;ps.count();p++){var g=s.get(d,p),m=n(g,f[2],p),v=n(g,f[0],p),y=n(g,f[1],p),x=n(g,f[3],p),_=n(g,f[4],p),w=[];o(w,y,0),o(w,x,1),w.push(v,y,_,x),a(w,v),a(w,_),a(w,m),s.setItemLayout(p,{initBaselinem[h],endsw})}}function eg(t,e,i){var n=t.ends;return new Ik({shape{pointsing(n,t)n},z2100})}function ig(t,e,i,n){var o=e.getItemModel(i),a=o.getModel(bk),r=e.getItemVisual(i,color),s=e.getItemVisual(i,borderColor)r,l=a.getItemStyle(Mk);t.useStyle(l),t.style.strokeNoScale=!0,t.style.fill=r,t.style.stroke=s,t.__simpleBox=n,uo(t,o.getModel(Sk).getItemStyle())}function ng(t,e){return f(t,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}function og(t,e,i){var n=t.getData(),o=n.getLayout(largePoints),a=new Tk({shape{pointso},__sign1});e.add(a);var r=new Tk({shape{pointso},__sign-1});e.add(r),ag(1,a,t,n),ag(-1,r,t,n),i&&(a.incremental=!0,r.incremental=!0)}function ag(t,e,i,n){var o=t0PN,a=n.getVisual(borderColor+o)n.getVisual(color+o),r=i.getModel(bk).getItemStyle(Mk);e.useStyle(r),e.style.fill=null,e.style.stroke=a}function rg(t,e,i,n,o){return in-1in1e0t.get(o,e-1)=n1-11}function sg(t,e){var i,n=t.getBaseAxis(),o=category===n.typen.getBandWidth()(i=n.getExtent(),Math.abs(i[1]-i[0])e.count()),a=Ro(A(t.get(barMaxWidth),o),o),r=Ro(A(t.get(barMinWidth),1),o),s=t.get(barWidth);return null!=sRo(s,o)Math.max(Math.min(o2,a),r)}function lg(t){return y(t)(t=[+t,+t]),t}function ug(t,e){t.eachChild(function(t){t.attr({ze.z,zlevele.zlevel,style{strokestroke===e.brushTypee.colornull,fillfill===e.brushTypee.colornull}})})}function hg(t,e){Zw.call(this);var i=new mu(t,e),n=new Zw;this.add(i),this.add(n),n.beforeUpdate=function(){this.attr(i.getScale())},this.updateData(t,e)}function cg(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=f(e,function(t){var e={coords[t[0].coord,t[1].coord]};return t[0].name&&(e.fromName=t[0].name),t[1].name&&(e.toName=t[1].name),o([e,t[0],t[1]])}))}function dg(t,e,i){Zw.call(this),this.add(this.createLine(t,e,i)),this._updateEffectSymbol(t,e)}function fg(t,e,i){Zw.call(this),this._createPolyline(t,e,i)}function pg(t,e,i){dg.call(this,t,e,i),this._lastFrame=0,this._lastFramePercent=0}function gg(){this.group=new Zw}function mg(t){return t instanceof Array(t=[t,t]),t}function vg(){var t=Y_();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}function yg(t,e,i){var n=t[1]-t[0],o=(e=f(e,function(e){return{interval[(e.interval[0]-t[0])n,(e.interval[1]-t[0])n]}})).length,a=0;return function(t){for(n=a;no;n++)if((r=e[n].interval)[0]=t&&t=r[1]){a=n;break}if(n===o)for(var n=a-1;n=0;n--){var r=e[n].interval;if(r[0]=t&&t=r[1]){a=n;break}}return n=0&&no&&i[n]}}function xg(t,e){var i=t[1]-t[0];return e=[(e[0]-t[0])i,(e[1]-t[0])i],function(t){return t=e[0]&&t=e[1]}}function _g(t){var e=t.dimensions;returnlng===e[0]&&lat===e[1]}function wg(t,e,i,n){var o=t.getItemLayout(e),a=i.get(symbolRepeat),r=i.get(symbolClip),s=i.get(symbolPosition)start,l=(i.get(symbolRotate)0)Math.PI1800,u=i.get(symbolPatternSize)2,h=i.isAnimationEnabled(),c={dataIndexe,layouto,itemModeli,symbolTypet.getItemVisual(e,symbol)circle,colort.getItemVisual(e,color),symbolClipr,symbolRepeata,symbolRepeatDirectioni.get(symbolRepeatDirection),symbolPatternSizeu,rotationl,animationModelhinull,hoverAnimationh&&i.get(hoverAnimation),z2i.getShallow(z,!0)0};bg(i,a,o,n,c),Mg(t,e,o,a,r,c.boundingLength,c.pxSign,u,n,c),Ig(i,c.symbolScale,l,n,c);var d=c.symbolSize,f=i.get(symbolOffset);return y(f)&&(f=[Ro(f[0],d[0]),Ro(f[1],d[1])]),Tg(i,d,o,a,r,f,s,c.valueLineWidth,c.boundingLength,c.repeatCutLength,n,c),c}function bg(t,e,i,n,o){var a,r=n.valueDim,s=t.get(symbolBoundingData),l=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),u=l.toGlobalCoord(l.dataToCoord(0)),h=1-+(i[r.wh]=0);if(y(s)){var c=[Sg(l,s[0])-u,Sg(l,s[1])-u];c[1]c[0]&&c.reverse(),a=c[h]}else a=null!=sSg(l,s)-uen.coordSysExtent[r.index][h]-ui[r.wh];o.boundingLength=a,e&&(o.repeatCutLength=i[r.wh]),o.pxSign=a01a0-10}function Sg(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function Mg(t,e,i,n,o,a,r,s,l,u){var h=l.valueDim,c=l.categoryDim,d=Math.abs(i[c.wh]),f=t.getItemVisual(e,symbolSize);y(f)f=f.slice()(null==f&&(f=100%),f=[f,f]),f[c.index]=Ro(f[c.index],d),f[h.index]=Ro(f[h.index],ndMath.abs(a)),u.symbolSize=f,(u.symbolScale=[f[0]s,f[1]s])[h.index]=(l.isHorizontal-11)r}function Ig(t,e,i,n,o){var a=t.get(jk)0;a&&(qk.attr({scalee.slice(),rotationi}),qk.updateTransform(),a=qk.getLineScale(),a=e[n.valueDim.index]),o.valueLineWidth=a}function Tg(t,e,i,n,o,r,s,l,u,h,c,d){var f=c.categoryDim,p=c.valueDim,g=d.pxSign,m=Math.max(e[p.index]+l,0),v=m;if(n){var y=Math.abs(u),x=T(t.get(symbolMargin),15%)+,_=!1;x.lastIndexOf(!)===x.length-1&&(_=!0,x=x.slice(0,x.length-1)),x=Ro(x,e[p.index]);var w=Math.max(m+2x,0),b=_02x,S=Ko(n),M=SnHg((y+b)w);w=m+2(x=(y-Mm)2(_MM-1)),b=_02x,Sfixed===n(M=hHg((Math.abs(h)+b)w)0),v=Mw-b,d.repeatTimes=M,d.symbolMargin=x}var I=g(v2),A=d.pathPosition=[];A[f.index]=i[f.wh]2,A[p.index]=start===sIend===su-Iu2,r&&(A[0]+=r[0],A[1]+=r[1]);var D=d.bundlePosition=[];D[f.index]=i[f.xy],D[p.index]=i[p.xy];var C=d.barRectShape=a({},i);C[p.wh]=gMath.max(Math.abs(i[p.wh]),Math.abs(A[p.index]+I)),C[f.wh]=i[f.wh];var L=d.clipShape={};L[f.xy]=-i[f.xy],L[f.wh]=c.ecSize[f.wh],L[p.xy]=0,L[p.wh]=i[p.wh]}function Ag(t){var e=t.symbolPatternSize,i=Xl(t.symbolType,-e2,-e2,e,e,t.color);return i.attr({culling!0}),image!==i.type&&i.setStyle({strokeNoScale!0}),i}function Dg(t,e,i,n){function o(t){var e=l.slice(),n=i.pxSign,o=t;return(start===i.symbolRepeatDirectionn0n0)&&(o=h-1-t),e[u.index]=d(o-h2+.5)+l[u.index],{positione,scalei.symbolScale.slice(),rotationi.rotation}}var a=t.__pictorialBundle,r=i.symbolSize,s=i.valueLineWidth,l=i.pathPosition,u=e.valueDim,h=i.repeatTimes0,c=0,d=r[e.valueDim.index]+s+2i.symbolMargin;for(Gg(t,function(t){t.__pictorialAnimationIndex=c,t.__pictorialRepeatTimes=h,chFg(t,null,o(c),i,n)Fg(t,null,{scale[0,0]},i,n,function(){a.remove(t)}),Eg(t,i),c++});ch;c++){var f=Ag(i);f.__pictorialAnimationIndex=c,f.__pictorialRepeatTimes=h,a.add(f);var p=o(c);Fg(f,{positionp.position,scale[0,0]},{scalep.scale,rotationp.rotation},i,n),f.on(mouseover,function(){Gg(t,function(t){t.trigger(emphasis)})}).on(mouseout,function(){Gg(t,function(t){t.trigger(normal)})}),Eg(f,i)}}function Cg(t,e,i,n){var o=t.__pictorialBundle,a=t.__pictorialMainPath;aFg(a,null,{positioni.pathPosition.slice(),scalei.symbolScale.slice(),rotationi.rotation},i,n)(a=t.__pictorialMainPath=Ag(i),o.add(a),Fg(a,{positioni.pathPosition.slice(),scale[0,0],rotationi.rotation},{scalei.symbolScale.slice()},i,n),a.on(mouseover,function(){this.trigger(emphasis)}).on(mouseout,function(){this.trigger(normal)})),Eg(a,i)}function Lg(t,e,i){var n=a({},e.barRectShape),o=t.__pictorialBarRect;oFg(o,null,{shapen},e,i)(o=t.__pictorialBarRect=new aM({z22,shapen,silent!0,style{stroketransparent,filltransparent,lineWidth0}}),t.add(o))}function kg(t,e,i,n){if(i.symbolClip){var o=t.__pictorialClipPath,r=a({},i.clipShape),s=e.valueDim,l=i.animationModel,u=i.dataIndex;if(o)bo(o,{shaper},l,u);else{r[s.wh]=0,o=new aM({shaper}),t.__pictorialBundle.setClipPath(o),t.__pictorialClipPath=o;var h={};h[s.wh]=i.clipShape[s.wh],bM[nupdatePropsinitProps](o,{shapeh},l,u)}}}function Pg(t,e){var i=t.getItemModel(e);return i.getAnimationDelayParams=Ng,i.isAnimationEnabled=Og,i}function Ng(t){return{indext.__pictorialAnimationIndex,countt.__pictorialRepeatTimes}}function Og(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow(animation)}function Eg(t,e){t.off(emphasis).off(normal);var i=e.symbolScale.slice();e.hoverAnimation&&t.on(emphasis,function(){this.animateTo({scale[1.1i[0],1.1i[1]]},400,elasticOut)}).on(normal,function(){this.animateTo({scalei.slice()},400,elasticOut)})}function Rg(t,e,i,n){var o=new Zw,a=new Zw;return o.add(a),o.__pictorialBundle=a,a.attr(position,i.bundlePosition.slice()),i.symbolRepeatDg(o,e,i)Cg(o,e,i),Lg(o,i,n),kg(o,e,i,n),o.__pictorialShapeStr=Vg(t,i),o.__pictorialSymbolMeta=i,o}function zg(t,e,i){var n=i.animationModel,o=i.dataIndex;bo(t.__pictorialBundle,{positioni.bundlePosition.slice()},n,o),i.symbolRepeatDg(t,e,i,!0)Cg(t,e,i,!0),Lg(t,i,!0),kg(t,e,i,!0)}function Bg(t,e,i,n){var o=n.__pictorialBarRect;o&&(o.style.text=null);var a=[];Gg(n,function(t){a.push(t)}),n.__pictorialMainPath&&a.push(n.__pictorialMainPath),n.__pictorialClipPath&&(i=null),d(a,function(t){bo(t,{scale[0,0]},i,e,function(){n.parent&&n.parent.remove(n)})}),t.setItemGraphicEl(e,null)}function Vg(t,e){return[t.getItemVisual(e.dataIndex,symbol)none,!!e.symbolRepeat,!!e.symbolClip].join()}function Gg(t,e,i){d(t.__pictorialBundle.children(),function(n){n!==t.__pictorialBarRect&&e.call(i,n)})}function Fg(t,e,i,n,o,a){e&&t.attr(e),n.symbolClip&&!oi&&t.attr(i)i&&bM[oupdatePropsinitProps](t,i,n.animationModel,n.dataIndex,a)}function Wg(t,e,i){var n=i.color,o=i.dataIndex,a=i.itemModel,s=a.getModel(itemStyle).getItemStyle([color]),l=a.getModel(emphasis.itemStyle).getItemStyle(),u=a.getShallow(cursor);Gg(t,function(t){t.setColor(n),t.setStyle(r({filln,opacityi.opacity},s)),uo(t,l),u&&(t.cursor=u),t.z2=i.z2});var h={},c=e.valueDim.posDesc[+(i.boundingLength0)],d=t.__pictorialBarRect;Th(d.style,h,a,n,e.seriesModel,o,c),uo(d,h)}function Hg(t){var e=Math.round(t);return Math.abs(t-e)1e-4eMath.ceil(t)}function Zg(t,e,i){this.dimension=single,this.dimensions=[single],this._axis=null,this._rect,this._init(t,e,i),this.model=t}function Ug(t,e){e=e{};var i=t.coordinateSystem,n=t.axis,o={},a=n.position,r=n.orient,s=i.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal{topl[2],bottoml[3]},vertical{leftl[0],rightl[1]}};o.position=[vertical===ru.vertical[a]l[0],horizontal===ru.horizontal[a]l[3]];var h={horizontal0,vertical1};o.rotation=Math.PI2h[r];var c={top-1,bottom1,right1,left-1};o.labelDirection=o.tickDirection=o.nameDirection=c[a],t.get(axisTick.inside)&&(o.tickDirection=-o.tickDirection),T(e.labelInside,t.get(axisLabel.inside))&&(o.labelDirection=-o.labelDirection);var d=e.rotate;return null==d&&(d=t.get(axisLabel.rotate)),o.labelRotation=top===a-dd,o.z2=1,o}function Xg(t,e,i,n,o){var r=t.axis;if(!r.scale.isBlank()&&r.containData(e))if(t.involveSeries){var s=jg(e,t),l=s.payloadBatch,u=s.snapToValue;l[0]&&null==o.seriesIndex&&a(o,l[0]),!n&&t.snap&&r.containData(u)&&null!=u&&(e=u),i.showPointer(t,e,l,o),i.showTooltip(t,s,u)}else i.showPointer(t,e)}function jg(t,e){var i=e.axis,n=i.dim,o=t,a=[],r=Number.MAX_VALUE,s=-1;return iP(e.seriesModels,function(e,l){var u,h,c=e.getData().mapDimension(n,!0);if(e.getAxisTooltipData){var d=e.getAxisTooltipData(c,t,i);h=d.dataIndices,u=d.nestestValue}else{if(!(h=e.getData().indicesOfNearest(c[0],t,category===i.type.5null)).length)return;u=e.getData().get(c[0],h[0])}if(null!=u&&isFinite(u)){var f=t-u,p=Math.abs(f);p=r&&((prf=0&&s0)&&(r=p,s=f,o=u,a.length=0),iP(h,function(t){a.push({seriesIndexe.seriesIndex,dataIndexInsidet,dataIndexe.getData().getRawIndex(t)})}))}}),{payloadBatcha,snapToValueo}}function Yg(t,e,i,n){t[e.key]={valuei,payloadBatchn}}function qg(t,e,i,n){var o=i.payloadBatch,a=e.axis,r=a.model,s=e.axisPointerModel;if(e.triggerTooltip&&o.length){var l=e.coordSys.model,u=bh(l),h=t.map[u];h(h=t.map[u]={coordSysIdl.id,coordSysIndexl.componentIndex,coordSysTypel.type,coordSysMainTypel.mainType,dataByAxis[]},t.list.push(h)),h.dataByAxis.push({axisDima.dim,axisIndexr.componentIndex,axisTyper.type,axisIdr.id,valuen,valueLabelOpt{precisions.get(label.precision),formatters.get(label.formatter)},seriesDataIndiceso.slice()})}}function Kg(t,e,i){var n=i.axesInfo=[];iP(e,function(e,i){var o=e.axisPointerModel.option,a=t[i];a(!e.useHandle&&(o.status=show),o.value=a.value,o.seriesDataIndices=(a.payloadBatch[]).slice())!e.useHandle&&(o.status=hide),show===o.status&&n.push({axisDime.axis.dim,axisIndexe.axis.model.componentIndex,valueo.value})})}function $g(t,e,i,n){if(!em(e)&&t.list.length){var o=((t.list[0].dataByAxis[0]{}).seriesDataIndices[])[0]{};n({typeshowTip,escapeConnect!0,xe[0],ye[1],tooltipOptioni.tooltipOption,positioni.position,dataIndexInsideo.dataIndexInside,dataIndexo.dataIndex,seriesIndexo.seriesIndex,dataByCoordSyst.list})}else n({typehideTip})}function Jg(t,e,i){var n=i.getZr(),o=oP(n).axisPointerLastHighlights{},a=oP(n).axisPointerLastHighlights={};iP(t,function(t,e){var i=t.axisPointerModel.option;show===i.status&&iP(i.seriesDataIndices,function(t){var e=t.seriesIndex+  +t.dataIndex;a[e]=t})});var r=[],s=[];d(o,function(t,e){!a[e]&&s.push(t)}),d(a,function(t,e){!o[e]&&r.push(t)}),s.length&&i.dispatchAction({typedownplay,escapeConnect!0,batchs}),r.length&&i.dispatchAction({typehighlight,escapeConnect!0,batchr})}function Qg(t,e){for(var i=0;i(t[]).length;i++){var n=t[i];if(e.axis.dim===n.axisDim&&e.axis.model.componentIndex===n.axisIndex)return n}}function tm(t){var e=t.axis.model,i={},n=i.axisDim=t.axis.dim;return i.axisIndex=i[n+AxisIndex]=e.componentIndex,i.axisName=i[n+AxisName]=e.name,i.axisId=i[n+AxisId]=e.id,i}function em(t){return!tnull==t[0]isNaN(t[0])null==t[1]isNaN(t[1])}function im(t,e,i){if(!z_.node){var n=e.getZr();aP(n).records(aP(n).records={}),nm(n,e),(aP(n).records[t](aP(n).records[t]={})).handler=i}}function nm(t,e){function i(i,n){t.on(i,function(i){var o=sm(e);rP(aP(t).records,function(t){t&&n(t,i,o.dispatchAction)}),om(o.pendings,e)})}aP(t).initialized(aP(t).initialized=!0,i(click,v(rm,click)),i(mousemove,v(rm,mousemove)),i(globalout,am))}function om(t,e){var i,n=t.showTip.length,o=t.hideTip.length;ni=t.showTip[n-1]o&&(i=t.hideTip[o-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function am(t,e,i){t.handler(leave,null,i)}function rm(t,e,i,n){e.handler(t,i,n)}function sm(t){var e={showTip[],hideTip[]},i=function(n){var o=e[n.type];oo.push(n)(n.dispatchAction=i,t.dispatchAction(n))};return{dispatchActioni,pendingse}}function lm(t,e){if(!z_.node){var i=e.getZr();(aP(i).records{})[t]&&(aP(i).records[t]=null)}}function um(){}function hm(t,e,i,n){cm(lP(i).lastProp,n)(lP(i).lastProp=n,ebo(i,n,t)(i.stopAnimation(),i.attr(n)))}function cm(t,e){if(w(t)&&w(e)){var i=!0;return d(e,function(e,n){i=i&&cm(t[n],e)}),!!i}return t===e}function dm(t,e){t[e.get(label.show)showhide]()}function fm(t){return{positiont.position.slice(),rotationt.rotation0}}function pm(t,e,i){var n=e.get(z),o=e.get(zlevel);t&&t.traverse(function(t){group!==t.type&&(null!=n&&(t.z=n),null!=o&&(t.zlevel=o),t.silent=i)})}function gm(t){var e,i=t.get(type),n=t.getModel(i+Style);returnline===i(e=n.getLineStyle()).fill=nullshadow===i&&((e=n.getAreaStyle()).stroke=null),e}function mm(t,e,i,n,o){var a=ym(i.get(value),e.axis,e.ecModel,i.get(seriesDataIndices),{precisioni.get(label.precision),formatteri.get(label.formatter)}),r=i.getModel(label),s=OM(r.get(padding)0),l=r.getFont(),u=De(a,l),h=o.position,c=u.width+s[1]+s[3],d=u.height+s[0]+s[2],f=o.align;right===f&&(h[0]-=c),center===f&&(h[0]-=c2);var p=o.verticalAlign;bottom===p&&(h[1]-=d),middle===p&&(h[1]-=d2),vm(h,c,d,n);var g=r.get(backgroundColor);g&&auto!==g(g=e.get(axisLine.lineStyle.color)),t.label={shape{x0,y0,widthc,heightd,rr.get(borderRadius)},positionh.slice(),style{texta,textFontl,textFillr.getTextColor(),textPositioninside,fillg,stroker.get(borderColor)transparent,lineWidthr.get(borderWidth)0,shadowBlurr.get(shadowBlur),shadowColorr.get(shadowColor),shadowOffsetXr.get(shadowOffsetX),shadowOffsetYr.get(shadowOffsetY)},z210}}function vm(t,e,i,n){var o=n.getWidth(),a=n.getHeight();t[0]=Math.min(t[0]+e,o)-e,t[1]=Math.min(t[1]+i,a)-i,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function ym(t,e,i,n,o){t=e.scale.parse(t);var a=e.scale.getLabel(t,{precisiono.precision}),r=o.formatter;if(r){var s={valueWl(e,t),seriesData[]};d(n,function(t){var e=i.getSeriesByIndex(t.seriesIndex),n=t.dataIndexInside,o=e&&e.getDataParams(n);o&&s.seriesData.push(o)}),_(r)a=r.replace({value},a)x(r)&&(a=r(s))}return a}function xm(t,e,i){var n=mt();return wt(n,n,i.rotation),_t(n,n,i.position),Io([t.dataToCoord(e),(i.labelOffset0)+(i.labelDirection1)(i.labelMargin0)],n)}function _m(t,e,i,n,o,a){var r=ID.innerTextLayout(i.rotation,0,i.labelDirection);i.labelMargin=o.get(label.margin),mm(e,n,o,a,{positionxm(n.axis,t,i),alignr.textAlign,verticalAlignr.textVerticalAlign})}function wm(t,e,i){return i=i0,{x1t[i],y1t[1-i],x2e[i],y2e[1-i]}}function bm(t,e,i){return i=i0,{xt[i],yt[1-i],widthe[i],heighte[1-i]}}function Sm(t,e,i,n,o,a){return{cxt,cye,r0i,rn,startAngleo,endAnglea,clockwise!0}}function Mm(t,e){var i={};return i[e.dim+AxisIndex]=e.index,t.getCartesian(i)}function Im(t){returnx===t.dim01}function Tm(t){return t.isHorizontal()01}function Am(t,e){var i=t.getRect();return[i[fP[e]],i[fP[e]]+i[pP[e]]]}function Dm(t,e,i){var n=new aM({shape{xt.x-10,yt.y-10,width0,heightt.height+20}});return So(n,{shape{widtht.width+20,heightt.height+20}},e,i),n}function Cm(t,e,i){if(t.count())for(var n,o=e.coordinateSystem,a=e.getLayerSeries(),r=t.mapDimension(single),s=t.mapDimension(value),l=f(a,function(e){return f(e.indices,function(e){var i=o.dataToPoint(t.get(r,e));return i[1]=t.get(s,e),i})}),u=Lm(l),h=u.y0,c=iu.max,d=a.length,p=a[0].indices.length,g=0;gp;++g){n=h[g]c,t.setItemLayout(a[0].indices[g],{layerIndex0,xl[0][g][0],y0n,yl[0][g][1]c});for(var m=1;md;++m)n+=l[m-1][g][1]c,t.setItemLayout(a[m].indices[g],{layerIndexm,xl[m][g][0],y0n,yl[m][g][1]c})}}function Lm(t){for(var e=t.length,i=t[0].length,n=[],o=[],a=0,r={},s=0;si;++s){for(var l=0,u=0;le;++l)u+=t[l][s][1];ua&&(a=u),n.push(u)}for(var h=0;hi;++h)o[h]=(a-n[h])2;a=0;for(var c=0;ci;++c){var d=n[c]+o[c];da&&(a=d)}return r.y0=o,r.max=a,r}function km(t){var e=0;d(t.children,function(t){km(t);var i=t.value;y(i)&&(i=i[0]),e+=i});var i=t.value;y(i)&&(i=i[0]),(null==iisNaN(i))&&(i=e),i0&&(i=0),y(t.value)t.value[0]=it.value=i}function Pm(t,e,i){function n(){r.ignore=r.hoverIgnore}function o(){r.ignore=r.normalIgnore}Zw.call(this);var a=new QS({z2xP});a.seriesIndex=e.seriesIndex;var r=new qS({z2_P,silentt.getModel(label).get(silent)});this.add(a),this.add(r),this.updateData(!0,t,normal,e,i),this.on(emphasis,n).on(normal,o).on(mouseover,n).on(mouseout,o)}function Nm(t,e,i){var n=t.getVisual(color),o=t.getVisual(visualMeta);o&&0!==o.length(n=null);var a=t.getModel(itemStyle).get(color);if(a)return a;if(n)return n;if(0===t.depth)return i.option.color[0];var r=i.option.color.length;return a=i.option.color[Om(t)%r]}function Om(t){for(var e=t;e.depth1;)e=e.parentNode;return l(t.getAncestors()[0].children,e)}function Em(t,e,i){return i!==yP.NONE&&(i===yP.SELFt===ei===yP.ANCESTORt===et.isAncestorOf(e)t===et.isDescendantOf(e))}function Rm(t,e){var i=t.children[];t.children=zm(i,e),i.length&&d(t.children,function(t){Rm(t,e)})}function zm(t,e){if(function==typeof e)return t.sort(e);var i=asc===e;return t.sort(function(t,e){var n=(t.getValue()-e.getValue())(i1-1);return 0===n(t.dataIndex-e.dataIndex)(i-11)n})}function Bm(t,e){return e=e[0,0],f([x,y],function(i,n){var o=this.getAxis(i),a=e[n],r=t[n]2;returncategory===o.typeo.getBandWidth()Math.abs(o.dataToCoord(a-r)-o.dataToCoord(a+r))},this)}function Vm(t,e){return e=e[0,0],f([0,1],function(i){var n=e[i],o=t[i]2,a=[],r=[];return a[i]=n-o,r[i]=n+o,a[1-i]=r[1-i]=e[1-i],Math.abs(this.dataToPoint(a)[i]-this.dataToPoint(r)[i])},this)}function Gm(t,e){var i=this.getAxis(),n=e instanceof Arraye[0]e,o=(t instanceof Arrayt[0]t)2;returncategory===i.typei.getBandWidth()Math.abs(i.dataToCoord(n-o)-i.dataToCoord(n+o))}function Fm(t,e){return f([Radius,Angle],function(i,n){var o=this[get+i+Axis](),a=e[n],r=t[n]2,s=dataTo+i,l=category===o.typeo.getBandWidth()Math.abs(o[s](a-r)-o[s](a+r));returnAngle===i&&(l=lMath.PI180),l},this)}function Wm(t){var e,i=t.type;if(path===i){var n=t.shape,o=null!=n.width&&null!=n.height{xn.x0,yn.y0,widthn.width,heightn.height}null,a=tv(n);(e=Wn(a,null,o,n.layoutcenter)).__customPathData=a}elseimage===i(e=new hi({})).__customImagePath=t.style.imagetext===i(e=new qS({})).__customText=t.style.texte=new(0,bM[i.charAt(0).toUpperCase()+i.slice(1)]);return e.__customGraphicType=i,e.name=t.name,e}function Hm(t,e,n,o,a,r,s){var l={},u=n.style{};if(n.shape&&(l.shape=i(n.shape)),n.position&&(l.position=n.position.slice()),n.scale&&(l.scale=n.scale.slice()),n.origin&&(l.origin=n.origin.slice()),n.rotation&&(l.rotation=n.rotation),image===t.type&&n.style){h=l.style={};d([x,y,width,height],function(e){Zm(e,h,u,t.style,r)})}if(text===t.type&&n.style){var h=l.style={};d([x,y],function(e){Zm(e,h,u,t.style,r)}),!u.hasOwnProperty(textFill)&&u.fill&&(u.textFill=u.fill),!u.hasOwnProperty(textStroke)&&u.stroke&&(u.textStroke=u.stroke)}if(group!==t.type&&(t.useStyle(u),r)){t.style.opacity=0;var c=u.opacity;null==c&&(c=1),So(t,{style{opacityc}},o,e)}rt.attr(l)bo(t,l,o,e),n.hasOwnProperty(z2)&&t.attr(z2,n.z20),n.hasOwnProperty(silent)&&t.attr(silent,n.silent),n.hasOwnProperty(invisible)&&t.attr(invisible,n.invisible),n.hasOwnProperty(ignore)&&t.attr(ignore,n.ignore),n.hasOwnProperty(info)&&t.attr(info,n.info);var f=n.styleEmphasis,p=!1===f;t.__cusHasEmphStl&&null==f!t.__cusHasEmphStl&&p(no(t,f),t.__cusHasEmphStl=!p),s&&ho(t,!p)}function Zm(t,e,i,n,o){null==i[t]o(e[t]=i[t],i[t]=n[t])}function Um(t,e,i,n){function o(t){null==t&&(t=h),v&&(c=e.getItemModel(t),d=c.getModel(AP),f=c.getModel(DP),p=e.getItemVisual(t,color),v=!1)}var s=t.get(renderItem),l=t.coordinateSystem,u={};l&&(u=l.prepareCustomsl.prepareCustoms()LP[l.type](l));var h,c,d,f,p,g=r({getWidthn.getWidth,getHeightn.getHeight,getZrn.getZr,getDevicePixelRation.getDevicePixelRatio,valuefunction(t,i){return null==i&&(i=h),e.get(e.getDimension(t0),i)},stylefunction(i,n){null==n&&(n=h),o(n);var r=c.getModel(IP).getItemStyle();null!=p&&(r.fill=p);var s=e.getItemVisual(n,opacity);return null!=s&&(r.opacity=s),fo(r,d,null,{autoColorp,isRectText!0}),r.text=d.getShallow(show)A(t.getFormattedLabel(n,normal),gu(e,n))null,i&&a(r,i),r},styleEmphasisfunction(i,n){null==n&&(n=h),o(n);var r=c.getModel(TP).getItemStyle();return fo(r,f,null,{isRectText!0},!0),r.text=f.getShallow(show)D(t.getFormattedLabel(n,emphasis),t.getFormattedLabel(n,normal),gu(e,n))null,i&&a(r,i),r},visualfunction(t,i){return null==i&&(i=h),e.getItemVisual(i,t)},barLayoutfunction(t){if(l.getBaseAxis)return Tl(r({axisl.getBaseAxis()},t),n)},currentSeriesIndicesfunction(){return i.getCurrentSeriesIndices()},fontfunction(t){return _o(t,i)}},u.api{}),m={context{},seriesIdt.id,seriesNamet.name,seriesIndext.seriesIndex,coordSysu.coordSys,dataInsideLengthe.count(),encodeXm(t.getData())},v=!0;return function(t,i){return h=t,v=!0,s&&s(r({dataIndexInsidet,dataIndexe.getRawIndex(t),actionTypeii.typenull},m),g)}}function Xm(t){var e={};return d(t.dimensions,function(i,n){var o=t.getDimensionInfo(i);if(!o.isExtraCoord){var a=o.coordDim;(e[a]=e[a][])[o.coordDimIndex]=n}}),e}function jm(t,e,i,n,o,a){return(t=Ym(t,e,i,n,o,a,!0))&&a.setItemGraphicEl(e,t),t}function Ym(t,e,i,n,o,a,r){var s=!i,l=(i=i{}).type,u=i.shape,h=i.style;if(t&&(snull!=l&&l!==t.__customGraphicTypepath===l&&ev(u)&&tv(u)!==t.__customPathDataimage===l&&iv(h,image)&&h.image!==t.__customImagePathtext===l&&iv(u,text)&&h.text!==t.__customText)&&(o.remove(t),t=null),!s){var c=!t;return!t&&(t=Wm(i)),Hm(t,e,i,n,a,c,r),group===l&&qm(t,e,i,n,a),o.add(t),t}}function qm(t,e,i,n,o){var a=i.children,r=aa.length0,s=i.$mergeChildren,l=byName===si.diffChildrenByName,u=!1===s;if(rlu)if(l)Km({oldChildrent.children()[],newChildrena[],dataIndexe,animatableModeln,groupt,datao});else{u&&t.removeAll();for(var h=0;hr;h++)a[h]&&Ym(t.childAt(h),e,a[h],n,t,o)}}function Km(t){new Hs(t.oldChildren,t.newChildren,$m,$m,t).add(Jm).update(Jm).remove(Qm).execute()}function $m(t,e){var i=t&&t.name;return null!=iiCP+e}function Jm(t,e){var i=this.context,n=null!=ti.newChildren[t]null;Ym(null!=ei.oldChildren[e]null,i.dataIndex,n,i.animatableModel,i.group,i.data)}function Qm(t){var e=this.context,i=e.oldChildren[t];i&&e.group.remove(i)}function tv(t){return t&&(t.pathDatat.d)}function ev(t){return t&&(t.hasOwnProperty(pathData)t.hasOwnProperty(d))}function iv(t,e){return t&&t.hasOwnProperty(e)}function nv(t,e,i,n){var o=i.type,a=new(0,bM[o.charAt(0).toUpperCase()+o.slice(1)])(i);e.add(a),n.set(t,a),a.__ecGraphicId=t}function ov(t,e){var i=t&&t.parent;i&&(group===t.type&&t.traverse(function(t){ov(t,e)}),e.removeKey(t.__ecGraphicId),i.remove(t))}function av(t){return t=a({},t),d([id,parentId,$action,hv,bounding].concat(HM),function(e){delete t[e]}),t}function rv(t,e){var i;return d(e,function(e){null!=t[e]&&auto!==t[e]&&(i=!0)}),i}function sv(t,e){var i=t.exist;if(e.id=t.keyInfo.id,!e.type&&i&&(e.type=i.type),null==e.parentId){var n=e.parentOption;ne.parentId=n.idi&&(e.parentId=i.parentId)}e.parentOption=null}function lv(t,e,i){var o=a({},i),r=t[e],s=i.$actionmerge;merge===sr(n(r,o,!0),ca(r,o,{ignoreSize!0}),fa(i,r))t[e]=oreplace===st[e]=oremove===s&&r&&(t[e]=null)}function uv(t,e){t&&(t.hv=e.hv=[rv(e,[left,right]),rv(e,[top,bottom])],group===t.type&&(null==t.width&&(t.width=e.width=0),null==t.height&&(t.height=e.height=0)))}function hv(t,e,i){var n=t.eventData;t.silentt.ignoren(n=t.eventData={componentTypegraphic,componentIndexe.componentIndex,namet.name}),n&&(n.info=t.info)}function cv(t,e,i){var n,o={},a=toggleSelected===t;return i.eachComponent(legend,function(i){a&&null!=ni[nselectunSelect](e.name)(i[t](e.name),n=i.isSelected(e.name)),d(i.getData(),function(t){var e=t.get(name);if(n!==e&&!==e){var n=i.isSelected(e);o.hasOwnProperty(e)o[e]=o[e]&&no[e]=n}})}),{namee.name,selectedo}}function dv(t,e,i){var n=e.getBoxLayoutParams(),o=e.get(padding),a={widthi.getWidth(),heighti.getHeight()},r=la(n,a,o);UM(e.get(orient),t,e.get(itemGap),r.width,r.height),ua(t,n,a,o)}function fv(t,e){var i=OM(e.get(padding)),n=e.getItemStyle([color,opacity]);return n.fill=e.get(backgroundColor),t=new aM({shape{xt.x-i[3],yt.y-i[0],widtht.width+i[1]+i[3],heightt.height+i[0]+i[2],re.get(borderRadius)},stylen,silent!0,z2-1})}function pv(t,e){e.dispatchAction({typelegendToggleSelect,namet})}function gv(t,e,i,n){var o=i.getZr().storage.getDisplayList()[0];o&&o.useHoverLayeri.dispatchAction({typehighlight,seriesNamet,namee,excludeSeriesIdn})}function mv(t,e,i,n){var o=i.getZr().storage.getDisplayList()[0];o&&o.useHoverLayeri.dispatchAction({typedownplay,seriesNamet,namee,excludeSeriesIdn})}function vv(t,e,i){var n=[1,1];n[t.getOrient().index]=0,ca(e,i,{typebox,ignoreSizen})}function yv(t){var e=left +t+s cubic-bezier(0.23, 1, 0.32, 1),top +t+s cubic-bezier(0.23, 1, 0.32, 1);return f(ZP,function(t){return t+transition+e}).join(;)}function xv(t){var e=[],i=t.get(fontSize),n=t.getTextColor();return n&&e.push(color+n),e.push(font+t.getFont()),i&&e.push(line-height+Math.round(3i2)+px),WP([decoration,align],function(i){var n=t.get(i);n&&e.push(text-+i++n)}),e.join(;)}function _v(t){var e=[],i=t.get(transitionDuration),n=t.get(backgroundColor),o=t.getModel(textStyle),a=t.get(padding);return i&&e.push(yv(i)),n&&(z_.canvasSupportede.push(background-Color+n)(e.push(background-Color#+Ft(n)),e.push(filteralpha(opacity=70)))),WP([width,color,radius],function(i){var n=border-+i,o=HP(n),a=t.get(o);null!=a&&e.push(n++a+(color===ipx))}),e.push(xv(o)),null!=a&&e.push(padding+OM(a).join(px )+px),e.join(;)+;}function wv(t,e){if(z_.wxa)return null;var i=document.createElement(div),n=this._zr=e.getZr();this.el=i,this._x=e.getWidth()2,this._y=e.getHeight()2,t.appendChild(i),this._container=t,this._show=!1,this._hideTimeout;var o=this;i.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},i.onmousemove=function(e){if(e=ewindow.event,!o._enterable){var i=n.handler;lt(t,e,!0),i.dispatch(mousemove,e)}},i.onmouseleave=function(){o._enterable&&o._show&&o.hideLater(o._hideDelay),o._inContent=!1}}function bv(t){this._zr=t.getZr(),this._show=!1,this._hideTimeout}function Sv(t){for(var e=t.pop();t.length;){var i=t.pop();i&&(Lo.isInstance(i)&&(i=i.get(tooltip,!0)),string==typeof i&&(i={formatteri}),e=new Lo(i,e,e.ecModel))}return e}function Mv(t,e){return t.dispatchActionm(e.dispatchAction,e)}function Iv(t,e,i,n,o,a,r){var s=i.getOuterSize(),l=s.width,u=s.height;return null!=a&&(t+l+ant-=l+at+=a),null!=r&&(e+u+roe-=u+re+=r),[t,e]}function Tv(t,e,i,n,o){var a=i.getOuterSize(),r=a.width,s=a.height;return t=Math.min(t+r,n)-r,e=Math.min(e+s,o)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function Av(t,e,i){var n=i[0],o=i[1],a=0,r=0,s=e.width,l=e.height;switch(t){caseinsidea=e.x+s2-n2,r=e.y+l2-o2;break;casetopa=e.x+s2-n2,r=e.y-o-5;break;casebottoma=e.x+s2-n2,r=e.y+l+5;break;caselefta=e.x-n-5,r=e.y+l2-o2;break;caserighta=e.x+s+5,r=e.y+l2-o2}return[a,r]}function Dv(t){returncenter===tmiddle===t}function Cv(t){return t.get(stack)__ec_stack_+t.seriesIndex}function Lv(t){return t.dim}function kv(t,e){var i={};d(t,function(t,e){var n=t.getData(),o=t.coordinateSystem.getBaseAxis(),a=o.getExtent(),r=category===o.typeo.getBandWidth()Math.abs(a[1]-a[0])n.count(),s=i[Lv(o)]{bandWidthr,remainedWidthr,autoWidthCount0,categoryGap20%,gap30%,stacks{}},l=s.stacks;i[Lv(o)]=s;var u=Cv(t);l[u]s.autoWidthCount++,l[u]=l[u]{width0,maxWidth0};var h=Ro(t.get(barWidth),r),c=Ro(t.get(barMaxWidth),r),d=t.get(barGap),f=t.get(barCategoryGap);h&&!l[u].width&&(h=Math.min(s.remainedWidth,h),l[u].width=h,s.remainedWidth-=h),c&&(l[u].maxWidth=c),null!=d&&(s.gap=d),null!=f&&(s.categoryGap=f)});var n={};return d(i,function(t,e){n[e]={};var i=t.stacks,o=t.bandWidth,a=Ro(t.categoryGap,o),r=Ro(t.gap,1),s=t.remainedWidth,l=t.autoWidthCount,u=(s-a)(l+(l-1)r);u=Math.max(u,0),d(i,function(t,e){var i=t.maxWidth;i&&iu&&(i=Math.min(i,s),t.width&&(i=Math.min(i,t.width)),s-=i,t.width=i,l--)}),u=(s-a)(l+(l-1)r),u=Math.max(u,0);var h,c=0;d(i,function(t,e){t.width(t.width=u),h=t,c+=t.width(1+r)}),h&&(c-=h.widthr);var f=-c2;d(i,function(t,i){n[e][i]=n[e][i]{offsetf,widtht.width},f+=t.width(1+r)})}),n}function Pv(t,e){HA.call(this,radius,t,e),this.type=category}function Nv(t,e){e=e[0,360],HA.call(this,angle,t,e),this.type=category}function Ov(t,e){return e.type(e.datacategoryvalue)}function Ev(t,e,i){var n=e.get(center),o=i.getWidth(),a=i.getHeight();t.cx=Ro(n[0],o),t.cy=Ro(n[1],a);var r=t.getRadiusAxis(),s=Math.min(o,a)2,l=Ro(e.get(radius),s);r.inverser.setExtent(l,0)r.setExtent(0,l)}function Rv(t,e){var i=this,n=i.getAngleAxis(),o=i.getRadiusAxis();if(n.scale.setExtent(10,-10),o.scale.setExtent(10,-10),t.eachSeries(function(t){if(t.coordinateSystem===i){var e=t.getData();d(e.mapDimension(radius,!0),function(t){o.scale.unionExtentFromData(e,cl(e,t))}),d(e.mapDimension(angle,!0),function(t){n.scale.unionExtentFromData(e,cl(e,t))})}}),Bl(n.scale,n.model),Bl(o.scale,o.model),category===n.type&&!n.onBand){var a=n.getExtent(),r=360n.scale.count();n.inversea[1]+=ra[1]-=r,n.setExtent(a[0],a[1])}}function zv(t,e){if(t.type=e.get(type),t.scale=Vl(e),t.onBand=e.get(boundaryGap)&&category===t.type,t.inverse=e.get(inverse),angleAxis===e.mainType){t.inverse^=e.get(clockwise);var i=e.get(startAngle);t.setExtent(i,i+(t.inverse-360360))}e.axis=t,t.model=e}function Bv(t,e,i){e[1]e[0]&&(e=e.slice().reverse());var n=t.coordToPoint([e[0],i]),o=t.coordToPoint([e[1],i]);return{x1n[0],y1n[1],x2o[0],y2o[1]}}function Vv(t){return t.getRadiusAxis().inverse01}function Gv(t){var e=t[0],i=t[t.length-1];e&&i&&Math.abs(Math.abs(e.coord-i.coord)-360)1e-4&&t.pop()}function Fv(t,e,i){return{position[t.cx,t.cy],rotationi180Math.PI,labelDirection-1,tickDirection-1,nameDirection1,labelRotatee.getModel(axisLabel).get(rotate),z21}}function Wv(t,e,i,n,o){var a=e.axis,r=a.dataToCoord(t),s=n.getAngleAxis().getExtent()[0];s=s180Math.PI;var l,u,h,c=n.getRadiusAxis().getExtent();if(radius===a.dim){var d=mt();wt(d,d,s),_t(d,d,[n.cx,n.cy]),l=Io([r,-o],d);var f=e.getModel(axisLabel).get(rotate)0,p=ID.innerTextLayout(s,fMath.PI180,-1);u=p.textAlign,h=p.textVerticalAlign}else{var g=c[1];l=n.coordToPoint([g+o,r]);var m=n.cx,v=n.cy;u=Math.abs(l[0]-m)g.3centerl[0]mleftright,h=Math.abs(l[1]-v)g.3middlel[1]vtopbottom}return{positionl,alignu,verticalAlignh}}function Hv(t,e){e.update=updateView,Ps(e,function(e,i){var n={};return i.eachComponent({mainTypegeo,querye},function(i){i[t](e.name),d(i.coordinateSystem.regions,function(t){n[t.name]=i.isSelected(t.name)!1})}),{selectedn,namee.name}})}function Zv(t){var e={};d(t,function(t){e[t]=1}),t.length=0,d(e,function(e,i){t.push(i)})}function Uv(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function Xv(t,e,n){function o(){var t=function(){};return t.prototype.__hidden=t.prototype,new t}var a={};return rN(e,function(e){var r=a[e]=o();rN(t[e],function(t,o){if(jC.isValidType(o)){var a={typeo,visualt};n&&n(a,e),r[o]=new jC(a),opacity===o&&((a=i(a)).type=colorAlpha,r.__hidden.__alphaForOpacity=new jC(a))}})}),a}function jv(t,e,n){var o;d(n,function(t){e.hasOwnProperty(t)&&Uv(e[t])&&(o=!0)}),o&&d(n,function(n){e.hasOwnProperty(n)&&Uv(e[n])t[n]=i(e[n])delete t[n]})}function Yv(t,e,i,n,o,a){function r(t){return i.getItemVisual(h,t)}function s(t,e){i.setItemVisual(h,t,e)}function l(t,l){h=null==atl;var c=i.getRawDataItem(h);if(!c!1!==c.visualMap)for(var d=n.call(o,t),f=e[d],p=u[d],g=0,m=p.length;gm;g++){var v=p[g];f[v]&&f[v].applyVisual(t,r,s)}}var u={};d(t,function(t){var i=jC.prepareVisualTypes(e[t]);u[t]=i});var h;null==ai.each(l)i.each([a],l)}function qv(t,e,i,n){var o={};return d(t,function(t){var i=jC.prepareVisualTypes(e[t]);o[t]=i}),{progressfunction(t,a){null!=n&&(n=a.getDimension(n));for(var r;null!=(r=t.next());){var s=a.getRawDataItem(r);if(s&&!1===s.visualMap)return;for(var l=null!=na.get(n,r,!0)r,u=i(l),h=e[u],c=o[u],d=0,f=c.length;df;d++){var p=c[d];h[p]&&h[p].applyVisual(l,function(t){return a.getItemVisual(r,t)},function(t,e){a.setItemVisual(r,t,e)})}}}}}function Kv(t){var e=[x,y],i=[width,height];return{pointfunction(e,i,n){if(e){var o=n.range;return $v(e[t],o)}},rectfunction(n,o,a){if(n){var r=a.range,s=[n[e[t]],n[e[t]]+n[i[t]]];return s[1]s[0]&&s.reverse(),$v(s[0],r)$v(s[1],r)$v(r[0],s)$v(r[1],s)}}}}function $v(t,e){return e[0]=t&&t=e[1]}function Jv(t,e,i,n,o){for(var a=0,r=o[o.length-1];ao.length;a++){var s=o[a];if(Qv(t,e,i,n,s[0],s[1],r[0],r[1]))return!0;r=s}}function Qv(t,e,i,n,o,a,r,s){var l=ey(i-t,o-r,n-e,a-s);if(ty(l))return!1;var u=ey(o-t,o-r,a-e,a-s)l;if(u0u1)return!1;var h=ey(i-t,o-t,n-e,a-e)l;return!(h0h1)}function ty(t){return t=1e-6&&t=-1e-6}function ey(t,e,i,n){return tn-ei}function iy(t,e,i){var n=this._targetInfoList=[],o={},a=oy(e,t);lN(pN,function(t,e){(!i!i.includeuN(i.include,e)=0)&&t(a,n,o)})}function ny(t){return t[0]t[1]&&t.reverse(),t}function oy(t,e){return Vi(t,e,{includeMainTypesdN})}function ay(t,e,i,n){var o=i.getAxis([x,y][t]),a=ny(f([0,1],function(t){return eo.coordToData(o.toLocalCoord(n[t]))o.toGlobalCoord(o.dataToCoord(n[t]))})),r=[];return r[t]=a,r[1-t]=[NaN,NaN],{valuesa,xyMinMaxr}}function ry(t,e,i,n){return[e[0]-n[t]i[0],e[1]-n[t]i[1]]}function sy(t,e){var i=ly(t),n=ly(e),o=[i[0]n[0],i[1]n[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function ly(t){return t[t[0][1]-t[0][0],t[1][1]-t[1][0]][NaN,NaN]}function uy(t,e,i,n,o){if(o){var a=t.getZr();a[wN](a[_N](a[_N]=hy),Lr(a,_N,i,e)(t,n))}}function hy(t,e){if(!t.isDisposed()){var i=t.getZr();i[wN]=!0,t.dispatchAction({typebrushSelect,batche}),i[wN]=!1}}function cy(t,e,i,n){for(var o=0,a=e.length;oa;o++){var r=e[o];if(t[r.brushType](n,i,r.selectors,r))return!0}}function dy(t){var e=t.brushSelector;if(_(e)){var i=[];return d(sN,function(t,n){i[n]=function(i,n,o,a){var r=n.getItemLayout(i);return t[e](r,o,a)}}),i}if(x(e)){var n={};return d(sN,function(t,i){n[i]=e}),n}return e}function fy(t,e){var i=t.option.seriesIndex;return null!=i&&all!==i&&(y(i)l(i,e)0e!==i)}function py(t){var e=t.selectors={};return d(sN[t.brushType],function(i,n){e[n]=function(n){return i(n,e,t)}}),t}function gy(t){return new ue(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}function my(t,e){return n({brushTypet.brushType,brushModet.brushMode,transformablet.transformable,brushStylenew Lo(t.brushStyle).getItemStyle(),removeOnClickt.removeOnClick,zt.z},e,!0)}function vy(t,e,i,n){(!nn.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(i)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}function yy(t,e){IN[t]=e}function xy(t){return IN[t]}function _y(t,e,i){this.model=t,this.ecModel=e,this.api=i,this._brushType,this._brushMode}function wy(t,e,i){this._model=t}function by(t,e,i,n){var o=i.calendarModel,a=i.seriesModel,r=oo.coordinateSystemaa.coordinateSystemnull;return r===thisr[t](n)null}function Sy(t,e){var i=t.cellSize;y(i)1===i.length&&(i[1]=i[0])i=t.cellSize=[i,i];var n=f([0,1],function(t){return ha(e,t)&&(i[t]=auto),null!=i[t]&&auto!==i[t]});ca(t,e,{typebox,ignoreSizen})}function My(t){return l(kN,t)=0}function Iy(t,e,i){function n(t,e){return l(e.nodes,t)=0}function o(t,n){var o=!1;return e(function(e){d(i(t,e)[],function(t){n.records[e.name][t]&&(o=!0)})}),o}function a(t,n){n.nodes.push(t),e(function(e){d(i(t,e)[],function(t){n.records[e.name][t]=!0})})}return function(i){var r={nodes[],records{}};if(e(function(t){r.records[t.name]={}}),!i)return r;a(i,r);var s;do{s=!1,t(function(t){!n(t,r)&&o(t,r)&&(a(t,r),s=!0)})}while(s);return r}}function Ty(t,e,i){var n=[10,-10];return NN(i,function(t){var i=t.getData();i&&NN(i.mapDimension(e,!0),function(t){var e=i.getApproximateExtent(t);e[0]n[0]&&(n[0]=e[0]),e[1]n[1]&&(n[1]=e[1])})}),n[1]n[0]&&(n=[NaN,NaN]),Ay(t,n),n}function Ay(t,e){var i=t.getAxisModel(),n=i.getMin(!0),o=category===i.get(type),a=o&&i.getCategories().length;null!=n&&dataMin!==n&&function!=typeof ne[0]=no&&(e[0]=a00NaN);var r=i.getMax(!0);return null!=r&&dataMax!==r&&function!=typeof re[1]=ro&&(e[1]=a0a-1NaN),i.get(scale,!0)(e[0]0&&(e[0]=0),e[1]0&&(e[1]=0)),e}function Dy(t,e){var i=t.getAxisModel(),n=t._percentWindow,o=t._valueWindow;if(n){var a=Fo(o,[0,500]);a=Math.min(a,20);var r=e0===n[0]&&100===n[1];i.setRange(rnull+o[0].toFixed(a),rnull+o[1].toFixed(a))}}function Cy(t){var e=t._minMaxSpan={},i=t._dataZoomModel;NN([min,max],function(n){e[n+Span]=i.get(n+Span);var o=i.get(n+ValueSpan);if(null!=o&&(e[n+ValueSpan]=o,null!=(o=t.getAxisModel().axis.scale.parse(o)))){var a=t._dataExtent;e[n+Span]=Eo(a[0]+o,a,[0,100],!0)}})}function Ly(t){var e={};return RN([start,end,startValue,endValue,throttle],function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e}function ky(t,e){var i=t._rangePropMode,n=t.get(rangeMode);RN([[start,startValue],[end,endValue]],function(t,o){var a=null!=e[t[0]],r=null!=e[t[1]];a&&!ri[o]=percent!a&&ri[o]=valueni[o]=n[o]a&&(i[o]=percent)})}function Py(t){return{xy,yx,radiusangle,angleradius}[t]}function Ny(t){returnvertical===tns-resizeew-resize}function Oy(t,e){var i=zy(t),n=e.dataZoomId,o=e.coordId;d(i,function(t,i){var a=t.dataZoomInfos;a[n]&&l(e.allCoordIds,o)0&&(delete a[n],t.count--)}),Vy(i);var a=i[o];a((a=i[o]={coordIdo,dataZoomInfos{},count0}).controller=By(t,a),a.dispatchAction=v(Gy,t)),!a.dataZoomInfos[n]&&a.count++,a.dataZoomInfos[n]=e;var r=Fy(a.dataZoomInfos);a.controller.enable(r.controlType,r.opt),a.controller.setPointerChecker(e.containsPoint),Lr(a,dispatchAction,e.dataZoomModel.get(throttle,!0),fixRate)}function Ey(t,e){var i=zy(t);d(i,function(t){t.controller.dispose();var i=t.dataZoomInfos;i[e]&&(delete i[e],t.count--)}),Vy(i)}function Ry(t){return t.type+0_+t.id}function zy(t){var e=t.getZr();return e[qN](e[qN]={})}function By(t,e){var i=new ac(t.getZr());return d([pan,zoom,scrollMove],function(t){i.on(t,function(i){var n=[];d(e.dataZoomInfos,function(o){if(i.isAvailableBehavior(o.dataZoomModel.option)){var a=(o.getRange{})[t],r=a&&a(e.controller,i);!o.dataZoomModel.get(disabled,!0)&&r&&n.push({dataZoomIdo.dataZoomId,startr[0],endr[1]})}}),n.length&&e.dispatchAction(n)})}),i}function Vy(t){d(t,function(e,i){e.count(e.controller.dispose(),delete t[i])})}function Gy(t,e){t.dispatchAction({typedataZoom,batche})}function Fy(t){var e,i={type_true2,type_move1,type_false0,type_undefined-1},n=!0;return d(t,function(t){var o=t.dataZoomModel,a=!o.get(disabled,!0)&&(!o.get(zoomLock,!0)move);i[type_+a]i[type_+e]&&(e=a),n&=o.get(preventDefaultMouseMove,!0)}),{controlTypee,opt{zoomOnMouseWheel!0,moveOnMouseMove!0,moveOnMouseWheel!0,preventDefaultMouseMove!!n}}}function Wy(t){return function(e,i,n,o){var a=this._range,r=a.slice(),s=e.axisModels[0];if(s){var l=t(r,s,e,i,n,o);return EL(l,r,[0,100],all),this._range=r,a[0]!==r[0]a[1]!==r[1]rvoid 0}}}function Hy(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}function Zy(t,e,i,n){for(var o=e.targetVisuals[n],a=jC.prepareVisualTypes(o),r={colort.getData().getVisual(color)},s=0,l=a.length;sl;s++){var u=a[s],h=o[opacity===u__alphaForOpacityu];h&&h.applyVisual(i,function(t){return r[t]},function(t,e){r[t]=e})}return r.color}function Uy(t,e,i){if(i[0]===i[1])return i.slice();for(var n=(i[1]-i[0])200,o=i[0],a=[],r=0;r=200&&oi[1];r++)a.push(o),o+=n;return a.push(i[1]),a}function Xy(t,e,i){var n=t.option,o=n.align;if(null!=o&&auto!==o)return o;for(var a={widthe.getWidth(),heighte.getHeight()},r=horizontal===n.orient10,s=[[left,right,width],[top,bottom,height]],l=s[r],u=[0,null,10],h={},c=0;c3;c++)h[s[1-r][c]]=u[c],h[l[c]]=2===ci[0]n[l[c]];var d=[[x,width,3],[y,height,0]][r],f=la(h,a,n.padding);return l[(f.margin[d[2]]0)+f[d[0]]+.5f[d[1]].5a[d[1]]01]}function jy(t){return d(t[],function(e){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null)}),t}function Yy(t,e,i,n){return new nM({shape{pointst},draggable!!i,cursore,drifti,onmousemovefunction(t){lw(t.event)},ondragendn})}function qy(t,e){return 0===t[[0,0],[e,0],[e,-e]][[0,0],[e,0],[e,e]]}function Ky(t,e,i,n){return t[[0,-yO(e,xO(i,0))],[wO,0],[0,yO(e,xO(n-i,0))]][[0,0],[5,-5],[5,5]]}function $y(t,e,i){var n=_O2,o=t.get(hoverLinkDataSize);return o&&(n=mO(o,e,i,!0)2),n}function Jy(t){var e=t.get(hoverLinkOnHandle);return!!(null==et.get(realtime)e)}function Qy(t){returnvertical===tns-resizeew-resize}function tx(t,e){var i=t.inverse;(vertical===t.orient!ii)&&e.reverse()}function ex(t){Ci(t,label,[show])}function ix(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function nx(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function ox(t,e,i,n,o,a){var r=[],s=hl(e,n)e.getCalculationInfo(stackResultDimension)n,l=hx(e,s,t),u=e.indicesOfNearest(s,l)[0];r[o]=e.get(i,u),r[a]=e.get(n,u);var h=Vo(e.get(n,u));return(h=Math.min(h,20))=0&&(r[a]=+r[a].toFixed(h)),r}function ax(t,e){var n=t.getData(),o=t.coordinateSystem;if(e&&!nx(e)&&!y(e.coord)&&o){var a=o.dimensions,r=rx(e,n,o,t);if((e=i(e)).type&&LO[e.type]&&r.baseAxis&&r.valueAxis){var s=DO(a,r.baseAxis.dim),l=DO(a,r.valueAxis.dim);e.coord=LO[e.type](n,r.baseDataDim,r.valueDataDim,s,l),e.value=e.coord[l]}else{for(var u=[null!=e.xAxise.xAxise.radiusAxis,null!=e.yAxise.yAxise.angleAxis],h=0;h2;h++)LO[u[h]]&&(u[h]=hx(n,n.mapDimension(a[h]),u[h]));e.coord=u}}return e}function rx(t,e,i,n){var o={};return null!=t.valueIndexnull!=t.valueDim(o.valueDataDim=null!=t.valueIndexe.getDimension(t.valueIndex)t.valueDim,o.valueAxis=i.getAxis(sx(n,o.valueDataDim)),o.baseAxis=i.getOtherAxis(o.valueAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim))(o.baseAxis=n.getBaseAxis(),o.valueAxis=i.getOtherAxis(o.baseAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim),o.valueDataDim=e.mapDimension(o.valueAxis.dim)),o}function sx(t,e){var i=t.getData(),n=i.dimensions;e=i.getDimension(e);for(var o=0;on.length;o++){var a=i.getDimensionInfo(n[o]);if(a.name===e)return a.coordDim}}function lx(t,e){return!(t&&t.containData&&e.coord&&!ix(e))t.containData(e.coord)}function ux(t,e,i,n){return n2t.coord&&t.coord[n]t.value}function hx(t,e,i){if(average===i){var n=0,o=0;return t.each(e,function(t,e){isNaN(t)(n+=t,o++)}),no}returnmedian===it.getMedian(e)t.getDataExtent(e,!0)[max===i10]}function cx(t,e,i){var n=e.coordinateSystem;t.each(function(o){var a,r=t.getItemModel(o),s=Ro(r.get(x),i.getWidth()),l=Ro(r.get(y),i.getHeight());if(isNaN(s)isNaN(l)){if(e.getMarkerPosition)a=e.getMarkerPosition(t.getValues(t.dimensions,o));else if(n){var u=t.get(n.dimensions[0],o),h=t.get(n.dimensions[1],o);a=n.dataToPoint([u,h])}}else a=[s,l];isNaN(s)(a[0]=s),isNaN(l)(a[1]=l),t.setItemLayout(o,a)})}function dx(t,e,i){var n;n=tf(t&&t.dimensions,function(t){return r({namet},e.getData().getDimensionInfo(e.getData().mapDimension(t)){})})[{namevalue,typefloat}];var o=new eA(n,i),a=f(i.get(data),v(ax,e));return t&&(a=g(a,v(lx,t))),o.initData(a,null,tuxfunction(t){return t.value}),o}function fx(t){return!isNaN(t)&&!isFinite(t)}function px(t,e,i,n){var o=1-t,a=n.dimensions[t];return fx(e[o])&&fx(i[o])&&e[t]===i[t]&&n.getAxis(a).containData(e[t])}function gx(t,e){if(cartesian2d===t.type){var i=e[0].coord,n=e[1].coord;if(i&&n&&(px(1,i,n,t)px(0,i,n,t)))return!0}return lx(t,e[0])&&lx(t,e[1])}function mx(t,e,i,n,o){var a,r=n.coordinateSystem,s=t.getItemModel(e),l=Ro(s.get(x),o.getWidth()),u=Ro(s.get(y),o.getHeight());if(isNaN(l)isNaN(u)){if(n.getMarkerPosition)a=n.getMarkerPosition(t.getValues(t.dimensions,e));else{var h=r.dimensions,c=t.get(h[0],e),d=t.get(h[1],e);a=r.dataToPoint([c,d])}if(cartesian2d===r.type){var f=r.getAxis(x),p=r.getAxis(y),h=r.dimensions;fx(t.get(h[0],e))a[0]=f.toGlobalCoord(f.getExtent()[i01])fx(t.get(h[1],e))&&(a[1]=p.toGlobalCoord(p.getExtent()[i01]))}isNaN(l)(a[0]=l),isNaN(u)(a[1]=u)}else a=[l,u];t.setItemLayout(e,a)}function vx(t,e,i){var n;n=tf(t&&t.dimensions,function(t){return r({namet},e.getData().getDimensionInfo(e.getData().mapDimension(t)){})})[{namevalue,typefloat}];var o=new eA(n,i),a=new eA(n,i),s=new eA([],i),l=f(i.get(data),v(PO,e,t,i));t&&(l=g(l,v(gx,t)));var u=tuxfunction(t){return t.value};return o.initData(f(l,function(t){return t[0]}),null,u),a.initData(f(l,function(t){return t[1]}),null,u),s.initData(f(l,function(t){return t[2]})),s.hasItemOption=!0,{fromo,toa,lines}}function yx(t){return!isNaN(t)&&!isFinite(t)}function xx(t,e,i,n){var o=1-t;return yx(e[o])&&yx(i[o])}function _x(t,e){var i=e.coord[0],n=e.coord[1];return!(cartesian2d!==t.type!i!n!xx(1,i,n,t)&&!xx(0,i,n,t))(lx(t,{coordi,xe.x0,ye.y0})lx(t,{coordn,xe.x1,ye.y1}))}function bx(t,e,i,n,o){var a,r=n.coordinateSystem,s=t.getItemModel(e),l=Ro(s.get(i[0]),o.getWidth()),u=Ro(s.get(i[1]),o.getHeight());if(isNaN(l)isNaN(u)){if(n.getMarkerPosition)a=n.getMarkerPosition(t.getValues(i,e));else{var h=[f=t.get(i[0],e),p=t.get(i[1],e)];r.clampData&&r.clampData(h,h),a=r.dataToPoint(h,!0)}if(cartesian2d===r.type){var c=r.getAxis(x),d=r.getAxis(y),f=t.get(i[0],e),p=t.get(i[1],e);yx(f)a[0]=c.toGlobalCoord(c.getExtent()[x0===i[0]01])yx(p)&&(a[1]=d.toGlobalCoord(d.getExtent()[y0===i[1]01]))}isNaN(l)(a[0]=l),isNaN(u)(a[1]=u)}else a=[l,u];return a}function Sx(t,e,i){var n,o,a=[x0,y0,x1,y1];t(n=f(t&&t.dimensions,function(t){var i=e.getData();return r({namet},i.getDimensionInfo(i.mapDimension(t)){})}),o=new eA(f(a,function(t,e){return{namet,typen[e%2].type}}),i))o=new eA(n=[{namevalue,typefloat}],i);var s=f(i.get(data),v(NO,e,t,i));t&&(s=g(s,v(_x,t)));var l=tfunction(t,e,i,n){return t.coord[Math.floor(n2)][n%2]}function(t){return t.value};return o.initData(s,null,l),o.hasItemOption=!0,o}function Mx(t){var e=t.type,i={numbervalue,timetime};if(i[e]&&(t.axisType=i[e],delete t.type),Ix(t),Tx(t,controlPosition)){var n=t.controlStyle(t.controlStyle={});Tx(n,position)(n.position=t.controlPosition),none!==n.positionTx(n,show)(n.show=!1,delete n.position),delete t.controlPosition}d(t.data[],function(t){w(t)&&!y(t)&&(!Tx(t,value)&&Tx(t,name)&&(t.value=t.name),Ix(t))})}function Ix(t){var e=t.itemStyle(t.itemStyle={}),i=e.emphasis(e.emphasis={}),n=t.labelt.label{},o=n.normal(n.normal={}),a={normal1,emphasis1};d(n,function(t,e){a[e]Tx(o,e)(o[e]=t)}),i.label&&!Tx(n,emphasis)&&(n.emphasis=i.label,delete i.label)}function Tx(t,e){return t.hasOwnProperty(e)}function Ax(t,e){return la(t.getBoxLayoutParams(),{widthe.getWidth(),heighte.getHeight()},t.get(padding))}function Dx(t,e,n,o){return Wn(t.get(e).replace(^path,),i(o{}),new ue(n[0],n[1],n[2],n[3]),center)}function Cx(t,e,i,o,a,r){var s=e.get(color);a(a.setColor(s),i.add(a),r&&r.onUpdate(a))((a=Xl(t.get(symbol),-1,-1,2,2,s)).setStyle(strokeNoScale,!0),i.add(a),r&&r.onCreate(a));var l=e.getItemStyle([color,symbol,symbolSize]);a.setStyle(l),o=n({rectHover!0,z2100},o,!0);var u=t.get(symbolSize);(u=u instanceof Arrayu.slice()[+u,+u])[0]=2,u[1]=2,o.scale=u;var h=t.get(symbolOffset);if(h){var c=o.position=o.position[0,0];c[0]+=Ro(h[0],u[0]),c[1]+=Ro(h[1],u[1])}var d=t.get(symbolRotate);return o.rotation=(d0)Math.PI1800,a.attr(o),a.updateTransform(),a}function Lx(t,e,i,n,o){if(!t.dragging){var a=n.getModel(checkpointStyle),r=i.dataToCoord(n.getData().get([value],e));o!a.get(animation,!0)t.attr({position[r,0]})(t.stopAnimation(!0),t.animateTo({position[r,0]},a.get(animationDuration,!0),a.get(animationEasing,!0)))}}function kx(t){return 0===t.indexOf(my)}function Px(t){this.model=t}function Nx(t){this.model=t}function Ox(t){var e={},i=[],n=[];return t.eachRawSeries(function(t){var o=t.coordinateSystem;if(!ocartesian2d!==o.type&&polar!==o.type)i.push(t);else{var a=o.getBaseAxis();if(category===a.type){var r=a.dim+_+a.index;e[r](e[r]={categoryAxisa,valueAxiso.getOtherAxis(a),series[]},n.push({axisDima.dim,axisIndexa.index})),e[r].series.push(t)}else i.push(t)}}),{seriesGroupByCategoryAxise,otheri,metan}}function Ex(t){var e=[];return d(t,function(t,i){var n=t.categoryAxis,o=t.valueAxis.dim,a=[ ].concat(f(t.series,function(t){return t.name})),r=[n.model.getCategories()];d(t.series,function(t){r.push(t.getRawData().mapArray(o,function(t){return t}))});for(var s=[a.join(qO)],l=0;lr[0].length;l++){for(var u=[],h=0;hr.length;h++)u.push(r[h][l]);s.push(u.join(qO))}e.push(s.join(n))}),e.join(nn+YO+nn)}function Rx(t){return f(t,function(t){var e=t.getRawData(),i=[t.name],n=[];return e.each(e.dimensions,function(){for(var t=arguments.length,o=arguments[t-1],a=e.getName(o),r=0;rt-1;r++)n[r]=arguments[r];i.push((aa+qO)+n.join(qO))}),i.join(n)}).join(nn+YO+nn)}function zx(t){var e=Ox(t);return{valueg([Ex(e.seriesGroupByCategoryAxis),Rx(e.other)],function(t){return t.replace([nts]g,)}).join(nn+YO+nn),metae.meta}}function Bx(t){return t.replace(^ss,).replace(ss$,)}function Vx(t){if(t.slice(0,t.indexOf(n)).indexOf(qO)=0)return!0}function Gx(t){for(var e=t.split(n+g),i=[],n=f(Bx(e.shift()).split(KO),function(t){return{namet,data[]}}),o=0;oe.length;o++){var a=Bx(e[o]).split(KO);i.push(a.shift());for(var r=0;ra.length;r++)n[r]&&(n[r].data[o]=a[r])}return{seriesn,categoriesi}}function Fx(t){for(var e=t.split(n+g),i=Bx(e.shift()),n=[],o=0;oe.length;o++){var a,r=Bx(e[o]).split(KO),s=,l=!1;isNaN(r[0])(l=!0,s=r[0],r=r.slice(1),n[o]={names,value[]},a=n[o].value)a=n[o]=[];for(var u=0;ur.length;u++)a.push(+r[u]);1===a.length&&(ln[o].value=a[0]n[o]=a[0])}return{namei,datan}}function Wx(t,e){var i={series[]};return d(t.split(new RegExp(n+YO+n,g)),function(t,n){if(Vx(t)){var o=Gx(t),a=e[n],r=a.axisDim+Axis;a&&(i[r]=i[r][],i[r][a.axisIndex]={datao.categories},i.series=i.series.concat(o.series))}else{o=Fx(t);i.series.push(o)}}),i}function Hx(t){this._dom=null,this.model=t}function Zx(t,e){return f(t,function(t,i){var n=e&&e[i];return w(n)&&!y(n)(w(t)&&!y(t)&&(t=t.value),r({valuet},n))t})}function Ux(t,e){var i=qx(t);$O(e,function(e,n){for(var o=i.length-1;o=0&&!i[o][n];o--);if(o0){var a=t.queryComponents({mainTypedataZoom,subTypeselect,idn})[0];if(a){var r=a.getPercentRange();i[0][n]={dataZoomIdn,startr[0],endr[1]}}}}),i.push(e)}function Xx(t){var e=qx(t),i=e[e.length-1];e.length1&&e.pop();var n={};return $O(i,function(t,i){for(var o=e.length-1;o=0;o--)if(t=e[o][i]){n[i]=t;break}}),n}function jx(t){t[JO]=null}function Yx(t){return qx(t).length}function qx(t){var e=t[JO];return e(e=t[JO]=[{}]),e}function Kx(t,e,i){(this._brushController=new Cf(i.getZr())).on(brush,m(this._onBrush,this)).mount(),this._isZoomActive}function $x(t){var e={};return d([xAxisIndex,yAxisIndex],function(i){e[i]=t[i],null==e[i]&&(e[i]=all),(!1===e[i]none===e[i])&&(e[i]=[])}),e}function Jx(t,e){t.setIconStatus(back,Yx(e)1emphasisnormal)}function Qx(t,e,i,n,o){var a=i._isZoomActive;n&&takeGlobalCursor===n.type&&(a=dataZoomSelect===n.key&&n.dataZoomSelectActive),i._isZoomActive=a,t.setIconStatus(zoom,aemphasisnormal);var r=new iy($x(t.option),e,{include[grid]});i._brushController.setPanels(r.makePanelOpts(o,function(t){return t.xAxisDeclared&&!t.yAxisDeclaredlineX!t.xAxisDeclared&&t.yAxisDeclaredlineYrect})).enableBrush(!!a&&{brushTypeauto,brushStyle{lineWidth0,fillrgba(0,0,0,0.2)}})}function t_(t){this.model=t}function e_(t){return aE(t)}function i_(){if(!lE&&uE){lE=!0;var t=uE.styleSheets;t.length31uE.createStyleSheet().addRule(.zrvml,behaviorurl(#default#VML))t[0].addRule(.zrvml,behaviorurl(#default#VML))}}function n_(t){return parseInt(t,10)}function o_(t,e){i_(),this.root=t,this.storage=e;var i=document.createElement(div),n=document.createElement(div);i.style.cssText=displayinline-block;overflowhidden;positionrelative;width300px;height150px;,n.style.cssText=positionabsolute;left0;top0;,t.appendChild(i),this._vmlRoot=n,this._vmlViewport=i,this.resize();var o=e.delFromStorage,a=e.addToStorage;e.delFromStorage=function(t){o.call(e,t),t&&t.onRemove&&t.onRemove(n)},e.addToStorage=function(t){t.onAdd&&t.onAdd(n),a.call(e,t)},this._firstPaint=!0}function a_(t){return function(){Bw('In IE8.0 VML mode painter not support method '+t+'')}}function r_(t){return document.createElementNS(HE,t)}function s_(t){return jE(1e4t)1e4}function l_(t){return tQE&&t-QE}function u_(t,e){var i=et.textFillt.fill;return null!=i&&i!==XE}function h_(t,e){var i=et.textStroket.stroke;return null!=i&&i!==XE}function c_(t,e){e&&d_(t,transform,matrix(+UE.call(e,,)+))}function d_(t,e,i){(!ilinear!==i.type&&radial!==i.type)&&(string==typeof i&&i.indexOf(NaN)-1&&console.log(i),t.setAttribute(e,i))}function f_(t,e,i){t.setAttributeNS(httpwww.w3.org1999xlink,e,i)}function p_(t,e,i,n){if(u_(e,i)){var o=ie.textFille.fill;o=transparent===oXEo,none!==t.getAttribute(clip-path)&&o===XE&&(o=rgba(0, 0, 0, 0.002)),d_(t,fill,o),d_(t,fill-opacity,null!=e.fillOpacitye.fillOpacitye.opacitye.opacity)}else d_(t,fill,XE);if(h_(e,i)){var a=ie.textStrokee.stroke;d_(t,stroke,a=transparent===aXEa),d_(t,stroke-width,(ie.textStrokeWidthe.lineWidth)(!i&&e.strokeNoScalen.getLineScale()1)),d_(t,paint-order,istrokefill),d_(t,stroke-opacity,null!=e.strokeOpacitye.strokeOpacitye.opacity),e.lineDash(d_(t,stroke-dasharray,e.lineDash.join(,)),d_(t,stroke-dashoffset,jE(e.lineDashOffset0)))d_(t,stroke-dasharray,),e.lineCap&&d_(t,stroke-linecap,e.lineCap),e.lineJoin&&d_(t,stroke-linejoin,e.lineJoin),e.miterLimit&&d_(t,stroke-miterlimit,e.miterLimit)}else d_(t,stroke,XE)}function g_(t){for(var e=[],i=t.data,n=t.len(),o=0;on;){var a=,r=0;switch(i[o++]){case ZE.Ma=M,r=2;break;case ZE.La=L,r=2;break;case ZE.Qa=Q,r=4;break;case ZE.Ca=C,r=6;break;case ZE.Avar s=i[o++],l=i[o++],u=i[o++],h=i[o++],c=i[o++],d=i[o++],f=i[o++],p=i[o++],g=Math.abs(d),m=l_(g-$E)&&!l_(g),v=!1;v=g=$E!l_(g)&&(d-KE&&d0dKE)==!!p;var y=s_(s+uqE(c)),x=s_(l+hYE(c));m&&(d=p$E-1e-41e-4-$E,v=!0,9===o&&e.push(M,y,x));var _=s_(s+uqE(c+d)),w=s_(l+hYE(c+d));e.push(A,s_(u),s_(h),jE(fJE),+v,+p,_,w);break;case ZE.Za=Z;break;case ZE.Rvar _=s_(i[o++]),w=s_(i[o++]),b=s_(i[o++]),S=s_(i[o++]);e.push(M,_,w,L,_+b,w,L,_+b,w+S,L,_,w+S,L,_,w)}a&&e.push(a);for(var M=0;Mr;M++)e.push(s_(i[o++]))}return e.join( )}function m_(t){returnmiddle===tmiddlebottom===tafter-edgehanging}function v_(){}function y_(t,e,i,n){for(var o=0,a=e.length,r=0,s=0;oa;o++){var l=e[o];if(l.removed){for(var u=[],h=s;hs+l.count;h++)u.push(h);l.indices=u,s+=l.count}else{for(var u=[],h=r;hr+l.count;h++)u.push(h);l.indices=u,r+=l.count,l.added(s+=l.count)}}return e}function x_(t){return{newPost.newPos,componentst.components.slice(0)}}function __(t,e,i,n,o){this._zrId=t,this._svgRoot=e,this._tagNames=string==typeof i[i]i,this._markLabel=n,this._domName=o_dom,this.nextId=0}function w_(t,e){__.call(this,t,e,[linearGradient,radialGradient],__gradient_in_use__)}function b_(t,e){__.call(this,t,e,clipPath,__clippath_in_use__)}function S_(t,e){__.call(this,t,e,[filter],__filter_in_use__,_shadowDom)}function M_(t){return t&&(t.shadowBlurt.shadowOffsetXt.shadowOffsetYt.textShadowBlurt.textShadowOffsetXt.textShadowOffsetY)}function I_(t){return parseInt(t,10)}function T_(t){return t instanceof kntRt instanceof hieRt instanceof qSiRtR}function A_(t,e){return e&&t&&e.parentNode!==t}function D_(t,e,i){if(A_(t,e)&&i){var n=i.nextSibling;nt.insertBefore(e,n)t.appendChild(e)}}function C_(t,e){if(A_(t,e)){var i=t.firstChild;it.insertBefore(e,i)t.appendChild(e)}}function L_(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function k_(t){return t.__textSvgEl}function P_(t){return t.__svgEl}function N_(t){return function(){Bw('In SVG mode painter not support method '+t+'')}}var O_=2311,E_=function(){return O_++},R_={},z_=R_=object==typeof wx&&function==typeof wx.getSystemInfoSync{browser{},os{},node!1,wxa!0,canvasSupported!0,svgSupported!1,touchEventsSupported!0,domSupported!1}undefined==typeof document&&undefined!=typeof self{browser{},os{},node!1,worker!0,canvasSupported!0,domSupported!1}undefined==typeof navigator{browser{},os{},node!0,worker!1,canvasSupported!0,svgSupported!0,domSupported!1}function(t){var e={},i={},n=t.match(Firefox([d.]+)),o=t.match(MSIEs([d.]+))t.match(Trident.+rv(([d.]+))),a=t.match(Edge([d.]+)),r=micromessengeri.test(t);return n&&(i.firefox=!0,i.version=n[1]),o&&(i.ie=!0,i.version=o[1]),a&&(i.edge=!0,i.version=a[1]),r&&(i.weChat=!0),{browseri,ose,node!1,canvasSupported!!document.createElement(canvas).getContext,svgSupportedundefined!=typeof SVGRect,touchEventsSupportedontouchstartin window&&!i.ie&&!i.edge,pointerEventsSupportedonpointerdownin window&&(i.edgei.ie&&i.version=11),domSupportedundefined!=typeof document}}(navigator.userAgent),B_={[object Function]1,[object RegExp]1,[object Date]1,[object Error]1,[object CanvasGradient]1,[object CanvasPattern]1,[object Image]1,[object Canvas]1},V_={[object Int8Array]1,[object Uint8Array]1,[object Uint8ClampedArray]1,[object Int16Array]1,[object Uint16Array]1,[object Int32Array]1,[object Uint32Array]1,[object Float32Array]1,[object Float64Array]1},G_=Object.prototype.toString,F_=Array.prototype,W_=F_.forEach,H_=F_.filter,Z_=F_.slice,U_=F_.map,X_=F_.reduce,j_={},Y_=function(){return j_.createCanvas()};j_.createCanvas=function(){return document.createElement(canvas)};var q_,K_=__ec_primitive__;E.prototype={constructorE,getfunction(t){return this.data.hasOwnProperty(t)this.data[t]null},setfunction(t,e){return this.data[t]=e},eachfunction(t,e){void 0!==e&&(t=m(t,e));for(var i in this.data)this.data.hasOwnProperty(i)&&t(this.data[i],i)},removeKeyfunction(t){delete this.data[t]}};var $_=(Object.freezeObject)({$overridee,clonei,mergen,mergeAllo,extenda,defaultsr,createCanvasY_,getContexts,indexOfl,inheritsu,mixinh,isArrayLikec,eachd,mapf,reducep,filterg,findfunction(t,e,i){if(t&&e)for(var n=0,o=t.length;no;n++)if(e.call(i,t[n],n,t))return t[n]},bindm,curryv,isArrayy,isFunctionx,isString_,isObjectw,isBuiltInObjectb,isTypedArrayS,isDomM,eqNaNI,retrieveT,retrieve2A,retrieve3D,sliceC,normalizeCssArrayL,assertk,trimP,setAsPrimitiveN,isPrimitiveO,createHashMapR,concatArrayz,noopB}),J_=undefined==typeof Float32ArrayArrayFloat32Array,Q_=X,tw=j,ew=K,iw=$,nw=(Object.freezeObject)({createV,copyG,cloneF,setW,addH,scaleAndAddZ,subU,lenX,lengthQ_,lenSquarej,lengthSquaretw,mulfunction(t,e,i){return t[0]=e[0]i[0],t[1]=e[1]i[1],t},divfunction(t,e,i){return t[0]=e[0]i[0],t[1]=e[1]i[1],t},dotfunction(t,e){return t[0]e[0]+t[1]e[1]},scaleY,normalizeq,distanceK,distew,distanceSquare$,distSquareiw,negatefunction(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerpJ,applyTransformQ,mintt,maxet});it.prototype={constructorit,_dragStartfunction(t){var e=t.target;e&&e.draggable&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(nt(e,t),dragstart,t.event))},_dragfunction(t){var e=this._draggingTarget;if(e){var i=t.offsetX,n=t.offsetY,o=i-this._x,a=n-this._y;this._x=i,this._y=n,e.drift(o,a,t),this.dispatchToElement(nt(e,t),drag,t.event);var r=this.findHover(i,n,e).target,s=this._dropTarget;this._dropTarget=r,e!==r&&(s&&r!==s&&this.dispatchToElement(nt(s,t),dragleave,t.event),r&&r!==s&&this.dispatchToElement(nt(r,t),dragenter,t.event))}},_dragEndfunction(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(nt(e,t),dragend,t.event),this._dropTarget&&this.dispatchToElement(nt(this._dropTarget,t),drop,t.event),this._draggingTarget=null,this._dropTarget=null}};var ow=Array.prototype.slice,aw=function(t){this._$handlers={},this._$eventProcessor=t};aw.prototype={constructoraw,onefunction(t,e,i,n){var o=this._$handlers;if(function==typeof e&&(n=i,i=e,e=null),!i!t)return this;e=ot(this,e),o[t](o[t]=[]);for(var a=0;ao[t].length;a++)if(o[t][a].h===i)return this;return o[t].push({hi,one!0,querye,ctxnthis}),this},onfunction(t,e,i,n){var o=this._$handlers;if(function==typeof e&&(n=i,i=e,e=null),!i!t)return this;e=ot(this,e),o[t](o[t]=[]);for(var a=0;ao[t].length;a++)if(o[t][a].h===i)return this;return o[t].push({hi,one!1,querye,ctxnthis}),this},isSilentfunction(t){var e=this._$handlers;return e[t]&&e[t].length},offfunction(t,e){var i=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(i[t]){for(var n=[],o=0,a=i[t].length;oa;o++)i[t][o].h!==e&&n.push(i[t][o]);i[t]=n}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this},triggerfunction(t){var e=this._$handlers[t],i=this._$eventProcessor;if(e){var n=arguments,o=n.length;o3&&(n=ow.call(n,1));for(var a=e.length,r=0;ra;){var s=e[r];if(i&&i.filter&&null!=s.query&&!i.filter(t,s.query))r++;else{switch(o){case 1s.h.call(s.ctx);break;case 2s.h.call(s.ctx,n[1]);break;case 3s.h.call(s.ctx,n[1],n[2]);break;defaults.h.apply(s.ctx,n)}s.one(e.splice(r,1),a--)r++}}}return i&&i.afterTrigger&&i.afterTrigger(t),this},triggerWithContextfunction(t){var e=this._$handlers[t],i=this._$eventProcessor;if(e){var n=arguments,o=n.length;o4&&(n=ow.call(n,1,n.length-1));for(var a=n[n.length-1],r=e.length,s=0;sr;){var l=e[s];if(i&&i.filter&&null!=l.query&&!i.filter(t,l.query))s++;else{switch(o){case 1l.h.call(a);break;case 2l.h.call(a,n[1]);break;case 3l.h.call(a,n[1],n[2]);break;defaultl.h.apply(a,n)}l.one(e.splice(s,1),r--)s++}}}return i&&i.afterTrigger&&i.afterTrigger(t),this}};var rw=undefined!=typeof window&&!!window.addEventListener,sw=^(mousepointercontextmenudragdrop)click,lw=rwfunction(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}function(t){t.returnValue=!1,t.cancelBubble=!0},uw=silent;pt.prototype.dispose=function(){};var hw=[click,dblclick,mousewheel,mouseout,mouseup,mousedown,mousemove,contextmenu],cw=function(t,e,i,n){aw.call(this),this.storage=t,this.painter=e,this.painterRoot=n,i=inew pt,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,it.call(this),this.setHandlerProxy(i)};cw.prototype={constructorcw,setHandlerProxyfunction(t){this.proxy&&this.proxy.dispose(),t&&(d(hw,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},mousemovefunction(t){var e=t.zrX,i=t.zrY,n=this._hovered,o=n.target;o&&!o.__zr&&(o=(n=this.findHover(n.x,n.y)).target);var a=this._hovered=this.findHover(e,i),r=a.target,s=this.proxy;s.setCursor&&s.setCursor(rr.cursordefault),o&&r!==o&&this.dispatchToElement(n,mouseout,t),this.dispatchToElement(a,mousemove,t),r&&r!==o&&this.dispatchToElement(a,mouseover,t)},mouseoutfunction(t){this.dispatchToElement(this._hovered,mouseout,t);var e,i=t.toElementt.relatedTarget;do{i=i&&i.parentNode}while(i&&9!=i.nodeType&&!(e=i===this.painterRoot));!e&&this.trigger(globalout,{eventt})},resizefunction(t){this._hovered={}},dispatchfunction(t,e){var i=this[t];i&&i.call(this,e)},disposefunction(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStylefunction(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElementfunction(t,e,i){var n=(t=t{}).target;if(!n!n.silent){for(var o=on+e,a=dt(e,t,i);n&&(n[o]&&(a.cancelBubble=n[o].call(n,a)),n.trigger(e,a),n=n.parent,!a.cancelBubble););a.cancelBubble(this.trigger(e,a),this.painter&&this.painter.eachOtherLayer(function(t){function==typeof t[o]&&t[o].call(t,a),t.trigger&&t.trigger(e,a)}))}},findHoverfunction(t,e,i){for(var n=this.storage.getDisplayList(),o={xt,ye},a=n.length-1;a=0;a--){var r;if(n[a]!==i&&!n[a].ignore&&(r=gt(n[a],t,e))&&(!o.topTarget&&(o.topTarget=n[a]),r!==uw)){o.target=n[a];break}}return o}},d([click,mousedown,mouseup,mousewheel,dblclick,contextmenu],function(t){cw.prototype[t]=function(e){var i=this.findHover(e.zrX,e.zrY),n=i.target;if(mousedown===t)this._downEl=n,this._downPoint=[e.zrX,e.zrY],this._upEl=n;else if(mouseup===t)this._upEl=n;else if(click===t){if(this._downEl!==this._upEl!this._downPointew(this._downPoint,[e.zrX,e.zrY])4)return;this._downPoint=null}this.dispatchToElement(i,t,e)}}),h(cw,aw),h(cw,it);var dw=undefined==typeof Float32ArrayArrayFloat32Array,fw=(Object.freezeObject)({createmt,identityvt,copyyt,mulxt,translate_t,rotatewt,scalebt,invertSt,cloneMt}),pw=vt,gw=5e-5,mw=function(t){(t=t{}).position(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale(this.scale=[1,1]),this.origin=this.originnull},vw=mw.prototype;vw.transform=null,vw.needLocalTransform=function(){return It(this.rotation)It(this.position[0])It(this.position[1])It(this.scale[0]-1)It(this.scale[1]-1)};var yw=[];vw.updateTransform=function(){var t=this.parent,e=t&&t.transform,i=this.needLocalTransform(),n=this.transform;if(ie){n=nmt(),ithis.getLocalTransform(n)pw(n),e&&(ixt(n,t.transform,n)yt(n,t.transform)),this.transform=n;var o=this.globalScaleRatio;if(null!=o&&1!==o){this.getGlobalScale(yw);var a=yw[0]0-11,r=yw[1]0-11,s=((yw[0]-a)o+a)yw[0]0,l=((yw[1]-r)o+r)yw[1]0;n[0]=s,n[1]=s,n[2]=l,n[3]=l}this.invTransform=this.invTransformmt(),St(this.invTransform,n)}else n&&pw(n)},vw.getLocalTransform=function(t){return mw.getLocalTransform(this,t)},vw.setTransform=function(t){var e=this.transform,i=t.dpr1;et.setTransform(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5])t.setTransform(i,0,0,i,0,0)},vw.restoreTransform=function(t){var e=t.dpr1;t.setTransform(e,0,0,e,0,0)};var xw=[],_w=mt();vw.setLocalTransform=function(t){if(t){var e=t[0]t[0]+t[1]t[1],i=t[2]t[2]+t[3]t[3],n=this.position,o=this.scale;It(e-1)&&(e=Math.sqrt(e)),It(i-1)&&(i=Math.sqrt(i)),t[0]0&&(e=-e),t[3]0&&(i=-i),n[0]=t[4],n[1]=t[5],o[0]=e,o[1]=i,this.rotation=Math.atan2(-t[1]i,t[0]e)}},vw.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(xt(xw,t.invTransform,e),e=xw);var i=this.origin;i&&(i[0]i[1])&&(_w[4]=i[0],_w[5]=i[1],xt(xw,e,_w),xw[4]-=i[0],xw[5]-=i[1],e=xw),this.setLocalTransform(e)}},vw.getGlobalScale=function(t){var e=this.transform;return t=t[],e(t[0]=Math.sqrt(e[0]e[0]+e[1]e[1]),t[1]=Math.sqrt(e[2]e[2]+e[3]e[3]),e[0]0&&(t[0]=-t[0]),e[3]0&&(t[1]=-t[1]),t)(t[0]=1,t[1]=1,t)},vw.transformCoordToLocal=function(t,e){var i=[t,e],n=this.invTransform;return n&&Q(i,i,n),i},vw.transformCoordToGlobal=function(t,e){var i=[t,e],n=this.transform;return n&&Q(i,i,n),i},mw.getLocalTransform=function(t,e){pw(e=e[]);var i=t.origin,n=t.scale[1,1],o=t.rotation0,a=t.position[0,0];return i&&(e[4]-=i[0],e[5]-=i[1]),bt(e,e,n),o&&wt(e,e,o),i&&(e[4]+=i[0],e[5]+=i[1]),e[4]+=a[0],e[5]+=a[1],e};var ww={linearfunction(t){return t},quadraticInfunction(t){return tt},quadraticOutfunction(t){return t(2-t)},quadraticInOutfunction(t){return(t=2)1.5tt-.5(--t(t-2)-1)},cubicInfunction(t){return ttt},cubicOutfunction(t){return--ttt+1},cubicInOutfunction(t){return(t=2)1.5ttt.5((t-=2)tt+2)},quarticInfunction(t){return tttt},quarticOutfunction(t){return 1- --tttt},quarticInOutfunction(t){return(t=2)1.5tttt-.5((t-=2)ttt-2)},quinticInfunction(t){return ttttt},quinticOutfunction(t){return--ttttt+1},quinticInOutfunction(t){return(t=2)1.5ttttt.5((t-=2)tttt+2)},sinusoidalInfunction(t){return 1-Math.cos(tMath.PI2)},sinusoidalOutfunction(t){return Math.sin(tMath.PI2)},sinusoidalInOutfunction(t){return.5(1-Math.cos(Math.PIt))},exponentialInfunction(t){return 0===t0Math.pow(1024,t-1)},exponentialOutfunction(t){return 1===t11-Math.pow(2,-10t)},exponentialInOutfunction(t){return 0===t01===t1(t=2)1.5Math.pow(1024,t-1).5(2-Math.pow(2,-10(t-1)))},circularInfunction(t){return 1-Math.sqrt(1-tt)},circularOutfunction(t){return Math.sqrt(1- --tt)},circularInOutfunction(t){return(t=2)1-.5(Math.sqrt(1-tt)-1).5(Math.sqrt(1-(t-=2)t)+1)},elasticInfunction(t){var e,i=.1;return 0===t01===t1(!ii1(i=1,e=.1)e=.4Math.asin(1i)(2Math.PI),-iMath.pow(2,10(t-=1))Math.sin((t-e)(2Math.PI).4))},elasticOutfunction(t){var e,i=.1;return 0===t01===t1(!ii1(i=1,e=.1)e=.4Math.asin(1i)(2Math.PI),iMath.pow(2,-10t)Math.sin((t-e)(2Math.PI).4)+1)},elasticInOutfunction(t){var e,i=.1;return 0===t01===t1(!ii1(i=1,e=.1)e=.4Math.asin(1i)(2Math.PI),(t=2)1iMath.pow(2,10(t-=1))Math.sin((t-e)(2Math.PI).4)-.5iMath.pow(2,-10(t-=1))Math.sin((t-e)(2Math.PI).4).5+1)},backInfunction(t){var e=1.70158;return tt((e+1)t-e)},backOutfunction(t){var e=1.70158;return--tt((e+1)t+e)+1},backInOutfunction(t){var e=2.5949095;return(t=2)1tt((e+1)t-e).5.5((t-=2)t((e+1)t+e)+2)},bounceInfunction(t){return 1-ww.bounceOut(1-t)},bounceOutfunction(t){return t12.757.5625ttt22.757.5625(t-=1.52.75)t+.75t2.52.757.5625(t-=2.252.75)t+.93757.5625(t-=2.6252.75)t+.984375},bounceInOutfunction(t){return t.5.5ww.bounceIn(2t).5ww.bounceOut(2t-1)+.5}};Tt.prototype={constructorTt,stepfunction(t,e){if(this._initialized(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var i=(t-this._startTime-this._pausedTime)this._life;if(!(i0)){i=Math.min(i,1);var n=this.easing,o=string==typeof nww[n]n,a=function==typeof oo(i)i;return this.fire(frame,a),1==ithis.loop(this.restart(t),restart)(this._needsRemove=!0,destroy)null}}},restartfunction(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},firefunction(t,e){this[t=on+t]&&this[t](this._target,e)},pausefunction(){this._paused=!0},resumefunction(){this._paused=!1}};var bw=function(){this.head=null,this.tail=null,this._len=0},Sw=bw.prototype;Sw.insert=function(t){var e=new Mw(t);return this.insertEntry(e),e},Sw.insertEntry=function(t){this.head(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t)this.head=this.tail=t,this._len++},Sw.remove=function(t){var e=t.prev,i=t.next;ee.next=ithis.head=i,ii.prev=ethis.tail=e,t.next=t.prev=null,this._len--},Sw.len=function(){return this._len},Sw.clear=function(){this.head=this.tail=null,this._len=0};var Mw=function(t){this.value=t,this.next,this.prev},Iw=function(t){this._list=new bw,this._map={},this._maxSize=t10,this._lastRemovedEntry=null},Tw=Iw.prototype;Tw.put=function(t,e){var i=this._list,n=this._map,o=null;if(null==n[t]){var a=i.len(),r=this._lastRemovedEntry;if(a=this._maxSize&&a0){var s=i.head;i.remove(s),delete n[s.key],o=s.value,this._lastRemovedEntry=s}rr.value=er=new Mw(e),r.key=t,i.insertEntry(r),n[t]=r}return o},Tw.get=function(t){var e=this._map[t],i=this._list;if(null!=e)return e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value},Tw.clear=function(){this._list.clear(),this._map={}};var Aw={transparent[0,0,0,0],aliceblue[240,248,255,1],antiquewhite[250,235,215,1],aqua[0,255,255,1],aquamarine[127,255,212,1],azure[240,255,255,1],beige[245,245,220,1],bisque[255,228,196,1],black[0,0,0,1],blanchedalmond[255,235,205,1],blue[0,0,255,1],blueviolet[138,43,226,1],brown[165,42,42,1],burlywood[222,184,135,1],cadetblue[95,158,160,1],chartreuse[127,255,0,1],chocolate[210,105,30,1],coral[255,127,80,1],cornflowerblue[100,149,237,1],cornsilk[255,248,220,1],crimson[220,20,60,1],cyan[0,255,255,1],darkblue[0,0,139,1],darkcyan[0,139,139,1],darkgoldenrod[184,134,11,1],darkgray[169,169,169,1],darkgreen[0,100,0,1],darkgrey[169,169,169,1],darkkhaki[189,183,107,1],darkmagenta[139,0,139,1],darkolivegreen[85,107,47,1],darkorange[255,140,0,1],darkorchid[153,50,204,1],darkred[139,0,0,1],darksalmon[233,150,122,1],darkseagreen[143,188,143,1],darkslateblue[72,61,139,1],darkslategray[47,79,79,1],darkslategrey[47,79,79,1],darkturquoise[0,206,209,1],darkviolet[148,0,211,1],deeppink[255,20,147,1],deepskyblue[0,191,255,1],dimgray[105,105,105,1],dimgrey[105,105,105,1],dodgerblue[30,144,255,1],firebrick[178,34,34,1],floralwhite[255,250,240,1],forestgreen[34,139,34,1],fuchsia[255,0,255,1],gainsboro[220,220,220,1],ghostwhite[248,248,255,1],gold[255,215,0,1],goldenrod[218,165,32,1],gray[128,128,128,1],green[0,128,0,1],greenyellow[173,255,47,1],grey[128,128,128,1],honeydew[240,255,240,1],hotpink[255,105,180,1],indianred[205,92,92,1],indigo[75,0,130,1],ivory[255,255,240,1],khaki[240,230,140,1],lavender[230,230,250,1],lavenderblush[255,240,245,1],lawngreen[124,252,0,1],lemonchiffon[255,250,205,1],lightblue[173,216,230,1],lightcoral[240,128,128,1],lightcyan[224,255,255,1],lightgoldenrodyellow[250,250,210,1],lightgray[211,211,211,1],lightgreen[144,238,144,1],lightgrey[211,211,211,1],lightpink[255,182,193,1],lightsalmon[255,160,122,1],lightseagreen[32,178,170,1],lightskyblue[135,206,250,1],lightslategray[119,136,153,1],lightslategrey[119,136,153,1],lightsteelblue[176,196,222,1],lightyellow[255,255,224,1],lime[0,255,0,1],limegreen[50,205,50,1],linen[250,240,230,1],magenta[255,0,255,1],maroon[128,0,0,1],mediumaquamarine[102,205,170,1],mediumblue[0,0,205,1],mediumorchid[186,85,211,1],mediumpurple[147,112,219,1],mediumseagreen[60,179,113,1],mediumslateblue[123,104,238,1],mediumspringgreen[0,250,154,1],mediumturquoise[72,209,204,1],mediumvioletred[199,21,133,1],midnightblue[25,25,112,1],mintcream[245,255,250,1],mistyrose[255,228,225,1],moccasin[255,228,181,1],navajowhite[255,222,173,1],navy[0,0,128,1],oldlace[253,245,230,1],olive[128,128,0,1],olivedrab[107,142,35,1],orange[255,165,0,1],orangered[255,69,0,1],orchid[218,112,214,1],palegoldenrod[238,232,170,1],palegreen[152,251,152,1],paleturquoise[175,238,238,1],palevioletred[219,112,147,1],papayawhip[255,239,213,1],peachpuff[255,218,185,1],peru[205,133,63,1],pink[255,192,203,1],plum[221,160,221,1],powderblue[176,224,230,1],purple[128,0,128,1],red[255,0,0,1],rosybrown[188,143,143,1],royalblue[65,105,225,1],saddlebrown[139,69,19,1],salmon[250,128,114,1],sandybrown[244,164,96,1],seagreen[46,139,87,1],seashell[255,245,238,1],sienna[160,82,45,1],silver[192,192,192,1],skyblue[135,206,235,1],slateblue[106,90,205,1],slategray[112,128,144,1],slategrey[112,128,144,1],snow[255,250,250,1],springgreen[0,255,127,1],steelblue[70,130,180,1],tan[210,180,140,1],teal[0,128,128,1],thistle[216,191,216,1],tomato[255,99,71,1],turquoise[64,224,208,1],violet[238,130,238,1],wheat[245,222,179,1],white[255,255,255,1],whitesmoke[245,245,245,1],yellow[255,255,0,1],yellowgreen[154,205,50,1]},Dw=new Iw(20),Cw=null,Lw=Wt,kw=Ht,Pw=(Object.freezeObject)({parsezt,liftGt,toHexFt,fastLerpWt,fastMapToColorLw,lerpHt,mapToColorkw,modifyHSLZt,modifyAlphaUt,stringifyXt}),Nw=Array.prototype.slice,Ow=function(t,e,i,n){this._tracks={},this._target=t,this._loop=e!1,this._getter=ijt,this._setter=nYt,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};Ow.prototype={whenfunction(t,e){var i=this._tracks;for(var n in e)if(e.hasOwnProperty(n)){if(!i[n]){i[n]=[];var o=this._getter(this._target,n);if(null==o)continue;0!==t&&i[n].push({time0,valueie(o)})}i[n].push({timet,valuee[n]})}return this},duringfunction(t){return this._onframeList.push(t),this},pausefunction(){for(var t=0;tthis._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resumefunction(){for(var t=0;tthis._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPausedfunction(){return!!this._paused},_doneCallbackfunction(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,i=0;ie;i++)t[i].call(this)},startfunction(t,e){var i,n=this,o=0;for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var r=ae(this,t,function(){--on._doneCallback()},this._tracks[a],a,e);r&&(this._clipList.push(r),o++,this.animation&&this.animation.addClip(r),i=r)}if(i){var s=i.onframe;i.onframe=function(t,e){s(t,e);for(var i=0;in._onframeList.length;i++)n._onframeList[i](t,e)}}return othis._doneCallback(),this},stopfunction(t){for(var e=this._clipList,i=this.animation,n=0;ne.length;n++){var o=e[n];t&&o.onframe(this._target,1),i&&i.removeClip(o)}e.length=0},delayfunction(t){return this._delay=t,this},donefunction(t){return t&&this._doneList.push(t),this},getClipsfunction(){return this._clipList}};var Ew=1;undefined!=typeof window&&(Ew=Math.max(window.devicePixelRatio1,1));var Rw=Ew,zw=function(){},Bw=zw,Vw=function(){this.animators=[]};Vw.prototype={constructorVw,animatefunction(t,e){var i,n=!1,o=this,a=this.__zr;if(t){var r=t.split(.),s=o;n=shape===r[0];for(var u=0,h=r.length;uh;u++)s&&(s=s[r[u]]);s&&(i=s)}else i=o;if(i){var c=o.animators,d=new Ow(i,e);return d.during(function(t){o.dirty(n)}).done(function(){c.splice(l(c,d),1)}),c.push(d),a&&a.animation.addAnimator(d),d}Bw('Property '+t+' is not existed in element '+o.id)},stopAnimationfunction(t){for(var e=this.animators,i=e.length,n=0;ni;n++)e[n].stop(t);return e.length=0,this},animateTofunction(t,e,i,n,o,a){re(this,t,e,i,n,o,a)},animateFromfunction(t,e,i,n,o,a){re(this,t,e,i,n,o,a,!0)}};var Gw=function(t){mw.call(this,t),aw.call(this,t),Vw.call(this,t),this.id=t.idE_()};Gw.prototype={typeelement,name,__zrnull,ignore!1,clipPathnull,isGroup!1,driftfunction(t,e){switch(this.draggable){casehorizontale=0;break;caseverticalt=0}var i=this.transform;i(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdatefunction(){},afterUpdatefunction(){},updatefunction(){this.updateTransform()},traversefunction(t,e){},attrKVfunction(t,e){if(position===tscale===torigin===t){if(e){var i=this[t];i(i=this[t]=[]),i[0]=e[0],i[1]=e[1]}}else this[t]=e},hidefunction(){this.ignore=!0,this.__zr&&this.__zr.refresh()},showfunction(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attrfunction(t,e){if(string==typeof t)this.attrKV(t,e);else if(w(t))for(var i in t)t.hasOwnProperty(i)&&this.attrKV(i,t[i]);return this.dirty(!1),this},setClipPathfunction(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPathfunction(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZrfunction(t){this.__zr=t;var e=this.animators;if(e)for(var i=0;ie.length;i++)t.animation.addAnimator(e[i]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZrfunction(t){this.__zr=null;var e=this.animators;if(e)for(var i=0;ie.length;i++)t.animation.removeAnimator(e[i]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},h(Gw,Vw),h(Gw,mw),h(Gw,aw);var Fw=Q,Ww=Math.min,Hw=Math.max;ue.prototype={constructorue,unionfunction(t){var e=Ww(t.x,this.x),i=Ww(t.y,this.y);this.width=Hw(t.x+t.width,this.x+this.width)-e,this.height=Hw(t.y+t.height,this.y+this.height)-i,this.x=e,this.y=i},applyTransformfunction(){var t=[],e=[],i=[],n=[];return function(o){if(o){t[0]=i[0]=this.x,t[1]=n[1]=this.y,e[0]=n[0]=this.x+this.width,e[1]=i[1]=this.y+this.height,Fw(t,t,o),Fw(e,e,o),Fw(i,i,o),Fw(n,n,o),this.x=Ww(t[0],e[0],i[0],n[0]),this.y=Ww(t[1],e[1],i[1],n[1]);var a=Hw(t[0],e[0],i[0],n[0]),r=Hw(t[1],e[1],i[1],n[1]);this.width=a-this.x,this.height=r-this.y}}}(),calculateTransformfunction(t){var e=this,i=t.widthe.width,n=t.heighte.height,o=mt();return _t(o,o,[-e.x,-e.y]),bt(o,o,[i,n]),_t(o,o,[t.x,t.y]),o},intersectfunction(t){if(!t)return!1;t instanceof ue(t=ue.create(t));var e=this,i=e.x,n=e.x+e.width,o=e.y,a=e.y+e.height,r=t.x,s=t.x+t.width,l=t.y,u=t.y+t.height;return!(nrsialuo)},containfunction(t,e){var i=this;return t=i.x&&t=i.x+i.width&&e=i.y&&e=i.y+i.height},clonefunction(){return new ue(this.x,this.y,this.width,this.height)},copyfunction(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plainfunction(){return{xthis.x,ythis.y,widththis.width,heightthis.height}}},ue.create=function(t){return new ue(t.x,t.y,t.width,t.height)};var Zw=function(t){t=t{},Gw.call(this,t);for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};Zw.prototype={constructorZw,isGroup!0,typegroup,silent!1,childrenfunction(){return this._children.slice()},childAtfunction(t){return this._children[t]},childOfNamefunction(t){for(var e=this._children,i=0;ie.length;i++)if(e[i].name===t)return e[i]},childCountfunction(){return this._children.length},addfunction(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBeforefunction(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var i=this._children,n=i.indexOf(e);n=0&&(i.splice(n,0,t),this._doAdd(t))}return this},_doAddfunction(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,i=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof Zw&&t.addChildrenToStorage(e)),i&&i.refresh()},removefunction(t){var e=this.__zr,i=this.__storage,n=this._children,o=l(n,t);return o0this(n.splice(o,1),t.parent=null,i&&(i.delFromStorage(t),t instanceof Zw&&t.delChildrenFromStorage(i)),e&&e.refresh(),this)},removeAllfunction(){var t,e,i=this._children,n=this.__storage;for(e=0;ei.length;e++)t=i[e],n&&(n.delFromStorage(t),t instanceof Zw&&t.delChildrenFromStorage(n)),t.parent=null;return i.length=0,this},eachChildfunction(t,e){for(var i=this._children,n=0;ni.length;n++){var o=i[n];t.call(e,o,n)}return this},traversefunction(t,e){for(var i=0;ithis._children.length;i++){var n=this._children[i];t.call(e,n),group===n.type&&n.traverse(t,e)}return this},addChildrenToStoragefunction(t){for(var e=0;ethis._children.length;e++){var i=this._children[e];t.addToStorage(i),i instanceof Zw&&i.addChildrenToStorage(t)}},delChildrenFromStoragefunction(t){for(var e=0;ethis._children.length;e++){var i=this._children[e];t.delFromStorage(i),i instanceof Zw&&i.delChildrenFromStorage(t)}},dirtyfunction(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRectfunction(t){for(var e=null,i=new ue(0,0,0,0),n=tthis._children,o=[],a=0;an.length;a++){var r=n[a];if(!r.ignore&&!r.invisible){var s=r.getBoundingRect(),l=r.getLocalTransform(o);l(i.copy(s),i.applyTransform(l),(e=ei.clone()).union(i))(e=es.clone()).union(s)}}return ei}},u(Zw,Gw);var Uw=32,Xw=7,jw=function(){this._roots=[],this._displayList=[],this._displayListLen=0};jw.prototype={constructorjw,traversefunction(t,e){for(var i=0;ithis._roots.length;i++)this._roots[i].traverse(t,e)},getDisplayListfunction(t,e){return e=e!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayListfunction(t){this._displayListLen=0;for(var e=this._roots,i=this._displayList,n=0,o=e.length;no;n++)this._updateAndAddDisplayable(e[n],null,t);i.length=this._displayListLen,z_.canvasSupported&&ve(i,ye)},_updateAndAddDisplayablefunction(t,e,i){if(!t.ignorei){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var n=t.clipPath;if(n){e=ee.slice()[];for(var o=n,a=t;o;)o.parent=a,o.updateTransform(),e.push(o),a=o,o=o.clipPath}if(t.isGroup){for(var r=t._children,s=0;sr.length;s++){var l=r[s];t.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,e,i)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRootfunction(t){t.__storage!==this&&(t instanceof Zw&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRootfunction(t){if(null==t){for(i=0;ithis._roots.length;i++){var e=this._roots[i];e instanceof Zw&&e.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array)for(var i=0,n=t.length;in;i++)this.delRoot(t[i]);else{var o=l(this._roots,t);o=0&&(this.delFromStorage(t),this._roots.splice(o,1),t instanceof Zw&&t.delChildrenFromStorage(this))}},addToStoragefunction(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStoragefunction(t){return t&&(t.__storage=null),this},disposefunction(){this._renderList=this._roots=null},displayableSortFuncye};var Yw={shadowBlur1,shadowOffsetX1,shadowOffsetY1,textShadowBlur1,textShadowOffsetX1,textShadowOffsetY1,textBoxShadowBlur1,textBoxShadowOffsetX1,textBoxShadowOffsetY1},qw=function(t,e,i){return Yw.hasOwnProperty(e)i=t.dpri},Kw=[[shadowBlur,0],[shadowOffsetX,0],[shadowOffsetY,0],[shadowColor,#000],[lineCap,butt],[lineJoin,miter],[miterLimit,10]],$w=function(t){this.extendFrom(t,!1)};$w.prototype={constructor$w,fill#000,strokenull,opacity1,fillOpacitynull,strokeOpacitynull,lineDashnull,lineDashOffset0,shadowBlur0,shadowOffsetX0,shadowOffsetY0,lineWidth1,strokeNoScale!1,textnull,fontnull,textFontnull,fontStylenull,fontWeightnull,fontSizenull,fontFamilynull,textTagnull,textFill#000,textStrokenull,textWidthnull,textHeightnull,textStrokeWidth0,textLineHeightnull,textPositioninside,textRectnull,textOffsetnull,textAlignnull,textVerticalAlignnull,textDistance5,textShadowColortransparent,textShadowBlur0,textShadowOffsetX0,textShadowOffsetY0,textBoxShadowColortransparent,textBoxShadowBlur0,textBoxShadowOffsetX0,textBoxShadowOffsetY0,transformText!1,textRotation0,textOriginnull,textBackgroundColornull,textBorderColornull,textBorderWidth0,textBorderRadius0,textPaddingnull,richnull,truncatenull,blendnull,bindfunction(t,e,i){for(var n=this,o=i&&i.style,a=!o,r=0;rKw.length;r++){var s=Kw[r],l=s[0];(an[l]!==o[l])&&(t[l]=qw(t,l,n[l]s[1]))}if((an.fill!==o.fill)&&(t.fillStyle=n.fill),(an.stroke!==o.stroke)&&(t.strokeStyle=n.stroke),(an.opacity!==o.opacity)&&(t.globalAlpha=null==n.opacity1n.opacity),(an.blend!==o.blend)&&(t.globalCompositeOperation=n.blendsource-over),this.hasStroke()){var u=n.lineWidth;t.lineWidth=u(this.strokeNoScale&&e&&e.getLineScalee.getLineScale()1)}},hasFillfunction(){var t=this.fill;return null!=t&&none!==t},hasStrokefunction(){var t=this.stroke;return null!=t&&none!==t&&this.lineWidth0},extendFromfunction(t,e){if(t)for(var i in t)!t.hasOwnProperty(i)!0!==e&&(!1===ethis.hasOwnProperty(i)null==t[i])(this[i]=t[i])},setfunction(t,e){string==typeof tthis[t]=ethis.extendFrom(t,!0)},clonefunction(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradientfunction(t,e,i){for(var n=(radial===e.type_exe)(t,e,i),o=e.colorStops,a=0;ao.length;a++)n.addColorStop(o[a].offset,o[a].color);return n}};for(var Jw=$w.prototype,Qw=0;QwKw.length;Qw++){var tb=Kw[Qw];tb[0]in Jw(Jw[tb[0]]=tb[1])}$w.getGradient=Jw.getGradient;var eb=function(t,e){this.image=t,this.repeat=e,this.type=pattern};eb.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeatrepeat)};var ib=function(t,e,i){var n;i=iRw,string==typeof tn=be(t,e,i)w(t)&&(t=(n=t).id),this.id=t,this.dom=n;var o=n.style;o&&(n.onselectstart=we,o[-webkit-user-select]=none,o[user-select]=none,o[-webkit-touch-callout]=none,o[-webkit-tap-highlight-color]=rgba(0,0,0,0),o.padding=0,o.margin=0,o[border-width]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=i};ib.prototype={constructorib,__dirty!0,__used!1,__drawIndex0,__startIndex0,__endIndex0,incremental!1,getElementCountfunction(){return this.__endIndex-this.__startIndex},initContextfunction(){this.ctx=this.dom.getContext(2d),this.ctx.dpr=this.dpr},createBackBufferfunction(){var t=this.dpr;this.domBack=be(back-+this.id,this.painter,t),this.ctxBack=this.domBack.getContext(2d),1!=t&&this.ctxBack.scale(t,t)},resizefunction(t,e){var i=this.dpr,n=this.dom,o=n.style,a=this.domBack;o&&(o.width=t+px,o.height=e+px),n.width=ti,n.height=ei,a&&(a.width=ti,a.height=ei,1!=i&&this.ctxBack.scale(i,i))},clearfunction(t,e){var i=this.dom,n=this.ctx,o=i.width,a=i.height,e=ethis.clearColor,r=this.motionBlur&&!t,s=this.lastFrameAlpha,l=this.dpr;if(r&&(this.domBackthis.createBackBuffer(),this.ctxBack.globalCompositeOperation=copy,this.ctxBack.drawImage(i,0,0,ol,al)),n.clearRect(0,0,o,a),e&&transparent!==e){var u;e.colorStops(u=e.__canvasGradient$w.getGradient(n,e,{x0,y0,widtho,heighta}),e.__canvasGradient=u)e.image&&(u=eb.prototype.getCanvasPattern.call(e,n)),n.save(),n.fillStyle=ue,n.fillRect(0,0,o,a),n.restore()}if(r){var h=this.domBack;n.save(),n.globalAlpha=s,n.drawImage(h,0,0,o,a),n.restore()}}};var nb=undefined!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)window.mozRequestAnimationFramewindow.webkitRequestAnimationFrame)function(t){setTimeout(t,16)},ob=new Iw(50),ab={},rb=0,sb=5e3,lb={([a-zA-Z0-9_]+)([^}])}g,ub=12px sans-serif,hb={};hb.measureText=function(t,e){var i=s();return i.font=eub,i.measureText(t)};var cb={left1,right1,center1},db={top1,bottom1,middle1},fb=[[textShadowBlur,shadowBlur,0],[textShadowOffsetX,shadowOffsetX,0],[textShadowOffsetY,shadowOffsetY,0],[textShadowColor,shadowColor,transparent]],pb=new ue,gb=function(){};gb.prototype={constructorgb,drawRectTextfunction(t,e){var i=this.style;e=i.textRecte,this.__dirty&&Ue(i);var n=i.text;if(null!=n&&(n+=),li(n,i)){t.save();var o=this.transform;i.transformTextthis.setTransform(t)o&&(pb.copy(e),pb.applyTransform(o),e=pb),je(this,t,n,i,e),t.restore()}}},ui.prototype={constructorui,typedisplayable,__dirty!0,invisible!1,z0,z20,zlevel0,draggable!1,dragging!1,silent!1,culling!1,cursorpointer,rectHover!1,progressive!1,incremental!1,globalScaleRatio1,beforeBrushfunction(t){},afterBrushfunction(t){},brushfunction(t,e){},getBoundingRectfunction(){},containfunction(t,e){return this.rectContain(t,e)},traversefunction(t,e){t.call(e,this)},rectContainfunction(t,e){var i=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(i[0],i[1])},dirtyfunction(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStylefunction(t){return this.animate(style,t)},attrKVfunction(t,e){style!==tGw.prototype.attrKV.call(this,t,e)this.style.set(e)},setStylefunction(t,e){return this.style.set(t,e),this.dirty(!1),this},useStylefunction(t){return this.style=new $w(t,this),this.dirty(!1),this}},u(ui,Gw),h(ui,gb),hi.prototype={constructorhi,typeimage,brushfunction(t,e){var i=this.style,n=i.image;i.bind(t,this,e);var o=this._image=Me(n,this._image,this,this.onload);if(o&&Te(o)){var a=i.x0,r=i.y0,s=i.width,l=i.height,u=o.widtho.height;if(null==s&&null!=ls=lunull==l&&null!=sl=sunull==s&&null==l&&(s=o.width,l=o.height),this.setTransform(t),i.sWidth&&i.sHeight){var h=i.sx0,c=i.sy0;t.drawImage(o,h,c,i.sWidth,i.sHeight,a,r,s,l)}else if(i.sx&&i.sy){var d=s-(h=i.sx),f=l-(c=i.sy);t.drawImage(o,h,c,d,f,a,r,s,l)}else t.drawImage(o,a,r,s,l);null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRectfunction(){var t=this.style;return this._rect(this._rect=new ue(t.x0,t.y0,t.width0,t.height0)),this._rect}},u(hi,ui);var mb=new ue(0,0,0,0),vb=new ue(0,0,0,0),yb=function(t,e,i){this.type=canvas;var n=!t.nodeNameCANVAS===t.nodeName.toUpperCase();this._opts=i=a({},i{}),this.dpr=i.devicePixelRatioRw,this._singleCanvas=n,this.root=t;var o=t.style;o&&(o[-webkit-tap-highlight-color]=transparent,o[-webkit-user-select]=o[user-select]=o[-webkit-touch-callout]=none,t.innerHTML=),this.storage=e;var r=this._zlevelList=[],s=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,n){var l=t.width,u=t.height;null!=i.width&&(l=i.width),null!=i.height&&(u=i.height),this.dpr=i.devicePixelRatio1,t.width=lthis.dpr,t.height=uthis.dpr,this._width=l,this._height=u;var h=new ib(t,this,this.dpr);h.__builtin__=!0,h.initContext(),s[314159]=h,h.zlevel=314159,r.push(314159),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var c=this._domRoot=mi(this._width,this._height);t.appendChild(c)}this._hoverlayer=null,this._hoverElements=[]};yb.prototype={constructoryb,getTypefunction(){returncanvas},isSingleCanvasfunction(){return this._singleCanvas},getViewportRootfunction(){return this._domRoot},getViewportRootOffsetfunction(){var t=this.getViewportRoot();if(t)return{offsetLeftt.offsetLeft0,offsetTopt.offsetTop0}},refreshfunction(t){var e=this.storage.getDisplayList(!0),i=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var n=0;ni.length;n++){var o=i[n],a=this._layers[o];if(!a.__builtin__&&a.refresh){var r=0===nthis._backgroundColornull;a.refresh(r)}}return this.refreshHover(),this},addHoverfunction(t,e){if(!t.__hoverMir){var i=new t.constructor({stylet.style,shapet.shape,zt.z,z2t.z2,silentt.silent});return i.__from=t,t.__hoverMir=i,e&&i.setStyle(e),this._hoverElements.push(i),i}},removeHoverfunction(t){var e=t.__hoverMir,i=this._hoverElements,n=l(i,e);n=0&&i.splice(n,1),t.__hoverMir=null},clearHoverfunction(t){for(var e=this._hoverElements,i=0;ie.length;i++){var n=e[i].__from;n&&(n.__hoverMir=null)}e.length=0},refreshHoverfunction(){var t=this._hoverElements,e=t.length,i=this._hoverlayer;if(i&&i.clear(),e){ve(t,this.storage.displayableSortFunc),i(i=this._hoverlayer=this.getLayer(1e5));var n={};i.ctx.save();for(var o=0;oe;){var a=t[o],r=a.__from;r&&r.__zr(o++,r.invisible(a.transform=r.transform,a.invTransform=r.invTransform,a.__clipPaths=r.__clipPaths,this._doPaintEl(a,i,!0,n)))(t.splice(o,1),r.__hoverMir=null,e--)}i.ctx.restore()}},getHoverLayerfunction(){return this.getLayer(1e5)},_paintListfunction(t,e,i){if(this._redrawId===i){e=e!1,this._updateLayerStatus(t);var n=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!n){var o=this;nb(function(){o._paintList(t,e,i)})}}},_compositeManuallyfunction(){var t=this.getLayer(314159).ctx,e=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,e,i),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,e,i)})},_doPaintListfunction(t,e){for(var i=[],n=0;nthis._zlevelList.length;n++){var o=this._zlevelList[n];(s=this._layers[o]).__builtin__&&s!==this._hoverlayer&&(s.__dirtye)&&i.push(s)}for(var a=!0,r=0;ri.length;r++){var s=i[r],l=s.ctx,u={};l.save();var h=es.__startIndexs.__drawIndex,c=!e&&s.incremental&&Date.now,f=c&&Date.now(),p=s.zlevel===this._zlevelList[0]this._backgroundColornull;if(s.__startIndex===s.__endIndex)s.clear(!1,p);else if(h===s.__startIndex){var g=t[h];g.incremental&&g.notClear&&!es.clear(!1,p)}-1===h&&(console.error(For some unknown reason. drawIndex is -1),h=s.__startIndex);for(var m=h;ms.__endIndex;m++){var v=t[m];if(this._doPaintEl(v,s,e,u),v.__dirty=v.__dirtyText=!1,c&&Date.now()-f15)break}s.__drawIndex=m,s.__drawIndexs.__endIndex&&(a=!1),u.prevElClipPaths&&l.restore(),l.restore()}return z_.wxa&&d(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),a},_doPaintElfunction(t,e,i,n){var o=e.ctx,a=t.transform;if((e.__dirtyi)&&!t.invisible&&0!==t.style.opacity&&(!aa[0]a[3])&&(!t.culling!fi(t,this._width,this._height))){var r=t.__clipPaths;n.prevElClipPaths&&!pi(r,n.prevElClipPaths)(n.prevElClipPaths&&(e.ctx.restore(),n.prevElClipPaths=null,n.prevEl=null),r&&(o.save(),gi(r,o),n.prevElClipPaths=r)),t.beforeBrush&&t.beforeBrush(o),t.brush(o,n.prevElnull),n.prevEl=t,t.afterBrush&&t.afterBrush(o)}},getLayerfunction(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=314159);var i=this._layers[t];return i((i=new ib(zr_+t,this,this.dpr)).zlevel=t,i.__builtin__=!0,this._layerConfig[t]&&n(i,this._layerConfig[t],!0),e&&(i.virtual=e),this.insertLayer(t,i),i.initContext()),i},insertLayerfunction(t,e){var i=this._layers,n=this._zlevelList,o=n.length,a=null,r=-1,s=this._domRoot;if(i[t])Bw(ZLevel +t+ has been used already);else if(di(e)){if(o0&&tn[0]){for(r=0;ro-1&&!(n[r]t&&n[r+1]t);r++);a=i[n[r]]}if(n.splice(r+1,0,t),i[t]=e,!e.virtual)if(a){var l=a.dom;l.nextSiblings.insertBefore(e.dom,l.nextSibling)s.appendChild(e.dom)}else s.firstChilds.insertBefore(e.dom,s.firstChild)s.appendChild(e.dom)}else Bw(Layer of zlevel +t+ is not valid)},eachLayerfunction(t,e){var i,n,o=this._zlevelList;for(n=0;no.length;n++)i=o[n],t.call(e,this._layers[i],i)},eachBuiltinLayerfunction(t,e){var i,n,o,a=this._zlevelList;for(o=0;oa.length;o++)n=a[o],(i=this._layers[n]).__builtin__&&t.call(e,i,n)},eachOtherLayerfunction(t,e){var i,n,o,a=this._zlevelList;for(o=0;oa.length;o++)n=a[o],(i=this._layers[n]).__builtin__t.call(e,i,n)},getLayersfunction(){return this._layers},_updateLayerStatusfunction(t){function e(t){i&&(i.__endIndex!==t&&(i.__dirty=!0),i.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(o=1;ot.length;o++)if((r=t[o]).zlevel!==t[o-1].zlevelr.incremental){this._needsManuallyCompositing=!0;break}for(var i=null,n=0,o=0;ot.length;o++){var a,r=t[o],s=r.zlevel;r.incremental((a=this.getLayer(s+.001,this._needsManuallyCompositing)).incremental=!0,n=1)a=this.getLayer(s+(n0.010),this._needsManuallyCompositing),a.__builtin__Bw(ZLevel +s+ has been used by unkown layer +a.id),a!==i&&(a.__used=!0,a.__startIndex!==o&&(a.__dirty=!0),a.__startIndex=o,a.incrementala.__drawIndex=-1a.__drawIndex=o,e(o),i=a),r.__dirty&&(a.__dirty=!0,a.incremental&&a.__drawIndex0&&(a.__drawIndex=o))}e(o),this.eachBuiltinLayer(function(t,e){!t.__used&&t.getElementCount()0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex0&&(t.__drawIndex=t.__startIndex)})},clearfunction(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayerfunction(t){t.clear()},setBackgroundColorfunction(t){this._backgroundColor=t},configLayerfunction(t,e){if(e){var i=this._layerConfig;i[t]n(i[t],e,!0)i[t]=e;for(var o=0;othis._zlevelList.length;o++){var a=this._zlevelList[o];a!==t&&a!==t+.01n(this._layers[a],i[t],!0)}}},delLayerfunction(t){var e=this._layers,i=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],i.splice(l(i,t),1))},resizefunction(t,e){if(this._domRoot.style){var i=this._domRoot;i.style.display=none;var n=this._opts;if(null!=t&&(n.width=t),null!=e&&(n.height=e),t=this._getSize(0),e=this._getSize(1),i.style.display=,this._width!=te!=this._height){i.style.width=t+px,i.style.height=e+px;for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);d(this._progressiveLayers,function(i){i.resize(t,e)}),this.refresh(!0)}this._width=t,this._height=e}else{if(null==tnull==e)return;this._width=t,this._height=e,this.getLayer(314159).resize(t,e)}return this},clearLayerfunction(t){var e=this._layers[t];e&&e.clear()},disposefunction(){this.root.innerHTML=,this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvasfunction(t){if(t=t{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new ib(image,this,t.pixelRatiothis.dpr);if(e.initContext(),e.clear(!1,t.backgroundColorthis._backgroundColor),t.pixelRatio=this.dpr){this.refresh();var i=e.dom.width,n=e.dom.height,o=e.ctx;this.eachLayer(function(t){t.__builtin__o.drawImage(t.dom,0,0,i,n)t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())})}else for(var a={},r=this.storage.getDisplayList(!0),s=0;sr.length;s++){var l=r[s];this._doPaintEl(l,e,!0,a)}return e.dom},getWidthfunction(){return this._width},getHeightfunction(){return this._height},_getSizefunction(t){var e=this._opts,i=[width,height][t],n=[clientWidth,clientHeight][t],o=[paddingLeft,paddingTop][t],a=[paddingRight,paddingBottom][t];if(null!=e[i]&&auto!==e[i])return parseFloat(e[i]);var r=this.root,s=document.defaultView.getComputedStyle(r);return(r[n]ci(s[i])ci(r.style[i]))-(ci(s[o])0)-(ci(s[a])0)0},pathToImagefunction(t,e){e=ethis.dpr;var i=document.createElement(canvas),n=i.getContext(2d),o=t.getBoundingRect(),a=t.style,r=a.shadowBlure,s=a.shadowOffsetXe,l=a.shadowOffsetYe,u=a.hasStroke()a.lineWidth0,h=Math.max(u2,-s+r),c=Math.max(u2,s+r),d=Math.max(u2,-l+r),f=Math.max(u2,l+r),p=o.width+h+c,g=o.height+d+f;i.width=pe,i.height=ge,n.scale(e,e),n.clearRect(0,0,p,g),n.dpr=e;var m={positiont.position,rotationt.rotation,scalet.scale};t.position=[h-o.x,d-o.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(n);var v=new hi({style{x0,y0,imagei}});return null!=m.position&&(v.position=t.position=m.position),null!=m.rotation&&(v.rotation=t.rotation=m.rotation),null!=m.scale&&(v.scale=t.scale=m.scale),v}};var xb=function(t){t=t{},this.stage=t.stage{},this.onframe=t.onframefunction(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,aw.call(this)};xb.prototype={constructorxb,addClipfunction(t){this._clips.push(t)},addAnimatorfunction(t){t.animation=this;for(var e=t.getClips(),i=0;ie.length;i++)this.addClip(e[i])},removeClipfunction(t){var e=l(this._clips,t);e=0&&this._clips.splice(e,1)},removeAnimatorfunction(t){for(var e=t.getClips(),i=0;ie.length;i++)this.removeClip(e[i]);t.animation=null},_updatefunction(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,i=this._clips,n=i.length,o=[],a=[],r=0;rn;r++){var s=i[r],l=s.step(t,e);l&&(o.push(l),a.push(s))}for(r=0;rn;)i[r]._needsRemove(i[r]=i[n-1],i.pop(),n--)r++;n=o.length;for(r=0;rn;r++)a[r].fire(o[r]);this._time=t,this.onframe(e),this.trigger(frame,e),this.stage.update&&this.stage.update()},_startLoopfunction(){function t(){e._running&&(nb(t),!e._paused&&e._update())}var e=this;this._running=!0,nb(t)},startfunction(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stopfunction(){this._running=!1},pausefunction(){this._paused(this._pauseStart=(new Date).getTime(),this._paused=!0)},resumefunction(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clearfunction(){this._clips=[]},isFinishedfunction(){return!this._clips.length},animatefunction(t,e){var i=new Ow(t,(e=e{}).loop,e.getter,e.setter);return this.addAnimator(i),i}},h(xb,aw);var _b=function(){this._track=[]};_b.prototype={constructor_b,recognizefunction(t,e,i){return this._doTrack(t,e,i),this._recognize(t)},clearfunction(){return this._track.length=0,this},_doTrackfunction(t,e,i){var n=t.touches;if(n){for(var o={points[],touches[],targete,eventt},a=0,r=n.length;ar;a++){var s=n[a],l=rt(i,s,{});o.points.push([l.zrX,l.zrY]),o.touches.push(s)}this._track.push(o)}},_recognizefunction(t){for(var e in wb)if(wb.hasOwnProperty(e)){var i=wb[e](this._track,t);if(i)return i}}};var wb={pinchfunction(t,e){var i=t.length;if(i){var n=(t[i-1]{}).points,o=(t[i-2]{}).pointsn;if(o&&o.length1&&n&&n.length1){var a=vi(n)vi(o);!isFinite(a)&&(a=1),e.pinchScale=a;var r=yi(n);return e.pinchX=r[0],e.pinchY=r[1],{typepinch,targett[0].target,evente}}}}},bb=[click,dblclick,mousewheel,mouseout,mouseup,mousedown,mousemove,contextmenu],Sb=[touchstart,touchend,touchmove],Mb={pointerdown1,pointerup1,pointermove1,pointerout1},Ib=f(bb,function(t){var e=t.replace(mouse,pointer);return Mb[e]et}),Tb={mousemovefunction(t){t=lt(this.dom,t),this.trigger(mousemove,t)},mouseoutfunction(t){var e=(t=lt(this.dom,t)).toElementt.relatedTarget;if(e!=this.dom)for(;e&&9!=e.nodeType;){if(e===this.dom)return;e=e.parentNode}this.trigger(mouseout,t)},touchstartfunction(t){(t=lt(this.dom,t)).zrByTouch=!0,this._lastTouchMoment=new Date,_i(this,t,start),Tb.mousemove.call(this,t),Tb.mousedown.call(this,t),wi(this)},touchmovefunction(t){(t=lt(this.dom,t)).zrByTouch=!0,_i(this,t,change),Tb.mousemove.call(this,t),wi(this)},touchendfunction(t){(t=lt(this.dom,t)).zrByTouch=!0,_i(this,t,end),Tb.mouseup.call(this,t),+new Date-this._lastTouchMoment300&&Tb.click.call(this,t),wi(this)},pointerdownfunction(t){Tb.mousedown.call(this,t)},pointermovefunction(t){bi(t)Tb.mousemove.call(this,t)},pointerupfunction(t){Tb.mouseup.call(this,t)},pointeroutfunction(t){bi(t)Tb.mouseout.call(this,t)}};d([click,mousedown,mouseup,mousewheel,dblclick,contextmenu],function(t){Tb[t]=function(e){e=lt(this.dom,e),this.trigger(t,e)}});var Ab=Mi.prototype;Ab.dispose=function(){for(var t=bb.concat(Sb),e=0;et.length;e++){var i=t[e];ht(this.dom,xi(i),this._handlers[i])}},Ab.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=tdefault)},h(Mi,aw);var Db=!z_.canvasSupported,Cb={canvasyb},Lb={},kb=function(t,e,i){i=i{},this.dom=e,this.id=t;var n=this,o=new jw,a=i.renderer;if(Db){if(!Cb.vml)throw new Error(You need to require 'zrendervmlvml' to support IE8);a=vml}else a&&Cb[a](a=canvas);var r=new Cb[a](e,o,i,t);this.storage=o,this.painter=r;var s=z_.nodez_.workernullnew Mi(r.getViewportRoot());this.handler=new cw(o,r,s,r.root),this.animation=new xb({stage{updatem(this.flush,this)}}),this.animation.start(),this._needsRefresh;var l=o.delFromStorage,u=o.addToStorage;o.delFromStorage=function(t){l.call(o,t),t&&t.removeSelfFromZr(n)},o.addToStorage=function(t){u.call(o,t),t.addSelfToZr(n)}};kb.prototype={constructorkb,getIdfunction(){return this.id},addfunction(t){this.storage.addRoot(t),this._needsRefresh=!0},removefunction(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayerfunction(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColorfunction(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediatelyfunction(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refreshfunction(){this._needsRefresh=!0},flushfunction(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger(rendered)},addHoverfunction(t,e){if(this.painter.addHover){var i=this.painter.addHover(t,e);return this.refreshHover(),i}},removeHoverfunction(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHoverfunction(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHoverfunction(){this._needsRefreshHover=!0},refreshHoverImmediatelyfunction(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resizefunction(t){t=t{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimationfunction(){this.animation.clear()},getWidthfunction(){return this.painter.getWidth()},getHeightfunction(){return this.painter.getHeight()},pathToImagefunction(t,e){return this.painter.pathToImage(t,e)},setCursorStylefunction(t){this.handler.setCursorStyle(t)},findHoverfunction(t,e){return this.handler.findHover(t,e)},onfunction(t,e,i){this.handler.on(t,e,i)},offfunction(t,e){this.handler.off(t,e)},triggerfunction(t,e){this.handler.trigger(t,e)},clearfunction(){this.storage.delRoot(),this.painter.clear()},disposefunction(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,Ai(this.id)}};var Pb=(Object.freezeObject)({version4.0.5,initIi,disposefunction(t){if(t)t.dispose();else{for(var e in Lb)Lb.hasOwnProperty(e)&&Lb[e].dispose();Lb={}}return this},getInstancefunction(t){return Lb[t]},registerPainterTi}),Nb=d,Ob=w,Eb=y,Rb=series0,zb=[fontStyle,fontWeight,fontSize,fontFamily,rich,tag,color,textBorderColor,textBorderWidth,width,height,lineHeight,align,verticalAlign,baseline,shadowColor,shadowBlur,shadowOffsetX,shadowOffsetY,textShadowColor,textShadowBlur,textShadowOffsetX,textShadowOffsetY,backgroundColor,borderColor,borderWidth,borderRadius,padding],Bb=0,Vb=.,Gb=___EC__COMPONENT__CONTAINER___,Fb=0,Wb=function(t){for(var e=0;et.length;e++)t[e][1](t[e][1]=t[e][0]);return function(e,i,n){for(var o={},a=0;at.length;a++){var r=t[a][1];if(!(i&&l(i,r)=0n&&l(n,r)0)){var s=e.getShallow(r);null!=s&&(o[t[a][0]]=s)}}return o}},Hb=Wb([[lineWidth,width],[stroke,color],[opacity],[shadowBlur],[shadowOffsetX],[shadowOffsetY],[shadowColor]]),Zb={getLineStylefunction(t){var e=Hb(this,t),i=this.getLineDash(e.lineWidth);return i&&(e.lineDash=i),e},getLineDashfunction(t){null==t&&(t=1);var e=this.get(type),i=Math.max(t,2),n=4t;returnsolid===enull==enulldashed===e[n,n][i,i]}},Ub=Wb([[fill,color],[shadowBlur],[shadowOffsetX],[shadowOffsetY],[opacity],[shadowColor]]),Xb={getAreaStylefunction(t,e){return Ub(this,t,e)}},jb=Math.pow,Yb=Math.sqrt,qb=1e-8,Kb=1e-4,$b=Yb(3),Jb=13,Qb=V(),tS=V(),eS=V(),iS=Math.min,nS=Math.max,oS=Math.sin,aS=Math.cos,rS=2Math.PI,sS=V(),lS=V(),uS=V(),hS=[],cS=[],dS={M1,L2,C3,Q4,A5,Z6,R7},fS=[],pS=[],gS=[],mS=[],vS=Math.min,yS=Math.max,xS=Math.cos,_S=Math.sin,wS=Math.sqrt,bS=Math.abs,SS=undefined!=typeof Float32Array,MS=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};MS.prototype={constructorMS,_xi0,_yi0,_x00,_y00,_ux0,_uy0,_len0,_lineDashnull,_dashOffset0,_dashIdx0,_dashSum0,setScalefunction(t,e){this._ux=bS(1Rwt)0,this._uy=bS(1Rwe)0},getContextfunction(){return this._ctx},beginPathfunction(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTofunction(t,e){return this.addData(dS.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTofunction(t,e){var i=bS(t-this._xi)this._uxbS(e-this._yi)this._uythis._len5;return this.addData(dS.L,t,e),this._ctx&&i&&(this._needsDash()this._dashedLineTo(t,e)this._ctx.lineTo(t,e)),i&&(this._xi=t,this._yi=e),this},bezierCurveTofunction(t,e,i,n,o,a){return this.addData(dS.C,t,e,i,n,o,a),this._ctx&&(this._needsDash()this._dashedBezierTo(t,e,i,n,o,a)this._ctx.bezierCurveTo(t,e,i,n,o,a)),this._xi=o,this._yi=a,this},quadraticCurveTofunction(t,e,i,n){return this.addData(dS.Q,t,e,i,n),this._ctx&&(this._needsDash()this._dashedQuadraticTo(t,e,i,n)this._ctx.quadraticCurveTo(t,e,i,n)),this._xi=i,this._yi=n,this},arcfunction(t,e,i,n,o,a){return this.addData(dS.A,t,e,i,i,n,o-n,0,a01),this._ctx&&this._ctx.arc(t,e,i,n,o,a),this._xi=xS(o)i+t,this._yi=_S(o)i+e,this},arcTofunction(t,e,i,n,o){return this._ctx&&this._ctx.arcTo(t,e,i,n,o),this},rectfunction(t,e,i,n){return this._ctx&&this._ctx.rect(t,e,i,n),this.addData(dS.R,t,e,i,n),this},closePathfunction(){this.addData(dS.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,i),t.closePath()),this._xi=e,this._yi=i,this},fillfunction(t){t&&t.fill(),this.toStatic()},strokefunction(t){t&&t.stroke(),this.toStatic()},setLineDashfunction(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,i=0;it.length;i++)e+=t[i];this._dashSum=e}return this},setLineDashOffsetfunction(t){return this._dashOffset=t,this},lenfunction(){return this._len},setDatafunction(t){var e=t.length;this.data&&this.data.length==e!SS(this.data=new Float32Array(e));for(var i=0;ie;i++)this.data[i]=t[i];this._len=e},appendPathfunction(t){t instanceof Array(t=[t]);for(var e=t.length,i=0,n=this._len,o=0;oe;o++)i+=t[o].len();SS&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(o=0;oe;o++)for(var a=t[o].data,r=0;ra.length;r++)this.data[n++]=a[r];this._len=n},addDatafunction(t){if(this._saveData){var e=this.data;this._len+arguments.lengthe.length&&(this._expandData(),e=this.data);for(var i=0;iarguments.length;i++)e[this._len++]=arguments[i];this._prevCmd=t}},_expandDatafunction(){if(!(this.data instanceof Array)){for(var t=[],e=0;ethis._len;e++)t[e]=this.data[e];this.data=t}},_needsDashfunction(){return this._lineDash},_dashedLineTofunction(t,e){var i,n,o=this._dashSum,a=this._dashOffset,r=this._lineDash,s=this._ctx,l=this._xi,u=this._yi,h=t-l,c=e-u,d=wS(hh+cc),f=l,p=u,g=r.length;for(h=d,c=d,a0&&(a=o+a),f-=(a%=o)h,p-=ac;h0&&f=th0&&f=t0==h&&(c0&&p=ec0&&p=e);)f+=h(i=r[n=this._dashIdx]),p+=ci,this._dashIdx=(n+1)%g,h0&&flh0&&flc0&&puc0&&pus[n%2moveTolineTo](h=0vS(f,t)yS(f,t),c=0vS(p,e)yS(p,e));h=f-t,c=p-e,this._dashOffset=-wS(hh+cc)},_dashedBezierTofunction(t,e,i,n,o,a){var r,s,l,u,h,c=this._dashSum,d=this._dashOffset,f=this._lineDash,p=this._ctx,g=this._xi,m=this._yi,v=Qi,y=0,x=this._dashIdx,_=f.length,w=0;for(d0&&(d=c+d),d%=c,r=0;r1;r+=.1)s=v(g,t,i,o,r+.1)-v(g,t,i,o,r),l=v(m,e,n,a,r+.1)-v(m,e,n,a,r),y+=wS(ss+ll);for(;x_&&!((w+=f[x])d);x++);for(r=(w-d)y;r=1;)u=v(g,t,i,o,r),h=v(m,e,n,a,r),x%2p.moveTo(u,h)p.lineTo(u,h),r+=f[x]y,x=(x+1)%_;x%2!=0&&p.lineTo(o,a),s=o-u,l=a-h,this._dashOffset=-wS(ss+ll)},_dashedQuadraticTofunction(t,e,i,n){var o=i,a=n;i=(i+2t)3,n=(n+2e)3,t=(this._xi+2t)3,e=(this._yi+2e)3,this._dashedBezierTo(t,e,i,n,o,a)},toStaticfunction(){var t=this.data;t instanceof Array&&(t.length=this._len,SS&&(this.data=new Float32Array(t)))},getBoundingRectfunction(){fS[0]=fS[1]=gS[0]=gS[1]=Number.MAX_VALUE,pS[0]=pS[1]=mS[0]=mS[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,i=0,n=0,o=0,a=0;at.length;){var r=t[a++];switch(1==a&&(n=e=t[a],o=i=t[a+1]),r){case dS.Me=n=t[a++],i=o=t[a++],gS[0]=n,gS[1]=o,mS[0]=n,mS[1]=o;break;case dS.Lfn(e,i,t[a],t[a+1],gS,mS),e=t[a++],i=t[a++];break;case dS.Cpn(e,i,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],gS,mS),e=t[a++],i=t[a++];break;case dS.Qgn(e,i,t[a++],t[a++],t[a],t[a+1],gS,mS),e=t[a++],i=t[a++];break;case dS.Avar s=t[a++],l=t[a++],u=t[a++],h=t[a++],c=t[a++],d=t[a++]+c,f=(t[a++],1-t[a++]);1==a&&(n=xS(c)u+s,o=_S(c)h+l),mn(s,l,u,h,c,d,f,gS,mS),e=xS(d)u+s,i=_S(d)h+l;break;case dS.Rfn(n=e=t[a++],o=i=t[a++],n+t[a++],o+t[a++],gS,mS);break;case dS.Ze=n,i=o}tt(fS,fS,gS),et(pS,pS,mS)}return 0===a&&(fS[0]=fS[1]=pS[0]=pS[1]=0),new ue(fS[0],fS[1],pS[0]-fS[0],pS[1]-fS[1])},rebuildPathfunction(t){for(var e,i,n,o,a,r,s=this.data,l=this._ux,u=this._uy,h=this._len,c=0;ch;){var d=s[c++];switch(1==c&&(e=n=s[c],i=o=s[c+1]),d){case dS.Me=n=s[c++],i=o=s[c++],t.moveTo(n,o);break;case dS.La=s[c++],r=s[c++],(bS(a-n)lbS(r-o)uc===h-1)&&(t.lineTo(a,r),n=a,o=r);break;case dS.Ct.bezierCurveTo(s[c++],s[c++],s[c++],s[c++],s[c++],s[c++]),n=s[c-2],o=s[c-1];break;case dS.Qt.quadraticCurveTo(s[c++],s[c++],s[c++],s[c++]),n=s[c-2],o=s[c-1];break;case dS.Avar f=s[c++],p=s[c++],g=s[c++],m=s[c++],v=s[c++],y=s[c++],x=s[c++],_=s[c++],w=gmgm,b=gm1gm,S=gmmg1,M=v+y;Math.abs(g-m).001(t.translate(f,p),t.rotate(x),t.scale(b,S),t.arc(0,0,w,v,M,1-_),t.scale(1b,1S),t.rotate(-x),t.translate(-f,-p))t.arc(f,p,w,v,M,1-_),1==c&&(e=xS(v)g+f,i=_S(v)m+p),n=xS(M)g+f,o=_S(M)m+p;break;case dS.Re=n=s[c],i=o=s[c+1],t.rect(s[c++],s[c++],s[c++],s[c++]);break;case dS.Zt.closePath(),n=e,o=i}}}},MS.CMD=dS;var IS=2Math.PI,TS=2Math.PI,AS=MS.CMD,DS=2Math.PI,CS=1e-4,LS=[-1,-1,-1],kS=[-1,-1],PS=eb.prototype.getCanvasPattern,NS=Math.abs,OS=new MS(!0);kn.prototype={constructorkn,typepath,__dirtyPath!0,strokeContainThreshold5,brushfunction(t,e){var i=this.style,n=this.pathOS,o=i.hasStroke(),a=i.hasFill(),r=i.fill,s=i.stroke,l=a&&!!r.colorStops,u=o&&!!s.colorStops,h=a&&!!r.image,c=o&&!!s.image;if(i.bind(t,this,e),this.setTransform(t),this.__dirty){var d;l&&(d=dthis.getBoundingRect(),this._fillGradient=i.getGradient(t,r,d)),u&&(d=dthis.getBoundingRect(),this._strokeGradient=i.getGradient(t,s,d))}lt.fillStyle=this._fillGradienth&&(t.fillStyle=PS.call(r,t)),ut.strokeStyle=this._strokeGradientc&&(t.strokeStyle=PS.call(s,t));var f=i.lineDash,p=i.lineDashOffset,g=!!t.setLineDash,m=this.getGlobalScale();if(n.setScale(m[0],m[1]),this.__dirtyPathf&&!g&&o(n.beginPath(t),f&&!g&&(n.setLineDash(f),n.setLineDashOffset(p)),this.buildPath(n,this.shape,!1),this.path&&(this.__dirtyPath=!1))(t.beginPath(),this.path.rebuildPath(t)),a)if(null!=i.fillOpacity){v=t.globalAlpha;t.globalAlpha=i.fillOpacityi.opacity,n.fill(t),t.globalAlpha=v}else n.fill(t);if(f&&g&&(t.setLineDash(f),t.lineDashOffset=p),o)if(null!=i.strokeOpacity){var v=t.globalAlpha;t.globalAlpha=i.strokeOpacityi.opacity,n.stroke(t),t.globalAlpha=v}else n.stroke(t);f&&g&&t.setLineDash([]),null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPathfunction(t,e,i){},createPathProxyfunction(){this.path=new MS},getBoundingRectfunction(){var t=this._rect,e=this.style,i=!t;if(i){var n=this.path;n(n=this.path=new MS),this.__dirtyPath&&(n.beginPath(),this.buildPath(n,this.shape,!1)),t=n.getBoundingRect()}if(this._rect=t,e.hasStroke()){var o=this._rectWithStroke(this._rectWithStroke=t.clone());if(this.__dirtyi){o.copy(t);var a=e.lineWidth,r=e.strokeNoScalethis.getLineScale()1;e.hasFill()(a=Math.max(a,this.strokeContainThreshold4)),r1e-10&&(o.width+=ar,o.height+=ar,o.x-=ar2,o.y-=ar2)}return o}return t},containfunction(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect(),o=this.style;if(t=i[0],e=i[1],n.contain(t,e)){var a=this.path.data;if(o.hasStroke()){var r=o.lineWidth,s=o.strokeNoScalethis.getLineScale()1;if(s1e-10&&(o.hasFill()(r=Math.max(r,this.strokeContainThreshold)),Ln(a,rs,t,e)))return!0}if(o.hasFill())return Cn(a,t,e)}return!1},dirtyfunction(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShapefunction(t){return this.animate(shape,t)},attrKVfunction(t,e){shape===t(this.setShape(e),this.__dirtyPath=!0,this._rect=null)ui.prototype.attrKV.call(this,t,e)},setShapefunction(t,e){var i=this.shape;if(i){if(w(t))for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);else i[t]=e;this.dirty(!0)}return this},getLineScalefunction(){var t=this.transform;return t&&NS(t[0]-1)1e-10&&NS(t[3]-1)1e-10Math.sqrt(NS(t[0]t[3]-t[2]t[1]))1}},kn.extend=function(t){var e=function(e){kn.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var i=t.shape;if(i){this.shape=this.shape{};var n=this.shape;for(var o in i)!n.hasOwnProperty(o)&&i.hasOwnProperty(o)&&(n[o]=i[o])}t.init&&t.init.call(this,e)};u(e,kn);for(var i in t)style!==i&&shape!==i&&(e.prototype[i]=t[i]);return e},u(kn,ui);var ES=MS.CMD,RS=[[],[],[]],zS=Math.sqrt,BS=Math.atan2,VS=function(t,e){var i,n,o,a,r,s,l=t.data,u=ES.M,h=ES.C,c=ES.L,d=ES.R,f=ES.A,p=ES.Q;for(o=0,a=0;ol.length;){switch(i=l[o++],a=o,n=0,i){case ucase cn=1;break;case hn=3;break;case pn=2;break;case fvar g=e[4],m=e[5],v=zS(e[0]e[0]+e[1]e[1]),y=zS(e[2]e[2]+e[3]e[3]),x=BS(-e[1]y,e[0]v);l[o]=v,l[o++]+=g,l[o]=y,l[o++]+=m,l[o++]=v,l[o++]=y,l[o++]+=x,l[o++]+=x,a=o+=2;break;case ds[0]=l[o++],s[1]=l[o++],Q(s,s,e),l[a++]=s[0],l[a++]=s[1],s[0]+=l[o++],s[1]+=l[o++],Q(s,s,e),l[a++]=s[0],l[a++]=s[1]}for(r=0;rn;r++)(s=RS[r])[0]=l[o++],s[1]=l[o++],Q(s,s,e),l[a++]=s[0],l[a++]=s[1]}},GS=Math.sqrt,FS=Math.sin,WS=Math.cos,HS=Math.PI,ZS=function(t){return Math.sqrt(t[0]t[0]+t[1]t[1])},US=function(t,e){return(t[0]e[0]+t[1]e[1])(ZS(t)ZS(e))},XS=function(t,e){return(t[0]e[1]t[1]e[0]-11)Math.acos(US(t,e))},jS=([mlvhzcqtsa])([^mlvhzcqtsa])gi,YS=-([0-9].)[0-9]+([eE]-[0-9]+)g,qS=function(t){ui.call(this,t)};qS.prototype={constructorqS,typetext,brushfunction(t,e){var i=this.style;this.__dirty&&Ue(i),i.fill=i.stroke=i.shadowBlur=i.shadowColor=i.shadowOffsetX=i.shadowOffsetY=null;var n=i.text;null!=n&&(n+=),li(n,i)&&(this.setTransform(t),je(this,t,n,i,null,e),this.restoreTransform(t))},getBoundingRectfunction(){var t=this.style;if(this.__dirty&&Ue(t),!this._rect){var e=t.text;null!=ee+=e=;var i=De(t.text+,t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.rich);if(i.x+=t.x0,i.y+=t.y0,oi(t.textStroke,t.textStrokeWidth)){var n=t.textStrokeWidth;i.x-=n2,i.y-=n2,i.width+=n,i.height+=n}this._rect=i}return this._rect}},u(qS,ui);var KS=kn.extend({typecircle,shape{cx0,cy0,r0},buildPathfunction(t,e,i){i&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2Math.PI,!0)}}),$S=[[shadowBlur,0],[shadowColor,#000],[shadowOffsetX,0],[shadowOffsetY,0]],JS=function(t){return z_.browser.ie&&z_.browser.version=11function(){var e,i=this.__clipPaths,n=this.style;if(i)for(var o=0;oi.length;o++){var a=i[o],r=a&&a.shape,s=a&&a.type;if(r&&(sector===s&&r.startAngle===r.endAnglerect===s&&(!r.width!r.height))){for(l=0;l$S.length;l++)$S[l][2]=n[$S[l][0]],n[$S[l][0]]=$S[l][1];e=!0;break}}if(t.apply(this,arguments),e)for(var l=0;l$S.length;l++)n[$S[l][0]]=$S[l][2]}t},QS=kn.extend({typesector,shape{cx0,cy0,r00,r0,startAngle0,endAngle2Math.PI,clockwise!0},brushJS(kn.prototype.brush),buildPathfunction(t,e){var i=e.cx,n=e.cy,o=Math.max(e.r00,0),a=Math.max(e.r,0),r=e.startAngle,s=e.endAngle,l=e.clockwise,u=Math.cos(r),h=Math.sin(r);t.moveTo(uo+i,ho+n),t.lineTo(ua+i,ha+n),t.arc(i,n,a,r,s,!l),t.lineTo(Math.cos(s)o+i,Math.sin(s)o+n),0!==o&&t.arc(i,n,o,s,r,l),t.closePath()}}),tM=kn.extend({typering,shape{cx0,cy0,r0,r00},buildPathfunction(t,e){var i=e.cx,n=e.cy,o=2Math.PI;t.moveTo(i+e.r,n),t.arc(i,n,e.r,0,o,!1),t.moveTo(i+e.r0,n),t.arc(i,n,e.r0,0,o,!0)}}),eM=function(t,e){for(var i=t.length,n=[],o=0,a=1;ai;a++)o+=K(t[a-1],t[a]);var r=o2;r=riir;for(a=0;ar;a++){var s,l,u,h=a(r-1)(eii-1),c=Math.floor(h),d=h-c,f=t[c%i];e(s=t[(c-1+i)%i],l=t[(c+1)%i],u=t[(c+2)%i])(s=t[0===ccc-1],l=t[ci-2i-1c+1],u=t[ci-3i-1c+2]);var p=dd,g=dp;n.push([zn(s[0],f[0],l[0],u[0],d,p,g),zn(s[1],f[1],l[1],u[1],d,p,g)])}return n},iM=function(t,e,i,n){var o,a,r,s,l=[],u=[],h=[],c=[];if(n){r=[10,10],s=[-10,-10];for(var d=0,f=t.length;df;d++)tt(r,r,t[d]),et(s,s,t[d]);tt(r,r,n[0]),et(s,s,n[1])}for(var d=0,f=t.length;df;d++){var p=t[d];if(i)o=t[dd-1f-1],a=t[(d+1)%f];else{if(0===dd===f-1){l.push(F(t[d]));continue}o=t[d-1],a=t[d+1]}U(u,a,o),Y(u,u,e);var g=K(p,o),m=K(p,a),v=g+m;0!==v&&(g=v,m=v),Y(h,u,-g),Y(c,u,m);var y=H([],p,h),x=H([],p,c);n&&(et(y,y,r),tt(y,y,s),et(x,x,r),tt(x,x,s)),l.push(y),l.push(x)}return i&&l.push(l.shift()),l},nM=kn.extend({typepolygon,shape{pointsnull,smooth!1,smoothConstraintnull},buildPathfunction(t,e){Bn(t,e,!0)}}),oM=kn.extend({typepolyline,shape{pointsnull,smooth!1,smoothConstraintnull},style{stroke#000,fillnull},buildPathfunction(t,e){Bn(t,e,!1)}}),aM=kn.extend({typerect,shape{r0,x0,y0,width0,height0},buildPathfunction(t,e){var i=e.x,n=e.y,o=e.width,a=e.height;e.rZe(t,e)t.rect(i,n,o,a),t.closePath()}}),rM=kn.extend({typeline,shape{x10,y10,x20,y20,percent1},style{stroke#000,fillnull},buildPathfunction(t,e){var i=e.x1,n=e.y1,o=e.x2,a=e.y2,r=e.percent;0!==r&&(t.moveTo(i,n),r1&&(o=i(1-r)+or,a=n(1-r)+ar),t.lineTo(o,a))},pointAtfunction(t){var e=this.shape;return[e.x1(1-t)+e.x2t,e.y1(1-t)+e.y2t]}}),sM=[],lM=kn.extend({typebezier-curve,shape{x10,y10,x20,y20,cpx10,cpy10,percent1},style{stroke#000,fillnull},buildPathfunction(t,e){var i=e.x1,n=e.y1,o=e.x2,a=e.y2,r=e.cpx1,s=e.cpy1,l=e.cpx2,u=e.cpy2,h=e.percent;0!==h&&(t.moveTo(i,n),null==lnull==u(h1&&(hn(i,r,o,h,sM),r=sM[1],o=sM[2],hn(n,s,a,h,sM),s=sM[1],a=sM[2]),t.quadraticCurveTo(r,s,o,a))(h1&&(on(i,r,l,o,h,sM),r=sM[1],l=sM[2],o=sM[3],on(n,s,u,a,h,sM),s=sM[1],u=sM[2],a=sM[3]),t.bezierCurveTo(r,s,l,u,o,a)))},pointAtfunction(t){return Vn(this.shape,t,!1)},tangentAtfunction(t){var e=Vn(this.shape,t,!0);return q(e,e)}}),uM=kn.extend({typearc,shape{cx0,cy0,r0,startAngle0,endAngle2Math.PI,clockwise!0},style{stroke#000,fillnull},buildPathfunction(t,e){var i=e.cx,n=e.cy,o=Math.max(e.r,0),a=e.startAngle,r=e.endAngle,s=e.clockwise,l=Math.cos(a),u=Math.sin(a);t.moveTo(lo+i,uo+n),t.arc(i,n,o,a,r,!s)}}),hM=kn.extend({typecompound,shape{pathsnull},_updatePathDirtyfunction(){for(var t=this.__dirtyPath,e=this.shape.paths,i=0;ie.length;i++)t=te[i].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirtyt},beforeBrushfunction(){this._updatePathDirty();for(var t=this.shape.paths[],e=this.getGlobalScale(),i=0;it.length;i++)t[i].patht[i].createPathProxy(),t[i].path.setScale(e[0],e[1])},buildPathfunction(t,e){for(var i=e.paths[],n=0;ni.length;n++)i[n].buildPath(t,i[n].shape,!0)},afterBrushfunction(){for(var t=this.shape.paths[],e=0;et.length;e++)t[e].__dirtyPath=!1},getBoundingRectfunction(){return this._updatePathDirty(),kn.prototype.getBoundingRect.call(this)}}),cM=function(t){this.colorStops=t[]};cM.prototype={constructorcM,addColorStopfunction(t,e){this.colorStops.push({offsett,colore})}};var dM=function(t,e,i,n,o,a){this.x=null==t0t,this.y=null==e0e,this.x2=null==i1i,this.y2=null==n0n,this.type=linear,this.global=a!1,cM.call(this,o)};dM.prototype={constructordM},u(dM,cM);var fM=function(t,e,i,n,o){this.x=null==t.5t,this.y=null==e.5e,this.r=null==i.5i,this.type=radial,this.global=o!1,cM.call(this,n)};fM.prototype={constructorfM},u(fM,cM),Gn.prototype.incremental=!0,Gn.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Gn.prototype.addDisplayable=function(t,e){ethis._temporaryDisplayables.push(t)this._displayables.push(t),this.dirty()},Gn.prototype.addDisplayables=function(t,e){e=e!1;for(var i=0;it.length;i++)this.addDisplayable(t[i],e)},Gn.prototype.eachPendingDisplayable=function(t){for(e=this._cursor;ethis._displayables.length;e++)t&&t(this._displayables[e]);for(var e=0;ethis._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},Gn.prototype.update=function(){this.updateTransform();for(t=this._cursor;tthis._displayables.length;t++)(e=this._displayables[t]).parent=this,e.update(),e.parent=null;for(var t=0;tthis._temporaryDisplayables.length;t++){var e=this._temporaryDisplayables[t];e.parent=this,e.update(),e.parent=null}},Gn.prototype.brush=function(t,e){for(i=this._cursor;ithis._displayables.length;i++)(n=this._displayables[i]).beforeBrush&&n.beforeBrush(t),n.brush(t,i===this._cursornullthis._displayables[i-1]),n.afterBrush&&n.afterBrush(t);this._cursor=i;for(var i=0;ithis._temporaryDisplayables.length;i++){var n=this._temporaryDisplayables[i];n.beforeBrush&&n.beforeBrush(t),n.brush(t,0===inullthis._temporaryDisplayables[i-1]),n.afterBrush&&n.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var pM=[];Gn.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new ue(10,10,-10,-10),e=0;ethis._displayables.length;e++){var i=this._displayables[e],n=i.getBoundingRect().clone();i.needLocalTransform()&&n.applyTransform(i.getLocalTransform(pM)),t.union(n)}this._rect=t}return this._rect},Gn.prototype.contain=function(t,e){var i=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(i[0],i[1]))for(var n=0;nthis._displayables.length;n++)if(this._displayables[n].contain(t,e))return!0;return!1},u(Gn,ui);var gM=Math.round,mM=Math.max,vM=Math.min,yM={},xM=function(t,e){for(var i=[],n=t.length,o=0;on;o++){var a=t[o];a.patha.createPathProxy(),a.__dirtyPath&&a.buildPath(a.path,a.shape,!0),i.push(a.path)}var r=new kn(e);return r.createPathProxy(),r.buildPath=function(t){t.appendPath(i);var e=t.getContext();e&&t.rebuildPath(e)},r},_M=R(),wM=0,bM=(Object.freezeObject)({extendShapeFn,extendPathfunction(t,e){return Rn(t,e)},makePathWn,makeImageHn,mergePathxM,resizePathUn,subPixelOptimizeLineXn,subPixelOptimizeRectjn,subPixelOptimizeYn,setElementHoverStyleno,isInEmphasisoo,setHoverStyleuo,setAsHoverStyleTriggerho,setLabelStyleco,setTextStylefo,setTextfunction(t,e,i){var n,o={isRectText!0};!1===in=!0o.autoColor=i,po(t,e,o,n)},getFont_o,updatePropsbo,initPropsSo,getTransformMo,applyTransformIo,transformDirectionTo,groupTransitionAo,clipPointsByRectDo,clipRectByRectfunction(t,e){var i=mM(t.x,e.x),n=vM(t.x+t.width,e.x+e.width),o=mM(t.y,e.y),a=vM(t.y+t.height,e.y+e.height);if(n=i&&a=o)return{xi,yo,widthn-i,heighta-o}},createIconCo,GroupZw,Imagehi,TextqS,CircleKS,SectorQS,RingtM,PolygonnM,PolylineoM,RectaM,LinerM,BezierCurvelM,ArcuM,IncrementalDisplayableGn,CompoundPathhM,LinearGradientdM,RadialGradientfM,BoundingRectue}),SM=[textStyle,color],MM={getTextColorfunction(t){var e=this.ecModel;return this.getShallow(color)(!t&&ee.get(SM)null)},getFontfunction(){return _o({fontStylethis.getShallow(fontStyle),fontWeightthis.getShallow(fontWeight),fontSizethis.getShallow(fontSize),fontFamilythis.getShallow(fontFamily)},this.ecModel)},getTextRectfunction(t){return De(t,this.getFont(),this.getShallow(align),this.getShallow(verticalAlign)this.getShallow(baseline),this.getShallow(padding),this.getShallow(rich),this.getShallow(truncateText))}},IM=Wb([[fill,color],[stroke,borderColor],[lineWidth,borderWidth],[opacity],[shadowBlur],[shadowOffsetX],[shadowOffsetY],[shadowColor],[textPosition],[textAlign]]),TM={getItemStylefunction(t,e){var i=IM(this,t,e),n=this.getBorderLineDash();return n&&(i.lineDash=n),i},getBorderLineDashfunction(){var t=this.get(borderType);returnsolid===tnull==tnulldashed===t[5,5][1,1]}},AM=h,DM=Bi();Lo.prototype={constructorLo,initnull,mergeOptionfunction(t){n(this.option,t,!0)},getfunction(t,e){return null==tthis.optionko(this.option,this.parsePath(t),!e&&Po(this,t))},getShallowfunction(t,e){var i=this.option,n=null==iii[t],o=!e&&Po(this,t);return null==n&&o&&(n=o.getShallow(t)),n},getModelfunction(t,e){var i,n=null==tthis.optionko(this.option,t=this.parsePath(t));return e=e(i=Po(this,t))&&i.getModel(t),new Lo(n,e,this.ecModel)},isEmptyfunction(){return null==this.option},restoreDatafunction(){},clonefunction(){return new(0,this.constructor)(i(this.option))},setReadOnlyfunction(t){},parsePathfunction(t){returnstring==typeof t&&(t=t.split(.)),t},customizeGetParentfunction(t){DM(this).getParent=t},isAnimationEnabledfunction(){if(!z_.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},Xi(Lo),ji(Lo),AM(Lo,Zb),AM(Lo,Xb),AM(Lo,MM),AM(Lo,TM);var CM=0,LM=1e-4,kM=9007199254740991,PM=^((d{4})([-](d{1,2})([-](d{1,2})([T ](d{1,2})((dd)((dd)([.,](d+))))(Z[+-]dddd)))))$,NM=(Object.freezeObject)({linearMapEo,parsePercentRo,roundzo,ascBo,getPrecisionVo,getPrecisionSafeGo,getPixelPrecisionFo,getPercentWithPrecisionWo,MAX_SAFE_INTEGERkM,remRadianHo,isRadianAroundZeroZo,parseDateUo,quantityXo,niceYo,quantilefunction(t,e){var i=(t.length-1)e+1,n=Math.floor(i),o=+t[n-1],a=i-n;return ao+a(t[n]-o)o},reformIntervalsqo,isNumericKo}),OM=L,EM=([&'])g,RM={&&amp;,&lt;,&gt;,''&quot;,'&#39;},zM=[a,b,c,d,e,f,g],BM=function(t,e){return{+t+(null==ee)+}},VM=Oe,GM=De,FM=(Object.freezeObject)({addCommas$o,toCamelCaseJo,normalizeCssArrayOM,encodeHTMLQo,formatTplta,formatTplSimpleea,getTooltipMarkeria,formatTimeoa,capitalFirstaa,truncateTextVM,getTextRectGM}),WM=d,HM=[left,right,top,bottom,width,height],ZM=[[width,left,right],[height,top,bottom]],UM=ra,XM=(v(ra,vertical),v(ra,horizontal),{getBoxLayoutParamsfunction(){return{leftthis.get(left),topthis.get(top),rightthis.get(right),bottomthis.get(bottom),widththis.get(width),heightthis.get(height)}}}),jM=Bi(),YM=Lo.extend({typecomponent,id,name,mainType,subType,componentIndex0,defaultOptionnull,ecModelnull,dependentModels[],uidnull,layoutModenull,$constructorfunction(t,e,i,n){Lo.call(this,t,e,i,n),this.uid=No(ec_cpt_model)},initfunction(t,e,i,n){this.mergeDefaultAndTheme(t,i)},mergeDefaultAndThemefunction(t,e){var i=this.layoutMode,o=ida(t){};n(t,e.getTheme().get(this.mainType)),n(t,this.getDefaultOption()),i&&ca(t,o,i)},mergeOptionfunction(t,e){n(this.option,t,!0);var i=this.layoutMode;i&&ca(this.option,t,i)},optionUpdatedfunction(t,e){},getDefaultOptionfunction(){var t=jM(this);if(!t.defaultOption){for(var e=[],i=this.constructor;i;){var o=i.prototype.defaultOption;o&&e.push(o),i=i.superClass}for(var a={},r=e.length-1;r=0;r--)a=n(a,e[r],!0);t.defaultOption=a}return t.defaultOption},getReferringComponentsfunction(t){return this.ecModel.queryComponents({mainTypet,indexthis.get(t+Index,!0),idthis.get(t+Id,!0)})}});Ki(YM,{registerWhenExtend!0}),function(t){var e={};t.registerSubTypeDefaulter=function(t,i){t=Zi(t),e[t.main]=i},t.determineSubType=function(i,n){var o=n.type;if(!o){var a=Zi(i).main;t.hasSubTypes(i)&&e[a]&&(o=e[a](n))}return o}}(YM),function(t,e){function i(t){var i={},a=[];return d(t,function(r){var s=n(i,r),u=o(s.originalDeps=e(r),t);s.entryCount=u.length,0===s.entryCount&&a.push(r),d(u,function(t){l(s.predecessor,t)0&&s.predecessor.push(t);var e=n(i,t);l(e.successor,t)0&&e.successor.push(r)})}),{graphi,noEntryLista}}function n(t,e){return t[e](t[e]={predecessor[],successor[]}),t[e]}function o(t,e){var i=[];return d(t,function(t){l(e,t)=0&&i.push(t)}),i}t.topologicalTravel=function(t,e,n,o){function a(t){s[t].entryCount--,0===s[t].entryCount&&l.push(t)}if(t.length){var r=i(e),s=r.graph,l=r.noEntryList,u={};for(d(t,function(t){u[t]=!0});l.length;){var h=l.pop(),c=s[h],f=!!u[h];f&&(n.call(o,h,c.originalDeps.slice()),delete u[h]),d(c.successor,ffunction(t){u[t]=!0,a(t)}a)}d(u,function(){throw new Error(Circle dependency may exists)})}}}(YM,function(t){var e=[];return d(YM.getClassesByMainType(t),function(t){e=e.concat(t.prototype.dependencies[])}),e=f(e,function(t){return Zi(t).main}),dataset!==t&&l(e,dataset)=0&&e.unshift(dataset),e}),h(YM,XM);var qM=;undefined!=typeof navigator&&(qM=navigator.platform);var KM={color[#c23531,#2f4554,#61a0a8,#d48265,#91c7ae,#749f83,#ca8622,#bda29a,#6e7074,#546570,#c4ccd3],gradientColor[#f6efa6,#d88273,#bf444c],textStyle{fontFamilyqM.match(^Win)Microsoft YaHeisans-serif,fontSize12,fontStylenormal,fontWeightnormal},blendModenull,animationauto,animationDuration1e3,animationDurationUpdate300,animationEasingexponentialOut,animationEasingUpdatecubicOut,animationThreshold2e3,progressiveThreshold3e3,progressive400,hoverLayerThreshold3e3,useUTC!1},$M=Bi(),JM={clearColorPalettefunction(){$M(this).colorIdx=0,$M(this).colorNameMap={}},getColorFromPalettefunction(t,e,i){var n=$M(e=ethis),o=n.colorIdx0,a=n.colorNameMap=n.colorNameMap{};if(a.hasOwnProperty(t))return a[t];var r=Di(this.get(color,!0)),s=this.get(colorLayer,!0),l=null!=i&&spa(s,i)r;if((l=lr)&&l.length){var u=l[o];return t&&(a[t]=u),n.colorIdx=(o+1)%l.length,u}}},QM={cartesian2dfunction(t,e,i,n){var o=t.getReferringComponents(xAxis)[0],a=t.getReferringComponents(yAxis)[0];e.coordSysDims=[x,y],i.set(x,o),i.set(y,a),ma(o)&&(n.set(x,o),e.firstCategoryDimIndex=0),ma(a)&&(n.set(y,a),e.firstCategoryDimIndex=1)},singleAxisfunction(t,e,i,n){var o=t.getReferringComponents(singleAxis)[0];e.coordSysDims=[single],i.set(single,o),ma(o)&&(n.set(single,o),e.firstCategoryDimIndex=0)},polarfunction(t,e,i,n){var o=t.getReferringComponents(polar)[0],a=o.findAxisModel(radiusAxis),r=o.findAxisModel(angleAxis);e.coordSysDims=[radius,angle],i.set(radius,a),i.set(angle,r),ma(a)&&(n.set(radius,a),e.firstCategoryDimIndex=0),ma(r)&&(n.set(angle,r),e.firstCategoryDimIndex=1)},geofunction(t,e,i,n){e.coordSysDims=[lng,lat]},parallelfunction(t,e,i,n){var o=t.ecModel,a=o.getComponent(parallel,t.get(parallelIndex)),r=e.coordSysDims=a.dimensions.slice();d(a.parallelAxisIndex,function(t,a){var s=o.getComponent(parallelAxis,t),l=r[a];i.set(l,s),ma(s)&&null==e.firstCategoryDimIndex&&(n.set(l,s),e.firstCategoryDimIndex=a)})}},tI=original,eI=arrayRows,iI=objectRows,nI=keyedColumns,oI=unknown,aI=typedArray,rI=column,sI=row;va.seriesDataToSource=function(t){return new va({datat,sourceFormatS(t)aItI,fromDataset!1})},ji(va);var lI=Bi(),uI=0_ec_inner,hI=Lo.extend({initfunction(t,e,i,n){i=i{},this.option=null,this._theme=new Lo(i),this._optionManager=n},setOptionfunction(t,e){k(!(uI in t),please use chart.getOption()),this._optionManager.setOption(t,e),this.resetOption(null)},resetOptionfunction(t){var e=!1,i=this._optionManager;if(!trecreate===t){var n=i.mountOption(recreate===t);this.option&&recreate!==t(this.restoreData(),this.mergeOption(n))Pa.call(this,n),e=!0}if(timeline!==t&&media!==tthis.restoreData(),!trecreate===ttimeline===t){var o=i.getTimelineOption(this);o&&(this.mergeOption(o),e=!0)}if(!trecreate===tmedia===t){var a=i.getMediaOption(this,this._api);a.length&&d(a,function(t){this.mergeOption(t,e=!0)},this)}return e},mergeOptionfunction(t){var e=this.option,o=this._componentsMap,r=[];_a(this),d(t,function(t,o){null!=t&&(YM.hasClass(o)o&&r.push(o)e[o]=null==e[o]i(t)n(e[o],t,!0))}),YM.topologicalTravel(r,YM.getAllClassMainTypes(),function(i,n){var r=Di(t[i]),s=Pi(o.get(i),r);Ni(s),d(s,function(t,e){var n=t.option;w(n)&&(t.keyInfo.mainType=i,t.keyInfo.subType=Oa(i,n,t.exist))});var l=Na(o,n);e[i]=[],o.set(i,[]),d(s,function(t,n){var r=t.exist,s=t.option;if(k(w(s)r,Empty component definition),s){var u=YM.getClass(i,t.keyInfo.subType,!0);if(r&&r instanceof u)r.name=t.keyInfo.name,r.mergeOption(s,this),r.optionUpdated(s,!1);else{var h=a({dependentModelsl,componentIndexn},t.keyInfo);a(r=new u(s,this,this,h),h),r.init(s,this,this,h),r.optionUpdated(null,!0)}}else r.mergeOption({},this),r.optionUpdated({},!1);o.get(i)[n]=r,e[i][n]=r.option},this),series===i&&Ea(this,o.get(series))},this),this._seriesIndicesMap=R(this._seriesIndices=this._seriesIndices[])},getOptionfunction(){var t=i(this.option);return d(t,function(e,i){if(YM.hasClass(i)){for(var n=(e=Di(e)).length-1;n=0;n--)Ei(e[n])&&e.splice(n,1);t[i]=e}}),delete t[uI],t},getThemefunction(){return this._theme},getComponentfunction(t,e){var i=this._componentsMap.get(t);if(i)return i[e0]},queryComponentsfunction(t){var e=t.mainType;if(!e)return[];var i=t.index,n=t.id,o=t.name,a=this._componentsMap.get(e);if(!a!a.length)return[];var r;if(null!=i)y(i)(i=[i]),r=g(f(i,function(t){return a[t]}),function(t){return!!t});else if(null!=n){var s=y(n);r=g(a,function(t){return s&&l(n,t.id)=0!s&&t.id===n})}else if(null!=o){var u=y(o);r=g(a,function(t){return u&&l(o,t.name)=0!u&&t.name===o})}else r=a.slice();return Ra(r,t)},findComponentsfunction(t){var e=t.query,i=t.mainType,n=function(t){var e=i+Index,n=i+Id,o=i+Name;return!tnull==t[e]&&null==t[n]&&null==t[o]null{mainTypei,indext[e],idt[n],namet[o]}}(e);return function(e){return t.filterg(e,t.filter)e}(Ra(nthis.queryComponents(n)this._componentsMap.get(i),t))},eachComponentfunction(t,e,i){var n=this._componentsMap;function==typeof t(i=e,e=t,n.each(function(t,n){d(t,function(t,o){e.call(i,n,t,o)})}))_(t)d(n.get(t),e,i)w(t)&&d(this.findComponents(t),e,i)},getSeriesByNamefunction(t){return g(this._componentsMap.get(series),function(e){return e.name===t})},getSeriesByIndexfunction(t){return this._componentsMap.get(series)[t]},getSeriesByTypefunction(t){return g(this._componentsMap.get(series),function(e){return e.subType===t})},getSeriesfunction(){return this._componentsMap.get(series).slice()},getSeriesCountfunction(){return this._componentsMap.get(series).length},eachSeriesfunction(t,e){d(this._seriesIndices,function(i){var n=this._componentsMap.get(series)[i];t.call(e,n,i)},this)},eachRawSeriesfunction(t,e){d(this._componentsMap.get(series),t,e)},eachSeriesByTypefunction(t,e,i){d(this._seriesIndices,function(n){var o=this._componentsMap.get(series)[n];o.subType===t&&e.call(i,o,n)},this)},eachRawSeriesByTypefunction(t,e,i){return d(this.getSeriesByType(t),e,i)},isSeriesFilteredfunction(t){return null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndicesfunction(){return(this._seriesIndices[]).slice()},filterSeriesfunction(t,e){Ea(this,g(this._componentsMap.get(series),t,e))},restoreDatafunction(t){var e=this._componentsMap;Ea(this,e.get(series));var i=[];e.each(function(t,e){i.push(e)}),YM.topologicalTravel(i,YM.getAllClassMainTypes(),function(i,n){d(e.get(i),function(e){(series!==i!La(e,t))&&e.restoreData()})})}});h(hI,JM);var cI=[getDom,getZr,getWidth,getHeight,getDevicePixelRatio,dispatchAction,isDisposed,on,off,getDataURL,getConnectedDataURL,getModel,getOption,getViewOfComponentModel,getViewOfSeriesModel],dI={};Ba.prototype={constructorBa,createfunction(t,e){var i=[];d(dI,function(n,o){var a=n.create(t,e);i=i.concat(a[])}),this._coordinateSystems=i},updatefunction(t,e){d(this._coordinateSystems,function(i){i.update&&i.update(t,e)})},getCoordinateSystemsfunction(){return this._coordinateSystems.slice()}},Ba.register=function(t,e){dI[t]=e},Ba.get=function(t){return dI[t]};var fI=d,pI=i,gI=f,mI=n,vI=^(minmax)(.+)$;Va.prototype={constructorVa,setOptionfunction(t,e){t&&d(Di(t.series),function(t){t&&t.data&&S(t.data)&&N(t.data)}),t=pI(t,!0);var i=this._optionBackup,n=Ga.call(this,t,e,!i);this._newBaseOption=n.baseOption,i(Za(i.baseOption,n.baseOption),n.timelineOptions.length&&(i.timelineOptions=n.timelineOptions),n.mediaList.length&&(i.mediaList=n.mediaList),n.mediaDefault&&(i.mediaDefault=n.mediaDefault))this._optionBackup=n},mountOptionfunction(t){var e=this._optionBackup;return this._timelineOptions=gI(e.timelineOptions,pI),this._mediaList=gI(e.mediaList,pI),this._mediaDefault=pI(e.mediaDefault),this._currentMediaIndices=[],pI(te.baseOptionthis._newBaseOption)},getTimelineOptionfunction(t){var e,i=this._timelineOptions;if(i.length){var n=t.getComponent(timeline);n&&(e=pI(i[n.getCurrentIndex()],!0))}return e},getMediaOptionfunction(t){var e=this._api.getWidth(),i=this._api.getHeight(),n=this._mediaList,o=this._mediaDefault,a=[],r=[];if(!n.length&&!o)return r;for(var s=0,l=n.length;sl;s++)Fa(n[s].query,e,i)&&a.push(s);return!a.length&&o&&(a=[-1]),a.length&&!Ha(a,this._currentMediaIndices)&&(r=gI(a,function(t){return pI(-1===to.optionn[t].option)})),this._currentMediaIndices=a,r}};var yI=d,xI=w,_I=[areaStyle,lineStyle,nodeStyle,linkStyle,chordStyle,label,labelLine],wI=function(t,e){yI($a(t.series),function(t){xI(t)&&Ka(t)});var i=[xAxis,yAxis,radiusAxis,angleAxis,singleAxis,parallelAxis,radar];e&&i.push(valueAxis,categoryAxis,logAxis,timeAxis),yI(i,function(e){yI($a(t[e]),function(t){t&&(Ya(t,axisLabel),Ya(t.axisPointer,label))})}),yI($a(t.parallel),function(t){var e=t&&t.parallelAxisDefault;Ya(e,axisLabel),Ya(e&&e.axisPointer,label)}),yI($a(t.calendar),function(t){Xa(t,itemStyle),Ya(t,dayLabel),Ya(t,monthLabel),Ya(t,yearLabel)}),yI($a(t.radar),function(t){Ya(t,name)}),yI($a(t.geo),function(t){xI(t)&&(qa(t),yI($a(t.regions),function(t){qa(t)}))}),yI($a(t.timeline),function(t){qa(t),Xa(t,label),Xa(t,itemStyle),Xa(t,controlStyle,!0);var e=t.data;y(e)&&d(e,function(t){w(t)&&(Xa(t,label),Xa(t,itemStyle))})}),yI($a(t.toolbox),function(t){Xa(t,iconStyle),yI(t.feature,function(t){Xa(t,iconStyle)})}),Ya(Ja(t.axisPointer),label),Ya(Ja(t.tooltip).axisPointer,label)},bI=[[x,left],[y,top],[x2,right],[y2,bottom]],SI=[grid,geo,parallel,legend,toolbox,title,visualMap,dataZoom,timeline],MI=function(t,e){wI(t,e),t.series=Di(t.series),d(t.series,function(t){if(w(t)){var e=t.type;if(pie!==e&&gauge!==enull!=t.clockWise&&(t.clockwise=t.clockWise),gauge===e){var i=Qa(t,pointer.color);null!=i&&tr(t,itemStyle.normal.color,i)}er(t)}}),t.dataRange&&(t.visualMap=t.dataRange),d(SI,function(e){var i=t[e];i&&(y(i)(i=[i]),d(i,function(t){er(t)}))})},II=nr.prototype;II.pure=!1,II.persistent=!0,II.getSource=function(){return this._source};var TI={arrayRows_column{pure!0,countfunction(){return Math.max(0,this._data.length-this._source.startIndex)},getItemfunction(t){return this._data[t+this._source.startIndex]},appendDatarr},arrayRows_row{pure!0,countfunction(){var t=this._data[0];return tMath.max(0,t.length-this._source.startIndex)0},getItemfunction(t){t+=this._source.startIndex;for(var e=[],i=this._data,n=0;ni.length;n++){var o=i[n];e.push(oo[t]null)}return e},appendDatafunction(){throw new Error('Do not support appendData when set seriesLayoutBy row.')}},objectRows{pure!0,countor,getItemar,appendDatarr},keyedColumns{pure!0,countfunction(){var t=this._source.dimensionsDefine[0].name,e=this._data[t];return ee.length0},getItemfunction(t){for(var e=[],i=this._source.dimensionsDefine,n=0;ni.length;n++){var o=this._data[i[n].name];e.push(oo[t]null)}return e},appendDatafunction(t){var e=this._data;d(t,function(t,i){for(var n=e[i](e[i]=[]),o=0;o(t[]).length;o++)n.push(t[o])})}},original{countor,getItemar,appendDatarr},typedArray{persistent!1,pure!0,countfunction(){return this._datathis._data.lengththis._dimSize0},getItemfunction(t,e){t-=this._offset,e=e[];for(var i=this._dimSizet,n=0;nthis._dimSize;n++)e[n]=this._data[i+n];return e},appendDatafunction(t){this._data=t},cleanfunction(){this._offset+=this.count(),this._data=null}}},AI={arrayRowssr,objectRowsfunction(t,e,i,n){return null!=it[n]t},keyedColumnssr,originalfunction(t,e,i,n){var o=Li(t);return null!=i&&o instanceof Arrayo[i]o},typedArraysr},DI={arrayRowslr,objectRowsfunction(t,e,i,n){return ur(t[e],this._dimensionInfos[e])},keyedColumnslr,originalfunction(t,e,i,n){var o=t&&(null==t.valuett.value);return!this._rawData.pure&&ki(t)&&(this.hasItemOption=!0),ur(o instanceof Arrayo[n]o,this._dimensionInfos[e])},typedArrayfunction(t,e,i,n){return t[n]}},CI={@(.+)}g,LI={getDataParamsfunction(t,e){var i=this.getData(e),n=this.getRawValue(t,e),o=i.getRawIndex(t),a=i.getName(t),r=i.getRawDataItem(t),s=i.getItemVisual(t,color),l=this.ecModel.getComponent(tooltip),u=Hi(l&&l.get(renderMode)),h=this.mainType,c=series===h;return{componentTypeh,componentSubTypethis.subType,componentIndexthis.componentIndex,seriesTypecthis.subTypenull,seriesIndexthis.seriesIndex,seriesIdcthis.idnull,seriesNamecthis.namenull,namea,dataIndexo,datar,dataTypee,valuen,colors,markeria({colors,renderModeu}),$vars[seriesName,name,value]}},getFormattedLabelfunction(t,e,i,n,o){e=enormal;var a=this.getData(i),r=a.getItemModel(t),s=this.getDataParams(t,i);null!=n&&s.value instanceof Array&&(s.value=s.value[n]);var l=r.get(normal===e[olabel,formatter][e,olabel,formatter]);returnfunction==typeof l(s.status=e,l(s))string==typeof lta(l,s).replace(CI,function(e,i){var n=i.length;return[===i.charAt(0)&&]===i.charAt(n-1)&&(i=+i.slice(1,n-1)),hr(a,t,i)})void 0},getRawValuefunction(t,e){return hr(this.getData(e),t)},formatTooltipfunction(){}},kI=fr.prototype;kI.perform=function(t){function e(t){return!(t=1)&&(t=1),t}var i=this._upstream,n=t&&t.skip;if(this._dirty&&i){var o=this.context;o.data=o.outputData=i.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!n&&(a=this._plan(this.context));var r=e(this._modBy),s=this._modDataCount0,l=e(t&&t.modBy),u=t&&t.modDataCount0;r===l&&s===u(a=reset);var h;(this._dirtyreset===a)&&(this._dirty=!1,h=gr(this,n)),this._modBy=l,this._modDataCount=u;var c=t&&t.step;if(this._dueEnd=ii._outputDueEndthis._countthis._count(this.context)10,this._progress){var d=this._dueIndex,f=Math.min(null!=cthis._dueIndex+c10,this._dueEnd);if(!n&&(hdf)){var p=this._progress;if(y(p))for(var g=0;gp.length;g++)pr(this,p[g],d,f,l,u);else pr(this,p,d,f,l,u)}this._dueIndex=f;var m=null!=this._settedOutputEndthis._settedOutputEndf;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEndthis._settedOutputEndthis._dueEnd;return this.unfinished()};var PI=function(){function t(){return nin++null}function e(){var t=n%ro+Math.ceil(nr),e=n=inulltatn;return n++,e}var i,n,o,a,r,s={resetfunction(l,u,h,c){n=l,i=u,o=h,a=c,r=Math.ceil(ao),s.next=o1&&a0et}};return s}();kI.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},kI.unfinished=function(){return this._progress&&this._dueIndexthis._dueEnd},kI.pipe=function(t){(this._downstream!==tthis._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},kI.dispose=function(){this._disposed(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},kI.getUpstream=function(){return this._upstream},kI.getDownstream=function(){return this._downstream},kI.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t};var NI=Bi(),OI=YM.extend({typeseries.__base__,seriesIndex0,coordinateSystemnull,defaultOptionnull,legendDataProvidernull,visualColorAccessPathitemStyle.color,layoutModenull,initfunction(t,e,i,n){this.seriesIndex=this.componentIndex,this.dataTask=dr({countyr,resetxr}),this.dataTask.context={modelthis},this.mergeDefaultAndTheme(t,i),wa(this);var o=this.getInitialData(t,i);wr(o,this),this.dataTask.context.data=o,NI(this).dataBeforeProcessed=o,mr(this)},mergeDefaultAndThemefunction(t,e){var i=this.layoutMode,o=ida(t){},a=this.subType;YM.hasClass(a)&&(a+=Series),n(t,e.getTheme().get(this.subType)),n(t,this.getDefaultOption()),Ci(t,label,[show]),this.fillDataTextStyle(t.data),i&&ca(t,o,i)},mergeOptionfunction(t,e){t=n(this.option,t,!0),this.fillDataTextStyle(t.data);var i=this.layoutMode;i&&ca(this.option,t,i),wa(this);var o=this.getInitialData(t,e);wr(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,NI(this).dataBeforeProcessed=o,mr(this)},fillDataTextStylefunction(t){if(t&&!S(t))for(var e=[show],i=0;it.length;i++)t[i]&&t[i].label&&Ci(t[i],label,e)},getInitialDatafunction(){},appendDatafunction(t){this.getRawData().appendData(t.data)},getDatafunction(t){var e=Sr(this);if(e){var i=e.context.data;return null==tii.getLinkedData(t)}return NI(this).data},setDatafunction(t){var e=Sr(this);if(e){var i=e.context;i.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),i.outputData=t,e!==this.dataTask&&(i.data=t)}NI(this).data=t},getSourcefunction(){return xa(this)},getRawDatafunction(){return NI(this).dataBeforeProcessed},getBaseAxisfunction(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltipfunction(t,e,i,n){function o(t){return{renderModen,contentQo($o(t)),stylel}}var a=this,r=html===(n=nhtml)brn,s=richText===n,l={},u=0,h=this.getData(),c=h.mapDimension(defaultedTooltip,!0),f=c.length,g=this.getRawValue(t),m=y(g),v=h.getItemVisual(t,color);w(v)&&v.colorStops&&(v=(v.colorStops[0]{}).color),v=vtransparent;var x=(f1m&&!ffunction(i){function o(t,i){var o=h.getDimensionInfo(i);if(o&&!1!==o.otherDims.tooltip){var c=o.type,d=sub+a.seriesIndex+at+u,p=ia({colorv,typesubItem,renderModen,markerIdd}),g=string==typeof ppp.content,m=(rg+Qo(o.displayName-)+ )+Qo(ordinal===ct+time===ceoa(yyyyMMdd hhmmss,t)$o(t));m&&f.push(m),s&&(l[d]=v,++u)}}var r=p(i,function(t,e,i){var n=h.getDimensionInfo(i);return t=n&&!1!==n.tooltip&&null!=n.displayName},0),f=[];c.lengthd(c,function(e){o(hr(h,t,e),e)})d(i,o);var g=rsnbr,m=g+f.join(g, );return{renderModen,contentm,stylel}}(g)o(fhr(h,t,c[0])mg[0]g)).content,_=a.seriesIndex+at+u,b=ia({colorv,typeitem,renderModen,markerId_});l[_]=v,++u;var S=h.getName(t),M=this.name;Oi(this)(M=),M=MQo(M)+(e r);var I=string==typeof bbb.content;return{htmleI+M+xM+I+(SQo(S)+ +xx),markersl}},isAnimationEnabledfunction(){if(z_.node)return!1;var t=this.getShallow(animation);return t&&this.getData().count()this.getShallow(animationThreshold)&&(t=!1),t},restoreDatafunction(){this.dataTask.dirty()},getColorFromPalettefunction(t,e,i){var n=this.ecModel,o=JM.getColorFromPalette.call(this,t,e,i);return o(o=n.getColorFromPalette(t,e,i)),o},coordDimToDataDimfunction(t){return this.getRawData().mapDimension(t,!0)},getProgressivefunction(){return this.get(progressive)},getProgressiveThresholdfunction(){return this.get(progressiveThreshold)},getAxisTooltipDatanull,getTooltipPositionnull,pipeTasknull,preventIncrementalnull,pipelineContextnull});h(OI,LI),h(OI,JM);var EI=function(){this.group=new Zw,this.uid=No(viewComponent)};EI.prototype={constructorEI,initfunction(t,e){},renderfunction(t,e,i,n){},disposefunction(){},filterForExposedEventnull};var RI=EI.prototype;RI.updateView=RI.updateLayout=RI.updateVisual=function(t,e,i,n){},Xi(EI),Ki(EI,{registerWhenExtend!0});var zI=function(){var t=Bi();return function(e){var i=t(e),n=e.pipelineContext,o=i.large,a=i.progressiveRender,r=i.large=n.large,s=i.progressiveRender=n.progressiveRender;return!!(o^ra^s)&&reset}},BI=Bi(),VI=zI();Mr.prototype={typechart,initfunction(t,e){},renderfunction(t,e,i,n){},highlightfunction(t,e,i,n){Tr(t.getData(),n,emphasis)},downplayfunction(t,e,i,n){Tr(t.getData(),n,normal)},removefunction(t,e){this.group.removeAll()},disposefunction(){},incrementalPrepareRendernull,incrementalRendernull,updateTransformnull,filterForExposedEventnull};var GI=Mr.prototype;GI.updateView=GI.updateLayout=GI.updateVisual=function(t,e,i,n){this.render(t,e,i,n)},Xi(Mr),Ki(Mr,{registerWhenExtend!0}),Mr.markUpdateMethod=function(t,e){BI(t).updateMethod=e};var FI={incrementalPrepareRender{progressfunction(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render{forceFirstProgress!0,progressfunction(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},WI=0__throttleOriginMethod,HI=0__throttleRate,ZI=0__throttleType,UI={createOnAllSeries!0,performRawSeries!0,resetfunction(t,e){var i=t.getData(),n=(t.visualColorAccessPathitemStyle.color).split(.),o=t.get(n)t.getColorFromPalette(t.name,null,e.getSeriesCount());if(i.setVisual(color,o),!e.isSeriesFiltered(t)){function!=typeof oo instanceof cMi.each(function(e){i.setItemVisual(e,color,o(t.getDataParams(e)))});return{dataEachi.hasItemOptionfunction(t,e){var i=t.getItemModel(e).get(n,!0);null!=i&&t.setItemVisual(e,color,i)}null}}}},XI={toolbox{brush{title{rect鐭╁舰閫夋嫨,polygon鍦堥€�,lineX妯悜閫夋嫨,lineY绾靛悜閫夋嫨,keep淇濇寔閫夋嫨,clear娓呴櫎閫夋嫨}},dataView{title鏁版嵁瑙嗗浘,lang[鏁版嵁瑙嗗浘,鍏抽棴,鍒锋柊]},dataZoom{title{zoom鍖哄煙缂╂斁,back鍖哄煙缂╂斁杩樺師}},magicType{title{line鍒囨崲涓烘姌绾垮浘,bar鍒囨崲涓烘煴鐘跺浘,stack鍒囨崲涓哄爢鍙�,tiled鍒囨崲涓哄钩閾�}},restore{title杩樺師},saveAsImage{title淇濆瓨涓哄浘鐗�,lang[鍙抽敭鍙﹀瓨涓哄浘鐗�]}},series{typeNames{pie楗煎浘,bar鏌辩姸鍥�,line鎶樼嚎鍥�,scatter鏁ｇ偣鍥�,effectScatter娑熸吉鏁ｇ偣鍥�,radar闆疯揪鍥�,tree鏍戝浘,treemap鐭╁舰鏍戝浘,boxplot绠卞瀷鍥�,candlestickK绾垮浘,kK绾垮浘,heatmap鐑姏鍥�,map鍦板浘,parallel骞宠鍧愭爣鍥�,lines绾垮浘,graph鍏崇郴鍥�,sankey妗戝熀鍥�,funnel婕忔枟鍥�,gauge浠〃鐩樺浘,pictorialBar璞″舰鏌卞浘,themeRiver涓婚娌虫祦鍥�,sunburst鏃棩鍥�}},aria{general{withTitle杩欐槸涓€涓叧浜庘€渰title}鈥濈殑鍥捐〃銆�,withoutTitle杩欐槸涓€涓浘琛紝},series{single{prefix,withName鍥捐〃绫诲瀷鏄瘂seriesType}锛岃〃绀簕seriesName}銆�,withoutName鍥捐〃绫诲瀷鏄瘂seriesType}銆�},multiple{prefix瀹冪敱{seriesCount}涓浘琛ㄧ郴鍒楃粍鎴愩€�,withName绗瑊seriesId}涓郴鍒楁槸涓€涓〃绀簕seriesName}鐨剓seriesType}锛�,withoutName绗瑊seriesId}涓郴鍒楁槸涓€涓獅seriesType}锛�,separator{middle锛�,end銆�}}},data{allData鍏舵暟鎹槸鈥斺€�,partialData鍏朵腑锛屽墠{displayCnt}椤规槸鈥斺€�,withName{name}鐨勬暟鎹槸{value},withoutName{value},separator{middle锛�,end}}}},jI=function(t,e){function i(t,e){if(string!=typeof t)return t;var i=t;return d(e,function(t,e){i=i.replace(new RegExp({s+e+s},g),t)}),i}function n(t){var e=a.get(t);if(null==e){for(var i=t.split(.),n=XI.aria,o=0;oi.length;++o)n=n[i[o]];return n}return e}function o(t){return XI.series.typeNames[t]鑷畾涔夊浘}var a=e.getModel(aria);if(a.get(show))if(a.get(description))t.setAttribute(aria-label,a.get(description));else{var r=0;e.eachSeries(function(t,e){++r},this);var s,l=a.get(data.maxCount)10,u=a.get(series.maxCount)10,h=Math.min(r,u);if(!(r1)){var c=function(){var t=e.getModel(title).option;return t&&t.length&&(t=t[0]),t&&t.text}();s=ci(n(general.withTitle),{titlec})n(general.withoutTitle);var f=[];s+=i(n(r1series.multiple.prefixseries.single.prefix),{seriesCountr}),e.eachSeries(function(t,e){if(eh){var a,s=t.get(name),u=series.+(r1multiplesingle)+.;a=i(a=n(su+withNameu+withoutName),{seriesIdt.seriesIndex,seriesNamet.get(name),seriesTypeo(t.subType)});var c=t.getData();window.data=c,c.count()la+=i(n(data.partialData),{displayCntl})a+=n(data.allData);for(var d=[],p=0;pc.count();p++)if(pl){var g=c.getName(p),m=hr(c,p);d.push(i(n(gdata.withNamedata.withoutName),{nameg,valuem}))}a+=d.join(n(data.separator.middle))+n(data.separator.end),f.push(a)}}),s+=f.join(n(series.multiple.separator.middle))+n(series.multiple.separator.end),t.setAttribute(aria-label,s)}}},YI=Math.PI,qI=Pr.prototype;qI.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})},qI.getPerformArgs=function(t,e){if(t.__pipeline){var i=this._pipelineMap.get(t.__pipeline.id),n=i.context,o=!e&&i.progressiveEnabled&&(!nn.progressiveRender)&&t.__idxInPipelinei.blockIndexi.stepnull,a=n&&n.modDataCount;return{stepo,modBynull!=aMath.ceil(ao)null,modDataCounta}}},qI.getPipeline=function(t){return this._pipelineMap.get(t)},qI.updateStreamModes=function(t,e){var i=this._pipelineMap.get(t.uid),n=t.getData().count(),o=i.progressiveEnabled&&e.incrementalPrepareRender&&n=i.threshold,a=t.get(large)&&n=t.get(largeThreshold),r=mod===t.get(progressiveChunkMode)nnull;t.pipelineContext=i.context={progressiveRendero,modDataCountr,largea}},qI.restorePipelines=function(t){var e=this,i=e._pipelineMap=R();t.eachSeries(function(t){var n=t.getProgressive(),o=t.uid;i.set(o,{ido,headnull,tailnull,thresholdt.getProgressiveThreshold(),progressiveEnabledn&&!(t.preventIncremental&&t.preventIncremental()),blockIndex-1,stepMath.round(n700),count0}),Zr(e,t,t.dataTask)})},qI.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.ecInstance.getModel(),i=this.api;d(this._allHandlers,function(n){var o=t.get(n.uid)t.set(n.uid,[]);n.reset&&Or(this,n,o,e,i),n.overallReset&&Er(this,n,o,e,i)},this)},qI.prepareView=function(t,e,i,n){var o=t.renderTask,a=o.context;a.model=e,a.ecModel=i,a.api=n,o.__block=!t.incrementalPrepareRender,Zr(this,e,o)},qI.performDataProcessorTasks=function(t,e){Nr(this,this._dataProcessorHandlers,t,e,{block!0})},qI.performVisualTasks=function(t,e,i){Nr(this,this._visualHandlers,t,e,i)},qI.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e=t.dataTask.perform()}),this.unfinished=e},qI.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})};var KI=qI.updatePayload=function(t,e){remain!==e&&(t.context.payload=e)},$I=Wr(0);Pr.wrapStageHandler=function(t,e){return x(t)&&(t={overallResett,seriesTypeUr(t)}),t.uid=No(stageHandler),e&&(t.visualType=e),t};var JI,QI={},tT={};Xr(QI,hI),Xr(tT,za),QI.eachSeriesByType=QI.eachRawSeriesByType=function(t){JI=t},QI.eachComponent=function(t){series===t.mainType&&t.subType&&(JI=t.subType)};var eT=[#37A2DA,#32C5E9,#67E0E3,#9FE6B8,#FFDB5C,#ff9f7f,#fb7293,#E062AE,#E690D1,#e7bcf3,#9d96f5,#8378EA,#96BFFF],iT={coloreT,colorLayer[[#37A2DA,#ffd85c,#fd7b5f],[#37A2DA,#67E0E3,#FFDB5C,#ff9f7f,#E062AE,#9d96f5],[#37A2DA,#32C5E9,#9FE6B8,#FFDB5C,#ff9f7f,#fb7293,#e7bcf3,#8378EA,#96BFFF],eT]},nT=[#dd6b66,#759aa0,#e69d87,#8dc1a9,#ea7e53,#eedd78,#73a373,#73b9bc,#7289ab,#91ca8c,#f49f42],oT={colornT,backgroundColor#333,tooltip{axisPointer{lineStyle{color#eee},crossStyle{color#eee}}},legend{textStyle{color#eee}},textStyle{color#eee},title{textStyle{color#eee}},toolbox{iconStyle{normal{borderColor#eee}}},dataZoom{textStyle{color#eee}},visualMap{textStyle{color#eee}},timeline{lineStyle{color#eee},itemStyle{normal{colornT[1]}},label{normal{textStyle{color#eee}}},controlStyle{normal{color#eee,borderColor#eee}}},timeAxis{axisLine{lineStyle{color#eee}},axisTick{lineStyle{color#eee}},axisLabel{textStyle{color#eee}},splitLine{lineStyle{typedashed,color#aaa}},splitArea{areaStyle{color#eee}}},logAxis{axisLine{lineStyle{color#eee}},axisTick{lineStyle{color#eee}},axisLabel{textStyle{color#eee}},splitLine{lineStyle{typedashed,color#aaa}},splitArea{areaStyle{color#eee}}},valueAxis{axisLine{lineStyle{color#eee}},axisTick{lineStyle{color#eee}},axisLabel{textStyle{color#eee}},splitLine{lineStyle{typedashed,color#aaa}},splitArea{areaStyle{color#eee}}},categoryAxis{axisLine{lineStyle{color#eee}},axisTick{lineStyle{color#eee}},axisLabel{textStyle{color#eee}},splitLine{lineStyle{typedashed,color#aaa}},splitArea{areaStyle{color#eee}}},line{symbolcircle},graph{colornT},gauge{title{textStyle{color#eee}}},candlestick{itemStyle{normal{color#FD1050,color0#0CF49B,borderColor#FD1050,borderColor0#0CF49B}}}};oT.categoryAxis.splitLine.show=!1,YM.extend({typedataset,defaultOption{seriesLayoutByrI,sourceHeadernull,dimensionsnull,sourcenull},optionUpdatedfunction(){ya(this)}}),EI.extend({typedataset});var aT=kn.extend({typeellipse,shape{cx0,cy0,rx0,ry0},buildPathfunction(t,e){var i=.5522848,n=e.cx,o=e.cy,a=e.rx,r=e.ry,s=ai,l=ri;t.moveTo(n-a,o),t.bezierCurveTo(n-a,o-l,n-s,o-r,n,o-r),t.bezierCurveTo(n+s,o-r,n+a,o-l,n+a,o),t.bezierCurveTo(n+a,o+l,n+s,o+r,n,o+r),t.bezierCurveTo(n-s,o+r,n-a,o+l,n-a,o),t.closePath()}}),rT=[s,]+;Yr.prototype.parse=function(t,e){e=e{};var i=jr(t);if(!i)throw new Error(Illegal svg);var n=new Zw;this._root=n;var o=i.getAttribute(viewBox),a=parseFloat(i.getAttribute(width)e.width),r=parseFloat(i.getAttribute(height)e.height);isNaN(a)&&(a=null),isNaN(r)&&(r=null),Jr(i,n,null,!0);for(var s=i.firstChild;s;)this._parseNode(s,n),s=s.nextSibling;var l,u;if(o){var h=P(o).split(rT);h.length=4&&(l={xparseFloat(h[0]0),yparseFloat(h[1]0),widthparseFloat(h[2]),heightparseFloat(h[3])})}if(l&&null!=a&&null!=r&&(u=is(l,a,r),!e.ignoreViewBox)){var c=n;(n=new Zw).add(c),c.scale=u.scale.slice(),c.position=u.position.slice()}return e.ignoreRootClipnull==anull==rn.setClipPath(new aM({shape{x0,y0,widtha,heightr}})),{rootn,widtha,heightr,viewBoxRectl,viewBoxTransformu}},Yr.prototype._parseNode=function(t,e){var i=t.nodeName.toLowerCase();defs===ithis._isDefine=!0text===i&&(this._isText=!0);var n;if(this._isDefine){if(r=lT[i]){var o=r.call(this,t),a=t.getAttribute(id);a&&(this._defs[a]=o)}}else{var r=sT[i];r&&(n=r.call(this,t,e),e.add(n))}for(var s=t.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;defs===ithis._isDefine=!1text===i&&(this._isText=!1)},Yr.prototype._parseText=function(t,e){if(1===t.nodeType){var i=t.getAttribute(dx)0,n=t.getAttribute(dy)0;this._textX+=parseFloat(i),this._textY+=parseFloat(n)}var o=new qS({style{textt.textContent,transformText!0},position[this._textX0,this._textY0]});Kr(e,o),Jr(t,o,this._defs);var a=o.style.fontSize;a&&a9&&(o.style.fontSize=9,o.scale=o.scale[1,1],o.scale[0]=a9,o.scale[1]=a9);var r=o.getBoundingRect();return this._textX+=r.width,e.add(o),o};var sT={gfunction(t,e){var i=new Zw;return Kr(e,i),Jr(t,i,this._defs),i},rectfunction(t,e){var i=new aM;return Kr(e,i),Jr(t,i,this._defs),i.setShape({xparseFloat(t.getAttribute(x)0),yparseFloat(t.getAttribute(y)0),widthparseFloat(t.getAttribute(width)0),heightparseFloat(t.getAttribute(height)0)}),i},circlefunction(t,e){var i=new KS;return Kr(e,i),Jr(t,i,this._defs),i.setShape({cxparseFloat(t.getAttribute(cx)0),cyparseFloat(t.getAttribute(cy)0),rparseFloat(t.getAttribute(r)0)}),i},linefunction(t,e){var i=new rM;return Kr(e,i),Jr(t,i,this._defs),i.setShape({x1parseFloat(t.getAttribute(x1)0),y1parseFloat(t.getAttribute(y1)0),x2parseFloat(t.getAttribute(x2)0),y2parseFloat(t.getAttribute(y2)0)}),i},ellipsefunction(t,e){var i=new aT;return Kr(e,i),Jr(t,i,this._defs),i.setShape({cxparseFloat(t.getAttribute(cx)0),cyparseFloat(t.getAttribute(cy)0),rxparseFloat(t.getAttribute(rx)0),ryparseFloat(t.getAttribute(ry)0)}),i},polygonfunction(t,e){var i=t.getAttribute(points);i&&(i=$r(i));var n=new nM({shape{pointsi[]}});return Kr(e,n),Jr(t,n,this._defs),n},polylinefunction(t,e){var i=new kn;Kr(e,i),Jr(t,i,this._defs);var n=t.getAttribute(points);return n&&(n=$r(n)),new oM({shape{pointsn[]}})},imagefunction(t,e){var i=new hi;return Kr(e,i),Jr(t,i,this._defs),i.setStyle({imaget.getAttribute(xlinkhref),xt.getAttribute(x),yt.getAttribute(y),widtht.getAttribute(width),heightt.getAttribute(height)}),i},textfunction(t,e){var i=t.getAttribute(x)0,n=t.getAttribute(y)0,o=t.getAttribute(dx)0,a=t.getAttribute(dy)0;this._textX=parseFloat(i)+parseFloat(o),this._textY=parseFloat(n)+parseFloat(a);var r=new Zw;return Kr(e,r),Jr(t,r,this._defs),r},tspanfunction(t,e){var i=t.getAttribute(x),n=t.getAttribute(y);null!=i&&(this._textX=parseFloat(i)),null!=n&&(this._textY=parseFloat(n));var o=t.getAttribute(dx)0,a=t.getAttribute(dy)0,r=new Zw;return Kr(e,r),Jr(t,r,this._defs),this._textX+=o,this._textY+=a,r},pathfunction(t,e){var i=En(t.getAttribute(d));return Kr(e,i),Jr(t,i,this._defs),i}},lT={lineargradientfunction(t){var e=parseInt(t.getAttribute(x1)0,10),i=parseInt(t.getAttribute(y1)0,10),n=parseInt(t.getAttribute(x2)10,10),o=parseInt(t.getAttribute(y2)0,10),a=new dM(e,i,n,o);return qr(t,a),a},radialgradientfunction(t){}},uT={fillfill,strokestroke,stroke-widthlineWidth,opacityopacity,fill-opacityfillOpacity,stroke-opacitystrokeOpacity,stroke-dasharraylineDash,stroke-dashoffsetlineDashOffset,stroke-linecaplineCap,stroke-linejoinlineJoin,stroke-miterlimitmiterLimit,font-familyfontFamily,font-sizefontSize,font-stylefontStyle,font-weightfontWeight,text-aligntextAlign,alignment-baselinetextBaseline},hT=url(s#(.)),cT=(translatescalerotateskewXskewYmatrix)(([-s0-9.e,]))g,dT=([^s;]+)ss([^;]+)g,fT=R(),pT={registerMapfunction(t,e,i){var n;return y(e)n=ee.svgn=[{typesvg,sourcee.svg,specialArease.specialAreas}](e.geoJson&&!e.features&&(i=e.specialAreas,e=e.geoJson),n=[{typegeoJSON,sourcee,specialAreasi}]),d(n,function(t){var e=t.type;geoJson===e&&(e=t.type=geoJSON),(0,gT[e])(t)}),fT.set(t,n)},retrieveMapfunction(t){return fT.get(t)}},gT={geoJSONfunction(t){var e=t.source;t.geoJSON=_(e)undefined!=typeof JSON&&JSON.parseJSON.parse(e)new Function(return (+e+);)()e},svgfunction(t){t.svgXML=jr(t.source)}},mT=k,vT=d,yT=x,xT=w,_T=YM.parseClassType,wT={zrender4.0.5},bT=1e3,ST=1e3,MT=3e3,IT={PROCESSOR{FILTERbT,STATISTIC5e3},VISUAL{LAYOUTST,GLOBAL2e3,CHARTMT,COMPONENT4e3,BRUSH5e3}},TT=__flagInMainProcess,AT=__optionUpdated,DT=^[a-zA-Z0-9_]+$;as.prototype.on=os(on),as.prototype.off=os(off),as.prototype.one=os(one),h(as,aw);var CT=rs.prototype;CT._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[AT]){var e=this[AT].silent;this[TT]=!0,ls(this),LT.update.call(this),this[TT]=!1,this[AT]=!1,ds.call(this,e),fs.call(this,e)}else if(t.unfinished){var i=1,n=this._model;this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(n),t.performDataProcessorTasks(n),hs(this,n),t.performVisualTasks(n),xs(this,this._model,0,remain),i-=+new Date-o}while(i0&&t.unfinished);t.unfinishedthis._zr.flush()}}},CT.getDom=function(){return this._dom},CT.getZr=function(){return this._zr},CT.setOption=function(t,e,i){var n;if(xT(e)&&(i=e.lazyUpdate,n=e.silent,e=e.notMerge),this[TT]=!0,!this._modele){var o=new Va(this._api),a=this._theme,r=this._model=new hI(null,null,a,o);r.scheduler=this._scheduler,r.init(null,null,a,o)}this._model.setOption(t,ET),i(this[AT]={silentn},this[TT]=!1)(ls(this),LT.update.call(this),this._zr.flush(),this[AT]=!1,this[TT]=!1,ds.call(this,n),fs.call(this,n))},CT.setTheme=function(){console.error(ECharts#setTheme() is DEPRECATED in ECharts 3.0)},CT.getModel=function(){return this._model},CT.getOption=function(){return this._model&&this._model.getOption()},CT.getWidth=function(){return this._zr.getWidth()},CT.getHeight=function(){return this._zr.getHeight()},CT.getDevicePixelRatio=function(){return this._zr.painter.dprwindow.devicePixelRatio1},CT.getRenderedCanvas=function(t){if(z_.canvasSupported)return(t=t{}).pixelRatio=t.pixelRatio1,t.backgroundColor=t.backgroundColorthis._model.get(backgroundColor),this._zr.painter.getRenderedCanvas(t)},CT.getSvgDataUrl=function(){if(z_.svgSupported){var t=this._zr;return d(t.storage.getDisplayList(),function(t){t.stopAnimation(!0)}),t.painter.pathToDataUrl()}},CT.getDataURL=function(t){var e=(t=t{}).excludeComponents,i=this._model,n=[],o=this;vT(e,function(t){i.eachComponent({mainTypet},function(t){var e=o._componentsMap[t.__viewId];e.group.ignore(n.push(e),e.group.ignore=!0)})});var a=svg===this._zr.painter.getType()this.getSvgDataUrl()this.getRenderedCanvas(t).toDataURL(image+(t&&t.typepng));return vT(n,function(t){t.group.ignore=!1}),a},CT.getConnectedDataURL=function(t){if(z_.canvasSupported){var e=this.group,n=Math.min,o=Math.max;if(FT[e]){var a=10,r=10,s=-10,l=-10,u=[],h=t&&t.pixelRatio1;d(GT,function(h,c){if(h.group===e){var d=h.getRenderedCanvas(i(t)),f=h.getDom().getBoundingClientRect();a=n(f.left,a),r=n(f.top,r),s=o(f.right,s),l=o(f.bottom,l),u.push({domd,leftf.left,topf.top})}});var c=(s=h)-(a=h),f=(l=h)-(r=h),p=Y_();p.width=c,p.height=f;var g=Ii(p);return vT(u,function(t){var e=new hi({style{xt.lefth-a,yt.toph-r,imaget.dom}});g.add(e)}),g.refreshImmediately(),p.toDataURL(image+(t&&t.typepng))}return this.getDataURL(t)}},CT.convertToPixel=v(ss,convertToPixel),CT.convertFromPixel=v(ss,convertFromPixel),CT.containPixel=function(t,e){var i;return t=Vi(this._model,t),d(t,function(t,n){n.indexOf(Models)=0&&d(t,function(t){var o=t.coordinateSystem;if(o&&o.containPoint)i=!!o.containPoint(e);else if(seriesModels===n){var a=this._chartsMap[t.__viewId];a&&a.containPoint&&(i=a.containPoint(e,t))}},this)},this),!!i},CT.getVisual=function(t,e){var i=(t=Vi(this._model,t,{defaultMainTypeseries})).seriesModel.getData(),n=t.hasOwnProperty(dataIndexInside)t.dataIndexInsidet.hasOwnProperty(dataIndex)i.indexOfRawIndex(t.dataIndex)null;return null!=ni.getItemVisual(n,e)i.getVisual(e)},CT.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},CT.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var LT={prepareAndUpdatefunction(t){ls(this),LT.update.call(this,t)},updatefunction(t){var e=this._model,i=this._api,n=this._zr,o=this._coordSysMgr,a=this._scheduler;if(e){a.restoreData(e,t),a.performSeriesTasks(e),o.create(e,i),a.performDataProcessorTasks(e,t),hs(this,e),o.update(e,i),ms(e),a.performVisualTasks(e,t),vs(this,e,i,t);var r=e.get(backgroundColor)transparent;if(z_.canvasSupported)n.setBackgroundColor(r);else{var s=zt(r);r=Xt(s,rgb),0===s[3]&&(r=transparent)}_s(e,i)}},updateTransformfunction(t){var e=this._model,i=this,n=this._api;if(e){var o=[];e.eachComponent(function(a,r){var s=i.getViewOfComponentModel(r);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(r,e,n,t);l&&l.update&&o.push(s)}else o.push(s)});var a=R();e.eachSeries(function(o){var r=i._chartsMap[o.__viewId];if(r.updateTransform){var s=r.updateTransform(o,e,n,t);s&&s.update&&a.set(o.uid,1)}else a.set(o.uid,1)}),ms(e),this._scheduler.performVisualTasks(e,t,{setDirty!0,dirtyMapa}),xs(i,e,0,t,a),_s(e,this._api)}},updateViewfunction(t){var e=this._model;e&&(Mr.markUpdateMethod(t,updateView),ms(e),this._scheduler.performVisualTasks(e,t,{setDirty!0}),vs(this,this._model,this._api,t),_s(e,this._api))},updateVisualfunction(t){LT.update.call(this,t)},updateLayoutfunction(t){LT.update.call(this,t)}};CT.resize=function(t){this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var i=e.resetOption(media),n=t&&t.silent;this[TT]=!0,i&&ls(this),LT.update.call(this),this[TT]=!1,ds.call(this,n),fs.call(this,n)}},CT.showLoading=function(t,e){if(xT(t)&&(e=t,t=),t=tdefault,this.hideLoading(),VT[t]){var i=VT[t](this._api,e),n=this._zr;this._loadingFX=i,n.add(i)}},CT.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},CT.makeActionFromEvent=function(t){var e=a({},t);return e.type=NT[t.type],e},CT.dispatchAction=function(t,e){xT(e)(e={silent!!e}),PT[t.type]&&this._model&&(this[TT]this._pendingActions.push(t)(cs.call(this,t,e.silent),e.flushthis._zr.flush(!0)!1!==e.flush&&z_.browser.weChat&&this._throttledZrFlush(),ds.call(this,e.silent),fs.call(this,e.silent)))},CT.appendData=function(t){var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0},CT.on=os(on),CT.off=os(off),CT.one=os(one);var kT=[click,dblclick,mouseover,mouseout,mousemove,mousedown,mouseup,globalout,contextmenu];CT._initEvents=function(){vT(kT,function(t){this._zr.on(t,function(e){var i,n=this.getModel(),o=e.target;if(globalout===t)i={};else if(o&&null!=o.dataIndex){var r=o.dataModeln.getSeriesByIndex(o.seriesIndex);i=r&&r.getDataParams(o.dataIndex,o.dataType,o){}}else o&&o.eventData&&(i=a({},o.eventData));if(i){var s=i.componentType,l=i.componentIndex;markLine!==s&&markPoint!==s&&markArea!==s(s=series,l=i.seriesIndex);var u=s&&null!=l&&n.getComponent(s,l),h=u&&this[series===u.mainType_chartsMap_componentsMap][u.__viewId];i.event=e,i.type=t,this._ecEventProcessor.eventInfo={targetElo,packedEventi,modelu,viewh},this.trigger(t,i)}},this)},this),vT(NT,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},CT.isDisposed=function(){return this._disposed},CT.clear=function(){this.setOption({series[]},!0)},CT.dispose=function(){if(!this._disposed){this._disposed=!0,Fi(this.getDom(),ZT,);var t=this._api,e=this._model;vT(this._componentsViews,function(i){i.dispose(e,t)}),vT(this._chartsViews,function(i){i.dispose(e,t)}),this._zr.dispose(),delete GT[this.id]}},h(rs,aw),Is.prototype={constructorIs,normalizeQueryfunction(t){var e={},i={},n={};if(_(t)){var o=_T(t);e.mainType=o.mainnull,e.subType=o.subnull}else{var a=[Index,Name,Id],r={name1,dataIndex1,dataType1};d(t,function(t,o){for(var s=!1,l=0;la.length;l++){var u=a[l],h=o.lastIndexOf(u);if(h0&&h===o.length-u.length){var c=o.slice(0,h);data!==c&&(e.mainType=c,e[u.toLowerCase()]=t,s=!0)}}r.hasOwnProperty(o)&&(i[o]=t,s=!0),s(n[o]=t)})}return{cptQuerye,dataQueryi,otherQueryn}},filterfunction(t,e,i){function n(t,e,i,n){return null==t[i]e[ni]===t[i]}var o=this.eventInfo;if(!o)return!0;var a=o.targetEl,r=o.packedEvent,s=o.model,l=o.view;if(!s!l)return!0;var u=e.cptQuery,h=e.dataQuery;return n(u,s,mainType)&&n(u,s,subType)&&n(u,s,index,componentIndex)&&n(u,s,name)&&n(u,s,id)&&n(h,r,name)&&n(h,r,dataIndex)&&n(h,r,dataType)&&(!l.filterForExposedEventl.filterForExposedEvent(t,e.otherQuery,a,r))},afterTriggerfunction(){this.eventInfo=null}};var PT={},NT={},OT=[],ET=[],RT=[],zT=[],BT={},VT={},GT={},FT={},WT=new Date-0,HT=new Date-0,ZT=_echarts_instance_,UT=As;Es(2e3,UI),Ls(MI),ks(5e3,function(t){var e=R();t.eachSeries(function(t){var i=t.get(stack);if(i){var n=e.get(i)e.set(i,[]),o=t.getData(),a={stackResultDimensiono.getCalculationInfo(stackResultDimension),stackedOverDimensiono.getCalculationInfo(stackedOverDimension),stackedDimensiono.getCalculationInfo(stackedDimension),stackedByDimensiono.getCalculationInfo(stackedByDimension),isStackedByIndexo.getCalculationInfo(isStackedByIndex),datao,seriesModelt};if(!a.stackedDimension!a.isStackedByIndex&&!a.stackedByDimension)return;n.length&&o.setCalculationInfo(stackedOnSeries,n[n.length-1].seriesModel),n.push(a)}}),e.each(ir)}),zs(default,function(t,e){r(e=e{},{textloading,color#c23531,textColor#000,maskColorrgba(255, 255, 255, 0.8),zlevel0});var i=new aM({style{fille.maskColor},zlevele.zlevel,z1e4}),n=new uM({shape{startAngle-YI2,endAngle-YI2+.1,r10},style{strokee.color,lineCapround,lineWidth5},zlevele.zlevel,z10001}),o=new aM({style{fillnone,texte.text,textPositionright,textDistance10,textFille.textColor},zlevele.zlevel,z10001});n.animateShape(!0).when(1e3,{endAngle3YI2}).start(circularInOut),n.animateShape(!0).when(1e3,{startAngle3YI2}).delay(300).start(circularInOut);var a=new Zw;return a.add(n),a.add(o),a.add(i),a.resize=function(){var e=t.getWidth()2,a=t.getHeight()2;n.setShape({cxe,cya});var r=n.shape.r;o.setShape({xe-r,ya-r,width2r,height2r}),i.setShape({x0,y0,widtht.getWidth(),heightt.getHeight()})},a.resize(),a}),Ps({typehighlight,eventhighlight,updatehighlight},B),Ps({typedownplay,eventdownplay,updatedownplay},B),Cs(light,iT),Cs(dark,oT);var XT={};Hs.prototype={constructorHs,addfunction(t){return this._add=t,this},updatefunction(t){return this._update=t,this},removefunction(t){return this._remove=t,this},executefunction(){var t=this._old,e=this._new,i={},n=[],o=[];for(Zs(t,{},n,_oldKeyGetter,this),Zs(e,i,o,_newKeyGetter,this),a=0;at.length;a++)null!=(s=i[r=n[a]])((u=s.length)(1===u&&(i[r]=null),s=s.unshift())i[r]=null,this._update&&this._update(s,a))this._remove&&this._remove(a);for(var a=0;ao.length;a++){var r=o[a];if(i.hasOwnProperty(r)){var s=i[r];if(null==s)continue;if(s.length)for(var l=0,u=s.length;lu;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var jT=R([tooltip,label,itemName,itemId,seriesName]),YT=w,qT=e00,KT={floatundefined==typeof Float64ArrayArrayFloat64Array,intundefined==typeof Int32ArrayArrayInt32Array,ordinalArray,numberArray,timeArray},$T=undefined==typeof Uint32ArrayArrayUint32Array,JT=undefined==typeof Uint16ArrayArrayUint16Array,QT=[hasItemOption,_nameList,_idList,_invertedIndicesMap,_rawData,_chunkSize,_chunkCount,_dimValueGetter,_count,_rawCount,_nameDimIdx,_idDimIdx],tA=[_extent,_approximateExtent,_rawExtent],eA=function(t,e){t=t[x,y];for(var i={},n=[],o={},a=0;at.length;a++){var r=t[a];_(r)&&(r={namer});var s=r.name;r.type=r.typefloat,r.coordDim(r.coordDim=s,r.coordDimIndex=0),r.otherDims=r.otherDims{},n.push(s),i[s]=r,r.index=a,r.createInvertedIndices&&(o[s]=[])}this.dimensions=n,this._dimensionInfos=i,this.hostModel=e,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=Us(this),this._invertedIndicesMap=o,this._calculationInfo={}},iA=eA.prototype;iA.type=list,iA.hasItemOption=!0,iA.getDimension=function(t){return isNaN(t)(t=this.dimensions[t]t),t},iA.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},iA.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},iA.mapDimension=function(t,e){var i=this._dimensionsSummary;if(null==e)return i.encodeFirstDimNotExtra[t];var n=i.encode[t];return!0===e(n[]).slice()n&&n[e]},iA.initData=function(t,e,i){(va.isInstance(t)c(t))&&(t=new nr(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e[],this._idList=[],this._nameRepeatCount={},i(this.hasItemOption=!1),this.defaultDimValueGetter=DI[this._rawData.getSource().sourceFormat],this._dimValueGetter=i=ithis.defaultDimValueGetter,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},iA.getProvider=function(){return this._rawData},iA.appendData=function(t){var e=this._rawData,i=this.count();e.appendData(t);var n=e.count();e.persistent(n+=i),this._initDataFromProvider(i,n)},iA._initDataFromProvider=function(t,e){if(!(t=e)){for(var i,n=this._chunkSize,o=this._rawData,a=this._storage,r=this.dimensions,s=r.length,l=this._dimensionInfos,u=this._nameList,h=this._idList,c=this._rawExtent,d=this._nameRepeatCount={},f=this._chunkCount,p=f-1,g=0;gs;g++){c[T=r[g]](c[T]=[10,-10]);var m=l[T];0===m.otherDims.itemName&&(i=this._nameDimIdx=g),0===m.otherDims.itemId&&(this._idDimIdx=g);var v=KT[m.type];a[T](a[T]=[]);var y=a[T][p];if(y&&y.lengthn){for(var x=new v(Math.min(e-pn,n)),_=0;_y.length;_++)x[_]=y[_];a[T][p]=x}for(I=fn;Ie;I+=n)a[T].push(new v(Math.min(e-I,n)));this._chunkCount=a[T].length}for(var w=new Array(s),b=t;be;b++){w=o.getItem(b,w);for(var S=Math.floor(bn),M=b%n,I=0;Is;I++){var T=r[I],A=a[T][S],D=this._dimValueGetter(w,T,b,I);A[M]=D;var C=c[T];DC[0]&&(C[0]=D),DC[1]&&(C[1]=D)}if(!o.pure){var L=u[b];if(w&&null==L)if(null!=w.name)u[b]=L=w.name;else if(null!=i){var k=r[i],P=a[k][S];if(P){L=P[M];var N=l[k].ordinalMeta;N&&N.categories.length&&(L=N.categories[L])}}var O=null==wnullw.id;null==O&&null!=L&&(d[L]=d[L]0,O=L,d[L]0&&(O+=__ec__+d[L]),d[L]++),null!=O&&(h[b]=O)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=e,this._extent={},$s(this)}},iA.count=function(){return this._count},iA.getIndices=function(){var t=this._indices;if(t){var e=t.constructor,i=this._count;if(e===Array){n=new e(i);for(o=0;oi;o++)n[o]=t[o]}else n=new e(t.buffer,0,i)}else for(var n=new(e=Ys(this))(this.count()),o=0;on.length;o++)n[o]=o;return n},iA.get=function(t,e){if(!(e=0&&ethis._count))return NaN;var i=this._storage;if(!i[t])return NaN;e=this.getRawIndex(e);var n=Math.floor(ethis._chunkSize),o=e%this._chunkSize;return i[t][n][o]},iA.getByRawIndex=function(t,e){if(!(e=0&&ethis._rawCount))return NaN;var i=this._storage[t];if(!i)return NaN;var n=Math.floor(ethis._chunkSize),o=e%this._chunkSize;return i[n][o]},iA._getFast=function(t,e){var i=Math.floor(ethis._chunkSize),n=e%this._chunkSize;return this._storage[t][i][n]},iA.getValues=function(t,e){var i=[];y(t)(e=t,t=this.dimensions);for(var n=0,o=t.length;no;n++)i.push(this.get(t[n],e));return i},iA.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,i=this._dimensionInfos,n=0,o=e.length;no;n++)if(ordinal!==i[e[n]].type&&isNaN(this.get(e[n],t)))return!1;return!0},iA.getDataExtent=function(t){t=this.getDimension(t);var e=[10,-10];if(!this._storage[t])return e;var i,n=this.count();if(!this._indices)return this._rawExtent[t].slice();if(i=this._extent[t])return i.slice();for(var o=(i=e)[0],a=i[1],r=0;rn;r++){var s=this._getFast(t,this.getRawIndex(r));so&&(o=s),sa&&(a=s)}return i=[o,a],this._extent[t]=i,i},iA.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]this.getDataExtent(t)},iA.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},iA.getCalculationInfo=function(t){return this._calculationInfo[t]},iA.setCalculationInfo=function(t,e){YT(t)a(this._calculationInfo,t)this._calculationInfo[t]=e},iA.getSum=function(t){var e=0;if(this._storage[t])for(var i=0,n=this.count();in;i++){var o=this.get(t,i);isNaN(o)(e+=o)}return e},iA.getMedian=function(t){var e=[];this.each(t,function(t,i){isNaN(t)e.push(t)});var i=[].concat(e).sort(function(t,e){return t-e}),n=this.count();return 0===n0n%2==1i[(n-1)2](i[n2]+i[n2-1])2},iA.rawIndexOf=function(t,e){var i=(t&&this._invertedIndicesMap[t])[e];return null==iisNaN(i)-1i},iA.indexOfName=function(t){for(var e=0,i=this.count();ei;e++)if(this.getName(e)===t)return e;return-1},iA.indexOfRawIndex=function(t){if(!this._indices)return t;if(t=this._rawCountt0)return-1;var e=this._indices,i=e[t];if(null!=i&&ithis._count&&i===t)return t;for(var n=0,o=this._count-1;n=o;){var a=(n+o)20;if(e[a]t)n=a+1;else{if(!(e[a]t))return a;o=a-1}}return-1},iA.indicesOfNearest=function(t,e,i){var n=[];if(!this._storage[t])return n;null==i&&(i=10);for(var o=Number.MAX_VALUE,a=-1,r=0,s=this.count();rs;r++){var l=e-this.get(t,r),u=Math.abs(l);l=i&&u=o&&((uol=0&&a0)&&(o=u,a=l,n.length=0),n.push(r))}return n},iA.getRawIndex=Qs,iA.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],i=0;ithis.dimensions.length;i++){var n=this.dimensions[i];e.push(this.get(n,t))}return e},iA.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]Js(this,this._nameDimIdx,e)},iA.getId=function(t){return el(this,this.getRawIndex(t))},iA.each=function(t,e,i,n){if(this._count){function==typeof t&&(n=i,i=e,e=t,t=[]),i=inthis;for(var o=(t=f(il(t),this.getDimension,this)).length,a=0;athis.count();a++)switch(o){case 0e.call(i,a);break;case 1e.call(i,this.get(t[0],a),a);break;case 2e.call(i,this.get(t[0],a),this.get(t[1],a),a);break;defaultfor(var r=0,s=[];ro;r++)s[r]=this.get(t[r],a);s[r]=a,e.apply(i,s)}}},iA.filterSelf=function(t,e,i,n){if(this._count){function==typeof t&&(n=i,i=e,e=t,t=[]),i=inthis,t=f(il(t),this.getDimension,this);for(var o=this.count(),a=new(Ys(this))(o),r=[],s=t.length,l=0,u=t[0],h=0;ho;h++){var c,d=this.getRawIndex(h);if(0===s)c=e.call(i,h);else if(1===s){var p=this._getFast(u,d);c=e.call(i,p,h)}else{for(var g=0;gs;g++)r[g]=this._getFast(u,d);r[g]=h,c=e.apply(i,r)}c&&(a[l++]=d)}return lo&&(this._indices=a),this._count=l,this._extent={},this.getRawIndex=this._indicestlQs,this}},iA.selectRange=function(t){if(this._count){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);var n=e.length;if(n){var o=this.count(),a=new(Ys(this))(o),r=0,s=e[0],l=t[s][0],u=t[s][1],h=!1;if(!this._indices){var c=0;if(1===n){for(var d=this._storage[e[0]],f=0;fthis._chunkCount;f++)for(var p=d[f],g=Math.min(this._count-fthis._chunkSize,this._chunkSize),m=0;mg;m++)((w=p[m])=l&&w=uisNaN(w))&&(a[r++]=c),c++;h=!0}else if(2===n){for(var d=this._storage[s],v=this._storage[e[1]],y=t[e[1]][0],x=t[e[1]][1],f=0;fthis._chunkCount;f++)for(var p=d[f],_=v[f],g=Math.min(this._count-fthis._chunkSize,this._chunkSize),m=0;mg;m++){var w=p[m],b=_[m];(w=l&&w=uisNaN(w))&&(b=y&&b=xisNaN(b))&&(a[r++]=c),c++}h=!0}}if(!h)if(1===n)for(m=0;mo;m++){M=this.getRawIndex(m);((w=this._getFast(s,M))=l&&w=uisNaN(w))&&(a[r++]=M)}else for(m=0;mo;m++){for(var S=!0,M=this.getRawIndex(m),f=0;fn;f++){var I=e[f];((w=this._getFast(i,M))t[I][0]wt[I][1])&&(S=!1)}S&&(a[r++]=this.getRawIndex(m))}return ro&&(this._indices=a),this._count=r,this._extent={},this.getRawIndex=this._indicestlQs,this}}},iA.mapArray=function(t,e,i,n){function==typeof t&&(n=i,i=e,e=t,t=[]),i=inthis;var o=[];return this.each(t,function(){o.push(e&&e.apply(this,arguments))},i),o},iA.map=function(t,e,i,n){i=inthis;var o=nl(this,t=f(il(t),this.getDimension,this));o._indices=this._indices,o.getRawIndex=o._indicestlQs;for(var a=o._storage,r=[],s=this._chunkSize,l=t.length,u=this.count(),h=[],c=o._rawExtent,d=0;du;d++){for(var p=0;pl;p++)h[p]=this.get(t[p],d);h[l]=d;var g=e&&e.apply(i,h);if(null!=g){object!=typeof g&&(r[0]=g,g=r);for(var m=this.getRawIndex(d),v=Math.floor(ms),y=m%s,x=0;xg.length;x++){var _=t[x],w=g[x],b=c[_],S=a[_];S&&(S[v][y]=w),wb[0]&&(b[0]=w),wb[1]&&(b[1]=w)}}}return o},iA.downSample=function(t,e,i,n){for(var o=nl(this,[t]),a=o._storage,r=[],s=Math.floor(1e),l=a[t],u=this.count(),h=this._chunkSize,c=o._rawExtent[t],d=new(Ys(this))(u),f=0,p=0;pu;p+=s){su-p&&(s=u-p,r.length=s);for(var g=0;gs;g++){var m=this.getRawIndex(p+g),v=Math.floor(mh),y=m%h;r[g]=l[v][y]}var x=i(r),_=this.getRawIndex(Math.min(p+n(r,x)0,u-1)),w=_%h;l[Math.floor(_h)][w]=x,xc[0]&&(c[0]=x),xc[1]&&(c[1]=x),d[f++]=_}return o._count=f,o._indices=d,o.getRawIndex=tl,o},iA.getItemModel=function(t){var e=this.hostModel;return new Lo(this.getRawDataItem(t),e,e&&e.ecModel)},iA.diff=function(t){var e=this;return new Hs(tt.getIndices()[],this.getIndices(),function(e){return el(t,e)},function(t){return el(e,t)})},iA.getVisual=function(t){var e=this._visual;return e&&e[t]},iA.setVisual=function(t,e){if(YT(t))for(var i in t)t.hasOwnProperty(i)&&this.setVisual(i,t[i]);else this._visual=this._visual{},this._visual[t]=e},iA.setLayout=function(t,e){if(YT(t))for(var i in t)t.hasOwnProperty(i)&&this.setLayout(i,t[i]);else this._layout[t]=e},iA.getLayout=function(t){return this._layout[t]},iA.getItemLayout=function(t){return this._itemLayouts[t]},iA.setItemLayout=function(t,e,i){this._itemLayouts[t]=ia(this._itemLayouts[t]{},e)e},iA.clearItemLayouts=function(){this._itemLayouts.length=0},iA.getItemVisual=function(t,e,i){var n=this._itemVisuals[t],o=n&&n[e];return null!=oiothis.getVisual(e)},iA.setItemVisual=function(t,e,i){var n=this._itemVisuals[t]{},o=this.hasItemVisual;if(this._itemVisuals[t]=n,YT(e))for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a],o[a]=!0);else n[e]=i,o[e]=!0},iA.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var nA=function(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType};iA.setItemGraphicEl=function(t,e){var i=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=i&&i.seriesIndex,group===e.type&&e.traverse(nA,e)),this._graphicEls[t]=e},iA.getItemGraphicEl=function(t){return this._graphicEls[t]},iA.eachItemGraphicEl=function(t,e){d(this._graphicEls,function(i,n){i&&t&&t.call(e,i,n)})},iA.cloneShallow=function(t){if(!t){var e=f(this.dimensions,this.getDimensionInfo,this);t=new eA(e,this.hostModel)}if(t._storage=this._storage,Ks(t,this),this._indices){var i=this._indices.constructor;t._indices=new i(this._indices)}else t._indices=null;return t.getRawIndex=t._indicestlQs,t},iA.wrapMethod=function(t,e){var i=this[t];function==typeof i&&(this.__wrappedMethods=this.__wrappedMethods[],this.__wrappedMethods.push(t),this[t]=function(){var t=i.apply(this,arguments);return e.apply(this,[t].concat(C(arguments)))})},iA.TRANSFERABLE_METHODS=[cloneShallow,downSample,map],iA.CHANGABLE_METHODS=[filterSelf,selectRange];var oA=function(t,e){return e=e{},rl(e.coordDimensions[],t,{dimsDefe.dimensionsDefinet.dimensionsDefine,encodeDefe.encodeDefinet.encodeDefine,dimCounte.dimensionsCount,generateCoorde.generateCoord,generateCoordCounte.generateCoordCount})};gl.prototype.parse=function(t){return t},gl.prototype.getSetting=function(t){return this._setting[t]},gl.prototype.contain=function(t){var e=this._extent;return t=e[0]&&t=e[1]},gl.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0].5(t-e[0])(e[1]-e[0])},gl.prototype.scale=function(t){var e=this._extent;return t(e[1]-e[0])+e[0]},gl.prototype.unionExtent=function(t){var e=this._extent;t[0]e[0]&&(e[0]=t[0]),t[1]e[1]&&(e[1]=t[1])},gl.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},gl.prototype.getExtent=function(){return this._extent.slice()},gl.prototype.setExtent=function(t,e){var i=this._extent;isNaN(t)(i[0]=t),isNaN(e)(i[1]=e)},gl.prototype.isBlank=function(){return this._isBlank},gl.prototype.setBlank=function(t){this._isBlank=t},gl.prototype.getLabel=null,Xi(gl),Ki(gl,{registerWhenExtend!0}),ml.createByAxisModel=function(t){var e=t.option,i=e.data,n=i&&f(i,yl);return new ml({categoriesn,needCollect!n,deduplication!1!==e.dedplication})};var aA=ml.prototype;aA.getOrdinal=function(t){return vl(this).get(t)},aA.parseAndCollect=function(t){var e,i=this._needCollect;if(string!=typeof t&&!i)return t;if(i&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var n=vl(this);return null==(e=n.get(t))&&(i(e=this.categories.length,this.categories[e]=t,n.set(t,e))e=NaN),e};var rA=gl.prototype,sA=gl.extend({typeordinal,initfunction(t,e){t&&!y(t)(t=new ml({categoriest})),this._ordinalMeta=t,this._extent=e[0,t.categories.length-1]},parsefunction(t){returnstring==typeof tthis._ordinalMeta.getOrdinal(t)Math.round(t)},containfunction(t){return t=this.parse(t),rA.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalizefunction(t){return rA.normalize.call(this,this.parse(t))},scalefunction(t){return Math.round(rA.scale.call(this,t))},getTicksfunction(){for(var t=[],e=this._extent,i=e[0];i=e[1];)t.push(i),i++;return t},getLabelfunction(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},countfunction(){return this._extent[1]-this._extent[0]+1},unionExtentFromDatafunction(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMetafunction(){return this._ordinalMeta},niceTicksB,niceExtentB});sA.create=function(){return new sA};var lA=zo,uA=zo,hA=gl.extend({typeinterval,_interval0,_intervalPrecision2,setExtentfunction(t,e){var i=this._extent;isNaN(t)(i[0]=parseFloat(t)),isNaN(e)(i[1]=parseFloat(e))},unionExtentfunction(t){var e=this._extent;t[0]e[0]&&(e[0]=t[0]),t[1]e[1]&&(e[1]=t[1]),hA.prototype.setExtent.call(this,e[0],e[1])},getIntervalfunction(){return this._interval},setIntervalfunction(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=_l(t)},getTicksfunction(){return Sl(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getLabelfunction(t,e){if(null==t)return;var i=e&&e.precision;return null==ii=Go(t)0auto===i&&(i=this._intervalPrecision),t=uA(t,i,!0),$o(t)},niceTicksfunction(t,e,i){t=t5;var n=this._extent,o=n[1]-n[0];if(isFinite(o)){o0&&(o=-o,n.reverse());var a=xl(n,t,e,i);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},niceExtentfunction(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var i=e[0];t.fixMaxe[0]-=i2(e[1]+=i2,e[0]-=i2)}else e[1]=1;var n=e[1]-e[0];isFinite(n)(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin(e[0]=uA(Math.floor(e[0]o)o)),t.fixMax(e[1]=uA(Math.ceil(e[1]o)o))}});hA.create=function(){return new hA};var cA=__ec_stack_,dA=undefined!=typeof Float32ArrayFloat32ArrayArray,fA={seriesTypebar,planzI(),resetfunction(t){if(Pl(t)&&Nl(t)){var e=t.getData(),i=t.coordinateSystem,n=i.getBaseAxis(),o=i.getOtherAxis(n),a=e.mapDimension(o.dim),r=e.mapDimension(n.dim),s=o.isHorizontal(),l=s01,u=Ll(Dl([t]),n,t).width;return u.5(u=.5),{progressfunction(t,e){for(var n,h=new dA(2t.count),c=[],d=[],f=0;null!=(n=t.next());)d[l]=e.get(a,n),d[1-l]=e.get(r,n),c=i.dataToPoint(d,null,c),h[f++]=c[0],h[f++]=c[1];e.setLayout({largePointsh,barWidthu,valueAxisStartOl(0,o),valueAxisHorizontals})}}}}},pA=hA.prototype,gA=Math.ceil,mA=Math.floor,vA=function(t,e,i,n){for(;in;){var o=i+n1;t[o][1]ei=o+1n=o}return i},yA=hA.extend({typetime,getLabelfunction(t){var e=this._stepLvl,i=new Date(t);return oa(e[0],i,this.getSetting(useUTC))},niceExtentfunction(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=864e5,e[1]+=864e5),e[1]===-10&&e[0]===10){var i=new Date;e[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),e[0]=e[1]-864e5}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var n=this._interval;t.fixMin(e[0]=zo(mA(e[0]n)n)),t.fixMax(e[1]=zo(gA(e[1]n)n))},niceTicksfunction(t,e,i){t=t10;var n=this._extent,o=n[1]-n[0],a=ot;null!=e&&ae&&(a=e),null!=i&&ai&&(a=i);var r=xA.length,s=vA(xA,a,0,r),l=xA[Math.min(s,r-1)],u=l[1];year===l[0]&&(u=Yo(out,!0));var h=this.getSetting(useUTC)060new Date(+n[0]+n[1]).getTimezoneOffset()1e3,c=[Math.round(gA((n[0]-h)u)u+h),Math.round(mA((n[1]-h)u)u+h)];bl(c,n),this._stepLvl=l,this._interval=u,this._niceExtent=c},parsefunction(t){return+Uo(t)}});d([contain,normalize],function(t){yA.prototype[t]=function(e){return pA[t].call(this,this.parse(e))}});var xA=[[hhmmss,1e3],[hhmmss,5e3],[hhmmss,1e4],[hhmmss,15e3],[hhmmss,3e4],[hhmmnMM-dd,6e4],[hhmmnMM-dd,3e5],[hhmmnMM-dd,6e5],[hhmmnMM-dd,9e5],[hhmmnMM-dd,18e5],[hhmmnMM-dd,36e5],[hhmmnMM-dd,72e5],[hhmmnMM-dd,216e5],[hhmmnMM-dd,432e5],[MM-ddnyyyy,864e5],[MM-ddnyyyy,1728e5],[MM-ddnyyyy,2592e5],[MM-ddnyyyy,3456e5],[MM-ddnyyyy,432e6],[MM-ddnyyyy,5184e5],[week,6048e5],[MM-ddnyyyy,864e6],[week,12096e5],[week,18144e5],[month,26784e5],[week,36288e5],[month,53568e5],[week,6048e6],[quarter,8208e6],[month,107136e5],[month,13392e6],[half-year,16416e6],[month,214272e5],[month,26784e6],[year,32832e6]];yA.create=function(t){return new yA({useUTCt.ecModel.get(useUTC)})};var _A=gl.prototype,wA=hA.prototype,bA=Go,SA=zo,MA=Math.floor,IA=Math.ceil,TA=Math.pow,AA=Math.log,DA=gl.extend({typelog,base10,$constructorfunction(){gl.apply(this,arguments),this._originalScale=new hA},getTicksfunction(){var t=this._originalScale,e=this._extent,i=t.getExtent();return f(wA.getTicks.call(this),function(n){var o=zo(TA(this.base,n));return o=n===e[0]&&t.__fixMinEl(o,i[0])o,o=n===e[1]&&t.__fixMaxEl(o,i[1])o},this)},getLabelwA.getLabel,scalefunction(t){return t=_A.scale.call(this,t),TA(this.base,t)},setExtentfunction(t,e){var i=this.base;t=AA(t)AA(i),e=AA(e)AA(i),wA.setExtent.call(this,t,e)},getExtentfunction(){var t=this.base,e=_A.getExtent.call(this);e[0]=TA(t,e[0]),e[1]=TA(t,e[1]);var i=this._originalScale,n=i.getExtent();return i.__fixMin&&(e[0]=El(e[0],n[0])),i.__fixMax&&(e[1]=El(e[1],n[1])),e},unionExtentfunction(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=AA(t[0])AA(e),t[1]=AA(t[1])AA(e),_A.unionExtent.call(this,t)},unionExtentFromDatafunction(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicksfunction(t){t=t10;var e=this._extent,i=e[1]-e[0];if(!(i===10i=0)){var n=Xo(i);for(tin=.5&&(n=10);!isNaN(n)&&Math.abs(n)1&&Math.abs(n)0;)n=10;var o=[zo(IA(e[0]n)n),zo(MA(e[1]n)n)];this._interval=n,this._niceExtent=o}},niceExtentfunction(t){wA.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});d([contain,normalize],function(t){DA.prototype[t]=function(e){return e=AA(e)AA(this.base),_A[t].call(this,e)}}),DA.create=function(){return new DA};var CA={getMinfunction(t){var e=this.option,i=tnull==e.rangeStarte.mine.rangeStart;return this.axis&&null!=i&&dataMin!==i&&function!=typeof i&&!I(i)&&(i=this.axis.scale.parse(i)),i},getMaxfunction(t){var e=this.option,i=tnull==e.rangeEnde.maxe.rangeEnd;return this.axis&&null!=i&&dataMax!==i&&function!=typeof i&&!I(i)&&(i=this.axis.scale.parse(i)),i},getNeedCrossZerofunction(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModelB,setRangefunction(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRangefunction(){this.option.rangeStart=this.option.rangeEnd=null}},LA=Fn({typetriangle,shape{cx0,cy0,width0,height0},buildPathfunction(t,e){var i=e.cx,n=e.cy,o=e.width2,a=e.height2;t.moveTo(i,n-a),t.lineTo(i+o,n+a),t.lineTo(i-o,n+a),t.closePath()}}),kA=Fn({typediamond,shape{cx0,cy0,width0,height0},buildPathfunction(t,e){var i=e.cx,n=e.cy,o=e.width2,a=e.height2;t.moveTo(i,n-a),t.lineTo(i+o,n),t.lineTo(i,n+a),t.lineTo(i-o,n),t.closePath()}}),PA=Fn({typepin,shape{x0,y0,width0,height0},buildPathfunction(t,e){var i=e.x,n=e.y,o=e.width53,a=Math.max(o,e.height),r=o2,s=rr(a-r),l=n-a+r+s,u=Math.asin(sr),h=Math.cos(u)r,c=Math.sin(u),d=Math.cos(u),f=.6r,p=.7r;t.moveTo(i-h,l+s),t.arc(i,l,r,Math.PI-u,2Math.PI+u),t.bezierCurveTo(i+h-cf,l+s+df,i,n-p,i,n),t.bezierCurveTo(i,n-p,i-h+cf,l+s+df,i-h,l+s),t.closePath()}}),NA=Fn({typearrow,shape{x0,y0,width0,height0},buildPathfunction(t,e){var i=e.height,n=e.width,o=e.x,a=e.y,r=n32;t.moveTo(o,a),t.lineTo(o+r,a+i),t.lineTo(o,a+i43),t.lineTo(o-r,a+i),t.lineTo(o,a),t.closePath()}}),OA={linefunction(t,e,i,n,o){o.x1=t,o.y1=e+n2,o.x2=t+i,o.y2=e+n2},rectfunction(t,e,i,n,o){o.x=t,o.y=e,o.width=i,o.height=n},roundRectfunction(t,e,i,n,o){o.x=t,o.y=e,o.width=i,o.height=n,o.r=Math.min(i,n)4},squarefunction(t,e,i,n,o){var a=Math.min(i,n);o.x=t,o.y=e,o.width=a,o.height=a},circlefunction(t,e,i,n,o){o.cx=t+i2,o.cy=e+n2,o.r=Math.min(i,n)2},diamondfunction(t,e,i,n,o){o.cx=t+i2,o.cy=e+n2,o.width=i,o.height=n},pinfunction(t,e,i,n,o){o.x=t+i2,o.y=e+n2,o.width=i,o.height=n},arrowfunction(t,e,i,n,o){o.x=t+i2,o.y=e+n2,o.width=i,o.height=n},trianglefunction(t,e,i,n,o){o.cx=t+i2,o.cy=e+n2,o.width=i,o.height=n}},EA={};d({linerM,rectaM,roundRectaM,squareaM,circleKS,diamondkA,pinPA,arrowNA,triangleLA},function(t,e){EA[e]=new t});var RA=Fn({typesymbol,shape{symbolType,x0,y0,width0,height0},beforeBrushfunction(){var t=this.style;pin===this.shape.symbolType&&inside===t.textPosition&&(t.textPosition=[50%,40%],t.textAlign=center,t.textVerticalAlign=middle)},buildPathfunction(t,e,i){var n=e.symbolType,o=EA[n];none!==e.symbolType&&(o(o=EA[n=rect]),OA[n](e.x,e.y,e.width,e.height,o.shape),o.buildPath(t,o.shape,i))}}),zA={isDimensionStackedhl,enableDataStackul,getStackedDimensioncl},BA=(Object.freezeObject)({createListfunction(t){return dl(t.getSource(),t)},getLayoutRectla,dataStackzA,createScalefunction(t,e){var i=e;Lo.isInstance(e)h(i=new Lo(e),CA);var n=Vl(i);return n.setExtent(t[0],t[1]),Bl(n,i),n},mixinAxisModelCommonMethodsfunction(t){h(t,CA)},completeDimensionsrl,createDimensionsoA,createSymbolXl}),VA=1e-8;ql.prototype={constructorql,propertiesnull,getBoundingRectfunction(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,i=[e,e],n=[-e,-e],o=[],a=[],r=this.geometries,s=0;sr.length;s++)polygon===r[s].type&&(dn(r[s].exterior,o,a),tt(i,i,o),et(n,n,a));return 0===s&&(i[0]=i[1]=n[0]=n[1]=0),this._rect=new ue(i[0],i[1],n[0]-i[0],n[1]-i[1])},containfunction(t){var e=this.getBoundingRect(),i=this.geometries;if(!e.contain(t[0],t[1]))return!1;tfor(var n=0,o=i.length;no;n++)if(polygon===i[n].type){var a=i[n].exterior,r=i[n].interiors;if(Yl(a,t[0],t[1])){for(var s=0;s(rr.length0);s++)if(Yl(r[s]))continue t;return!0}}return!1},transformTofunction(t,e,i,n){var o=this.getBoundingRect(),a=o.widtho.height;in(n=ia)i=an;for(var r=new ue(t,e,i,n),s=o.calculateTransform(r),l=this.geometries,u=0;ul.length;u++)if(polygon===l[u].type){for(var h=l[u].exterior,c=l[u].interiors,d=0;dh.length;d++)Q(h[d],h[d],s);for(var f=0;f(cc.length0);f++)for(d=0;dc[f].length;d++)Q(c[f][d],c[f][d],s)}(o=this._rect).copy(r),this.center=[o.x+o.width2,o.y+o.height2]},cloneShallowfunction(t){null==t&&(t=this.name);var e=new ql(t,this.geometries,this.center);return e._rect=this._rect,e.transformTo=null,e}};var GA=function(t){return Kl(t),f(g(t.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length0}),function(t){var e=t.properties,i=t.geometry,n=i.coordinates,o=[];Polygon===i.type&&o.push({typepolygon,exteriorn[0],interiorsn.slice(1)}),MultiPolygon===i.type&&d(n,function(t){t[0]&&o.push({typepolygon,exteriort[0],interiorst.slice(1)})});var a=new ql(e.name,o,e.cp);return a.properties=e,a})},FA=Bi(),WA=[0,1],HA=function(t,e,i){this.dim=t,this.scale=e,this._extent=i[0,0],this.inverse=!1,this.onBand=!1};HA.prototype={constructorHA,containfunction(t){var e=this._extent,i=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]);return t=i&&t=n},containDatafunction(t){return this.contain(this.dataToCoord(t))},getExtentfunction(){return this._extent.slice()},getPixelPrecisionfunction(t){return Fo(tthis.scale.getExtent(),this._extent)},setExtentfunction(t,e){var i=this._extent;i[0]=t,i[1]=e},dataToCoordfunction(t,e){var i=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&ordinal===n.type&&fu(i=i.slice(),n.count()),Eo(t,WA,i,e)},coordToDatafunction(t,e){var i=this._extent,n=this.scale;this.onBand&&ordinal===n.type&&fu(i=i.slice(),n.count());var o=Eo(t,i,WA,e);return this.scale.scale(o)},pointToDatafunction(t,e){},getTicksCoordsfunction(t){var e=(t=t{}).tickModelthis.getTickModel(),i=Ql(this,e),n=f(i.ticks,function(t){return{coordthis.dataToCoord(t),tickValuet}},this),o=e.get(alignWithLabel);return pu(this,n,i.tickCategoryInterval,o,t.clamp),n},getViewLabelsfunction(){return Jl(this).labels},getLabelModelfunction(){return this.model.getModel(axisLabel)},getTickModelfunction(){return this.model.getModel(axisTick)},getBandWidthfunction(){var t=this._extent,e=this.scale.getExtent(),i=e[1]-e[0]+(this.onBand10);0===i&&(i=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)i},isHorizontalnull,getRotatenull,calculateCategoryIntervalfunction(){return lu(this)}};var ZA=GA,UA={};d([map,each,filter,indexOf,inherits,reduce,filter,bind,curry,isArray,isString,isObject,isFunction,extend,defaults,clone,merge],function(t){UA[t]=$_[t]});var XA={};d([extendShape,extendPath,makePath,makeImage,mergePath,resizePath,createIcon,setHoverStyle,setLabelStyle,setTextStyle,setText,getFont,updateProps,initProps,getTransform,clipPointsByRect,clipRectByRect,Group,Image,Text,Circle,Sector,Ring,Polygon,Polyline,Rect,Line,BezierCurve,Arc,IncrementalDisplayable,CompoundPath,LinearGradient,RadialGradient,BoundingRect],function(t){XA[t]=bM[t]}),OI.extend({typeseries.line,dependencies[grid,polar],getInitialDatafunction(t,e){return dl(this.getSource(),this)},defaultOption{zlevel0,z2,coordinateSystemcartesian2d,legendHoverLink!0,hoverAnimation!0,clipOverflow!0,label{positiontop},lineStyle{width2,typesolid},step!1,smooth!1,smoothMonotonenull,symbolemptyCircle,symbolSize4,symbolRotatenull,showSymbol!0,showAllSymbolauto,connectNulls!1,samplingnone,animationEasinglinear,progressive0,hoverLayerThreshold10}});var jA=mu.prototype,YA=mu.getSymbolSize=function(t,e){var i=t.getItemVisual(e,symbolSize);return i instanceof Arrayi.slice()[+i,+i]};jA._createSymbol=function(t,e,i,n,o){this.removeAll();var a=Xl(t,-1,-1,2,2,e.getItemVisual(i,color),o);a.attr({z2100,culling!0,scalevu(n)}),a.drift=yu,this._symbolType=t,this.add(a)},jA.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},jA.getSymbolPath=function(){return this.childAt(0)},jA.getScale=function(){return this.childAt(0).scale},jA.highlight=function(){this.childAt(0).trigger(emphasis)},jA.downplay=function(){this.childAt(0).trigger(normal)},jA.setZ=function(t,e){var i=this.childAt(0);i.zlevel=t,i.z=e},jA.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=tmovepointer},jA.updateData=function(t,e,i){this.silent=!1;var n=t.getItemVisual(e,symbol)circle,o=t.hostModel,a=YA(t,e),r=n!==this._symbolType;if(r){var s=t.getItemVisual(e,symbolKeepAspect);this._createSymbol(n,t,e,a,s)}else(l=this.childAt(0)).silent=!1,bo(l,{scalevu(a)},o,e);if(this._updateCommon(t,e,a,i),r){var l=this.childAt(0),u=i&&i.fadeIn,h={scalel.scale.slice()};u&&(h.style={opacityl.style.opacity}),l.scale=[0,0],u&&(l.style.opacity=0),So(l,h,o,e)}this._seriesModel=o};var qA=[itemStyle],KA=[emphasis,itemStyle],$A=[label],JA=[emphasis,label];jA._updateCommon=function(t,e,i,n){var o=this.childAt(0),r=t.hostModel,s=t.getItemVisual(e,color);image!==o.type&&o.useStyle({strokeNoScale!0});var l=n&&n.itemStyle,u=n&&n.hoverItemStyle,h=n&&n.symbolRotate,c=n&&n.symbolOffset,d=n&&n.labelModel,f=n&&n.hoverLabelModel,p=n&&n.hoverAnimation,g=n&&n.cursorStyle;if(!nt.hasItemOption){var m=n&&n.itemModeln.itemModelt.getItemModel(e);l=m.getModel(qA).getItemStyle([color]),u=m.getModel(KA).getItemStyle(),h=m.getShallow(symbolRotate),c=m.getShallow(symbolOffset),d=m.getModel($A),f=m.getModel(JA),p=m.getShallow(hoverAnimation),g=m.getShallow(cursor)}else u=a({},u);var v=o.style;o.attr(rotation,(h0)Math.PI1800),c&&o.attr(position,[Ro(c[0],i[0]),Ro(c[1],i[1])]),g&&o.attr(cursor,g),o.setColor(s,n&&n.symbolInnerColor),o.setStyle(l);var y=t.getItemVisual(e,opacity);null!=y&&(v.opacity=y);var x=t.getItemVisual(e,liftZ),_=o.__z2Origin;null!=xnull==_&&(o.__z2Origin=o.z2,o.z2+=x)null!=_&&(o.z2=_,o.__z2Origin=null);var w=n&&n.useNameLabel;co(v,u,d,f,{labelFetcherr,labelDataIndexe,defaultTextfunction(e,i){return wt.getName(e)gu(t,e)},isRectText!0,autoColors}),o.off(mouseover).off(mouseout).off(emphasis).off(normal),o.hoverStyle=u,uo(o),o.__symbolOriginalScale=vu(i),p&&r.isAnimationEnabled()&&o.on(mouseover,xu).on(mouseout,_u).on(emphasis,wu).on(normal,bu)},jA.fadeOut=function(t,e){var i=this.childAt(0);this.silent=i.silent=!0,!(e&&e.keepLabel)&&(i.style.text=null),bo(i,{style{opacity0},scale[0,0]},this._seriesModel,this.dataIndex,t)},u(mu,Zw);var QA=Su.prototype;QA.updateData=function(t,e){e=Iu(e);var i=this.group,n=t.hostModel,o=this._data,a=this._symbolCtor,r=Tu(t);oi.removeAll(),t.diff(o).add(function(n){var o=t.getItemLayout(n);if(Mu(t,o,n,e)){var s=new a(t,n,r);s.attr(position,o),t.setItemGraphicEl(n,s),i.add(s)}}).update(function(s,l){var u=o.getItemGraphicEl(l),h=t.getItemLayout(s);Mu(t,h,s,e)(u(u.updateData(t,s,r),bo(u,{positionh},n))(u=new a(t,s)).attr(position,h),i.add(u),t.setItemGraphicEl(s,u))i.remove(u)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&e.fadeOut(function(){i.remove(e)})}).execute(),this._data=t},QA.isPersistent=function(){return!0},QA.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl(function(e,i){var n=t.getItemLayout(i);e.attr(position,n)})},QA.incrementalPrepareUpdate=function(t){this._seriesScope=Tu(t),this._data=null,this.group.removeAll()},QA.incrementalUpdate=function(t,e,i){i=Iu(i);for(var n=t.start;nt.end;n++){var o=e.getItemLayout(n);if(Mu(e,o,n,i)){var a=new this._symbolCtor(e,n,this._seriesScope);a.traverse(function(t){t.isGroup(t.incremental=t.useHoverLayer=!0)}),a.attr(position,o),this.group.add(a),e.setItemGraphicEl(n,a)}}},QA.remove=function(t){var e=this.group,i=this._data;i&&ti.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})})e.removeAll()};var tD=function(t,e,i,n,o,a,r,s){for(var l=Lu(t,e),u=[],h=[],c=[],d=[],f=[],p=[],g=[],m=Au(o,e,r),v=Au(a,t,s),y=0;yl.length;y++){var x=l[y],_=!0;switch(x.cmd){case=var w=t.getItemLayout(x.idx),b=e.getItemLayout(x.idx1);(isNaN(w[0])isNaN(w[1]))&&(w=b.slice()),u.push(w),h.push(b),c.push(i[x.idx]),d.push(n[x.idx1]),g.push(e.getRawIndex(x.idx1));break;case+S=x.idx;u.push(o.dataToPoint([e.get(m.dataDimsForPoint[0],S),e.get(m.dataDimsForPoint[1],S)])),h.push(e.getItemLayout(S).slice()),c.push(Cu(m,o,e,S)),d.push(n[S]),g.push(e.getRawIndex(S));break;case-var S=x.idx,M=t.getRawIndex(S);M!==S(u.push(t.getItemLayout(S)),h.push(a.dataToPoint([t.get(v.dataDimsForPoint[0],S),t.get(v.dataDimsForPoint[1],S)])),c.push(i[S]),d.push(Cu(v,a,t,S)),g.push(M))_=!1}_&&(f.push(x),p.push(p.length))}p.sort(function(t,e){return g[t]-g[e]});for(var I=[],T=[],A=[],D=[],C=[],y=0;yp.length;y++){S=p[y];I[y]=u[S],T[y]=h[S],A[y]=c[S],D[y]=d[S],C[y]=f[S]}return{currentI,nextT,stackedOnCurrentA,stackedOnNextD,statusC}},eD=tt,iD=et,nD=Z,oD=G,aD=[],rD=[],sD=[],lD=kn.extend({typeec-polyline,shape{points[],smooth0,smoothConstraint!0,smoothMonotonenull,connectNulls!1},style{fillnull,stroke#000},brushJS(kn.prototype.brush),buildPathfunction(t,e){var i=e.points,n=0,o=i.length,a=Eu(i,e.smoothConstraint);if(e.connectNulls){for(;o0&&ku(i[o-1]);o--);for(;no&&ku(i[n]);n++);}for(;no;)n+=Pu(t,i,n,o,o,1,a.min,a.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),uD=kn.extend({typeec-polygon,shape{points[],stackedOnPoints[],smooth0,stackedOnSmooth0,smoothConstraint!0,smoothMonotonenull,connectNulls!1},brushJS(kn.prototype.brush),buildPathfunction(t,e){var i=e.points,n=e.stackedOnPoints,o=0,a=i.length,r=e.smoothMonotone,s=Eu(i,e.smoothConstraint),l=Eu(n,e.smoothConstraint);if(e.connectNulls){for(;a0&&ku(i[a-1]);a--);for(;oa&&ku(i[o]);o++);}for(;oa;){var u=Pu(t,i,o,a,a,1,s.min,s.max,e.smooth,r,e.connectNulls);Pu(t,n,o+u-1,u,a,-1,l.min,l.max,e.stackedOnSmooth,r,e.connectNulls),o+=u+1,t.closePath()}}});Mr.extend({typeline,initfunction(){var t=new Zw,e=new Su;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},renderfunction(t,e,i){var n=t.coordinateSystem,o=this.group,a=t.getData(),s=t.getModel(lineStyle),l=t.getModel(areaStyle),u=a.mapArray(a.getItemLayout),h=polar===n.type,c=this._coordSys,d=this._symbolDraw,f=this._polyline,p=this._polygon,g=this._lineGroup,m=t.get(animation),v=!l.isEmpty(),y=l.get(origin),x=Vu(n,a,Au(n,a,y)),_=t.get(showSymbol),w=_&&!h&&Uu(t,a,n),b=this._data;b&&b.eachItemGraphicEl(function(t,e){t.__temp&&(o.remove(t),b.setItemGraphicEl(e,null))}),_d.remove(),o.add(g);var S=!h&&t.get(step);f&&c.type===n.type&&S===this._step(v&&!pp=this._newPolygon(u,x,n,m)p&&!v&&(g.remove(p),p=this._polygon=null),g.setClipPath(Wu(n,!1,!1,t)),_&&d.updateData(a,{isIgnorew,clipShapeWu(n,!1,!0,t)}),a.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),Ru(this._stackedOnPoints,x)&&Ru(this._points,u)(mthis._updateAnimation(a,x,n,i,S,y)(S&&(u=Hu(u,n,S),x=Hu(x,n,S)),f.setShape({pointsu}),p&&p.setShape({pointsu,stackedOnPointsx}))))(_&&d.updateData(a,{isIgnorew,clipShapeWu(n,!1,!0,t)}),S&&(u=Hu(u,n,S),x=Hu(x,n,S)),f=this._newPolyline(u,n,m),v&&(p=this._newPolygon(u,x,n,m)),g.setClipPath(Wu(n,!0,!1,t)));var M=Zu(a,n)a.getVisual(color);f.useStyle(r(s.getLineStyle(),{fillnone,strokeM,lineJoinbevel}));var I=t.get(smooth);if(I=zu(t.get(smooth)),f.setShape({smoothI,smoothMonotonet.get(smoothMonotone),connectNullst.get(connectNulls)}),p){var T=a.getCalculationInfo(stackedOnSeries),A=0;p.useStyle(r(l.getAreaStyle(),{fillM,opacity.7,lineJoinbevel})),T&&(A=zu(T.get(smooth))),p.setShape({smoothI,stackedOnSmoothA,smoothMonotonet.get(smoothMonotone),connectNullst.get(connectNulls)})}this._data=a,this._coordSys=n,this._stackedOnPoints=x,this._points=u,this._step=S,this._valueOrigin=y},disposefunction(){},highlightfunction(t,e,i,n){var o=t.getData(),a=zi(o,n);if(!(a instanceof Array)&&null!=a&&a=0){var r=o.getItemGraphicEl(a);if(!r){var s=o.getItemLayout(a);if(!s)return;(r=new mu(o,a)).position=s,r.setZ(t.get(zlevel),t.get(z)),r.ignore=isNaN(s[0])isNaN(s[1]),r.__temp=!0,o.setItemGraphicEl(a,r),r.stopSymbolAnimation(!0),this.group.add(r)}r.highlight()}else Mr.prototype.highlight.call(this,t,e,i,n)},downplayfunction(t,e,i,n){var o=t.getData(),a=zi(o,n);if(null!=a&&a=0){var r=o.getItemGraphicEl(a);r&&(r.__temp(o.setItemGraphicEl(a,null),this.group.remove(r))r.downplay())}else Mr.prototype.downplay.call(this,t,e,i,n)},_newPolylinefunction(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new lD({shape{pointst},silent!0,z210}),this._lineGroup.add(e),this._polyline=e,e},_newPolygonfunction(t,e){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new uD({shape{pointst,stackedOnPointse},silent!0}),this._lineGroup.add(i),this._polygon=i,i},_updateAnimationfunction(t,e,i,n,o,a){var r=this._polyline,s=this._polygon,l=t.hostModel,u=tD(this._data,t,this._stackedOnPoints,e,this._coordSys,i,this._valueOrigin,a),h=u.current,c=u.stackedOnCurrent,d=u.next,f=u.stackedOnNext;o&&(h=Hu(u.current,i,o),c=Hu(u.stackedOnCurrent,i,o),d=Hu(u.next,i,o),f=Hu(u.stackedOnNext,i,o)),r.shape.__points=u.current,r.shape.points=h,bo(r,{shape{pointsd}},l),s&&(s.setShape({pointsh,stackedOnPointsc}),bo(s,{shape{pointsd,stackedOnPointsf}},l));for(var p=[],g=u.status,m=0;mg.length;m++)if(====g[m].cmd){var v=t.getItemGraphicEl(g[m].idx1);v&&p.push({elv,ptIdxm})}r.animators&&r.animators.length&&r.animators[0].during(function(){for(var t=0;tp.length;t++)p[t].el.attr(position,r.shape.__points[p[t].ptIdx])})},removefunction(t){var e=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(t,n){t.__temp&&(e.remove(t),i.setItemGraphicEl(n,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var hD=function(t,e,i){return{seriesTypet,performRawSeries!0,resetfunction(t,n,o){var a=t.getData(),r=t.get(symbol)e,s=t.get(symbolSize),l=t.get(symbolKeepAspect);if(a.setVisual({legendSymbolir,symbolr,symbolSizes,symbolKeepAspectl}),!n.isSeriesFiltered(t)){var u=function==typeof s;return{dataEacha.hasItemOptionufunction(e,i){if(function==typeof s){var n=t.getRawValue(i),o=t.getDataParams(i);e.setItemVisual(i,symbolSize,s(n,o))}if(e.hasItemOption){var a=e.getItemModel(i),r=a.getShallow(symbol,!0),l=a.getShallow(symbolSize,!0),u=a.getShallow(symbolKeepAspect,!0);null!=r&&e.setItemVisual(i,symbol,r),null!=l&&e.setItemVisual(i,symbolSize,l),null!=u&&e.setItemVisual(i,symbolKeepAspect,u)}}null}}}}},cD=function(t){return{seriesTypet,planzI(),resetfunction(t){var e=t.getData(),i=t.coordinateSystem,n=t.pipelineContext.large;if(i){var o=f(i.dimensions,function(t){return e.mapDimension(t)}).slice(0,2),a=o.length,r=e.getCalculationInfo(stackResultDimension);return hl(e,o[0])&&(o[0]=r),hl(e,o[1])&&(o[1]=r),a&&{progressfunction(t,e){for(var r=t.end-t.start,s=n&&new Float32Array(ra),l=t.start,u=0,h=[],c=[];lt.end;l++){var d;if(1===a)f=e.get(o[0],l),d=!isNaN(f)&&i.dataToPoint(f,null,c);else{var f=h[0]=e.get(o[0],l),p=h[1]=e.get(o[1],l);d=!isNaN(f)&&!isNaN(p)&&i.dataToPoint(h,null,c)}n(s[u++]=dd[0]NaN,s[u++]=dd[1]NaN)e.setItemLayout(l,d&&d.slice()[NaN,NaN])}n&&e.setLayout(symbolPoints,s)}}}}}},dD={averagefunction(t){for(var e=0,i=0,n=0;nt.length;n++)isNaN(t[n])(e+=t[n],i++);return 0===iNaNei},sumfunction(t){for(var e=0,i=0;it.length;i++)e+=t[i]0;return e},maxfunction(t){for(var e=-10,i=0;it.length;i++)t[i]e&&(e=t[i]);return isFinite(e)eNaN},minfunction(t){for(var e=10,i=0;it.length;i++)t[i]e&&(e=t[i]);return isFinite(e)eNaN},nearestfunction(t){return t[0]}},fD=function(t,e){return Math.round(t.length2)},pD=function(t){this._axes={},this._dimList=[],this.name=t};pD.prototype={constructorpD,typecartesian,getAxisfunction(t){return this._axes[t]},getAxesfunction(){return f(this._dimList,ju,this)},getAxesByScalefunction(t){return t=t.toLowerCase(),g(this.getAxes(),function(e){return e.scale.type===t})},addAxisfunction(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoordfunction(t){return this._dataCoordConvert(t,dataToCoord)},coordToDatafunction(t){return this._dataCoordConvert(t,coordToData)},_dataCoordConvertfunction(t,e){for(var i=this._dimList,n=t instanceof Array[]{},o=0;oi.length;o++){var a=i[o],r=this._axes[a];n[a]=r[e](t[a])}return n}},Yu.prototype={constructorYu,typecartesian2d,dimensions[x,y],getBaseAxisfunction(){return this.getAxesByScale(ordinal)[0]this.getAxesByScale(time)[0]this.getAxis(x)},containPointfunction(t){var e=this.getAxis(x),i=this.getAxis(y);return e.contain(e.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},containDatafunction(t){return this.getAxis(x).containData(t[0])&&this.getAxis(y).containData(t[1])},dataToPointfunction(t,e,i){var n=this.getAxis(x),o=this.getAxis(y);return i=i[],i[0]=n.toGlobalCoord(n.dataToCoord(t[0])),i[1]=o.toGlobalCoord(o.dataToCoord(t[1])),i},clampDatafunction(t,e){var i=this.getAxis(x).scale,n=this.getAxis(y).scale,o=i.getExtent(),a=n.getExtent(),r=i.parse(t[0]),s=n.parse(t[1]);return e=e[],e[0]=Math.min(Math.max(Math.min(o[0],o[1]),r),Math.max(o[0],o[1])),e[1]=Math.min(Math.max(Math.min(a[0],a[1]),s),Math.max(a[0],a[1])),e},pointToDatafunction(t,e){var i=this.getAxis(x),n=this.getAxis(y);return e=e[],e[0]=i.coordToData(i.toLocalCoord(t[0])),e[1]=n.coordToData(n.toLocalCoord(t[1])),e},getOtherAxisfunction(t){return this.getAxis(x===t.dimyx)}},u(Yu,pD);var gD=function(t,e,i,n,o){HA.call(this,t,e,i),this.type=nvalue,this.position=obottom};gD.prototype={constructorgD,index0,getAxesOnZeroOfnull,modelnull,isHorizontalfunction(){var t=this.position;returntop===tbottom===t},getGlobalExtentfunction(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]e[1]&&e.reverse(),e},getOtherAxisfunction(){this.grid.getOtherAxis()},pointToDatafunction(t,e){return this.coordToData(this.toLocalCoord(t[x===this.dim01]),e)},toLocalCoordnull,toGlobalCoordnull},u(gD,HA);var mD={show!0,zlevel0,z0,inverse!1,name,nameLocationend,nameRotatenull,nameTruncate{maxWidthnull,ellipsis...,placeholder.},nameTextStyle{},nameGap15,silent!1,triggerEvent!1,tooltip{show!1},axisPointer{},axisLine{show!0,onZero!0,onZeroAxisIndexnull,lineStyle{color#333,width1,typesolid},symbol[none,none],symbolSize[10,15]},axisTick{show!0,inside!1,length5,lineStyle{width1}},axisLabel{show!0,inside!1,rotate0,showMinLabelnull,showMaxLabelnull,margin8,fontSize12},splitLine{show!0,lineStyle{color[#ccc],width1,typesolid}},splitArea{show!1,areaStyle{color[rgba(250,250,250,0.3),rgba(200,200,200,0.3)]}}},vD={};vD.categoryAxis=n({boundaryGap!0,deduplicationnull,splitLine{show!1},axisTick{alignWithLabel!1,intervalauto},axisLabel{intervalauto}},mD),vD.valueAxis=n({boundaryGap[0,0],splitNumber5},mD),vD.timeAxis=r({scale!0,mindataMin,maxdataMax},vD.valueAxis),vD.logAxis=r({scale!0,logBase10},vD.valueAxis);var yD=[value,category,time,log],xD=function(t,e,i,a){d(yD,function(r){e.extend({typet+Axis.+r,mergeDefaultAndThemefunction(e,o){var a=this.layoutMode,s=ada(e){};n(e,o.getTheme().get(r+Axis)),n(e,this.getDefaultOption()),e.type=i(t,e),a&&ca(e,s,a)},optionUpdatedfunction(){category===this.option.type&&(this.__ordinalMeta=ml.createByAxisModel(this))},getCategoriesfunction(t){var e=this.option;if(category===e.type)return te.datathis.__ordinalMeta.categories},getOrdinalMetafunction(){return this.__ordinalMeta},defaultOptiono([{},vD[r+Axis],a],!0)})}),YM.registerSubTypeDefaulter(t+Axis,v(i,t))},_D=YM.extend({typecartesian2dAxis,axisnull,initfunction(){_D.superApply(this,init,arguments),this.resetRange()},mergeOptionfunction(){_D.superApply(this,mergeOption,arguments),this.resetRange()},restoreDatafunction(){_D.superApply(this,restoreData,arguments),this.resetRange()},getCoordSysModelfunction(){return this.ecModel.queryComponents({mainTypegrid,indexthis.option.gridIndex,idthis.option.gridId})[0]}});n(_D.prototype,CA);var wD={offset0};xD(x,_D,qu,wD),xD(y,_D,qu,wD),YM.extend({typegrid,dependencies[xAxis,yAxis],layoutModebox,coordinateSystemnull,defaultOption{show!1,zlevel0,z0,left10%,top60,right10%,bottom60,containLabel!1,backgroundColorrgba(0,0,0,0),borderWidth1,borderColor#ccc}});var bD=$u.prototype;bD.type=grid,bD.axisPointerEnabled=!0,bD.getRect=function(){return this._rect},bD.update=function(t,e){var i=this._axesMap;this._updateScale(t,this.model),d(i.x,function(t){Bl(t.scale,t.model)}),d(i.y,function(t){Bl(t.scale,t.model)});var n={};d(i.x,function(t){Ju(i,y,t,n)}),d(i.y,function(t){Ju(i,x,t,n)}),this.resize(this.model,e)},bD.resize=function(t,e,i){function n(){d(a,function(t){var e=t.isHorizontal(),i=e[0,o.width][0,o.height],n=t.inverse10;t.setExtent(i[n],i[1-n]),th(t,eo.xo.y)})}var o=la(t.getBoxLayoutParams(),{widthe.getWidth(),heighte.getHeight()});this._rect=o;var a=this._axesList;n(),!i&&t.get(containLabel)&&(d(a,function(t){if(!t.model.get(axisLabel.inside)){var e=Hl(t);if(e){var i=t.isHorizontal()heightwidth,n=t.model.get(axisLabel.margin);o[i]-=e[i]+n,top===t.positiono.y+=e.height+nleft===t.position&&(o.x+=e.width+n)}}}),n())},bD.getAxis=function(t,e){var i=this._axesMap[t];if(null!=i){if(null==e)for(var n in i)if(i.hasOwnProperty(n))return i[n];return i[e]}},bD.getAxes=function(){return this._axesList.slice()},bD.getCartesian=function(t,e){if(null!=t&&null!=e){var i=x+t+y+e;return this._coordsMap[i]}w(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,o=this._coordsList;no.length;n++)if(o[n].getAxis(x).index===to[n].getAxis(y).index===e)return o[n]},bD.getCartesians=function(){return this._coordsList.slice()},bD.convertToPixel=function(t,e,i){var n=this._findConvertTarget(t,e);return n.cartesiann.cartesian.dataToPoint(i)n.axisn.axis.toGlobalCoord(n.axis.dataToCoord(i))null},bD.convertFromPixel=function(t,e,i){var n=this._findConvertTarget(t,e);return n.cartesiann.cartesian.pointToData(i)n.axisn.axis.coordToData(n.axis.toLocalCoord(i))null},bD._findConvertTarget=function(t,e){var i,n,o=e.seriesModel,a=e.xAxisModelo&&o.getReferringComponents(xAxis)[0],r=e.yAxisModelo&&o.getReferringComponents(yAxis)[0],s=e.gridModel,u=this._coordsList;return ol(u,i=o.coordinateSystem)0&&(i=null)a&&ri=this.getCartesian(a.componentIndex,r.componentIndex)an=this.getAxis(x,a.componentIndex)rn=this.getAxis(y,r.componentIndex)s&&s.coordinateSystem===this&&(i=this._coordsList[0]),{cartesiani,axisn}},bD.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},bD._initCartesian=function(t,e,i){function n(i){return function(n,s){if(Ku(n,t,e)){var l=n.get(position);x===itop!==l&&bottom!==l&&o[l=bottom]&&(l=top===lbottomtop)left!==l&&right!==l&&o[l=left]&&(l=left===lrightleft),o[l]=!0;var u=new gD(i,Vl(n),[0,0],n.get(type),l),h=category===u.type;u.onBand=h&&n.get(boundaryGap),u.inverse=n.get(inverse),n.axis=u,u.model=n,u.grid=this,u.index=s,this._axesList.push(u),a[i][s]=u,r[i]++}}}var o={left!1,right!1,top!1,bottom!1},a={x{},y{}},r={x0,y0};if(e.eachComponent(xAxis,n(x),this),e.eachComponent(yAxis,n(y),this),!r.x!r.y)return this._axesMap={},void(this._axesList=[]);this._axesMap=a,d(a.x,function(e,i){d(a.y,function(n,o){var a=x+i+y+o,r=new Yu(a);r.grid=this,r.model=t,this._coordsMap[a]=r,this._coordsList.push(r),r.addAxis(e),r.addAxis(n)},this)},this)},bD._updateScale=function(t,e){function i(t,e,i){d(t.mapDimension(e.dim,!0),function(i){e.scale.unionExtentFromData(t,cl(t,i))})}d(this._axesList,function(t){t.scale.setExtent(10,-10)}),t.eachSeries(function(n){if(ih(n)){var o=eh(n),a=o[0],r=o[1];if(!Ku(a,e,t)!Ku(r,e,t))return;var s=this.getCartesian(a.componentIndex,r.componentIndex),l=n.getData(),u=s.getAxis(x),h=s.getAxis(y);list===l.type&&(i(l,u),i(l,h))}},this)},bD.getTooltipAxes=function(t){var e=[],i=[];return d(this.getCartesians(),function(n){var o=null!=t&&auto!==tn.getAxis(t)n.getBaseAxis(),a=n.getOtherAxis(o);l(e,o)0&&e.push(o),l(i,a)0&&i.push(a)}),{baseAxese,otherAxesi}};var SD=[xAxis,yAxis];$u.create=function(t,e){var i=[];return t.eachComponent(grid,function(n,o){var a=new $u(n,t,e);a.name=grid_+o,a.resize(n,e,!0),n.coordinateSystem=a,i.push(a)}),t.eachSeries(function(t){if(ih(t)){var e=eh(t),i=e[0],n=e[1],o=i.getCoordSysModel().coordinateSystem;t.coordinateSystem=o.getCartesian(i.componentIndex,n.componentIndex)}}),i},$u.dimensions=$u.prototype.dimensions=Yu.prototype.dimensions,Ba.register(cartesian2d,$u);var MD=Math.PI,ID=function(t,e){this.opt=e,this.axisModel=t,r(e,{labelOffset0,nameDirection1,tickDirection1,labelDirection1,silent!0}),this.group=new Zw;var i=new Zw({positione.position.slice(),rotatione.rotation});i.updateTransform(),this._transform=i.transform,this._dumbGroup=i};ID.prototype={constructorID,hasBuilderfunction(t){return!!TD[t]},addfunction(t){TD[t].call(this)},getGroupfunction(){return this.group}};var TD={axisLinefunction(){var t=this.opt,e=this.axisModel;if(e.get(axisLine.show)){var i=this.axisModel.axis.getExtent(),n=this._transform,o=[i[0],0],r=[i[1],0];n&&(Q(o,o,n),Q(r,r,n));var s=a({lineCapround},e.getModel(axisLine.lineStyle).getLineStyle());this.group.add(new rM(Xn({anidline,shape{x1o[0],y1o[1],x2r[0],y2r[1]},styles,strokeContainThresholdt.strokeContainThreshold5,silent!0,z21})));var l=e.get(axisLine.symbol),u=e.get(axisLine.symbolSize),h=e.get(axisLine.symbolOffset)0;if(number==typeof h&&(h=[h,h]),null!=l){string==typeof l&&(l=[l,l]),string!=typeof u&&number!=typeof u(u=[u,u]);var c=u[0],f=u[1];d([{rotatet.rotation+Math.PI2,offseth[0],r0},{rotatet.rotation-Math.PI2,offseth[1],rMath.sqrt((o[0]-r[0])(o[0]-r[0])+(o[1]-r[1])(o[1]-r[1]))}],function(e,i){if(none!==l[i]&&null!=l[i]){var n=Xl(l[i],-c2,-f2,c,f,s.stroke,!0),a=e.r+e.offset,r=[o[0]+aMath.cos(t.rotation),o[1]-aMath.sin(t.rotation)];n.attr({rotatione.rotate,positionr,silent!0}),this.group.add(n)}},this)}}},axisTickLabelfunction(){var t=this.axisModel,e=this.opt,i=hh(this,t,e);rh(t,ch(this,t,e),i)},axisNamefunction(){var t=this.opt,e=this.axisModel,i=T(t.axisName,e.get(name));if(i){var n,o=e.get(nameLocation),r=t.nameDirection,s=e.getModel(nameTextStyle),l=e.get(nameGap)0,u=this.axisModel.axis.getExtent(),h=u[0]u[1]-11,c=[start===ou[0]-hlend===ou[1]+hl(u[0]+u[1])2,uh(o)t.labelOffset+rl0],d=e.get(nameRotate);null!=d&&(d=dMD180);var f;uh(o)n=AD(t.rotation,null!=ddt.rotation,r)(n=oh(t,o,d0,u),null!=(f=t.axisNameAvailableWidth)&&(f=Math.abs(fMath.sin(n.rotation)),!isFinite(f)&&(f=null)));var p=s.getFont(),g=e.get(nameTruncate,!0){},m=g.ellipsis,v=T(t.nameTruncateMaxWidth,g.maxWidth,f),y=null!=m&&null!=vVM(i,v,p,m,{minChar2,placeholderg.placeholder})i,x=e.get(tooltip,!0),_=e.mainType,w={componentType_,namei,$vars[name]};w[_+Index]=e.componentIndex;var b=new qS({anidname,__fullTexti,__truncatedTexty,positionc,rotationn.rotation,silentah(e),z21,tooltipx&&x.showa({contenti,formatterfunction(){return i},formatterParamsw},x)null});fo(b.style,s,{texty,textFontp,textFills.getTextColor()e.get(axisLine.lineStyle.color),textAlignn.textAlign,textVerticalAlignn.textVerticalAlign}),e.get(triggerEvent)&&(b.eventData=nh(e),b.eventData.targetType=axisName,b.eventData.name=i),this._dumbGroup.add(b),b.updateTransform(),this.group.add(b),b.decomposeTransform()}}},AD=ID.innerTextLayout=function(t,e,i){var n,o,a=Ho(e-t);return Zo(a)(o=i0topbottom,n=center)Zo(a-MD)(o=i0bottomtop,n=center)(o=middle,n=a0&&aMDi0rightlefti0leftright),{rotationa,textAlignn,textVerticalAligno}},DD=d,CD=v,LD=Vs({typeaxis,_axisPointernull,axisPointerClassnull,renderfunction(t,e,i,n){this.axisPointerClass&&yh(t),LD.superApply(this,render,arguments),Sh(this,t,0,i,0,!0)},updateAxisPointerfunction(t,e,i,n,o){Sh(this,t,0,i,0,!1)},removefunction(t,e){var i=this._axisPointer;i&&i.remove(e),LD.superApply(this,remove,arguments)},disposefunction(t,e){Mh(this,e),LD.superApply(this,dispose,arguments)}}),kD=[];LD.registerAxisPointerClass=function(t,e){kD[t]=e},LD.getAxisPointerClass=function(t){return t&&kD[t]};var PD=[axisLine,axisTickLabel,axisName],ND=[splitArea,splitLine],OD=LD.extend({typecartesianAxis,axisPointerClassCartesianAxisPointer,renderfunction(t,e,i,n){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Zw,this.group.add(this._axisGroup),t.get(show)){var a=t.getCoordSysModel(),r=Ih(a,t),s=new ID(t,r);d(PD,s.add,s),this._axisGroup.add(s.getGroup()),d(ND,function(e){t.get(e+.show)&&this[_+e](t,a)},this),Ao(o,this._axisGroup,t),OD.superCall(this,render,t,e,i,n)}},removefunction(){this._splitAreaColors=null},_splitLinefunction(t,e){var i=t.axis;if(!i.scale.isBlank()){var n=t.getModel(splitLine),o=n.getModel(lineStyle),a=o.get(color);a=y(a)a[a];for(var s=e.coordinateSystem.getRect(),l=i.isHorizontal(),u=0,h=i.getTicksCoords({tickModeln}),c=[],d=[],f=o.getLineStyle(),p=0;ph.length;p++){var g=i.toGlobalCoord(h[p].coord);l(c[0]=g,c[1]=s.y,d[0]=g,d[1]=s.y+s.height)(c[0]=s.x,c[1]=g,d[0]=s.x+s.width,d[1]=g);var m=u++%a.length,v=h[p].tickValue;this._axisGroup.add(new rM(Xn({anidnull!=vline_+h[p].tickValuenull,shape{x1c[0],y1c[1],x2d[0],y2d[1]},styler({strokea[m]},f),silent!0})))}}},_splitAreafunction(t,e){var i=t.axis;if(!i.scale.isBlank()){var n=t.getModel(splitArea),o=n.getModel(areaStyle),a=o.get(color),s=e.coordinateSystem.getRect(),l=i.getTicksCoords({tickModeln,clamp!0});if(l.length){var u=a.length,h=this._splitAreaColors,c=R(),d=0;if(h)for(m=0;ml.length;m++){var f=h.get(l[m].tickValue);if(null!=f){d=(f+(u-1)m)%u;break}}var p=i.toGlobalCoord(l[0].coord),g=o.getAreaStyle();a=y(a)a[a];for(var m=1;ml.length;m++){var v,x,_,w,b=i.toGlobalCoord(l[m].coord);i.isHorizontal()(v=p,x=s.y,_=b-v,w=s.height,p=v+_)(v=s.x,x=p,_=s.width,p=x+(w=b-x));var S=l[m-1].tickValue;null!=S&&c.set(S,d),this._axisGroup.add(new aM({anidnull!=Sarea_+Snull,shape{xv,yx,width_,heightw},styler({filla[d]},g),silent!0})),d=(d+1)%u}this._splitAreaColors=c}}}});OD.extend({typexAxis}),OD.extend({typeyAxis}),Vs({typegrid,renderfunction(t,e){this.group.removeAll(),t.get(show)&&this.group.add(new aM({shapet.coordinateSystem.getRect(),styler({fillt.get(backgroundColor)},t.getItemStyle()),silent!0,z2-1}))}}),Ls(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}),Es(hD(line,circle,line)),Os(cD(line)),ks(IT.PROCESSOR.STATISTIC,function(t){return{seriesTypet,modifyOutputEnd!0,resetfunction(t,e,i){var n=t.getData(),o=t.get(sampling),a=t.coordinateSystem;if(cartesian2d===a.type&&o){var r=a.getBaseAxis(),s=a.getOtherAxis(r),l=r.getExtent(),u=l[1]-l[0],h=Math.round(n.count()u);if(h1){var c;string==typeof oc=dD[o]function==typeof o&&(c=o),c&&t.setData(n.downSample(n.mapDimension(s.dim),1h,c,fD))}}}}}(line));var ED=OI.extend({typeseries.__base_bar__,getInitialDatafunction(t,e){return dl(this.getSource(),this)},getMarkerPositionfunction(t){var e=this.coordinateSystem;if(e){var i=e.dataToPoint(e.clampData(t)),n=this.getData(),o=n.getLayout(offset),a=n.getLayout(size);return i[e.getBaseAxis().isHorizontal()01]+=o+a2,i}return[NaN,NaN]},defaultOption{zlevel0,z2,coordinateSystemcartesian2d,legendHoverLink!0,barMinHeight0,barMinAngle0,large!1,largeThreshold400,progressive3e3,progressiveChunkModemod,itemStyle{},emphasis{}}});ED.extend({typeseries.bar,dependencies[grid,polar],brushSelectorrect,getProgressivefunction(){return!!this.get(large)&&this.get(progressive)},getProgressiveThresholdfunction(){var t=this.get(progressiveThreshold),e=this.get(largeThreshold);return et&&(t=e),t}});var RD=Wb([[fill,color],[stroke,borderColor],[lineWidth,borderWidth],[stroke,barBorderColor],[lineWidth,barBorderWidth],[opacity],[shadowBlur],[shadowOffsetX],[shadowOffsetY],[shadowColor]]),zD={getBarItemStylefunction(t){var e=RD(this,t);if(this.getBorderLineDash){var i=this.getBorderLineDash();i&&(e.lineDash=i)}return e}},BD=[itemStyle,barBorderWidth];a(Lo.prototype,zD),Fs({typebar,renderfunction(t,e,i){this._updateDrawMode(t);var n=t.get(coordinateSystem);returncartesian2d!==n&&polar!==n(this._isLargeDrawthis._renderLarge(t,e,i)this._renderNormal(t,e,i)),this.group},incrementalPrepareRenderfunction(t,e,i){this._clear(),this._updateDrawMode(t)},incrementalRenderfunction(t,e,i,n){this._incrementalRenderLarge(t,e)},_updateDrawModefunction(t){var e=t.pipelineContext.large;(null==this._isLargeDrawe^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormalfunction(t,e,i){var n,o=this.group,a=t.getData(),r=this._data,s=t.coordinateSystem,l=s.getBaseAxis();cartesian2d===s.typen=l.isHorizontal()polar===s.type&&(n=angle===l.dim);var u=t.isAnimationEnabled()tnull;a.diff(r).add(function(e){if(a.hasValue(e)){var i=a.getItemModel(e),r=GD[s.type](a,e,i),l=VD[s.type](a,e,i,r,n,u);a.setItemGraphicEl(e,l),o.add(l),Lh(l,a,e,i,r,t,n,polar===s.type)}}).update(function(e,i){var l=r.getItemGraphicEl(i);if(a.hasValue(e)){var h=a.getItemModel(e),c=GD[s.type](a,e,h);lbo(l,{shapec},u,e)l=VD[s.type](a,e,h,c,n,u,!0),a.setItemGraphicEl(e,l),o.add(l),Lh(l,a,e,h,c,t,n,polar===s.type)}else o.remove(l)}).remove(function(t){var e=r.getItemGraphicEl(t);cartesian2d===s.typee&&Dh(t,u,e)e&&Ch(t,u,e)}).execute(),this._data=a},_renderLargefunction(t,e,i){this._clear(),Ph(t,this.group)},_incrementalRenderLargefunction(t,e){Ph(e,this.group,!0)},disposeB,removefunction(t){this._clear(t)},_clearfunction(t){var e=this.group,i=this._data;t&&t.get(animation)&&i&&!this._isLargeDrawi.eachItemGraphicEl(function(e){sector===e.typeCh(e.dataIndex,t,e)Dh(e.dataIndex,t,e)})e.removeAll(),this._data=null}});var VD={cartesian2dfunction(t,e,i,n,o,r,s){var l=new aM({shapea({},n)});if(r){var u=l.shape,h=oheightwidth,c={};u[h]=0,c[h]=n[h],bM[supdatePropsinitProps](l,{shapec},r,e)}return l},polarfunction(t,e,i,n,o,a,s){var l=n.startAnglen.endAngle,u=new QS({shaper({clockwisel},n)});if(a){var h=u.shape,c=orendAngle,d={};h[c]=o0n.startAngle,d[c]=n[c],bM[supdatePropsinitProps](u,{shaped},a,e)}return u}},GD={cartesian2dfunction(t,e,i){var n=t.getItemLayout(e),o=kh(i,n),a=n.width01-1,r=n.height01-1;return{xn.x+ao2,yn.y+ro2,widthn.width-ao,heightn.height-ro}},polarfunction(t,e,i){var n=t.getItemLayout(e);return{cxn.cx,cyn.cy,r0n.r0,rn.r,startAnglen.startAngle,endAnglen.endAngle}}},FD=kn.extend({typelargeBar,shape{points[]},buildPathfunction(t,e){for(var i=e.points,n=this.__startPoint,o=this.__valueIdx,a=0;ai.length;a+=2)n[this.__valueIdx]=i[a+o],t.moveTo(n[0],n[1]),t.lineTo(i[a],i[a+1])}});Os(v(kl,bar)),Os(fA),Es({seriesTypebar,resetfunction(t){t.getData().setVisual(legendSymbol,roundRect)}});var WD=function(t,e,i){e=y(e)&&{coordDimensionse}a({},e);var n=t.getSource(),o=oA(n,e),r=new eA(o,t);return r.initData(n,i),r},HD={updateSelectedMapfunction(t){this._targetList=y(t)t.slice()[],this._selectTargetMap=p(t[],function(t,e){return t.set(e.name,e),t},R())},selectfunction(t,e){var i=null!=ethis._targetList[e]this._selectTargetMap.get(t);single===this.get(selectedMode)&&this._selectTargetMap.each(function(t){t.selected=!1}),i&&(i.selected=!0)},unSelectfunction(t,e){var i=null!=ethis._targetList[e]this._selectTargetMap.get(t);i&&(i.selected=!1)},toggleSelectedfunction(t,e){var i=null!=ethis._targetList[e]this._selectTargetMap.get(t);if(null!=i)return this[i.selectedunSelectselect](t,e),i.selected},isSelectedfunction(t,e){var i=null!=ethis._targetList[e]this._selectTargetMap.get(t);return i&&i.selected}},ZD=Gs({typeseries.pie,initfunction(t){ZD.superApply(this,init,arguments),this.legendDataProvider=function(){return this.getRawData()},this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(t)},mergeOptionfunction(t){ZD.superCall(this,mergeOption,t),this.updateSelectedMap(this._createSelectableList())},getInitialDatafunction(t,e){return WD(this,[value])},_createSelectableListfunction(){for(var t=this.getRawData(),e=t.mapDimension(value),i=[],n=0,o=t.count();no;n++)i.push({namet.getName(n),valuet.get(e,n),selectedcr(t,n,selected)});return i},getDataParamsfunction(t){var e=this.getData(),i=ZD.superCall(this,getDataParams,t),n=[];return e.each(e.mapDimension(value),function(t){n.push(t)}),i.percent=Wo(n,t,e.hostModel.get(percentPrecision)),i.$vars.push(percent),i},_defaultLabelLinefunction(t){Ci(t,labelLine,[show]);var e=t.labelLine,i=t.emphasis.labelLine;e.show=e.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},defaultOption{zlevel0,z2,legendHoverLink!0,hoverAnimation!0,center[50%,50%],radius[0,75%],clockwise!0,startAngle90,minAngle0,selectedOffset10,hoverOffset10,avoidLabelOverlap!0,percentPrecision2,stillShowZeroSum!0,label{rotate!1,show!0,positionouter},labelLine{show!0,length15,length215,smooth!1,lineStyle{width1,typesolid}},itemStyle{borderWidth1},animationTypeexpansion,animationEasingcubicOut}});h(ZD,HD);var UD=Rh.prototype;UD.updateData=function(t,e,i){function n(){s.stopAnimation(!0),s.animateTo({shape{rh.r+l.get(hoverOffset)}},300,elasticOut)}function o(){s.stopAnimation(!0),s.animateTo({shape{rh.r}},300,elasticOut)}var s=this.childAt(0),l=t.hostModel,u=t.getItemModel(e),h=t.getItemLayout(e),c=a({},h);c.label=null,i(s.setShape(c),scale===l.getShallow(animationType)(s.shape.r=h.r0,So(s,{shape{rh.r}},l,e))(s.shape.endAngle=h.startAngle,bo(s,{shape{endAngleh.endAngle}},l,e)))bo(s,{shapec},l,e);var d=t.getItemVisual(e,color);s.useStyle(r({lineJoinbevel,filld},u.getModel(itemStyle).getItemStyle())),s.hoverStyle=u.getModel(emphasis.itemStyle).getItemStyle();var f=u.getShallow(cursor);f&&s.attr(cursor,f),Eh(this,t.getItemLayout(e),l.isSelected(null,e),l.get(selectedOffset),l.get(animation)),s.off(mouseover).off(mouseout).off(emphasis).off(normal),u.get(hoverAnimation)&&l.isAnimationEnabled()&&s.on(mouseover,n).on(mouseout,o).on(emphasis,n).on(normal,o),this._updateLabel(t,e),uo(this)},UD._updateLabel=function(t,e){var i=this.childAt(1),n=this.childAt(2),o=t.hostModel,a=t.getItemModel(e),r=t.getItemLayout(e).label,s=t.getItemVisual(e,color);bo(i,{shape{pointsr.linePoints[[r.x,r.y],[r.x,r.y],[r.x,r.y]]}},o,e),bo(n,{style{xr.x,yr.y}},o,e),n.attr({rotationr.rotation,origin[r.x,r.y],z210});var l=a.getModel(label),u=a.getModel(emphasis.label),h=a.getModel(labelLine),c=a.getModel(emphasis.labelLine),s=t.getItemVisual(e,color);co(n.style,n.hoverStyle={},l,u,{labelFetchert.hostModel,labelDataIndexe,defaultTextt.getName(e),autoColors,useInsideStyle!!r.inside},{textAlignr.textAlign,textVerticalAlignr.verticalAlign,opacityt.getItemVisual(e,opacity)}),n.ignore=n.normalIgnore=!l.get(show),n.hoverIgnore=!u.get(show),i.ignore=i.normalIgnore=!h.get(show),i.hoverIgnore=!c.get(show),i.setStyle({strokes,opacityt.getItemVisual(e,opacity)}),i.setStyle(h.getModel(lineStyle).getLineStyle()),i.hoverStyle=c.getModel(lineStyle).getLineStyle();var d=h.get(smooth);d&&!0===d&&(d=.4),i.setShape({smoothd})},u(Rh,Zw);Mr.extend({typepie,initfunction(){var t=new Zw;this._sectorGroup=t},renderfunction(t,e,i,n){if(!nn.from!==this.uid){var o=t.getData(),a=this._data,r=this.group,s=e.get(animation),l=!a,u=t.get(animationType),h=v(Oh,this.uid,t,s,i),c=t.get(selectedMode);if(o.diff(a).add(function(t){var e=new Rh(o,t);l&&scale!==u&&e.eachChild(function(t){t.stopAnimation(!0)}),c&&e.on(click,h),o.setItemGraphicEl(t,e),r.add(e)}).update(function(t,e){var i=a.getItemGraphicEl(e);i.updateData(o,t),i.off(click),c&&i.on(click,h),r.add(i),o.setItemGraphicEl(t,i)}).remove(function(t){var e=a.getItemGraphicEl(t);r.remove(e)}).execute(),s&&l&&o.count()0&&scale!==u){var d=o.getItemLayout(0),f=Math.max(i.getWidth(),i.getHeight())2,p=m(r.removeClipPath,r);r.setClipPath(this._createClipPath(d.cx,d.cy,f,d.startAngle,d.clockwise,p,t))}else r.removeClipPath();this._data=o}},disposefunction(){},_createClipPathfunction(t,e,i,n,o,a,r){var s=new QS({shape{cxt,cye,r00,ri,startAnglen,endAnglen,clockwiseo}});return So(s,{shape{endAnglen+(o1-1)Math.PI2}},r,a),s},containPointfunction(t,e){var i=e.getData().getItemLayout(0);if(i){var n=t[0]-i.cx,o=t[1]-i.cy,a=Math.sqrt(nn+oo);return a=i.r&&a=i.r0}}});var XD=function(t,e){d(e,function(e){e.update=updateView,Ps(e,function(i,n){var o={};return n.eachComponent({mainTypeseries,subTypet,queryi},function(t){t[e.method]&&t[e.method](i.name,i.dataIndex);var n=t.getData();n.each(function(e){var i=n.getName(e);o[i]=t.isSelected(i)!1})}),{namei.name,selectedo}})})},jD=function(t){return{getTargetSeriesfunction(e){var i={},n=R();return e.eachSeriesByType(t,function(t){t.__paletteScope=i,n.set(t.uid,t)}),n},resetfunction(t,e){var i=t.getRawData(),n={},o=t.getData();o.each(function(t){var e=o.getRawIndex(t);n[e]=t}),i.each(function(e){var a=n[e],r=null!=a&&o.getItemVisual(a,color,!0);if(r)i.setItemVisual(e,color,r);else{var s=i.getItemModel(e).get(itemStyle.color)t.getColorFromPalette(i.getName(e)e+,t.__paletteScope,i.count());i.setItemVisual(e,color,s),null!=a&&o.setItemVisual(a,color,s)}})}}},YD=function(t,e,i,n){var o,a,r=t.getData(),s=[],l=!1;r.each(function(i){var n,u,h,c,d=r.getItemLayout(i),f=r.getItemModel(i),p=f.getModel(label),g=p.get(position)f.get(emphasis.label.position),m=f.getModel(labelLine),v=m.get(length),y=m.get(length2),x=(d.startAngle+d.endAngle)2,_=Math.cos(x),w=Math.sin(x);o=d.cx,a=d.cy;var b=inside===ginner===g;if(center===g)n=d.cx,u=d.cy,c=center;else{var S=(b(d.r+d.r0)2_d.r_)+o,M=(b(d.r+d.r0)2wd.rw)+a;if(n=S+3_,u=M+3w,!b){var I=S+_(v+e-d.r),T=M+w(v+e-d.r),A=I+(_0-11)y,D=T;n=A+(_0-55),u=D,h=[[S,M],[I,T],[A,D]]}c=bcenter_0leftright}var C=p.getFont(),L=p.get(rotate)_0-x+Math.PI-x0,k=De(t.getFormattedLabel(i,normal)r.getName(i),C,c,top);l=!!L,d.label={xn,yu,positiong,heightk.height,lenv,len2y,linePointsh,textAlignc,verticalAlignmiddle,rotationL,insideb},bs.push(d.label)}),!l&&t.get(avoidLabelOverlap)&&Bh(s,o,a,e,i,n)},qD=2Math.PI,KD=Math.PI180,$D=function(t){return{seriesTypet,resetfunction(t,e){var i=e.findComponents({mainTypelegend});if(i&&i.length){var n=t.getData();n.filterSelf(function(t){for(var e=n.getName(t),o=0;oi.length;o++)if(!i[o].isSelected(e))return!1;return!0})}}}};XD(pie,[{typepieToggleSelect,eventpieselectchanged,methodtoggleSelected},{typepieSelect,eventpieselected,methodselect},{typepieUnSelect,eventpieunselected,methodunSelect}]),Es(jD(pie)),Os(v(function(t,e,i,n){e.eachSeriesByType(t,function(t){var e=t.getData(),n=e.mapDimension(value),o=t.get(center),a=t.get(radius);y(a)(a=[0,a]),y(o)(o=[o,o]);var r=i.getWidth(),s=i.getHeight(),l=Math.min(r,s),u=Ro(o[0],r),h=Ro(o[1],s),c=Ro(a[0],l2),d=Ro(a[1],l2),f=-t.get(startAngle)KD,p=t.get(minAngle)KD,g=0;e.each(n,function(t){!isNaN(t)&&g++});var m=e.getSum(n),v=Math.PI(mg)2,x=t.get(clockwise),_=t.get(roseType),w=t.get(stillShowZeroSum),b=e.getDataExtent(n);b[0]=0;var S=qD,M=0,I=f,T=x1-1;if(e.each(n,function(t,i){var n;if(isNaN(t))e.setItemLayout(i,{angleNaN,startAngleNaN,endAngleNaN,clockwisex,cxu,cyh,r0c,r_NaNd});else{(n=area!==_0===m&&wvtvqDg)p(n=p,S-=p)M+=t;var o=I+Tn;e.setItemLayout(i,{anglen,startAngleI,endAngleo,clockwisex,cxu,cyh,r0c,r_Eo(t,b,[c,d])d}),I=o}}),SqD&&g)if(S=.001){var A=qDg;e.each(n,function(t,i){if(!isNaN(t)){var n=e.getItemLayout(i);n.angle=A,n.startAngle=f+TiA,n.endAngle=f+T(i+1)A}})}else v=SM,I=f,e.each(n,function(t,i){if(!isNaN(t)){var n=e.getItemLayout(i),o=n.angle===pptv;n.startAngle=I,n.endAngle=I+To,I+=To}});YD(t,d,r,s)})},pie)),ks($D(pie)),OI.extend({typeseries.scatter,dependencies[grid,polar,geo,singleAxis,calendar],getInitialDatafunction(t,e){return dl(this.getSource(),this)},brushSelectorpoint,getProgressivefunction(){var t=this.option.progressive;return null==tthis.option.large5e3this.get(progressive)t},getProgressiveThresholdfunction(){var t=this.option.progressiveThreshold;return null==tthis.option.large1e4this.get(progressiveThreshold)t},defaultOption{coordinateSystemcartesian2d,zlevel0,z2,legendHoverLink!0,hoverAnimation!0,symbolSize10,large!1,largeThreshold2e3,itemStyle{opacity.8}}});var JD=Fn({shape{pointsnull},symbolProxynull,buildPathfunction(t,e){var i=e.points,n=e.size,o=this.symbolProxy,a=o.shape;if(!((t.getContextt.getContext()t)&&n[0]4))for(var r=0;ri.length;){var s=i[r++],l=i[r++];isNaN(s)isNaN(l)(a.x=s-n[0]2,a.y=l-n[1]2,a.width=n[0],a.height=n[1],o.buildPath(t,a,!0))}},afterBrushfunction(t){var e=this.shape,i=e.points,n=e.size;if(n[0]4){this.setTransform(t);for(var o=0;oi.length;){var a=i[o++],r=i[o++];isNaN(a)isNaN(r)t.fillRect(a-n[0]2,r-n[1]2,n[0],n[1])}this.restoreTransform(t)}},findDataIndexfunction(t,e){for(var i=this.shape,n=i.points,o=i.size,a=Math.max(o[0],4),r=Math.max(o[1],4),s=n.length2-1;s=0;s--){var l=2s,u=n[l]-a2,h=n[l+1]-r2;if(t=u&&e=h&&t=u+a&&e=h+r)return s}return-1}}),QD=Vh.prototype;QD.isPersistent=function(){return!this._incremental},QD.updateData=function(t){this.group.removeAll();var e=new JD({rectHover!0,cursordefault});e.setShape({pointst.getLayout(symbolPoints)}),this._setCommon(e,t),this.group.add(e),this._incremental=null},QD.updateLayout=function(t){if(!this._incremental){var e=t.getLayout(symbolPoints);this.group.eachChild(function(t){if(null!=t.startIndex){var i=2(t.endIndex-t.startIndex),n=4t.startIndex2;e=new Float32Array(e.buffer,n,i)}t.setShape(points,e)})}},QD.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()2e6(this._incremental(this._incremental=new Gn({silent!0})),this.group.add(this._incremental))this._incremental=null},QD.incrementalUpdate=function(t,e){var i;this._incremental(i=new JD,this._incremental.addDisplayable(i,!0))((i=new JD({rectHover!0,cursordefault,startIndext.start,endIndext.end})).incremental=!0,this.group.add(i)),i.setShape({pointse.getLayout(symbolPoints)}),this._setCommon(i,e,!!this._incremental)},QD._setCommon=function(t,e,i){var n=e.hostModel,o=e.getVisual(symbolSize);t.setShape(size,o instanceof Arrayo[o,o]),t.symbolProxy=Xl(e.getVisual(symbol),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]4;t.useStyle(n.getModel(itemStyle).getItemStyle(a[color,shadowBlur,shadowColor][color]));var r=e.getVisual(color);r&&t.setColor(r),i(t.seriesIndex=n.seriesIndex,t.on(mousemove,function(e){t.dataIndex=null;var i=t.findDataIndex(e.offsetX,e.offsetY);i=0&&(t.dataIndex=i+(t.startIndex0))}))},QD.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},QD._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},Fs({typescatter,renderfunction(t,e,i){var n=t.getData();this._updateSymbolDraw(n,t).updateData(n),this._finished=!0},incrementalPrepareRenderfunction(t,e,i){var n=t.getData();this._updateSymbolDraw(n,t).incrementalPrepareUpdate(n),this._finished=!1},incrementalRenderfunction(t,e,i){this._symbolDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransformfunction(t,e,i){var n=t.getData();if(this.group.dirty(),!this._finishedn.count()1e4!this._symbolDraw.isPersistent())return{update!0};var o=cD().reset(t);o.progress&&o.progress({start0,endn.count()},n),this._symbolDraw.updateLayout(n)},_updateSymbolDrawfunction(t,e){var i=this._symbolDraw,n=e.pipelineContext.large;return i&&n===this._isLargeDraw(i&&i.remove(),i=this._symbolDraw=nnew Vhnew Su,this._isLargeDraw=n,this.group.removeAll()),this.group.add(i.group),i},removefunction(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},disposefunction(){}}),Es(hD(scatter,circle)),Os(cD(scatter)),u(Gh,HA),Fh.prototype.getIndicatorAxes=function(){return this._indicatorAxes},Fh.prototype.dataToPoint=function(t,e){var i=this._indicatorAxes[e];return this.coordToPoint(i.dataToCoord(t),e)},Fh.prototype.coordToPoint=function(t,e){var i=this._indicatorAxes[e].angle;return[this.cx+tMath.cos(i),this.cy-tMath.sin(i)]},Fh.prototype.pointToData=function(t){var e=t[0]-this.cx,i=t[1]-this.cy,n=Math.sqrt(ee+ii);e=n,i=n;for(var o,a=Math.atan2(-i,e),r=10,s=-1,l=0;lthis._indicatorAxes.length;l++){var u=this._indicatorAxes[l],h=Math.abs(a-u.angle);hr&&(o=u,s=l,r=h)}return[s,+(o&&o.coodToData(n))]},Fh.prototype.resize=function(t,e){var i=t.get(center),n=e.getWidth(),o=e.getHeight(),a=Math.min(n,o)2;this.cx=Ro(i[0],n),this.cy=Ro(i[1],o),this.startAngle=t.get(startAngle)Math.PI180;var r=t.get(radius);string!=typeof r&&number!=typeof r(r=[0,r]),this.r0=Ro(r[0],a),this.r=Ro(r[1],a),d(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var i=this.startAngle+eMath.PI2this._indicatorAxes.length;i=Math.atan2(Math.sin(i),Math.cos(i)),t.angle=i},this)},Fh.prototype.update=function(t,e){function i(t){var e=Math.pow(10,Math.floor(Math.log(t)Math.LN10)),i=te;return 2===ii=5i=2,ie}var n=this._indicatorAxes,o=this._model;d(n,function(t){t.scale.setExtent(10,-10)}),t.eachSeriesByType(radar,function(e,i){if(radar===e.get(coordinateSystem)&&t.getComponent(radar,e.get(radarIndex))===o){var a=e.getData();d(n,function(t){t.scale.unionExtentFromData(a,a.mapDimension(t.dim))})}},this);var a=o.get(splitNumber);d(n,function(t,e){var n=Rl(t.scale,t.model);Bl(t.scale,t.model);var o=t.model,r=t.scale,s=o.getMin(),l=o.getMax(),u=r.getInterval();if(null!=s&&null!=l)r.setExtent(+s,+l),r.setInterval((l-s)a);else if(null!=s){var h;do{h=s+ua,r.setExtent(+s,h),r.setInterval(u),u=i(u)}while(hn[1]&&isFinite(h)&&isFinite(n[1]))}else if(null!=l){var c;do{c=l-ua,r.setExtent(c,+l),r.setInterval(u),u=i(u)}while(cn[0]&&isFinite(c)&&isFinite(n[0]))}else{r.getTicks().length-1a&&(u=i(u));var d=Math.round((n[0]+n[1])2u)u,f=Math.round(a2);r.setExtent(zo(d-fu),zo(d+(a-f)u)),r.setInterval(u)}})},Fh.dimensions=[],Fh.create=function(t,e){var i=[];return t.eachComponent(radar,function(n){var o=new Fh(n,t,e);i.push(o),n.coordinateSystem=o}),t.eachSeriesByType(radar,function(t){radar===t.get(coordinateSystem)&&(t.coordinateSystem=i[t.get(radarIndex)0])}),i},Ba.register(radar,Fh);var tC=vD.valueAxis,eC=(Bs({typeradar,optionUpdatedfunction(){var t=this.get(boundaryGap),e=this.get(splitNumber),o=this.get(scale),s=this.get(axisLine),l=this.get(axisTick),u=this.get(axisLabel),h=this.get(name),c=this.get(name.show),d=this.get(name.formatter),p=this.get(nameGap),g=this.get(triggerEvent),m=f(this.get(indicator)[],function(f){null!=f.max&&f.max0&&!f.minf.min=0null!=f.min&&f.min0&&!f.max&&(f.max=0);var m=h;if(null!=f.color&&(m=r({colorf.color},h)),f=n(i(f),{boundaryGapt,splitNumbere,scaleo,axisLines,axisTickl,axisLabelu,namef.text,nameLocationend,nameGapp,nameTextStylem,triggerEventg},!1),c(f.name=),string==typeof d){var v=f.name;f.name=d.replace({value},null!=vv)}elsefunction==typeof d&&(f.name=d(f.name,f));var y=a(new Lo(f,null,this.ecModel),CA);return y.mainType=radar,y.componentIndex=this.componentIndex,y},this);this.getIndicatorModels=function(){return m}},defaultOption{zlevel0,z0,center[50%,50%],radius75%,startAngle90,name{show!0},boundaryGap[0,0],splitNumber5,nameGap15,scale!1,shapepolygon,axisLinen({lineStyle{color#bbb}},tC.axisLine),axisLabelWh(tC.axisLabel,!1),axisTickWh(tC.axisTick,!1),splitLineWh(tC.splitLine,!0),splitAreaWh(tC.splitArea,!0),indicator[]}}),[axisLine,axisTickLabel,axisName]);Vs({typeradar,renderfunction(t,e,i){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},_buildAxesfunction(t){var e=t.coordinateSystem;d(f(e.getIndicatorAxes(),function(t){return new ID(t.model,{position[e.cx,e.cy],rotationt.angle,labelDirection-1,tickDirection-1,nameDirection1})}),function(t){d(eC,t.add,t),this.group.add(t.getGroup())},this)},_buildSplitLineAndAreafunction(t){function e(t,e,i){var n=i%e.length;return t[n]=t[n][],n}var i=t.coordinateSystem,n=i.getIndicatorAxes();if(n.length){var o=t.get(shape),a=t.getModel(splitLine),s=t.getModel(splitArea),l=a.getModel(lineStyle),u=s.getModel(areaStyle),h=a.get(show),c=s.get(show),p=l.get(color),g=u.get(color);p=y(p)p[p],g=y(g)g[g];var m=[],v=[];if(circle===o)for(var x=n[0].getTicksCoords(),_=i.cx,w=i.cy,b=0;bx.length;b++)h&&m[D=e(m,p,b)].push(new KS({shape{cx_,cyw,rx[b].coord}})),c&&bx.length-1&&v[D=e(v,g,b)].push(new tM({shape{cx_,cyw,r0x[b].coord,rx[b+1].coord}}));else for(var S,M=f(n,function(t,e){var n=t.getTicksCoords();return S=null==Sn.length-1Math.min(n.length-1,S),f(n,function(t){return i.coordToPoint(t.coord,e)})}),I=[],b=0;b=S;b++){for(var T=[],A=0;An.length;A++)T.push(M[A][b]);if(T[0]&&T.push(T[0].slice()),h&&m[D=e(m,p,b)].push(new oM({shape{pointsT}})),c&&I){var D=e(v,g,b-1);v[D].push(new nM({shape{pointsT.concat(I)}}))}I=T.slice().reverse()}var C=l.getLineStyle(),L=u.getAreaStyle();d(v,function(t,e){this.group.add(xM(t,{styler({strokenone,fillg[e%g.length]},L),silent!0}))},this),d(m,function(t,e){this.group.add(xM(t,{styler({fillnone,strokep[e%p.length]},C),silent!0}))},this)}}});var iC=OI.extend({typeseries.radar,dependencies[radar],initfunction(t){iC.superApply(this,init,arguments),this.legendDataProvider=function(){return this.getRawData()}},getInitialDatafunction(t,e){return WD(this,{generateCoordindicator_,generateCoordCount10})},formatTooltipfunction(t){var e=this.getData(),i=this.coordinateSystem.getIndicatorAxes(),n=this.getData().getName(t);return Qo(===nthis.namen)+br+f(i,function(i,n){var o=e.get(e.mapDimension(i.dim),t);return Qo(i.name+  +o)}).join(br )},defaultOption{zlevel0,z2,coordinateSystemradar,legendHoverLink!0,radarIndex0,lineStyle{width2,typesolid},label{positiontop},symbolemptyCircle,symbolSize4}});Fs({typeradar,renderfunction(t,e,n){function o(t,e){var i=t.getItemVisual(e,symbol)circle,n=t.getItemVisual(e,color);if(none!==i){var o=Hh(t.getItemVisual(e,symbolSize)),a=Xl(i,-1,-1,2,2,n);return a.attr({style{strokeNoScale!0},z2100,scale[o[0]2,o[1]2]}),a}}function a(e,i,n,a,r,s){n.removeAll();for(var l=0;li.length-1;l++){var u=o(a,r);u&&(u.__dimIdx=l,e[l](u.attr(position,e[l]),bM[sinitPropsupdateProps](u,{positioni[l]},t,r))u.attr(position,i[l]),n.add(u))}}function s(t){return f(t,function(t){return[l.cx,l.cy]})}var l=t.coordinateSystem,u=this.group,h=t.getData(),c=this._data;h.diff(c).add(function(e){var i=h.getItemLayout(e);if(i){var n=new nM,o=new oM,r={shape{pointsi}};n.shape.points=s(i),o.shape.points=s(i),So(n,r,t,e),So(o,r,t,e);var l=new Zw,u=new Zw;l.add(o),l.add(n),l.add(u),a(o.shape.points,i,u,h,e,!0),h.setItemGraphicEl(e,l)}}).update(function(e,i){var n=c.getItemGraphicEl(i),o=n.childAt(0),r=n.childAt(1),s=n.childAt(2),l={shape{pointsh.getItemLayout(e)}};l.shape.points&&(a(o.shape.points,l.shape.points,s,h,e,!1),bo(o,l,t),bo(r,l,t),h.setItemGraphicEl(e,n))}).remove(function(t){u.remove(c.getItemGraphicEl(t))}).execute(),h.eachItemGraphicEl(function(t,e){function n(){l.attr(ignore,m)}function o(){l.attr(ignore,g)}var a=h.getItemModel(e),s=t.childAt(0),l=t.childAt(1),c=t.childAt(2),d=h.getItemVisual(e,color);u.add(t),s.useStyle(r(a.getModel(lineStyle).getLineStyle(),{fillnone,stroked})),s.hoverStyle=a.getModel(emphasis.lineStyle).getLineStyle();var f=a.getModel(areaStyle),p=a.getModel(emphasis.areaStyle),g=f.isEmpty()&&f.parentModel.isEmpty(),m=p.isEmpty()&&p.parentModel.isEmpty();m=m&&g,l.ignore=g,l.useStyle(r(f.getAreaStyle(),{filld,opacity.7})),l.hoverStyle=p.getAreaStyle();var v=a.getModel(itemStyle).getItemStyle([color]),y=a.getModel(emphasis.itemStyle).getItemStyle(),x=a.getModel(label),_=a.getModel(emphasis.label);c.eachChild(function(t){t.setStyle(v),t.hoverStyle=i(y),co(t.style,t.hoverStyle,x,_,{labelFetcherh.hostModel,labelDataIndexe,labelDimIndext.__dimIdx,defaultTexth.get(h.dimensions[t.__dimIdx],e),autoColord,isRectText!0})}),t.off(mouseover).off(mouseout).off(normal).off(emphasis),t.on(emphasis,n).on(mouseover,n).on(normal,o).on(mouseout,o),uo(t)}),this._data=h},removefunction(){this.group.removeAll(),this._data=null},disposefunction(){}});Es(jD(radar)),Es(hD(radar,circle)),Os(function(t){t.eachSeriesByType(radar,function(t){var e=t.getData(),i=[],n=t.coordinateSystem;if(n){for(var o=n.getIndicatorAxes(),a=0;ao.length;a++)e.each(e.mapDimension(o[a].dim),function(t,e){i[e]=i[e][],i[e][a]=n.dataToPoint(t,a)});e.each(function(t){i[t][0]&&i[t].push(i[t][0].slice()),e.setItemLayout(t,i[t])})}})}),ks($D(radar)),Ls(function(t){var e=t.polar;if(e){y(e)(e=[e]);var i=[];d(e,function(e,n){e.indicator(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar[],y(t.radar)(t.radar=[t.radar]),t.radar.push(e))i.push(e)}),t.polar=i}d(t.series,function(t){t&&radar===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})});var nC=Q;h(Zh,mw),Uh.prototype={constructorUh,typeview,dimensions[x,y],setBoundingRectfunction(t,e,i,n){return this._rect=new ue(t,e,i,n),this._rect},getBoundingRectfunction(){return this._rect},setViewRectfunction(t,e,i,n){this.transformTo(t,e,i,n),this._viewRect=new ue(t,e,i,n)},transformTofunction(t,e,i,n){var o=this.getBoundingRect(),a=this._rawTransformable;a.transform=o.calculateTransform(new ue(t,e,i,n)),a.decomposeTransform(),this._updateTransform()},setCenterfunction(t){t&&(this._center=t,this._updateCenterAndZoom())},setZoomfunction(t){t=t1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},getDefaultCenterfunction(){var t=this.getBoundingRect();return[t.x+t.width2,t.y+t.height2]},getCenterfunction(){return this._centerthis.getDefaultCenter()},getZoomfunction(){return this._zoom1},getRoamTransformfunction(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoomfunction(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,i=this.getDefaultCenter(),n=this.getCenter(),o=this.getZoom();n=Q([],n,t),i=Q([],i,t),e.origin=n,e.position=[i[0]-n[0],i[1]-n[1]],e.scale=[o,o],this._updateTransform()},_updateTransformfunction(){var t=this._roamTransformable,e=this._rawTransformable;e.parent=t,t.updateTransform(),e.updateTransform(),yt(this.transform(this.transform=[]),e.transformmt()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform[],St(this.invTransform,this.transform),this.decomposeTransform()},getViewRectfunction(){return this._viewRect},getViewRectAfterRoamfunction(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},dataToPointfunction(t,e,i){var n=ethis._rawTransformthis.transform;return i=i[],nnC(i,t,n)G(i,t)},pointToDatafunction(t){var e=this.invTransform;return enC([],t,e)[t[0],t[1]]},convertToPixelv(Xh,dataToPoint),convertFromPixelv(Xh,pointToData),containPointfunction(t){return this.getViewRectAfterRoam().contain(t[0],t[1])}},h(Uh,mw);for(var oC=[126,25],aC=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],rC=0;rCaC.length;rC++)for(var sC=0;sCaC[rC].length;sC++)aC[rC][sC][0]=10.5,aC[rC][sC][1]=-14,aC[rC][sC][0]+=oC[0],aC[rC][sC][1]+=oC[1];var lC=function(t,e){china===t&&e.push(new ql(鍗楁捣璇稿矝,f(aC,function(t){return{typepolygon,exteriort}}),oC))},uC={鍗楁捣璇稿矝[32,80],骞夸笢[0,-10],棣欐腐[10,5],婢抽棬[-10,10],澶╂触[5,5]},hC=function(t,e){if(china===t){var i=uC[e.name];if(i){var n=e.center;n[0]+=i[0]10.5,n[1]+=-i[1]14}}},cC={Russia[100,60],United States[-99,38],United States of America[-99,38]},dC=function(t,e){if(world===t){var i=cC[e.name];if(i){var n=e.center;n[0]=i[0],n[1]=i[1]}}},fC=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],pC=function(t,e){china===t&&鍙版咕===e.name&&e.geometries.push({typepolygon,exteriorfC[0]})},gC=Bi(),mC={loadfunction(t,e){var i=gC(e).parsed;if(i)return i;var n,o=e.specialAreas{},a=e.geoJSON;try{n=aGA(a)[]}catch(t){throw new Error(Invalid geoJson formatn+t.message)}return d(n,function(e){var i=e.name;hC(t,e),dC(t,e),pC(t,e);var n=o[i];n&&e.transformTo(n.left,n.top,n.width,n.height)}),lC(t,n),gC(e).parsed={regionsn,boundingRectjh(n)}}},vC=Bi(),yC={geoJSONmC,svg{loadfunction(t,e){var i=vC(e).originRoot;if(i)return{rooti,boundingRectvC(e).boundingRect};var n=Yh(e);return vC(e).originRoot=n.root,vC(e).boundingRect=n.boundingRect,n},makeGraphicfunction(t,e,i){var n=vC(e),o=n.rootMap(n.rootMap=R()),a=o.get(i);if(a)return a;var r=n.originRoot,s=n.boundingRect;return n.originRootHostKeya=Yh(e,s).root(n.originRootHostKey=i,a=r),o.set(i,a)},removeGraphicfunction(t,e,i){var n=vC(e),o=n.rootMap;o&&o.removeKey(i),i===n.originRootHostKey&&(n.originRootHostKey=null)}}},xC={loadfunction(t,e){var i,n=[],o=R(),a=R();return d(Kh(t),function(r){var s=yC[r.type].load(t,r);d(s.regions,function(t){var i=t.name;e&&e.hasOwnProperty(i)&&(t=t.cloneShallow(i=e[i])),n.push(t),o.set(i,t),a.set(i,t.center)});var l=s.boundingRect;l&&(ii.union(l)i=l.clone())}),{regionsn,regionsMapo,nameCoordMapa,boundingRectinew ue(0,0,0,0)}},makeGraphicqh(makeGraphic),removeGraphicqh(removeGraphic)};$h.prototype={constructor$h,typegeo,dimensions[lng,lat],containCoordfunction(t){for(var e=this.regions,i=0;ie.length;i++)if(e[i].contain(t))return!0;return!1},transformTofunction(t,e,i,n){var o=this.getBoundingRect(),a=this._invertLongitute;o=o.clone(),a&&(o.y=-o.y-o.height);var r=this._rawTransformable;if(r.transform=o.calculateTransform(new ue(t,e,i,n)),r.decomposeTransform(),a){var s=r.scale;s[1]=-s[1]}r.updateTransform(),this._updateTransform()},getRegionfunction(t){return this._regionsMap.get(t)},getRegionByCoordfunction(t){for(var e=this.regions,i=0;ie.length;i++)if(e[i].contain(t))return e[i]},addGeoCoordfunction(t,e){this._nameCoordMap.set(t,e)},getGeoCoordfunction(t){return this._nameCoordMap.get(t)},getBoundingRectfunction(){return this._rect},dataToPointfunction(t,e,i){if(string==typeof t&&(t=this.getGeoCoord(t)),t)return Uh.prototype.dataToPoint.call(this,t,e,i)},convertToPixelv(Jh,dataToPoint),convertFromPixelv(Jh,pointToData)},h($h,Uh);var _C={dimensions$h.prototype.dimensions,createfunction(t,e){var i=[];t.eachComponent(geo,function(t,n){var o=t.get(map),a=t.get(aspectScale),r=!0,s=pT.retrieveMap(o);s&&s[0]&&svg===s[0].type(null==a&&(a=1),r=!1)null==a&&(a=.75);var l=new $h(o+n,o,t.get(nameMap),r);l.aspectScale=a,l.zoomLimit=t.get(scaleLimit),i.push(l),tc(l,t),t.coordinateSystem=l,l.model=t,l.resize=Qh,l.resize(t,e)}),t.eachSeries(function(t){if(geo===t.get(coordinateSystem)){var e=t.get(geoIndex)0;t.coordinateSystem=i[e]}});var n={};return t.eachSeriesByType(map,function(t){if(!t.getHostGeoModel()){var e=t.getMapType();n[e]=n[e][],n[e].push(t)}}),d(n,function(t,n){var a=new $h(n,n,o(f(t,function(t){return t.get(nameMap)})));a.zoomLimit=T.apply(null,f(t,function(t){return t.get(scaleLimit)})),i.push(a),a.resize=Qh,a.aspectScale=t[0].get(aspectScale),a.resize(t[0],e),d(t,function(t){t.coordinateSystem=a,tc(a,t)})}),i},getFilledRegionsfunction(t,e,i){for(var n=(t[]).slice(),o=R(),a=0;an.length;a++)o.set(n[a].name,n[a]);return d(xC.load(e,i).regions,function(t){var e=t.name;!o.get(e)&&n.push({namee})}),n}};Ns(geo,_C);var wC=OI.extend({typeseries.map,dependencies[geo],layoutModebox,needsDrawMap!1,seriesGroup[],initfunction(t){wC.superApply(this,init,arguments),this.updateSelectedMap(this._createSelectableList())},getInitialDatafunction(t){return WD(this,[value])},mergeOptionfunction(t){wC.superApply(this,mergeOption,arguments),this.updateSelectedMap(this._createSelectableList())},_createSelectableListfunction(){for(var t=this.getRawData(),e=t.mapDimension(value),i=[],n=0,o=t.count();no;n++)i.push({namet.getName(n),valuet.get(e,n),selectedcr(t,n,selected)});return i=_C.getFilledRegions(i,this.getMapType(),this.option.nameMap)},getHostGeoModelfunction(){var t=this.option.geoIndex;return null!=tthis.dependentModels.geo[t]null},getMapTypefunction(){return(this.getHostGeoModel()this).option.map},_fillOptionfunction(t,e){},getRawValuefunction(t){var e=this.getData();return e.get(e.mapDimension(value),t)},getRegionModelfunction(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltipfunction(t){for(var e=this.getData(),i=$o(this.getRawValue(t)),n=e.getName(t),o=this.seriesGroup,a=[],r=0;ro.length;r++){var s=o[r].originalData.indexOfName(n),l=e.mapDimension(value);isNaN(o[r].originalData.get(l,s))a.push(Qo(o[r].name))}return a.join(, )+br +Qo(n+  +i)},getTooltipPositionfunction(t){if(null!=t){var e=this.getData().getName(t),i=this.coordinateSystem,n=i.getRegion(e);return n&&i.dataToPoint(n.center)}},setZoomfunction(t){this.option.zoom=t},setCenterfunction(t){this.option.center=t},defaultOption{zlevel0,z2,coordinateSystemgeo,map,leftcenter,topcenter,aspectScale.75,showLegendSymbol!0,dataRangeHoverLink!0,boundingCoordsnull,centernull,zoom1,scaleLimitnull,label{show!1,color#000},itemStyle{borderWidth.5,borderColor#444,areaColor#eee},emphasis{label{show!0,colorrgb(100,0,0)},itemStyle{areaColorrgba(255,215,0,0.8)}}}});h(wC,HD);var bC=0_ec_interaction_mutex;Ps({typetakeGlobalCursor,eventglobalCursorTaken,updateupdate},function(){}),h(ac,aw);var SC={axisPointer1,tooltip1,brush1};_c.prototype={constructor_c,drawfunction(t,e,i,n,o){var a=geo===t.mainType,r=t.getData&&t.getData();a&&e.eachComponent({mainTypeseries,subTypemap},function(e){re.getHostGeoModel()!==t(r=e.getData())});var s=t.coordinateSystem;this._updateBackground(s);var l=this._regionsGroup,u=this.group,h=s.scale,c={positions.position,scaleh};!l.childAt(0)ou.attr(c)bo(u,c,t),l.removeAll();var f=[itemStyle],p=[emphasis,itemStyle],g=[label],m=[emphasis,label],v=R();d(s.regions,function(e){var i=v.get(e.name)v.set(e.name,new Zw),n=new hM({shape{paths[]}});i.add(n);var o,s=(C=t.getRegionModel(e.name)t).getModel(f),u=C.getModel(p),c=vc(s),y=vc(u),x=C.getModel(g),_=C.getModel(m);if(r){o=r.indexOfName(e.name);var w=r.getItemVisual(o,color,!0);w&&(c.fill=w)}d(e.geometries,function(t){if(polygon===t.type){n.shape.paths.push(new nM({shape{pointst.exterior}}));for(var e=0;e(t.interiorst.interiors.length0);e++)n.shape.paths.push(new nM({shape{pointst.interiors[e]}}))}}),n.setStyle(c),n.style.strokeNoScale=!0,n.culling=!0;var b=x.get(show),S=_.get(show),M=r&&isNaN(r.get(r.mapDimension(value),o)),I=r&&r.getItemLayout(o);if(aM&&(bS)I&&I.showLabel){var T,A=ae.nameo;(!ro=0)&&(T=t);var D=new qS({positione.center.slice(),scale[1h[0],1h[1]],z210,silent!0});co(D.style,D.hoverStyle={},x,_,{labelFetcherT,labelDataIndexA,defaultTexte.name,useInsideStyle!1},{textAligncenter,textVerticalAlignmiddle}),i.add(D)}if(r)r.setItemGraphicEl(o,i);else{var C=t.getRegionModel(e.name);n.eventData={componentTypegeo,componentIndext.componentIndex,geoIndext.componentIndex,namee.name,regionC&&C.option{}}}(i.__regions(i.__regions=[])).push(e),uo(i,y,{hoverSilentOnTouch!!t.get(selectedMode)}),l.add(i)}),this._updateController(t,e,i),yc(this,t,l,i,n),xc(t,l)},removefunction(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&xC.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackgroundfunction(t){var e=t.map;this._mapName!==e&&d(xC.makeGraphic(e,this.uid),function(t){this._backgroundGroup.add(t)},this),this._mapName=e},_updateControllerfunction(t,e,i){function n(){var e={typegeoRoam,componentTypel};return e[l+Id]=t.id,e}var o=t.coordinateSystem,r=this._controller,s=this._controllerHost;s.zoomLimit=t.get(scaleLimit),s.zoom=o.getZoom(),r.enable(t.get(roam)!1);var l=t.mainType;r.off(pan).on(pan,function(t){this._mouseDownFlag=!1,pc(s,t.dx,t.dy),i.dispatchAction(a(n(),{dxt.dx,dyt.dy}))},this),r.off(zoom).on(zoom,function(t){if(this._mouseDownFlag=!1,gc(s,t.scale,t.originX,t.originY),i.dispatchAction(a(n(),{zoomt.scale,originXt.originX,originYt.originY})),this._updateGroup){var e=this.group.scale;this._regionsGroup.traverse(function(t){text===t.type&&t.attr(scale,[1e[0],1e[1]])})}},this),r.setPointerChecker(function(e,n,a){return o.getViewRectAfterRoam().contain(n,a)&&!mc(e,i,t)})}},Fs({typemap,renderfunction(t,e,i,n){if(!nmapToggleSelect!==n.typen.from!==this.uid){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(n&&geoRoam===n.type&&series===n.componentType&&n.seriesId===t.id)(a=this._mapDraw)&&o.add(a.group);else if(t.needsDrawMap){var a=this._mapDrawnew _c(i,!0);o.add(a.group),a.draw(t,e,i,this,n),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get(showLegendSymbol)&&e.getComponent(legend)&&this._renderSymbols(t,e,i)}}},removefunction(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},disposefunction(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbolsfunction(t,e,i){var n=t.originalData,o=this.group;n.each(n.mapDimension(value),function(e,i){if(!isNaN(e)){var a=n.getItemLayout(i);if(a&&a.point){var r=a.point,s=a.offset,l=new KS({style{fillt.getData().getVisual(color)},shape{cxr[0]+9s,cyr[1],r3},silent!0,z2s810});if(!s){var u=t.mainSeries.getData(),h=n.getName(i),c=u.indexOfName(h),d=n.getItemModel(i),f=d.getModel(label),p=d.getModel(emphasis.label),g=u.getItemGraphicEl(c),m=A(t.getFormattedLabel(i,normal),h),v=A(t.getFormattedLabel(i,emphasis),m),y=function(){var t=fo({},p,{textp.get(show)vnull},{isRectText!0,useInsideStyle!1},!0);l.style.extendFrom(t),l.__mapOriginalZ2=l.z2,l.z2+=1},x=function(){fo(l.style,f,{textf.get(show)mnull,textPositionf.getShallow(position)bottom},{isRectText!0,useInsideStyle!1}),null!=l.__mapOriginalZ2&&(l.z2=l.__mapOriginalZ2,l.__mapOriginalZ2=null)};g.on(mouseover,y).on(mouseout,x).on(emphasis,y).on(normal,x),x()}o.add(l)}}})}}),Ps({typegeoRoam,eventgeoRoam,updateupdateTransform},function(t,e){var i=t.componentTypeseries;e.eachComponent({mainTypei,queryt},function(e){var n=e.coordinateSystem;if(geo===n.type){var o=wc(n,t,e.get(scaleLimit));e.setCenter&&e.setCenter(o.center),e.setZoom&&e.setZoom(o.zoom),series===i&&d(e.seriesGroup,function(t){t.setCenter(o.center),t.setZoom(o.zoom)})}})});Os(function(t){var e={};t.eachSeriesByType(map,function(i){var n=i.getMapType();if(!i.getHostGeoModel()&&!e[n]){var o={};d(i.seriesGroup,function(e){var i=e.coordinateSystem,n=e.originalData;e.get(showLegendSymbol)&&t.getComponent(legend)&&n.each(n.mapDimension(value),function(t,e){var a=n.getName(e),r=i.getRegion(a);if(r&&!isNaN(t)){var s=o[a]0,l=i.dataToPoint(r.center);o[a]=s+1,n.setItemLayout(e,{pointl,offsets})}})});var a=i.getData();a.each(function(t){var e=a.getName(t),i=a.getItemLayout(t){};i.showLabel=!o[e],a.setItemLayout(t,i)}),e[n]=!0}})}),Es(function(t){t.eachSeriesByType(map,function(t){var e=t.get(color),i=t.getModel(itemStyle),n=i.get(areaColor),o=i.get(color)e[t.seriesIndex%e.length];t.getData().setVisual({areaColorn,coloro})})}),ks(IT.PROCESSOR.STATISTIC,function(t){var e={};t.eachSeriesByType(map,function(t){var i=t.getHostGeoModel(),n=io+i.idi+t.getMapType();(e[n]=e[n][]).push(t)}),d(e,function(t,e){for(var i=bc(f(t,function(t){return t.getData()}),t[0].get(mapValueCalculation)),n=0;nt.length;n++)t[n].originalData=t[n].getData();for(n=0;nt.length;n++)t[n].seriesGroup=t,t[n].needsDrawMap=0===n&&!t[n].getHostGeoModel(),t[n].setData(i.cloneShallow()),t[n].mainSeries=t[0]})}),Ls(function(t){var e=[];d(t.series,function(t){t&&map===t.type&&(e.push(t),t.map=t.mapt.mapType,r(t,t.mapLocation))})}),XD(map,[{typemapToggleSelect,eventmapselectchanged,methodtoggleSelected},{typemapSelect,eventmapselected,methodselect},{typemapUnSelect,eventmapunselected,methodunSelect}]);var MC=d,IC=0__link_datas,TC=0__link_mainData,AC=function(t,e){this.name=t,this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=e};AC.prototype={constructorAC,isRemovedfunction(){return this.dataIndex0},eachNodefunction(t,e,i){function==typeof t&&(i=e,e=t,t=null),_(t=t{})&&(t={ordert});var n,o=t.orderpreorder,a=this[t.attrchildren];preorder===o&&(n=e.call(i,this));for(var r=0;!n&&ra.length;r++)a[r].eachNode(t,e,i);postorder===o&&e.call(i,this)},updateDepthAndHeightfunction(t){var e=0;this.depth=t;for(var i=0;ithis.children.length;i++){var n=this.children[i];n.updateDepthAndHeight(t+1),n.heighte&&(e=n.height)}this.height=e+1},getNodeByIdfunction(t){if(this.getId()===t)return this;for(var e=0,i=this.children,n=i.length;en;e++){var o=i[e].getNodeById(t);if(o)return o}},containsfunction(t){if(t===this)return!0;for(var e=0,i=this.children,n=i.length;en;e++){var o=i[e].contains(t);if(o)return o}},getAncestorsfunction(t){for(var e=[],i=tthisthis.parentNode;i;)e.push(i),i=i.parentNode;return e.reverse(),e},getValuefunction(t){var e=this.hostTree.data;return e.get(e.getDimension(tvalue),this.dataIndex)},setLayoutfunction(t,e){this.dataIndex=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayoutfunction(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModelfunction(t){if(!(this.dataIndex0)){var e,i=this.hostTree,n=i.data.getItemModel(this.dataIndex),o=this.getLevelModel();return o0!==this.children.length&&(0===this.children.length!1!==this.isExpand)(e=this.getLeavesModel()),n.getModel(t,(oei.hostModel).getModel(t))}},getLevelModelfunction(){return(this.hostTree.levelModels[])[this.depth]},getLeavesModelfunction(){return this.hostTree.leavesModel},setVisualfunction(t,e){this.dataIndex=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisualfunction(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndexfunction(){return this.hostTree.data.getRawIndex(this.dataIndex)},getIdfunction(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOffunction(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},isDescendantOffunction(t){return t!==this&&t.isAncestorOf(this)}},kc.prototype={constructorkc,typetree,eachNodefunction(t,e,i){this.root.eachNode(t,e,i)},getNodeByDataIndexfunction(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByNamefunction(t){return this.root.getNodeByName(t)},updatefunction(){for(var t=this.data,e=this._nodes,i=0,n=e.length;in;i++)e[i].dataIndex=-1;for(var i=0,n=t.count();in;i++)e[t.getRawIndex(i)].dataIndex=i},clearLayoutsfunction(){this.data.clearItemLayouts()}},kc.createTree=function(t,e,i){function n(t,e){var i=t.value;r=Math.max(r,y(i)i.length1),a.push(t);var s=new AC(t.name,o);ePc(s,e)o.root=s,o._nodes.push(s);var l=t.children;if(l)for(var u=0;ul.length;u++)n(l[u],s)}var o=new kc(e,i.levels,i.leaves),a=[],r=1;n(t),o.root.updateDepthAndHeight(0);var s=oA(a,{coordDimensions[value],dimensionsCountr}),l=new eA(s,e);return l.initData(a),Sc({mainDatal,structo,structAttrtree}),o.update(),o},OI.extend({typeseries.tree,layoutInfonull,layoutModebox,getInitialDatafunction(t){var e={namet.name,childrent.data},i=t.leaves{},n={};n.leaves=i;var o=kc.createTree(e,this,n),a=0;o.eachNode(preorder,function(t){t.deptha&&(a=t.depth)});var r=t.expandAndCollapse&&t.initialTreeDepth=0t.initialTreeDeptha;return o.root.eachNode(preorder,function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed!e.collapsedt.depth=r}),o.data},getOrientfunction(){var t=this.get(orient);returnhorizontal===tt=LRvertical===t&&(t=TB),t},setZoomfunction(t){this.option.zoom=t},setCenterfunction(t){this.option.center=t},formatTooltipfunction(t){for(var e=this.getData().tree,i=e.root.children[0],n=e.getNodeByDataIndex(t),o=n.getValue(),a=n.name;n&&n!==i;)a=n.parentNode.name+.+a,n=n.parentNode;return Qo(a+(isNaN(o)null==o  +o))},defaultOption{zlevel0,z2,coordinateSystemview,left12%,top12%,right12%,bottom12%,layoutorthogonal,roam!1,nodeScaleRatio.4,centernull,zoom1,orientLR,symbolemptyCircle,symbolSize7,expandAndCollapse!0,initialTreeDepth2,lineStyle{color#ccc,width1.5,curveness.5},itemStyle{colorlightsteelblue,borderColor#c23531,borderWidth1.5},label{show!0,color#555},leaves{label{show!0}},animationEasinglinear,animationDuration700,animationDurationUpdate1e3}}),Fs({typetree,initfunction(t,e){this._oldTree,this._mainGroup=new Zw,this._controller=new ac(e.getZr()),this._controllerHost={targetthis.group},this.group.add(this._mainGroup)},renderfunction(t,e,i,n){var o=t.getData(),a=t.layoutInfo,r=this._mainGroup,s=t.get(layout);radial===sr.attr(position,[a.x+a.width2,a.y+a.height2])r.attr(position,[a.x,a.y]),this._updateViewCoordSys(t),this._updateController(t,e,i);var l=this._data,u={expandAndCollapset.get(expandAndCollapse),layouts,orientt.getOrient(),curvaturet.get(lineStyle.curveness),symbolRotatet.get(symbolRotate),symbolOffsett.get(symbolOffset),hoverAnimationt.get(hoverAnimation),useNameLabel!0,fadeIn!0};o.diff(l).add(function(e){Xc(o,e)&&Yc(o,e,null,r,t,u)}).update(function(e,i){var n=l.getItemGraphicEl(i);Xc(o,e)Yc(o,e,n,r,t,u)n&&qc(l,i,n,r,t,u)}).remove(function(e){var i=l.getItemGraphicEl(e);i&&qc(l,e,i,r,t,u)}).execute(),this._nodeScaleRatio=t.get(nodeScaleRatio),this._updateNodeAndLinkScale(t),!0===u.expandAndCollapse&&o.eachItemGraphicEl(function(e,n){e.off(click).on(click,function(){i.dispatchAction({typetreeExpandAndCollapse,seriesIdt.id,dataIndexn})})}),this._data=o},_updateViewCoordSysfunction(t){var e=t.getData(),i=[];e.each(function(t){var n=e.getItemLayout(t);!nisNaN(n.x)isNaN(n.y)i.push([+n.x,+n.y])});var n=[],o=[];dn(i,n,o),o[0]-n[0]==0&&(o[0]+=1,n[0]-=1),o[1]-n[1]==0&&(o[1]+=1,n[1]-=1);var a=t.coordinateSystem=new Uh;a.zoomLimit=t.get(scaleLimit),a.setBoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1]),a.setCenter(t.get(center)),a.setZoom(t.get(zoom)),this.group.attr({positiona.position,scalea.scale}),this._viewCoordSys=a},_updateControllerfunction(t,e,i){var n=this._controller,o=this._controllerHost,a=this.group;n.setPointerChecker(function(e,n,o){var r=a.getBoundingRect();return r.applyTransform(a.transform),r.contain(n,o)&&!mc(e,i,t)}),n.enable(t.get(roam)),o.zoomLimit=t.get(scaleLimit),o.zoom=t.coordinateSystem.getZoom(),n.off(pan).off(zoom).on(pan,function(e){pc(o,e.dx,e.dy),i.dispatchAction({seriesIdt.id,typetreeRoam,dxe.dx,dye.dy})},this).on(zoom,function(e){gc(o,e.scale,e.originX,e.originY),i.dispatchAction({seriesIdt.id,typetreeRoam,zoome.scale,originXe.originX,originYe.originY}),this._updateNodeAndLinkScale(t)},this)},_updateNodeAndLinkScalefunction(t){var e=t.getData(),i=this._getNodeGlobalScale(t),n=[i,i];e.eachItemGraphicEl(function(t,e){t.attr(scale,n)})},_getNodeGlobalScalefunction(t){var e=t.coordinateSystem;if(view!==e.type)return 1;var i=this._nodeScaleRatio,n=e.scale,o=n&&n[0]1;return((e.getZoom()-1)i+1)o},disposefunction(){this._controller&&this._controller.dispose(),this._controllerHost={}},removefunction(){this._mainGroup.removeAll(),this._data=null}}),Ps({typetreeExpandAndCollapse,eventtreeExpandAndCollapse,updateupdate},function(t,e){e.eachComponent({mainTypeseries,subTypetree,queryt},function(e){var i=t.dataIndex,n=e.getData().tree.getNodeByDataIndex(i);n.isExpand=!n.isExpand})}),Ps({typetreeRoam,eventtreeRoam,updatenone},function(t,e){e.eachComponent({mainTypeseries,subTypetree,queryt},function(e){var i=wc(e.coordinateSystem,t);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)})});Es(hD(tree,circle)),Os(function(t,e){t.eachSeriesByType(tree,function(t){Qc(t,e)})}),OI.extend({typeseries.treemap,layoutModebox,dependencies[grid,polar],_viewRootnull,defaultOption{progressive0,hoverLayerThreshold10,leftcenter,topmiddle,rightnull,bottomnull,width80%,height80%,sort!0,clipWindoworigin,squareRatio.5(1+Math.sqrt(5)),leafDepthnull,drillDownIcon鈻�,zoomToNodeRatio.1024,roam!0,nodeClickzoomToNode,animation!0,animationDurationUpdate900,animationEasingquinticInOut,breadcrumb{show!0,height22,leftcenter,topbottom,emptyItemWidth25,itemStyle{colorrgba(0,0,0,0.7),borderColorrgba(255,255,255,0.7),borderWidth1,shadowColorrgba(150,150,150,1),shadowBlur3,shadowOffsetX0,shadowOffsetY0,textStyle{color#fff}},emphasis{textStyle{}}},label{show!0,distance0,padding5,positioninside,color#fff,ellipsis!0},upperLabel{show!1,position[0,50%],height20,color#fff,ellipsis!0,verticalAlignmiddle},itemStyle{colornull,colorAlphanull,colorSaturationnull,borderWidth0,gapWidth0,borderColor#fff,borderColorSaturationnull},emphasis{upperLabel{show!0,position[0,50%],color#fff,ellipsis!0,verticalAlignmiddle}},visualDimension0,visualMinnull,visualMaxnull,color[],colorAlphanull,colorSaturationnull,colorMappingByindex,visibleMin10,childrenVisibleMinnull,levels[]},getInitialDatafunction(t,e){var i={namet.name,childrent.data};od(i);var n=t.levels[];n=t.levels=ad(n,e);var o={};return o.levels=n,kc.createTree(i,this,o).data},optionUpdatedfunction(){this.resetViewRoot()},formatTooltipfunction(t){var e=this.getData(),i=this.getRawValue(t),n=$o(y(i)i[0]i);return Qo(e.getName(t)+ +n)},getDataParamsfunction(t){var e=OI.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=nd(i,this),e},setLayoutInfofunction(t){this.layoutInfo=this.layoutInfo{},a(this.layoutInfo,t)},mapIdToIndexfunction(t){var e=this._idIndexMap;e(e=this._idIndexMap=R(),this._idIndexMapCount=0);var i=e.get(t);return null==i&&e.set(t,i=this._idIndexMapCount++),i},getViewRootfunction(){return this._viewRoot},resetViewRootfunction(t){tthis._viewRoot=tt=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===ee.contains(t))(this._viewRoot=e)}});var DC=5;rd.prototype={constructorrd,renderfunction(t,e,i,n){var o=t.getModel(breadcrumb),a=this.group;if(a.removeAll(),o.get(show)&&i){var r=o.getModel(itemStyle),s=r.getModel(textStyle),l={pos{lefto.get(left),righto.get(right),topo.get(top),bottomo.get(bottom)},box{widthe.getWidth(),heighte.getHeight()},emptyItemWidtho.get(emptyItemWidth),totalWidth0,renderList[]};this._prepare(i,l,s),this._renderContent(t,l,r,s,n),ua(a,l.pos,l.box)}},_preparefunction(t,e,i){for(var n=t;n;n=n.parentNode){var o=n.getModel().get(name),a=i.getTextRect(o),r=Math.max(a.width+16,e.emptyItemWidth);e.totalWidth+=r+8,e.renderList.push({noden,texto,widthr})}},_renderContentfunction(t,e,i,n,o){for(var a=0,s=e.emptyItemWidth,l=t.get(breadcrumb.height),u=sa(e.pos,e.box),h=e.totalWidth,c=e.renderList,d=c.length-1;d=0;d--){var f=c[d],p=f.node,g=f.width,m=f.text;hu.width&&(h-=g-s,g=s,m=null);var y=new nM({shape{pointssd(a,0,g,l,d===c.length-1,0===d)},styler(i.getItemStyle(),{lineJoinbevel,textm,textFilln.getTextColor(),textFontn.getFont()}),z10,onclickv(o,p)});this.group.add(y),ld(y,t,p),a+=g+8}},removefunction(){this.group.removeAll()}};var CC=m,LC=Zw,kC=aM,PC=d,NC=[label],OC=[emphasis,label],EC=[upperLabel],RC=[emphasis,upperLabel],zC=10,BC=1,VC=2,GC=Wb([[fill,color],[stroke,strokeColor],[lineWidth,strokeWidth],[shadowBlur],[shadowOffsetX],[shadowOffsetY],[shadowColor]]),FC=function(t){var e=GC(t);return e.stroke=e.fill=e.lineWidth=null,e};Fs({typetreemap,initfunction(t,e){this._containerGroup,this._storage={nodeGroup[],background[],content[]},this._oldTree,this._breadcrumb,this._controller,this._state=ready},renderfunction(t,e,i,n){if(!(l(e.findComponents({mainTypeseries,subTypetreemap,queryn}),t)0)){this.seriesModel=t,this.api=i,this.ecModel=e;var o=td(n,[treemapZoomToNode,treemapRootToNode],t),a=n&&n.type,r=t.layoutInfo,s=!this._oldTree,u=this._storage,h=treemapRootToNode===a&&o&&u{rootNodeGroupu.nodeGroup[o.node.getRawIndex()],directionn.direction}null,c=this._giveContainerGroup(r),d=this._doRender(c,t,h);sa&&treemapZoomToNode!==a&&treemapRootToNode!==ad.renderFinally()this._doAnimation(c,d,t,h),this._resetController(i),this._renderBreadcrumb(t,i,o)}},_giveContainerGroupfunction(t){var e=this._containerGroup;return e(e=this._containerGroup=new LC,this._initEvents(e),this.group.add(e)),e.attr(position,[t.x,t.y]),e},_doRenderfunction(t,e,i){function n(t,e,i,o,a){function r(t){return t.getId()}function s(r,s){var l=null!=rt[r]null,u=null!=se[s]null,c=h(l,u,i,a);c&&n(l&&l.viewChildren[],u&&u.viewChildren[],c,o,a+1)}o(e=t,PC(t,function(t,e){!t.isRemoved()&&s(e,e)}))new Hs(e,t,r,r).add(s).update(s).remove(v(s,null)).execute()}var o=e.getData().tree,a=this._oldTree,r={nodeGroup[],background[],content[]},s={nodeGroup[],background[],content[]},l=this._storage,u=[],h=v(hd,e,s,l,i,r,u);n(o.root[o.root][],a&&a.root[a.root][],t,o===a!a,0);var c=function(t){var e={nodeGroup[],background[],content[]};return t&&PC(t,function(t,i){var n=e[i];PC(t,function(t){t&&(n.push(t),t.__tmWillDelete=1)})}),e}(l);return this._oldTree=o,this._storage=s,{lastsForAnimationr,willDeleteElsc,renderFinallyfunction(){PC(c,function(t){PC(t,function(t){t.parent&&t.parent.remove(t)})}),PC(u,function(t){t.invisible=!0,t.dirty()})}}},_doAnimationfunction(t,e,i,n){if(i.get(animation)){var o=i.get(animationDurationUpdate),r=i.get(animationEasing),s=ud();PC(e.willDeleteEls,function(t,e){PC(t,function(t,i){if(!t.invisible){var a,l=t.parent;if(n&&drillDown===n.direction)a=l===n.rootNodeGroup{shape{x0,y0,widthl.__tmNodeWidth,heightl.__tmNodeHeight},style{opacity0}}{style{opacity0}};else{var u=0,h=0;l.__tmWillDelete(u=l.__tmNodeWidth2,h=l.__tmNodeHeight2),a=nodeGroup===e{position[u,h],style{opacity0}}{shape{xu,yh,width0,height0},style{opacity0}}}a&&s.add(t,a,o,r)}})}),PC(this._storage,function(t,i){PC(t,function(t,n){var l=e.lastsForAnimation[i][n],u={};l&&(nodeGroup===il.old&&(u.position=t.position.slice(),t.attr(position,l.old))(l.old&&(u.shape=a({},t.shape),t.setShape(l.old)),l.fadein(t.setStyle(opacity,0),u.style={opacity1})1!==t.style.opacity&&(u.style={opacity1})),s.add(t,u,o,r))})},this),this._state=animating,s.done(CC(function(){this._state=ready,e.renderFinally()},this)).start()}},_resetControllerfunction(t){var e=this._controller;e((e=this._controller=new ac(t.getZr())).enable(this.seriesModel.get(roam)),e.on(pan,CC(this._onPan,this)),e.on(zoom,CC(this._onZoom,this)));var i=new ue(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(t,e,n){return i.contain(e,n)})},_clearControllerfunction(){var t=this._controller;t&&(t.dispose(),t=null)},_onPanfunction(t){if(animating!==this._state&&(Math.abs(t.dx)3Math.abs(t.dy)3)){var e=this.seriesModel.getData().tree.root;if(!e)return;var i=e.getLayout();if(!i)return;this.api.dispatchAction({typetreemapMove,fromthis.uid,seriesIdthis.seriesModel.id,rootRect{xi.x+t.dx,yi.y+t.dy,widthi.width,heighti.height}})}},_onZoomfunction(t){var e=t.originX,i=t.originY;if(animating!==this._state){var n=this.seriesModel.getData().tree.root;if(!n)return;var o=n.getLayout();if(!o)return;var a=new ue(o.x,o.y,o.width,o.height),r=this.seriesModel.layoutInfo;e-=r.x,i-=r.y;var s=mt();_t(s,s,[-e,-i]),bt(s,s,[t.scale,t.scale]),_t(s,s,[e,i]),a.applyTransform(s),this.api.dispatchAction({typetreemapRender,fromthis.uid,seriesIdthis.seriesModel.id,rootRect{xa.x,ya.y,widtha.width,heighta.height}})}},_initEventsfunction(t){t.on(click,function(t){if(ready===this._state){var e=this.seriesModel.get(nodeClick,!0);if(e){var i=this.findTarget(t.offsetX,t.offsetY);if(i){var n=i.node;if(n.getLayout().isLeafRoot)this._rootToNode(i);else if(zoomToNode===e)this._zoomToNode(i);else if(link===e){var o=n.hostTree.data.getItemModel(n.dataIndex),a=o.get(link,!0),r=o.get(target,!0)blank;a&&window.open(a,r)}}}}},this)},_renderBreadcrumbfunction(t,e,i){i(i=null!=t.get(leafDepth,!0){nodet.getViewRoot()}this.findTarget(e.getWidth()2,e.getHeight()2))(i={nodet.getData().tree.root}),(this._breadcrumb(this._breadcrumb=new rd(this.group))).render(t,e,i.node,CC(function(e){animating!==this._state&&(id(t.getViewRoot(),e)this._rootToNode({nodee})this._zoomToNode({nodee}))},this))},removefunction(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup[],background[],content[]},this._state=ready,this._breadcrumb&&this._breadcrumb.remove()},disposefunction(){this._clearController()},_zoomToNodefunction(t){this.api.dispatchAction({typetreemapZoomToNode,fromthis.uid,seriesIdthis.seriesModel.id,targetNodet.node})},_rootToNodefunction(t){this.api.dispatchAction({typetreemapRootToNode,fromthis.uid,seriesIdthis.seriesModel.id,targetNodet.node})},findTargetfunction(t,e){var i;return this.seriesModel.getViewRoot().eachNode({attrviewChildren,orderpreorder},function(n){var o=this._storage.background[n.getRawIndex()];if(o){var a=o.transformCoordToLocal(t,e),r=o.shape;if(!(r.x=a[0]&&a[0]=r.x+r.width&&r.y=a[1]&&a[1]=r.y+r.height))return!1;i={noden,offsetXa[0],offsetYa[1]}}},this),i}});for(var WC=[treemapZoomToNode,treemapRender,treemapMove],HC=0;HCWC.length;HC++)Ps({typeWC[HC],updateupdateView},function(){});Ps({typetreemapRootToNode,updateupdateView},function(t,e){e.eachComponent({mainTypeseries,subTypetreemap,queryt},function(e,i){var n=td(t,[treemapZoomToNode,treemapRootToNode],e);if(n){var o=e.getViewRoot();o&&(t.direction=id(o,n.node)rollUpdrillDown),e.resetViewRoot(n.node)}})});var ZC=d,UC=w,XC=-1,jC=function(t){var e=t.mappingMethod,n=t.type,o=this.option=i(t);this.type=n,this.mappingMethod=e,this._normalizeData=qC[e];var a=YC[n];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._doMap=a._doMap[e],piecewise===e(pd(o),dd(o))category===eo.categoriesfd(o)pd(o,!0)(k(linear!==eo.dataExtent),pd(o))};jC.prototype={constructorjC,mapValueToVisualfunction(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizerfunction(){return m(this._normalizeData,this)}};var YC=jC.visualHandlers={color{applyVisualvd(color),getColorMapperfunction(){var t=this.option;return m(category===t.mappingMethodfunction(t,e){return!e&&(t=this._normalizeData(t)),yd.call(this,t)}function(e,i,n){var o=!!n;return!i&&(e=this._normalizeData(e)),n=Wt(e,t.parsedVisual,n),onXt(n,rgba)},this)},_doMap{linearfunction(t){return Xt(Wt(t,this.option.parsedVisual),rgba)},categoryyd,piecewisefunction(t,e){var i=wd.call(this,e);return null==i&&(i=Xt(Wt(t,this.option.parsedVisual),rgba)),i},fixedxd}},colorHuegd(function(t,e){return Zt(t,e)}),colorSaturationgd(function(t,e){return Zt(t,null,e)}),colorLightnessgd(function(t,e){return Zt(t,null,null,e)}),colorAlphagd(function(t,e){return Ut(t,e)}),opacity{applyVisualvd(opacity),_doMap_d([0,1])},liftZ{applyVisualvd(liftZ),_doMap{linearxd,categoryxd,piecewisexd,fixedxd}},symbol{applyVisualfunction(t,e,i){var n=this.mapValueToVisual(t);if(_(n))i(symbol,n);else if(UC(n))for(var o in n)n.hasOwnProperty(o)&&i(o,n[o])},_doMap{linearmd,categoryyd,piecewisefunction(t,e){var i=wd.call(this,e);return null==i&&(i=md.call(this,t)),i},fixedxd}},symbolSize{applyVisualvd(symbolSize),_doMap_d([0,1])}},qC={linearfunction(t){return Eo(t,this.option.dataExtent,[0,1],!0)},piecewisefunction(t){var e=this.option.pieceList,i=jC.findPieceIndex(t,e,!0);if(null!=i)return Eo(i,[0,e.length-1],[0,1],!0)},categoryfunction(t){var e=this.option.categoriesthis.option.categoryMap[t]t;return null==eXCe},fixedB};jC.listVisualTypes=function(){var t=[];return d(YC,function(e,i){t.push(i)}),t},jC.addVisualHandler=function(t,e){YC[t]=e},jC.isValidType=function(t){return YC.hasOwnProperty(t)},jC.eachVisual=function(t,e,i){w(t)d(t,e,i)e.call(i,t)},jC.mapVisual=function(t,e,i){var n,o=y(t)[]w(t){}(n=!0,null);return jC.eachVisual(t,function(t,a){var r=e.call(i,t,a);no=ro[a]=r}),o},jC.retrieveVisuals=function(t){var e,i={};return t&&ZC(YC,function(n,o){t.hasOwnProperty(o)&&(i[o]=t[o],e=!0)}),einull},jC.prepareVisualTypes=function(t){if(UC(t)){var e=[];ZC(t,function(t,i){e.push(i)}),t=e}else{if(!y(t))return[];t=t.slice()}return t.sort(function(t,e){returncolor===e&&color!==t&&0===t.indexOf(color)1-1}),t},jC.dependsOn=function(t,e){returncolor===e!(!t0!==t.indexOf(e))t===e},jC.findPieceIndex=function(t,e,i){function n(e,i){var n=Math.abs(e-t);na&&(a=n,o=i)}for(var o,a=10,r=0,s=e.length;rs;r++){var l=e[r].value;if(null!=l){if(l===tstring==typeof l&&l===t+)return r;i&&n(l,r)}}for(var r=0,s=e.length;rs;r++){var u=e[r],h=u.interval,c=u.close;if(h){if(h[0]===-10){if(Sd(c[1],t,h[1]))return r}else if(h[1]===10){if(Sd(c[0],h[0],t))return r}else if(Sd(c[0],h[0],t)&&Sd(c[1],t,h[1]))return r;i&&n(h[0],r),i&&n(h[1],r)}}if(i)return t===10e.length-1t===-100o};var KC=y,$C=itemStyle,JC={seriesTypetreemap,resetfunction(t,e,i,n){var o=t.getData().tree,a=o.root,r=t.getModel($C);a.isRemoved()Md(a,{},f(o.levelModels,function(t){return tt.get($C)null}),r,t.getViewRoot().getAncestors(),t)}},QC=Math.max,tL=Math.min,eL=T,iL=d,nL=[itemStyle,borderWidth],oL=[itemStyle,gapWidth],aL=[upperLabel,show],rL=[upperLabel,height],sL={seriesTypetreemap,resetfunction(t,e,i,n){var o=i.getWidth(),r=i.getHeight(),s=t.option,l=la(t.getBoxLayoutParams(),{widthi.getWidth(),heighti.getHeight()}),u=s.size[],h=Ro(eL(l.width,u[0]),o),c=Ro(eL(l.height,u[1]),r),d=n&&n.type,f=td(n,[treemapZoomToNode,treemapRootToNode],t),p=treemapRender===dtreemapMove===dn.rootRectnull,g=t.getViewRoot(),m=ed(g);if(treemapMove!==d){var v=treemapZoomToNode===dVd(t,f,g,h,c)p[p.width,p.height][h,c],y=s.sort;y&&asc!==y&&desc!==y&&(y=desc);var x={squareRatios.squareRatio,sorty,leafDepths.leafDepth};g.hostTree.clearLayouts();_={x0,y0,widthv[0],heightv[1],areav[0]v[1]};g.setLayout(_),Pd(g,x,!1,0);var _=g.getLayout();iL(m,function(t,e){var i=(m[e+1]g).getValue();t.setLayout(a({dataExtent[i,i],borderWidth0,upperHeight0},_))})}var w=t.getData().tree.root;w.setLayout(Gd(l,p,f),!0),t.setLayoutInfo(l),Fd(w,new ue(-l.x,-l.y,o,r),m,g,0)}};Es(JC),Os(sL);var lL=function(t){this._directed=t!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},uL=lL.prototype;uL.type=graph,uL.isDirected=function(){return this._directed},uL.addNode=function(t,e){t=t+e;var i=this._nodesMap;if(!i[Hd(t)]){var n=new Zd(t,e);return n.hostGraph=this,this.nodes.push(n),i[Hd(t)]=n,n}},uL.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},uL.getNodeById=function(t){return this._nodesMap[Hd(t)]},uL.addEdge=function(t,e,i){var n=this._nodesMap,o=this._edgesMap;if(number==typeof t&&(t=this.nodes[t]),number==typeof e&&(e=this.nodes[e]),Zd.isInstance(t)(t=n[Hd(t)]),Zd.isInstance(e)(e=n[Hd(e)]),t&&e){var a=t.id+-+e.id;if(!o[a]){var r=new Ud(t,e,i);return r.hostGraph=this,this._directed&&(t.outEdges.push(r),e.inEdges.push(r)),t.edges.push(r),t!==e&&e.edges.push(r),this.edges.push(r),o[a]=r,r}}},uL.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},uL.getEdge=function(t,e){Zd.isInstance(t)&&(t=t.id),Zd.isInstance(e)&&(e=e.id);var i=this._edgesMap;return this._directedi[t+-+e]i[t+-+e]i[e+-+t]},uL.eachNode=function(t,e){for(var i=this.nodes,n=i.length,o=0;on;o++)i[o].dataIndex=0&&t.call(e,i[o],o)},uL.eachEdge=function(t,e){for(var i=this.edges,n=i.length,o=0;on;o++)i[o].dataIndex=0&&i[o].node1.dataIndex=0&&i[o].node2.dataIndex=0&&t.call(e,i[o],o)},uL.breadthFirstTraverse=function(t,e,i,n){if(Zd.isInstance(e)(e=this._nodesMap[Hd(e)]),e){for(var o=out===ioutEdgesin===iinEdgesedges,a=0;athis.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(n,e,null))for(var r=[e];r.length;)for(var s=r.shift(),l=s[o],a=0;al.length;a++){var u=l[a],h=u.node1===su.node2u.node1;if(!h.__visited){if(t.call(n,h,s))return;r.push(h),h.__visited=!0}}}},uL.update=function(){for(var t=this.data,e=this.edgeData,i=this.nodes,n=this.edges,o=0,a=i.length;oa;o++)i[o].dataIndex=-1;for(var o=0,a=t.count();oa;o++)i[t.getRawIndex(o)].dataIndex=o;e.filterSelf(function(t){var i=n[e.getRawIndex(t)];return i.node1.dataIndex=0&&i.node2.dataIndex=0});for(var o=0,a=n.length;oa;o++)n[o].dataIndex=-1;for(var o=0,a=e.count();oa;o++)n[e.getRawIndex(o)].dataIndex=o},uL.clone=function(){for(var t=new lL(this._directed),e=this.nodes,i=this.edges,n=0;ne.length;n++)t.addNode(e[n].id,e[n].dataIndex);for(n=0;ni.length;n++){var o=i[n];t.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return t},Zd.prototype={constructorZd,degreefunction(){return this.edges.length},inDegreefunction(){return this.inEdges.length},outDegreefunction(){return this.outEdges.length},getModelfunction(t){if(!(this.dataIndex0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)}},Ud.prototype.getModel=function(t){if(!(this.dataIndex0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)};var hL=function(t,e){return{getValuefunction(i){var n=this[t][e];return n.get(n.getDimension(ivalue),this.dataIndex)},setVisualfunction(i,n){this.dataIndex=0&&this[t][e].setItemVisual(this.dataIndex,i,n)},getVisualfunction(i,n){return this[t][e].getItemVisual(this.dataIndex,i,n)},setLayoutfunction(i,n){this.dataIndex=0&&this[t][e].setItemLayout(this.dataIndex,i,n)},getLayoutfunction(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicElfunction(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndexfunction(){return this[t][e].getRawIndex(this.dataIndex)}}};h(Zd,hL(hostGraph,data)),h(Ud,hL(hostGraph,edgeData)),lL.Node=Zd,lL.Edge=Ud,ji(Zd),ji(Ud);var cL=function(t,e,i,n,o){for(var a=new lL(n),r=0;rt.length;r++)a.addNode(T(t[r].id,t[r].name,r),r);for(var s=[],u=[],h=0,r=0;re.length;r++){var c=e[r],d=c.source,f=c.target;a.addEdge(d,f,h)&&(u.push(c),s.push(T(c.id,d+  +f)),h++)}var p,g=i.get(coordinateSystem);if(cartesian2d===gpolar===g)p=dl(t,i);else{var m=Ba.get(g),v=m&&view!==m.typem.dimensions[][];l(v,value)0&&v.concat([value]);var y=oA(t,{coordDimensionsv});(p=new eA(y,i)).initData(t)}var x=new eA([value],i);return x.initData(u,s),o&&o(p,x),Sc({mainDatap,structa,structAttrgraph,datas{nodep,edgex},datasAttr{nodedata,edgeedgeData}}),a.update(),a},dL=Gs({typeseries.graph,initfunction(t){dL.superApply(this,init,arguments),this.legendDataProvider=function(){return this._categoriesData},this.fillDataTextStyle(t.edgest.links),this._updateCategoriesData()},mergeOptionfunction(t){dL.superApply(this,mergeOption,arguments),this.fillDataTextStyle(t.edgest.links),this._updateCategoriesData()},mergeDefaultAndThemefunction(t){dL.superApply(this,mergeDefaultAndTheme,arguments),Ci(t,[edgeLabel],[show])},getInitialDatafunction(t,e){var i=t.edgest.links[],n=t.datat.nodes[],o=this;if(n&&i)return cL(n,i,this,!0,function(t,i){function n(t){return(t=this.parsePath(t))&&label===t[0]rt&&emphasis===t[0]&&label===t[1]lthis.parentModel}t.wrapMethod(getItemModel,function(t){var e=o._categoriesModels[t.getShallow(category)];return e&&(e.parentModel=t.parentModel,t.parentModel=e),t});var a=o.getModel(edgeLabel),r=new Lo({labela.option},a.parentModel,e),s=o.getModel(emphasis.edgeLabel),l=new Lo({emphasis{labels.option}},s.parentModel,e);i.wrapMethod(getItemModel,function(t){return t.customizeGetParent(n),t})}).data},getGraphfunction(){return this.getData().graph},getEdgeDatafunction(){return this.getGraph().edgeData},getCategoriesDatafunction(){return this._categoriesData},formatTooltipfunction(t,e,i){if(edge===i){var n=this.getData(),o=this.getDataParams(t,i),a=n.graph.getEdgeByIndex(t),r=n.getName(a.node1.dataIndex),s=n.getName(a.node2.dataIndex),l=[];return null!=r&&l.push(r),null!=s&&l.push(s),l=Qo(l.join(  )),o.value&&(l+=  +Qo(o.value)),l}return dL.superApply(this,formatTooltip,arguments)},_updateCategoriesDatafunction(){var t=f(this.option.categories[],function(t){return null!=t.valueta({value0},t)}),e=new eA([value],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t,!0)})},setZoomfunction(t){this.option.zoom=t},setCenterfunction(t){this.option.center=t},isAnimationEnabledfunction(){return dL.superCall(this,isAnimationEnabled)&&!(force===this.get(layout)&&this.get(force.layoutAnimation))},defaultOption{zlevel0,z2,coordinateSystemview,legendHoverLink!0,hoverAnimation!0,layoutnull,focusNodeAdjacency!1,circular{rotateLabel!1},force{initLayoutnull,repulsion[0,50],gravity.1,edgeLength30,layoutAnimation!0},leftcenter,topcenter,symbolcircle,symbolSize10,edgeSymbol[none,none],edgeSymbolSize10,edgeLabel{positionmiddle},draggable!1,roam!1,centernull,zoom1,nodeScaleRatio.6,label{show!1,formatter{b}},itemStyle{},lineStyle{color#aaa,width1,curveness0,opacity.5},emphasis{label{show!0}}}}),fL=rM.prototype,pL=lM.prototype,gL=Fn({typeec-line,style{stroke#000,fillnull},shape{x10,y10,x20,y20,percent1,cpx1null,cpy1null},buildPathfunction(t,e){(Xd(e)fLpL).buildPath(t,e)},pointAtfunction(t){return Xd(this.shape)fL.pointAt.call(this,t)pL.pointAt.call(this,t)},tangentAtfunction(t){var e=this.shape,i=Xd(e)[e.x2-e.x1,e.y2-e.y1]pL.tangentAt.call(this,t);return q(i,i)}}),mL=[fromSymbol,toSymbol],vL=$d.prototype;vL.beforeUpdate=function(){var t=this,e=t.childOfName(fromSymbol),i=t.childOfName(toSymbol),n=t.childOfName(label);if(ei!n.ignore){for(var o=1,a=this.parent;a;)a.scale&&(o=a.scale[0]),a=a.parent;var r=t.childOfName(line);if(this.__dirtyr.__dirty){var s=r.shape.percent,l=r.pointAt(0),u=r.pointAt(s),h=U([],u,l);if(q(h,h),e&&(e.attr(position,l),c=r.tangentAt(0),e.attr(rotation,Math.PI2-Math.atan2(c[1],c[0])),e.attr(scale,[os,os])),i){i.attr(position,u);var c=r.tangentAt(1);i.attr(rotation,-Math.PI2-Math.atan2(c[1],c[0])),i.attr(scale,[os,os])}if(!n.ignore){n.attr(position,u);var d,f,p,g=5o;if(end===n.__position)d=[h[0]g+u[0],h[1]g+u[1]],f=h[0].8lefth[0]-.8rightcenter,p=h[1].8toph[1]-.8bottommiddle;else if(middle===n.__position){var m=s2,v=[(c=r.tangentAt(m))[1],-c[0]],y=r.pointAt(m);v[1]0&&(v[0]=-v[0],v[1]=-v[1]),d=[y[0]+v[0]g,y[1]+v[1]g],f=center,p=bottom;var x=-Math.atan2(c[1],c[0]);u[0]l[0]&&(x=Math.PI+x),n.attr(rotation,x)}else d=[-h[0]g+l[0],-h[1]g+l[1]],f=h[0].8righth[0]-.8leftcenter,p=h[1].8bottomh[1]-.8topmiddle;n.attr({style{textVerticalAlignn.__verticalAlignp,textAlignn.__textAlignf},positiond,scale[o,o]})}}}},vL._createLine=function(t,e,i){var n=t.hostModel,o=qd(t.getItemLayout(e));o.shape.percent=0,So(o,{shape{percent1}},n,e),this.add(o);var a=new qS({namelabel});this.add(a),d(mL,function(i){var n=Yd(i,t,e);this.add(n),this[jd(i)]=t.getItemVisual(e,i)},this),this._updateCommonStl(t,e,i)},vL.updateData=function(t,e,i){var n=t.hostModel,o=this.childOfName(line),a=t.getItemLayout(e),r={shape{}};Kd(r.shape,a),bo(o,r,n,e),d(mL,function(i){var n=t.getItemVisual(e,i),o=jd(i);if(this[o]!==n){this.remove(this.childOfName(i));var a=Yd(i,t,e);this.add(a)}this[o]=n},this),this._updateCommonStl(t,e,i)},vL._updateCommonStl=function(t,e,i){var n=t.hostModel,o=this.childOfName(line),a=i&&i.lineStyle,s=i&&i.hoverLineStyle,l=i&&i.labelModel,u=i&&i.hoverLabelModel;if(!it.hasItemOption){var h=t.getItemModel(e);a=h.getModel(lineStyle).getLineStyle(),s=h.getModel(emphasis.lineStyle).getLineStyle(),l=h.getModel(label),u=h.getModel(emphasis.label)}var c=t.getItemVisual(e,color),f=D(t.getItemVisual(e,opacity),a.opacity,1);o.useStyle(r({strokeNoScale!0,fillnone,strokec,opacityf},a)),o.hoverStyle=s,d(mL,function(t){var e=this.childOfName(t);e&&(e.setColor(c),e.setStyle({opacityf}))},this);var p,g,m=l.getShallow(show),v=u.getShallow(show),y=this.childOfName(label);if((mv)&&(p=c#000,null==(g=n.getFormattedLabel(e,normal,t.dataType)))){var x=n.getRawValue(e);g=null==xt.getName(e)isFinite(x)zo(x)x}var _=mgnull,w=vA(n.getFormattedLabel(e,emphasis,t.dataType),g)null,b=y.style;null==_&&null==w(fo(y.style,l,{text_},{autoColorp}),y.__textAlign=b.textAlign,y.__verticalAlign=b.textVerticalAlign,y.__position=l.get(position)middle),y.hoverStyle=null!=w{textw,textFillu.getTextColor(!0),fontStyleu.getShallow(fontStyle),fontWeightu.getShallow(fontWeight),fontSizeu.getShallow(fontSize),fontFamilyu.getShallow(fontFamily)}{textnull},y.ignore=!m&&!v,uo(this)},vL.highlight=function(){this.trigger(emphasis)},vL.downplay=function(){this.trigger(normal)},vL.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},vL.setLinePoints=function(t){var e=this.childOfName(line);Kd(e.shape,t),e.dirty()},u($d,Zw);var yL=Jd.prototype;yL.isPersistent=function(){return!0},yL.updateData=function(t){var e=this,i=e.group,n=e._lineData;e._lineData=t,ni.removeAll();var o=ef(t);t.diff(n).add(function(i){Qd(e,t,i,o)}).update(function(i,a){tf(e,n,t,a,i,o)}).remove(function(t){i.remove(n.getItemGraphicEl(t))}).execute()},yL.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,i){e.updateLayout(t,i)},this)},yL.incrementalPrepareUpdate=function(t){this._seriesScope=ef(t),this._lineData=null,this.group.removeAll()},yL.incrementalUpdate=function(t,e){for(var i=t.start;it.end;i++)if(of(e.getItemLayout(i))){var n=new this._ctor(e,i,this._seriesScope);n.traverse(function(t){t.isGroup(t.incremental=t.useHoverLayer=!0)}),this.group.add(n),e.setItemGraphicEl(i,n)}},yL.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},yL._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var xL=[],_L=[],wL=[],bL=rn,SL=iw,ML=Math.abs,IL=function(t,e){function i(t){var e=t.getVisual(symbolSize);return e instanceof Array&&(e=(e[0]+e[1])2),e}var n=[],o=hn,a=[[],[],[]],r=[[],[]],s=[];e=2,t.eachEdge(function(t,l){var u=t.getLayout(),h=t.getVisual(fromSymbol),c=t.getVisual(toSymbol);u.__original(u.__original=[F(u[0]),F(u[1])],u[2]&&u.__original.push(F(u[2])));var d=u.__original;if(null!=u[2]){if(G(a[0],d[0]),G(a[1],d[2]),G(a[2],d[1]),h&&none!==h){var f=i(t.node1),p=af(a,d[0],fe);o(a[0][0],a[1][0],a[2][0],p,n),a[0][0]=n[3],a[1][0]=n[4],o(a[0][1],a[1][1],a[2][1],p,n),a[0][1]=n[3],a[1][1]=n[4]}if(c&&none!==c){var f=i(t.node2),p=af(a,d[1],fe);o(a[0][0],a[1][0],a[2][0],p,n),a[1][0]=n[1],a[2][0]=n[2],o(a[0][1],a[1][1],a[2][1],p,n),a[1][1]=n[1],a[2][1]=n[2]}G(u[0],a[0]),G(u[1],a[2]),G(u[2],a[1])}else{if(G(r[0],d[0]),G(r[1],d[1]),U(s,r[1],r[0]),q(s,s),h&&none!==h){f=i(t.node1);Z(r[0],r[0],s,fe)}if(c&&none!==c){f=i(t.node2);Z(r[1],r[1],s,-fe)}G(u[0],r[0]),G(u[1],r[1])}})},TL=[itemStyle,opacity],AL=[lineStyle,opacity];Fs({typegraph,initfunction(t,e){var i=new Su,n=new Jd,o=this.group;this._controller=new ac(e.getZr()),this._controllerHost={targeto},o.add(i.group),o.add(n.group),this._symbolDraw=i,this._lineDraw=n,this._firstRender=!0},renderfunction(t,e,i){var n=t.coordinateSystem;this._model=t,this._nodeScaleRatio=t.get(nodeScaleRatio);var o=this._symbolDraw,a=this._lineDraw,r=this.group;if(view===n.type){var s={positionn.position,scalen.scale};this._firstRenderr.attr(s)bo(r,s,t)}IL(t.getGraph(),this._getNodeGlobalScale(t));var l=t.getData();o.updateData(l);var u=t.getEdgeData();a.updateData(u),this._updateNodeAndLinkScale(),this._updateController(t,e,i),clearTimeout(this._layoutTimeout);var h=t.forceLayout,c=t.get(force.layoutAnimation);h&&this._startForceLayoutIteration(h,c),l.eachItemGraphicEl(function(e,n){var o=l.getItemModel(n);e.off(drag).off(dragend);var a=o.get(draggable);a&&e.on(drag,function(){h&&(h.warmUp(),!this._layouting&&this._startForceLayoutIteration(h,c),h.setFixed(n),l.setItemLayout(n,e.position))},this).on(dragend,function(){h&&h.setUnfixed(n)},this),e.setDraggable(a&&h),e.off(mouseover,e.__focusNodeAdjacency),e.off(mouseout,e.__unfocusNodeAdjacency),o.get(focusNodeAdjacency)&&(e.on(mouseover,e.__focusNodeAdjacency=function(){i.dispatchAction({typefocusNodeAdjacency,seriesIdt.id,dataIndexe.dataIndex})}),e.on(mouseout,e.__unfocusNodeAdjacency=function(){i.dispatchAction({typeunfocusNodeAdjacency,seriesIdt.id})}))},this),l.graph.eachEdge(function(e){var n=e.getGraphicEl();n.off(mouseover,n.__focusNodeAdjacency),n.off(mouseout,n.__unfocusNodeAdjacency),e.getModel().get(focusNodeAdjacency)&&(n.on(mouseover,n.__focusNodeAdjacency=function(){i.dispatchAction({typefocusNodeAdjacency,seriesIdt.id,edgeDataIndexe.dataIndex})}),n.on(mouseout,n.__unfocusNodeAdjacency=function(){i.dispatchAction({typeunfocusNodeAdjacency,seriesIdt.id})}))});var d=circular===t.get(layout)&&t.get(circular.rotateLabel),f=l.getLayout(cx),p=l.getLayout(cy);l.eachItemGraphicEl(function(t,e){var i=t.getSymbolPath();if(d){var n=l.getItemLayout(e),o=Math.atan2(n[1]-p,n[0]-f);o0&&(o=2Math.PI+o);var a=n[0]f;a&&(o-=Math.PI);var r=aleftright;i.setStyle({textRotation-o,textPositionr,textOrigincenter}),i.hoverStyle&&(i.hoverStyle.textPosition=r)}else i.setStyle({textRotation0})}),this._firstRender=!1},disposefunction(){this._controller&&this._controller.dispose(),this._controllerHost={}},focusNodeAdjacencyfunction(t,e,i,n){var o=this._model.getData().graph,a=n.dataIndex,r=n.edgeDataIndex,s=o.getNodeByIndex(a),l=o.getEdgeByIndex(r);(sl)&&(o.eachNode(function(t){sf(t,TL,.1)}),o.eachEdge(function(t){sf(t,AL,.1)}),s&&(lf(s,TL),d(s.edges,function(t){t.dataIndex0(lf(t,AL),lf(t.node1,TL),lf(t.node2,TL))})),l&&(lf(l,AL),lf(l.node1,TL),lf(l.node2,TL)))},unfocusNodeAdjacencyfunction(t,e,i,n){var o=this._model.getData().graph;o.eachNode(function(t){sf(t,TL)}),o.eachEdge(function(t){sf(t,AL)})},_startForceLayoutIterationfunction(t,e){var i=this;!function n(){t.step(function(t){i.updateLayout(i._model),(i._layouting=!t)&&(ei._layoutTimeout=setTimeout(n,16)n())})}()},_updateControllerfunction(t,e,i){var n=this._controller,o=this._controllerHost,a=this.group;n.setPointerChecker(function(e,n,o){var r=a.getBoundingRect();return r.applyTransform(a.transform),r.contain(n,o)&&!mc(e,i,t)}),view===t.coordinateSystem.type(n.enable(t.get(roam)),o.zoomLimit=t.get(scaleLimit),o.zoom=t.coordinateSystem.getZoom(),n.off(pan).off(zoom).on(pan,function(e){pc(o,e.dx,e.dy),i.dispatchAction({seriesIdt.id,typegraphRoam,dxe.dx,dye.dy})}).on(zoom,function(e){gc(o,e.scale,e.originX,e.originY),i.dispatchAction({seriesIdt.id,typegraphRoam,zoome.scale,originXe.originX,originYe.originY}),this._updateNodeAndLinkScale(),IL(t.getGraph(),this._getNodeGlobalScale(t)),this._lineDraw.updateLayout()},this))n.disable()},_updateNodeAndLinkScalefunction(){var t=this._model,e=t.getData(),i=this._getNodeGlobalScale(t),n=[i,i];e.eachItemGraphicEl(function(t,e){t.attr(scale,n)})},_getNodeGlobalScalefunction(t){var e=t.coordinateSystem;if(view!==e.type)return 1;var i=this._nodeScaleRatio,n=e.scale,o=n&&n[0]1;return((e.getZoom()-1)i+1)o},updateLayoutfunction(t){IL(t.getGraph(),this._getNodeGlobalScale(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},removefunction(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),Ps({typefocusNodeAdjacency,eventfocusNodeAdjacency,updateseriesfocusNodeAdjacency},function(){}),Ps({typeunfocusNodeAdjacency,eventunfocusNodeAdjacency,updateseriesunfocusNodeAdjacency},function(){}),Ps({typegraphRoam,eventgraphRoam,updatenone},function(t,e){e.eachComponent({mainTypeseries,queryt},function(e){var i=wc(e.coordinateSystem,t);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)})});var DL=Z;ks(function(t){var e=t.findComponents({mainTypelegend});e&&e.length&&t.eachSeriesByType(graph,function(t){var i=t.getCategoriesData(),n=t.getGraph().data,o=i.mapArray(i.getName);n.filterSelf(function(t){var i=n.getItemModel(t).getShallow(category);if(null!=i){number==typeof i&&(i=o[i]);for(var a=0;ae.length;a++)if(!e[a].isSelected(i))return!1}return!0})},this)}),Es(hD(graph,circle,null)),Es(function(t){var e={};t.eachSeriesByType(graph,function(t){var i=t.getCategoriesData(),n=t.getData(),o={};i.each(function(n){var a=i.getName(n);o[ec-+a]=n;var r=i.getItemModel(n).get(itemStyle.color)t.getColorFromPalette(a,e);i.setItemVisual(n,color,r)}),i.count()&&n.each(function(t){var e=n.getItemModel(t).getShallow(category);null!=e&&(string==typeof e&&(e=o[ec-+e]),n.getItemVisual(t,color,!0)n.setItemVisual(t,color,i.getItemVisual(e,color)))})})}),Es(function(t){t.eachSeriesByType(graph,function(t){var e=t.getGraph(),i=t.getEdgeData(),n=uf(t.get(edgeSymbol)),o=uf(t.get(edgeSymbolSize)),a=lineStyle.color.split(.),r=lineStyle.opacity.split(.);i.setVisual(fromSymbol,n&&n[0]),i.setVisual(toSymbol,n&&n[1]),i.setVisual(fromSymbolSize,o&&o[0]),i.setVisual(toSymbolSize,o&&o[1]),i.setVisual(color,t.get(a)),i.setVisual(opacity,t.get(r)),i.each(function(t){var n=i.getItemModel(t),o=e.getEdgeByIndex(t),s=uf(n.getShallow(symbol,!0)),l=uf(n.getShallow(symbolSize,!0)),u=n.get(a),h=n.get(r);switch(u){casesourceu=o.node1.getVisual(color);break;casetargetu=o.node2.getVisual(color)}s[0]&&o.setVisual(fromSymbol,s[0]),s[1]&&o.setVisual(toSymbol,s[1]),l[0]&&o.setVisual(fromSymbolSize,l[0]),l[1]&&o.setVisual(toSymbolSize,l[1]),o.setVisual(color,u),o.setVisual(opacity,h)})})}),Os(function(t,e){t.eachSeriesByType(graph,function(t){var e=t.get(layout),i=t.coordinateSystem;if(i&&view!==i.type){var n=t.getData(),o=[];d(i.dimensions,function(t){o=o.concat(n.mapDimension(t,!0))});for(var a=0;an.count();a++){for(var r=[],s=!1,l=0;lo.length;l++){var u=n.get(o[l],a);isNaN(u)(s=!0),r.push(u)}sn.setItemLayout(a,i.dataToPoint(r))n.setItemLayout(a,[NaN,NaN])}cf(n.graph)}else e&&none!==ehf(t)})}),Os(function(t){t.eachSeriesByType(graph,function(t){circular===t.get(layout)&&df(t)})}),Os(function(t){t.eachSeriesByType(graph,function(t){var e=t.coordinateSystem;if(!eview===e.type)if(force===t.get(layout)){var i=t.preservedPoints{},n=t.getGraph(),o=n.data,a=n.edgeData,r=t.getModel(force),s=r.get(initLayout);t.preservedPointso.each(function(t){var e=o.getId(t);o.setItemLayout(t,i[e][NaN,NaN])})s&&none!==scircular===s&&df(t)hf(t);var l=o.getDataExtent(value),u=a.getDataExtent(value),h=r.get(repulsion),c=r.get(edgeLength);y(h)(h=[h,h]),y(c)(c=[c,c]),c=[c[1],c[0]];var d=o.mapArray(value,function(t,e){var i=o.getItemLayout(e),n=Eo(t,l,h);return isNaN(n)&&(n=(h[0]+h[1])2),{wn,repn,fixedo.getItemModel(e).get(fixed),p!iisNaN(i[0])isNaN(i[1])nulli}}),f=a.mapArray(value,function(t,e){var i=n.getEdgeByIndex(e),o=Eo(t,u,c);return isNaN(o)&&(o=(c[0]+c[1])2),{n1d[i.node1.dataIndex],n2d[i.node2.dataIndex],do,curvenessi.getModel().get(lineStyle.curveness)0}}),p=(e=t.coordinateSystem).getBoundingRect(),g=ff(d,f,{rectp,gravityr.get(gravity)}),m=g.step;g.step=function(t){for(var e=0,a=d.length;ea;e++)d[e].fixed&&G(d[e].p,n.getNodeByIndex(e).getLayout());m(function(e,a,r){for(var s=0,l=e.length;sl;s++)e[s].fixedn.getNodeByIndex(s).setLayout(e[s].p),i[o.getId(s)]=e[s].p;for(var s=0,l=a.length;sl;s++){var u=a[s],h=n.getEdgeByIndex(s),c=u.n1.p,d=u.n2.p,f=h.getLayout();(f=ff.slice()[])[0]=f[0][],f[1]=f[1][],G(f[0],c),G(f[1],d),+u.curveness&&(f[2]=[(c[0]+d[0])2-(c[1]-d[1])u.curveness,(c[1]+d[1])2-(d[0]-c[0])u.curveness]),h.setLayout(f)}t&&t(r)})},t.forceLayout=g,t.preservedPoints=i,g.step()}else t.forceLayout=null})}),Ns(graphView,{createfunction(t,e){var i=[];return t.eachSeriesByType(graph,function(t){var n=t.get(coordinateSystem);if(!nview===n){var o=t.getData(),a=[],r=[];dn(o.mapArray(function(t){var e=o.getItemModel(t);return[+e.get(x),+e.get(y)]}),a,r),r[0]-a[0]==0&&(r[0]+=1,a[0]-=1),r[1]-a[1]==0&&(r[1]+=1,a[1]-=1);var s=(r[0]-a[0])(r[1]-a[1]),l=pf(t,e,s);isNaN(s)&&(a=[l.x,l.y],r=[l.x+l.width,l.y+l.height]);var u=r[0]-a[0],h=r[1]-a[1],c=l.width,d=l.height,f=t.coordinateSystem=new Uh;f.zoomLimit=t.get(scaleLimit),f.setBoundingRect(a[0],a[1],u,h),f.setViewRect(l.x,l.y,c,d),f.setCenter(t.get(center)),f.setZoom(t.get(zoom)),i.push(f)}}),i}});OI.extend({typeseries.gauge,getInitialDatafunction(t,e){var i=t.data[];return y(i)(i=[i]),t.data=i,WD(this,[value])},defaultOption{zlevel0,z2,center[50%,50%],legendHoverLink!0,radius75%,startAngle225,endAngle-45,clockwise!0,min0,max100,splitNumber10,axisLine{show!0,lineStyle{color[[.2,#91c7ae],[.8,#63869e],[1,#c23531]],width30}},splitLine{show!0,length30,lineStyle{color#eee,width2,typesolid}},axisTick{show!0,splitNumber5,length8,lineStyle{color#eee,width1,typesolid}},axisLabel{show!0,distance5,colorauto},pointer{show!0,length80%,width8},itemStyle{colorauto},title{show!0,offsetCenter[0,-40%],color#333,fontSize15},detail{show!0,backgroundColorrgba(0,0,0,0),borderWidth0,borderColor#ccc,width100,heightnull,padding[5,10],offsetCenter[0,40%],colorauto,fontSize30}}});var CL=kn.extend({typeechartsGaugePointer,shape{angle0,width10,r10,x0,y0},buildPathfunction(t,e){var i=Math.cos,n=Math.sin,o=e.r,a=e.width,r=e.angle,s=e.x-i(r)a(a=o312),l=e.y-n(r)a(a=o312);r=e.angle-Math.PI2,t.moveTo(s,l),t.lineTo(e.x+i(r)a,e.y+n(r)a),t.lineTo(e.x+i(e.angle)o,e.y+n(e.angle)o),t.lineTo(e.x-i(r)a,e.y-n(r)a),t.lineTo(s,l)}}),LL=2Math.PI,kL=(Mr.extend({typegauge,renderfunction(t,e,i){this.group.removeAll();var n=t.get(axisLine.lineStyle.color),o=gf(t,i);this._renderMain(t,e,i,n,o)},disposefunction(){},_renderMainfunction(t,e,i,n,o){for(var a=this.group,r=t.getModel(axisLine).getModel(lineStyle),s=t.get(clockwise),l=-t.get(startAngle)180Math.PI,u=-t.get(endAngle)180Math.PI,h=(u-l)%LL,c=l,d=r.get(width),f=0;fn.length;f++){var p=Math.min(Math.max(n[f][0],0),1),g=new QS({shape{startAnglec,endAngleu=l+hp,cxo.cx,cyo.cy,clockwises,r0o.r-d,ro.r},silent!0});g.setStyle({filln[f][1]}),g.setStyle(r.getLineStyle([color,borderWidth,borderColor])),a.add(g),c=u}var m=function(t){if(t=0)return n[0][1];for(var e=0;en.length;e++)if(n[e][0]=t&&(0===e0n[e-1][0])t)return n[e][1];return n[e-1][1]};if(!s){var v=l;l=u,u=v}this._renderTicks(t,e,i,m,o,l,u,s),this._renderPointer(t,e,i,m,o,l,u,s),this._renderTitle(t,e,i,m,o),this._renderDetail(t,e,i,m,o)},_renderTicksfunction(t,e,i,n,o,a,r,s){for(var l=this.group,u=o.cx,h=o.cy,c=o.r,d=+t.get(min),f=+t.get(max),p=t.getModel(splitLine),g=t.getModel(axisTick),m=t.getModel(axisLabel),v=t.get(splitNumber),y=g.get(splitNumber),x=Ro(p.get(length),c),_=Ro(g.get(length),c),w=a,b=(r-a)v,S=by,M=p.getModel(lineStyle).getLineStyle(),I=g.getModel(lineStyle).getLineStyle(),T=0;T=v;T++){var A=Math.cos(w),D=Math.sin(w);if(p.get(show)){var C=new rM({shape{x1Ac+u,y1Dc+h,x2A(c-x)+u,y2D(c-x)+h},styleM,silent!0});auto===M.stroke&&C.setStyle({stroken(Tv)}),l.add(C)}if(m.get(show)){var L=mf(zo(Tv(f-d)+d),m.get(formatter)),k=m.get(distance),P=n(Tv);l.add(new qS({stylefo({},m,{textL,xA(c-x-k)+u,yD(c-x-k)+h,textVerticalAlignD-.4topD.4bottommiddle,textAlignA-.4leftA.4rightcenter},{autoColorP}),silent!0}))}if(g.get(show)&&T!==v){for(var N=0;N=y;N++){var A=Math.cos(w),D=Math.sin(w),O=new rM({shape{x1Ac+u,y1Dc+h,x2A(c-_)+u,y2D(c-_)+h},silent!0,styleI});auto===I.stroke&&O.setStyle({stroken((T+Ny)v)}),l.add(O),w+=S}w-=S}else w+=b}},_renderPointerfunction(t,e,i,n,o,a,r,s){var l=this.group,u=this._data;if(t.get(pointer.show)){var h=[+t.get(min),+t.get(max)],c=[a,r],d=t.getData(),f=d.mapDimension(value);d.diff(u).add(function(e){var i=new CL({shape{anglea}});So(i,{shape{angleEo(d.get(f,e),h,c,!0)}},t),l.add(i),d.setItemGraphicEl(e,i)}).update(function(e,i){var n=u.getItemGraphicEl(i);bo(n,{shape{angleEo(d.get(f,e),h,c,!0)}},t),l.add(n),d.setItemGraphicEl(e,n)}).remove(function(t){var e=u.getItemGraphicEl(t);l.remove(e)}).execute(),d.eachItemGraphicEl(function(t,e){var i=d.getItemModel(e),a=i.getModel(pointer);t.setShape({xo.cx,yo.cy,widthRo(a.get(width),o.r),rRo(a.get(length),o.r)}),t.useStyle(i.getModel(itemStyle).getItemStyle()),auto===t.style.fill&&t.setStyle(fill,n(Eo(d.get(f,e),h,[0,1],!0))),uo(t,i.getModel(emphasis.itemStyle).getItemStyle())}),this._data=d}else u&&u.eachItemGraphicEl(function(t){l.remove(t)})},_renderTitlefunction(t,e,i,n,o){var a=t.getData(),r=a.mapDimension(value),s=t.getModel(title);if(s.get(show)){var l=s.get(offsetCenter),u=o.cx+Ro(l[0],o.r),h=o.cy+Ro(l[1],o.r),c=+t.get(min),d=+t.get(max),f=n(Eo(t.getData().get(r,0),[c,d],[0,1],!0));this.group.add(new qS({silent!0,stylefo({},s,{xu,yh,texta.getName(0),textAligncenter,textVerticalAlignmiddle},{autoColorf,forceRich!0})}))}},_renderDetailfunction(t,e,i,n,o){var a=t.getModel(detail),r=+t.get(min),s=+t.get(max);if(a.get(show)){var l=a.get(offsetCenter),u=o.cx+Ro(l[0],o.r),h=o.cy+Ro(l[1],o.r),c=Ro(a.get(width),o.r),d=Ro(a.get(height),o.r),f=t.getData(),p=f.get(f.mapDimension(value),0),g=n(Eo(p,[r,s],[0,1],!0));this.group.add(new qS({silent!0,stylefo({},a,{xu,yh,textmf(p,a.get(formatter)),textWidthisNaN(c)nullc,textHeightisNaN(d)nulld,textAligncenter,textVerticalAlignmiddle},{autoColorg,forceRich!0})}))}}}),Gs({typeseries.funnel,initfunction(t){kL.superApply(this,init,arguments),this.legendDataProvider=function(){return this.getRawData()},this._defaultLabelLine(t)},getInitialDatafunction(t,e){return WD(this,[value])},_defaultLabelLinefunction(t){Ci(t,labelLine,[show]);var e=t.labelLine,i=t.emphasis.labelLine;e.show=e.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},getDataParamsfunction(t){var e=this.getData(),i=kL.superCall(this,getDataParams,t),n=e.mapDimension(value),o=e.getSum(n);return i.percent=o+(e.get(n,t)o100).toFixed(2)0,i.$vars.push(percent),i},defaultOption{zlevel0,z2,legendHoverLink!0,left80,top60,right80,bottom60,minSize0%,maxSize100%,sortdescending,gap0,funnelAligncenter,label{show!0,positionouter},labelLine{show!0,length20,lineStyle{width1,typesolid}},itemStyle{borderColor#fff,borderWidth1},emphasis{label{show!0}}}})),PL=vf.prototype,NL=[itemStyle,opacity];PL.updateData=function(t,e,i){var n=this.childAt(0),o=t.hostModel,a=t.getItemModel(e),s=t.getItemLayout(e),l=t.getItemModel(e).get(NL);l=null==l1l,n.useStyle({}),i(n.setShape({pointss.points}),n.setStyle({opacity0}),So(n,{style{opacityl}},o,e))bo(n,{style{opacityl},shape{pointss.points}},o,e);var u=a.getModel(itemStyle),h=t.getItemVisual(e,color);n.setStyle(r({lineJoinround,fillh},u.getItemStyle([opacity]))),n.hoverStyle=u.getModel(emphasis).getItemStyle(),this._updateLabel(t,e),uo(this)},PL._updateLabel=function(t,e){var i=this.childAt(1),n=this.childAt(2),o=t.hostModel,a=t.getItemModel(e),r=t.getItemLayout(e).label,s=t.getItemVisual(e,color);bo(i,{shape{pointsr.linePointsr.linePoints}},o,e),bo(n,{style{xr.x,yr.y}},o,e),n.attr({rotationr.rotation,origin[r.x,r.y],z210});var l=a.getModel(label),u=a.getModel(emphasis.label),h=a.getModel(labelLine),c=a.getModel(emphasis.labelLine),s=t.getItemVisual(e,color);co(n.style,n.hoverStyle={},l,u,{labelFetchert.hostModel,labelDataIndexe,defaultTextt.getName(e),autoColors,useInsideStyle!!r.inside},{textAlignr.textAlign,textVerticalAlignr.verticalAlign}),n.ignore=n.normalIgnore=!l.get(show),n.hoverIgnore=!u.get(show),i.ignore=i.normalIgnore=!h.get(show),i.hoverIgnore=!c.get(show),i.setStyle({strokes}),i.setStyle(h.getModel(lineStyle).getLineStyle()),i.hoverStyle=c.getModel(lineStyle).getLineStyle()},u(vf,Zw);Mr.extend({typefunnel,renderfunction(t,e,i){var n=t.getData(),o=this._data,a=this.group;n.diff(o).add(function(t){var e=new vf(n,t);n.setItemGraphicEl(t,e),a.add(e)}).update(function(t,e){var i=o.getItemGraphicEl(e);i.updateData(n,t),a.add(i),n.setItemGraphicEl(t,i)}).remove(function(t){var e=o.getItemGraphicEl(t);a.remove(e)}).execute(),this._data=n},removefunction(){this.group.removeAll(),this._data=null},disposefunction(){}});Es(jD(funnel)),Os(function(t,e,i){t.eachSeriesByType(funnel,function(t){var i=t.getData(),n=i.mapDimension(value),o=t.get(sort),a=yf(t,e),r=xf(i,o),s=[Ro(t.get(minSize),a.width),Ro(t.get(maxSize),a.width)],l=i.getDataExtent(n),u=t.get(min),h=t.get(max);null==u&&(u=Math.min(l[0],0)),null==h&&(h=l[1]);var c=t.get(funnelAlign),d=t.get(gap),f=(a.height-d(i.count()-1))i.count(),p=a.y,g=function(t,e){var o,r=Eo(i.get(n,t)0,[u,h],s,!0);switch(c){caselefto=a.x;break;casecentero=a.x+(a.width-r)2;break;caserighto=a.x+a.width-r}return[[o,e],[o+r,e]]};ascending===o&&(f=-f,d=-d,p+=a.height,r=r.reverse());for(var m=0;mr.length;m++){var v=r[m],y=r[m+1],x=i.getItemModel(v).get(itemStyle.height);null==xx=f(x=Ro(x,a.height),ascending===o&&(x=-x));var _=g(v,p),w=g(y,p+x);p+=x+d,i.setItemLayout(v,{points_.concat(w.slice().reverse())})}_f(i)})}),ks($D(funnel));var OL=function(t,e,i,n,o){HA.call(this,t,e,i),this.type=nvalue,this.axisIndex=o};OL.prototype={constructorOL,modelnull,isHorizontalfunction(){returnhorizontal!==this.coordinateSystem.getModel().get(layout)}},u(OL,HA);var EL=function(t,e,i,n,o,a){e[0]=Mf(e[0],i),e[1]=Mf(e[1],i),t=t0;var r=i[1]-i[0];null!=o&&(o=Mf(o,[0,r])),null!=a&&(a=Math.max(a,null!=oo0)),all===n&&(o=a=Math.abs(e[1]-e[0]),n=0);var s=Sf(e,n);e[n]+=t;var l=o0,u=i.slice();s.sign0u[0]+=lu[1]-=l,e[n]=Mf(e[n],u);h=Sf(e,n);null!=o&&(h.sign!==s.signh.spano)&&(e[1-n]=e[n]+s.signo);var h=Sf(e,n);return null!=a&&h.spana&&(e[1-n]=e[n]+h.signa),e},RL=d,zL=Math.min,BL=Math.max,VL=Math.floor,GL=Math.ceil,FL=zo,WL=Math.PI;If.prototype={typeparallel,constructorIf,_initfunction(t,e,i){var n=t.dimensions,o=t.parallelAxisIndex;RL(n,function(t,i){var n=o[i],a=e.getComponent(parallelAxis,n),r=this._axesMap.set(t,new OL(t,Vl(a),[0,0],a.get(type),n)),s=category===r.type;r.onBand=s&&a.get(boundaryGap),r.inverse=a.get(inverse),a.axis=r,r.model=a,r.coordinateSystem=a.coordinateSystem=this},this)},updatefunction(t,e){this._updateAxesFromSeries(this._model,t)},containPointfunction(t){var e=this._makeLayoutInfo(),i=e.axisBase,n=e.layoutBase,o=e.pixelDimIndex,a=t[1-o],r=t[o];return a=i&&a=i+e.axisLength&&r=n&&r=n+e.layoutLength},getModelfunction(){return this._model},_updateAxesFromSeriesfunction(t,e){e.eachSeries(function(i){if(t.contains(i,e)){var n=i.getData();RL(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(n,n.mapDimension(t)),Bl(e.scale,e.model)},this)}},this)},resizefunction(t,e){this._rect=la(t.getBoxLayoutParams(),{widthe.getWidth(),heighte.getHeight()}),this._layoutAxes()},getRectfunction(){return this._rect},_makeLayoutInfofunction(){var t,e=this._model,i=this._rect,n=[x,y],o=[width,height],a=e.get(layout),r=horizontal===a01,s=i[o[r]],l=[0,s],u=this.dimensions.length,h=Tf(e.get(axisExpandWidth),l),c=Tf(e.get(axisExpandCount)0,[0,u]),d=e.get(axisExpandable)&&u3&&uc&&c1&&h0&&s0,f=e.get(axisExpandWindow);f(t=Tf(f[1]-f[0],l),f[1]=f[0]+t)(t=Tf(h(c-1),l),(f=[h(e.get(axisExpandCenter)VL(u2))-t2])[1]=f[0]+t);var p=(s-t)(u-c);p3&&(p=0);var g=[VL(FL(f[0]h,1))+1,GL(FL(f[1]h,1))-1],m=phf[0];return{layouta,pixelDimIndexr,layoutBasei[n[r]],layoutLengths,axisBasei[n[1-r]],axisLengthi[o[1-r]],axisExpandabled,axisExpandWidthh,axisCollapseWidthp,axisExpandWindowf,axisCountu,winInnerIndicesg,axisExpandWindow0Posm}},_layoutAxesfunction(){var t=this._rect,e=this._axesMap,i=this.dimensions,n=this._makeLayoutInfo(),o=n.layout;e.each(function(t){var e=[0,n.axisLength],i=t.inverse10;t.setExtent(e[i],e[1-i])}),RL(i,function(e,i){var a=(n.axisExpandableDfAf)(i,n),r={horizontal{xa.position,yn.axisLength},vertical{x0,ya.position}},s={horizontalWL2,vertical0},l=[r[o].x+t.x,r[o].y+t.y],u=s[o],h=mt();wt(h,h,u),_t(h,h,l),this._axesLayout[e]={positionl,rotationu,transformh,axisNameAvailableWidtha.axisNameAvailableWidth,axisLabelShowa.axisLabelShow,nameTruncateMaxWidtha.nameTruncateMaxWidth,tickDirection1,labelDirection1}},this)},getAxisfunction(t){return this._axesMap.get(t)},dataToPointfunction(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},eachActiveStatefunction(t,e,i,n){null==i&&(i=0),null==n&&(n=t.count());var o=this._axesMap,a=this.dimensions,r=[],s=[];d(a,function(e){r.push(t.mapDimension(e)),s.push(o.get(e).model)});for(var l=this.hasAxisBrushed(),u=i;un;u++){var h;if(l){h=active;for(var c=t.getValues(r,u),f=0,p=a.length;fp;f++)if(inactive===s[f].getActiveState(c[f])){h=inactive;break}}else h=normal;e(h,u)}},hasAxisBrushedfunction(){for(var t=this.dimensions,e=this._axesMap,i=!1,n=0,o=t.length;no;n++)normal!==e.get(t[n]).model.getActiveState()&&(i=!0);return i},axisCoordToPointfunction(t,e){return Io([t,0],this._axesLayout[e].transform)},getAxisLayoutfunction(t){return i(this._axesLayout[t])},getSlidedAxisExpandWindowfunction(t){var e=this._makeLayoutInfo(),i=e.pixelDimIndex,n=e.axisExpandWindow.slice(),o=n[1]-n[0],a=[0,e.axisExpandWidth(e.axisCount-1)];if(!this.containPoint(t))return{behaviornone,axisExpandWindown};var r,s=t[i]-e.layoutBase-e.axisExpandWindow0Pos,l=slide,u=e.axisCollapseWidth,h=this._model.get(axisExpandSlideTriggerArea),c=null!=h[0];if(u)c&&u&&soh[0](l=jump,r=s-oh[2])c&&u&&so(1-h[0])(l=jump,r=s-o(1-h[2]))(r=s-oh[1])=0&&(r=s-o(1-h[1]))=0&&(r=0),(r=e.axisExpandWidthu)EL(r,n,a,all)l=none;else{o=n[1]-n[0];(n=[BL(0,a[1]so-o2)])[1]=zL(a[1],n[0]+o),n[0]=n[1]-o}return{axisExpandWindown,behaviorl}}},Ba.register(parallel,{createfunction(t,e){var i=[];return t.eachComponent(parallel,function(n,o){var a=new If(n,t,e);a.name=parallel_+o,a.resize(n,e),n.coordinateSystem=a,a.model=n,i.push(a)}),t.eachSeries(function(e){if(parallel===e.get(coordinateSystem)){var i=t.queryComponents({mainTypeparallel,indexe.get(parallelIndex),ide.get(parallelId)})[0];e.coordinateSystem=i.coordinateSystem}}),i}});var HL=YM.extend({typebaseParallelAxis,axisnull,activeIntervals[],getAreaSelectStylefunction(){return Wb([[fill,color],[lineWidth,borderWidth],[stroke,borderColor],[width,width],[opacity,opacity]])(this.getModel(areaSelectStyle))},setActiveIntervalsfunction(t){var e=this.activeIntervals=i(t);if(e)for(var n=e.length-1;n=0;n--)Bo(e[n])},getActiveStatefunction(t){var e=this.activeIntervals;if(!e.length)returnnormal;if(null==tisNaN(t))returninactive;if(1===e.length){var i=e[0];if(i[0]=t&&t=i[1])returnactive}else for(var n=0,o=e.length;no;n++)if(e[n][0]=t&&t=e[n][1])returnactive;returninactive}}),ZL={typevalue,dimnull,areaSelectStyle{width20,borderWidth1,borderColorrgba(160,197,232),colorrgba(160,197,232),opacity.3},realtime!0,z10};n(HL.prototype,CA),xD(parallel,HL,function(t,e){return e.type(e.datacategoryvalue)},ZL),YM.extend({typeparallel,dependencies[parallelAxis],coordinateSystemnull,dimensionsnull,parallelAxisIndexnull,layoutModebox,defaultOption{zlevel0,z0,left80,top60,right80,bottom60,layouthorizontal,axisExpandable!1,axisExpandCenternull,axisExpandCount0,axisExpandWidth50,axisExpandRate17,axisExpandDebounce50,axisExpandSlideTriggerArea[-.15,.05,.4],axisExpandTriggerOnclick,parallelAxisDefaultnull},initfunction(){YM.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOptionfunction(t){var e=this.option;t&&n(e,t,!0),this._initDimensions()},containsfunction(t,e){var i=t.get(parallelIndex);return null!=i&&e.getComponent(parallel,i)===this},setAxisExpandfunction(t){d([axisExpandable,axisExpandCenter,axisExpandCount,axisExpandWidth,axisExpandWindow],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},_initDimensionsfunction(){var t=this.dimensions=[],e=this.parallelAxisIndex=[];d(g(this.dependentModels.parallelAxis,function(t){return(t.get(parallelIndex)0)===this.componentIndex},this),function(i){t.push(dim+i.get(dim)),e.push(i.componentIndex)})}}),Ps({typeaxisAreaSelect,eventaxisAreaSelected},function(t,e){e.eachComponent({mainTypeparallelAxis,queryt},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),Ps(parallelAxisExpand,function(t,e){e.eachComponent({mainTypeparallel,queryt},function(e){e.setAxisExpand(t)})});var UL=v,XL=d,jL=f,YL=Math.min,qL=Math.max,KL=Math.pow,$L=1e4,JL=6,QL=6,tk=globalPan,ek={w[0,0],e[0,1],n[1,0],s[1,1]},ik={wew,eew,nns,sns,nenesw,swnesw,nwnwse,senwse},nk={brushStyle{lineWidth2,strokergba(0,0,0,0.3),fillrgba(0,0,0,0.1)},transformable!0,brushModesingle,removeOnClick!1},ok=0;Cf.prototype={constructorCf,enableBrushfunction(t){return this._brushType&&kf(this),t.brushType&&Lf(this,t),this},setPanelsfunction(t){if(t&&t.length){var e=this._panels={};d(t,function(t){e[t.panelId]=i(t)})}else this._panels=null;return this},mountfunction(t){t=t{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({positiont.position[0,0],rotationt.rotation0,scalet.scale[1,1]}),this._transform=e.getLocalTransform(),this},eachCoverfunction(t,e){XL(this._covers,t,e)},updateCoversfunction(t){function e(t,e){return(null!=t.idt.ida+e)+-+t.brushType}function o(e,i){var n=t[e];if(null!=i&&r[i]===u)s[e]=r[i];else{var o=s[e]=null!=i(r[i].__brushOption=n,r[i])Nf(l,Pf(l,n));Rf(l,o)}}t=f(t,function(t){return n(i(nk),t,!0)});var a=0-brush-index-,r=this._covers,s=this._covers=[],l=this,u=this._creatingCover;return new Hs(r,t,function(t,i){return e(t.__brushOption,i)},e).add(o).update(o).remove(function(t){r[t]!==u&&l.group.remove(r[t])}).execute(),this},unmountfunction(){return this.enableBrush(!1),Gf(this),this._zr.remove(this.group),this},disposefunction(){this.unmount(),this.off()}},h(Cf,aw);var ak={mousedownfunction(t){if(this._dragging)lp.call(this,t);else if(!t.target!t.target.draggable){op(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=Bf(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemovefunction(t){var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);if(np(this,t,e),this._dragging){op(t);var i=rp(this,t,e,!1);i&&Ff(this,i)}},mouseuplp},rk={lineXup(0),lineYup(1),rect{createCoverfunction(t,e){return Zf(UL(Jf,function(t){return t},function(t){return t}),t,e,[w,e,n,s,se,sw,ne,nw])},getCreatingRangefunction(t){var e=Hf(t);return qf(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShapefunction(t,e,i,n){Uf(t,e,i,n)},updateCommonXf,containap},polygon{createCoverfunction(t,e){var i=new Zw;return i.add(new oM({namemain,styleYf(e),silent!0})),i},getCreatingRangefunction(t){return t},endCreatingfunction(t,e){e.remove(e.childAt(0)),e.add(new nM({namemain,draggable!0,driftUL(Qf,t,e),ondragendUL(Ff,t,{isEnd!0})}))},updateCoverShapefunction(t,e,i,n){e.childAt(0).setShape({pointsep(t,e,i)})},updateCommonXf,containap}},sk=[axisLine,axisTickLabel,axisName],lk=Vs({typeparallelAxis,initfunction(t,e){lk.superApply(this,init,arguments),(this._brushController=new Cf(e.getZr())).on(brush,m(this._onBrush,this))},renderfunction(t,e,i,n){if(!pp(t,e,n)){this.axisModel=t,this.api=i,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Zw,this.group.add(this._axisGroup),t.get(show)){var r=mp(t,e),s=r.coordinateSystem,l=t.getAreaSelectStyle(),u=l.width,h=t.axis.dim,c=a({strokeContainThresholdu},s.getAxisLayout(h)),f=new ID(t,c);d(sk,f.add,f),this._axisGroup.add(f.getGroup()),this._refreshBrushController(c,l,t,r,u,i);var p=n&&!1===n.animationnullt;Ao(o,this._axisGroup,p)}}},_refreshBrushControllerfunction(t,e,i,n,o,a){var r=i.axis.getExtent(),s=r[1]-r[0],l=Math.min(30,.1Math.abs(s)),u=ue.create({xr[0],y-o2,widths,heighto});u.x-=l,u.width+=2l,this._brushController.mount({enableGlobalPan!0,rotationt.rotation,positiont.position}).setPanels([{panelIdpl,clipPathhp(u),isTargetByCursordp(u,a,n),getLinearBrushOtherExtentcp(u,0)}]).enableBrush({brushTypelineX,brushStylee,removeOnClick!0}).updateCovers(gp(i))},_onBrushfunction(t,e){var i=this.axisModel,n=i.axis,o=f(t,function(t){return[n.coordToData(t.range[0],!0),n.coordToData(t.range[1],!0)]});(!i.option.realtime===e.isEnde.removeOnClick)&&this.api.dispatchAction({typeaxisAreaSelect,parallelAxisIdi.id,intervalso})},disposefunction(){this._brushController.dispose()}});Vs({typeparallel,renderfunction(t,e,i){this._model=t,this._api=i,this._handlers(this._handlers={},d(uk,function(t,e){i.getZr().on(e,this._handlers[e]=m(t,this))},this)),Lr(this,_throttledDispatchExpand,t.get(axisExpandRate),fixRate)},disposefunction(t,e){d(this._handlers,function(t,i){e.getZr().off(i,t)}),this._handlers=null},_throttledDispatchExpandfunction(t){this._dispatchExpand(t)},_dispatchExpandfunction(t){t&&this._api.dispatchAction(a({typeparallelAxisExpand},t))}});var uk={mousedownfunction(t){vp(this,click)&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseupfunction(t){var e=this._mouseDownPoint;if(vp(this,click)&&e){var i=[t.offsetX,t.offsetY];if(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2)5)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);none!==n.behavior&&this._dispatchExpand({axisExpandWindown.axisExpandWindow})}this._mouseDownPoint=null},mousemovefunction(t){if(!this._mouseDownPoint&&vp(this,mousemove)){var e=this._model,i=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),n=i.behavior;jump===n&&this._throttledDispatchExpand.debounceNextCall(e.get(axisExpandDebounce)),this._throttledDispatchExpand(none===nnull{axisExpandWindowi.axisExpandWindow,animationjump===n&&null})}}};Ls(function(t){wf(t),bf(t)}),OI.extend({typeseries.parallel,dependencies[parallel],visualColorAccessPathlineStyle.color,getInitialDatafunction(t,e){var i=this.getSource();return yp(i,this),dl(i,this)},getRawIndicesByActiveStatefunction(t){var e=this.coordinateSystem,i=this.getData(),n=[];return e.eachActiveState(i,function(e,o){t===e&&n.push(i.getRawIndex(o))}),n},defaultOption{zlevel0,z2,coordinateSystemparallel,parallelIndex0,label{show!1},inactiveOpacity.05,activeOpacity1,lineStyle{width1,opacity.45,typesolid},emphasis{label{show!1}},progressive500,smooth!1,animationEasinglinear}});var hk=.3,ck=(Mr.extend({typeparallel,initfunction(){this._dataGroup=new Zw,this.group.add(this._dataGroup),this._data,this._initialized},renderfunction(t,e,i,n){var o=this._dataGroup,a=t.getData(),r=this._data,s=t.coordinateSystem,l=s.dimensions,u=Sp(t);if(a.diff(r).add(function(t){Mp(bp(a,o,t,l,s),a,t,u)}).update(function(e,i){var o=r.getItemGraphicEl(i),h=wp(a,e,l,s);a.setItemGraphicEl(e,o),bo(o,{shape{pointsh}},n&&!1===n.animationnullt,e),Mp(o,a,e,u)}).remove(function(t){var e=r.getItemGraphicEl(t);o.remove(e)}).execute(),!this._initialized){this._initialized=!0;var h=_p(s,t,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(h)}this._data=a},incrementalPrepareRenderfunction(t,e,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRenderfunction(t,e,i){for(var n=e.getData(),o=e.coordinateSystem,a=o.dimensions,r=Sp(e),s=t.start;st.end;s++){var l=bp(n,this._dataGroup,s,a,o);l.incremental=!0,Mp(l,n,s,r)}},disposefunction(){},removefunction(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}}),[lineStyle,normal,opacity]);Es({seriesTypeparallel,resetfunction(t,e,i){var n=t.getModel(itemStyle),o=t.getModel(lineStyle),a=e.get(color),r=o.get(color)n.get(color)a[t.seriesIndex%a.length],s=t.get(inactiveOpacity),l=t.get(activeOpacity),u=t.getModel(lineStyle).getLineStyle(),h=t.coordinateSystem,c=t.getData(),d={normalu.opacity,activel,inactives};return c.setVisual(color,r),{progressfunction(t,e){h.eachActiveState(e,function(t,i){var n=d[t];if(normal===t&&e.hasItemOption){var o=e.getItemModel(i).get(ck,!0);null!=o&&(n=o)}e.setItemVisual(i,opacity,n)},t.start,t.end)}}}});var dk=OI.extend({typeseries.sankey,layoutInfonull,getInitialDatafunction(t){var e=t.edgest.links,i=t.datat.nodes;if(i&&e)return cL(i,e,this,!0).data},setNodePositionfunction(t,e){var i=this.option.data[t];i.localX=e[0],i.localY=e[1]},getGraphfunction(){return this.getData().graph},getEdgeDatafunction(){return this.getGraph().edgeData},formatTooltipfunction(t,e,i){if(edge===i){var n=this.getDataParams(t,i),o=n.data,a=o.source+ -- +o.target;return n.value&&(a+=  +n.value),Qo(a)}return dk.superCall(this,formatTooltip,t,e)},optionUpdatedfunction(){var t=this.option;!0===t.focusNodeAdjacency&&(t.focusNodeAdjacency=allEdges)},defaultOption{zlevel0,z2,coordinateSystemview,layoutnull,left5%,top5%,right20%,bottom5%,orienthorizontal,nodeWidth20,nodeGap8,draggable!0,focusNodeAdjacency!1,layoutIterations32,label{show!0,positionright,color#000,fontSize12},itemStyle{borderWidth1,borderColor#333},lineStyle{color#314656,opacity.2,curveness.5},emphasis{label{show!0},lineStyle{opacity.6}},animationEasinglinear,animationDuration1e3}}),fk=[itemStyle,opacity],pk=[lineStyle,opacity],gk=Fn({shape{x10,y10,x20,y20,cpx10,cpy10,cpx20,cpy20,extent0,orient},buildPathfunction(t,e){var i=e.extent;vertical===e.orient(t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),t.lineTo(e.x2+i,e.y2),t.bezierCurveTo(e.cpx2+i,e.cpy2,e.cpx1+i,e.cpy1,e.x1+i,e.y1))(t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),t.lineTo(e.x2,e.y2+i),t.bezierCurveTo(e.cpx2,e.cpy2+i,e.cpx1,e.cpy1+i,e.x1,e.y1+i)),t.closePath()}});Fs({typesankey,_modelnull,_focusAdjacencyDisabled!1,renderfunction(t,e,i){var n=this,o=t.getGraph(),a=this.group,r=t.layoutInfo,s=r.width,l=r.height,u=t.getData(),h=t.getData(edge),c=t.get(orient);this._model=t,a.removeAll(),a.attr(position,[r.x,r.y]),o.eachEdge(function(e){var i=new gk;i.dataIndex=e.dataIndex,i.seriesIndex=t.seriesIndex,i.dataType=edge;var n,o,r,u,d,f,p,g,m=e.getModel(lineStyle),v=m.get(curveness),y=e.node1.getLayout(),x=e.node1.getModel(),_=x.get(localX),w=x.get(localY),b=e.node2.getLayout(),S=e.node2.getModel(),M=S.get(localX),I=S.get(localY),T=e.getLayout();switch(i.shape.extent=Math.max(1,T.dy),i.shape.orient=c,vertical===c(n=(null!=__sy.x)+T.sy,o=(null!=wwly.y)+y.dy,r=(null!=MMsb.x)+T.ty,d=n,f=o(1-v)+(u=null!=IIlb.y)v,p=r,g=ov+u(1-v))(n=(null!=__sy.x)+y.dx,o=(null!=wwly.y)+T.sy,d=n(1-v)+(r=null!=MMsb.x)v,f=o,p=nv+r(1-v),g=u=(null!=IIlb.y)+T.ty),i.setShape({x1n,y1o,x2r,y2u,cpx1d,cpy1f,cpx2p,cpy2g}),i.setStyle(m.getItemStyle()),i.style.fill){casesourcei.style.fill=e.node1.getVisual(color);break;casetargeti.style.fill=e.node2.getVisual(color)}uo(i,e.getModel(emphasis.lineStyle).getItemStyle()),a.add(i),h.setItemGraphicEl(e.dataIndex,i)}),o.eachNode(function(e){var i=e.getLayout(),n=e.getModel(),o=n.get(localX),r=n.get(localY),h=n.getModel(label),c=n.getModel(emphasis.label),d=new aM({shape{xnull!=oosi.x,ynull!=rrli.y,widthi.dx,heighti.dy},stylen.getModel(itemStyle).getItemStyle()}),f=e.getModel(emphasis.itemStyle).getItemStyle();co(d.style,f,h,c,{labelFetchert,labelDataIndexe.dataIndex,defaultTexte.id,isRectText!0}),d.setStyle(fill,e.getVisual(color)),uo(d,f),a.add(d),u.setItemGraphicEl(e.dataIndex,d),d.dataType=node}),u.eachItemGraphicEl(function(e,o){var a=u.getItemModel(o);a.get(draggable)&&(e.drift=function(e,a){n._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=a,this.dirty(),i.dispatchAction({typedragNode,seriesIdt.id,dataIndexu.getRawIndex(o),localXthis.shape.xs,localYthis.shape.yl})},e.ondragend=function(){n._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor=move),a.get(focusNodeAdjacency)&&(e.off(mouseover).on(mouseover,function(){n._focusAdjacencyDisabledi.dispatchAction({typefocusNodeAdjacency,seriesIdt.id,dataIndexe.dataIndex})}),e.off(mouseout).on(mouseout,function(){n._focusAdjacencyDisabledi.dispatchAction({typeunfocusNodeAdjacency,seriesIdt.id})}))}),h.eachItemGraphicEl(function(e,o){h.getItemModel(o).get(focusNodeAdjacency)&&(e.off(mouseover).on(mouseover,function(){n._focusAdjacencyDisabledi.dispatchAction({typefocusNodeAdjacency,seriesIdt.id,edgeDataIndexe.dataIndex})}),e.off(mouseout).on(mouseout,function(){n._focusAdjacencyDisabledi.dispatchAction({typeunfocusNodeAdjacency,seriesIdt.id})}))}),!this._data&&t.get(animation)&&a.setClipPath(Cp(a.getBoundingRect(),t,function(){a.removeClipPath()})),this._data=t.getData()},disposefunction(){},focusNodeAdjacencyfunction(t,e,i,n){var o=this._model.getData(),a=o.graph,r=n.dataIndex,s=o.getItemModel(r),l=n.edgeDataIndex;if(null!=rnull!=l){var u=a.getNodeByIndex(r),h=a.getEdgeByIndex(l);if(a.eachNode(function(t){Ap(t,fk,.1)}),a.eachEdge(function(t){Ap(t,pk,.1)}),u){Dp(u,fk);var c=s.get(focusNodeAdjacency);outEdges===cd(u.outEdges,function(t){t.dataIndex0(Dp(t,pk),Dp(t.node2,fk))})inEdges===cd(u.inEdges,function(t){t.dataIndex0(Dp(t,pk),Dp(t.node1,fk))})allEdges===c&&d(u.edges,function(t){t.dataIndex0(Dp(t,pk),Dp(t.node1,fk),Dp(t.node2,fk))})}h&&(Dp(h,pk),Dp(h.node1,fk),Dp(h.node2,fk))}},unfocusNodeAdjacencyfunction(t,e,i,n){var o=this._model.getGraph();o.eachNode(function(t){Ap(t,fk)}),o.eachEdge(function(t){Ap(t,pk)})}}),Ps({typedragNode,eventdragNode,updateupdate},function(t,e){e.eachComponent({mainTypeseries,subTypesankey,queryt},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})});Os(function(t,e,i){t.eachSeriesByType(sankey,function(t){var i=t.get(nodeWidth),n=t.get(nodeGap),o=kp(t,e);t.layoutInfo=o;var a=o.width,r=o.height,s=t.getGraph(),l=s.nodes,u=s.edges;Np(l),Pp(l,u,i,n,a,r,0!==g(l,function(t){return 0===t.getLayout().value}).length0t.get(layoutIterations),t.get(orient))})}),Es(function(t,e){t.eachSeriesByType(sankey,function(t){var e=t.getGraph().nodes;if(e.length){var i=10,n=-10;d(e,function(t){var e=t.getLayout().value;ei&&(i=e),en&&(n=e)}),d(e,function(e){var o=new jC({typecolor,mappingMethodlinear,dataExtent[i,n],visualt.get(color)}).mapValueToVisual(e.getLayout().value);e.setVisual(color,o);var a=e.getModel().get(itemStyle.color);null!=a&&e.setVisual(color,a)})}})});var mk={_baseAxisDimnull,getInitialDatafunction(t,e){var i,n,o=e.getComponent(xAxis,this.get(xAxisIndex)),a=e.getComponent(yAxis,this.get(yAxisIndex)),r=o.get(type),s=a.get(type);category===r(t.layout=horizontal,i=o.getOrdinalMeta(),n=!0)category===s(t.layout=vertical,i=a.getOrdinalMeta(),n=!0)t.layout=t.layouthorizontal;var l=[x,y],u=horizontal===t.layout01,h=this._baseAxisDim=l[u],c=l[1-u],f=[o,a],p=f[u].get(type),g=f[1-u].get(type),m=t.data;if(m&&n){var v=[];d(m,function(t,e){var i;t.value&&y(t.value)(i=t.value.slice(),t.value.unshift(e))y(t)(i=t.slice(),t.unshift(e))i=t,v.push(i)}),t.data=v}var x=this.defaultValueDimensions;return WD(this,{coordDimensions[{nameh,typeXs(p),ordinalMetai,otherDims{tooltip!1,itemName0},dimsDef[base]},{namec,typeXs(g),dimsDefx.slice()}],dimensionsCountx.length+1})},getBaseAxisfunction(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+Axis,this.get(t+AxisIndex)).axis}};h(OI.extend({typeseries.boxplot,dependencies[xAxis,yAxis,grid],defaultValueDimensions[{namemin,defaultTooltip!0},{nameQ1,defaultTooltip!0},{namemedian,defaultTooltip!0},{nameQ3,defaultTooltip!0},{namemax,defaultTooltip!0}],dimensionsnull,defaultOption{zlevel0,z2,coordinateSystemcartesian2d,legendHoverLink!0,hoverAnimation!0,layoutnull,boxWidth[7,50],itemStyle{color#fff,borderWidth1},emphasis{itemStyle{borderWidth2,shadowBlur5,shadowOffsetX2,shadowOffsetY2,shadowColorrgba(0,0,0,0.4)}},animationEasingelasticOut,animationDuration800}}),mk,!0);var vk=[itemStyle],yk=[emphasis,itemStyle],xk=(Mr.extend({typeboxplot,renderfunction(t,e,i){var n=t.getData(),o=this.group,a=this._data;this._datao.removeAll();var r=horizontal===t.get(layout)10;n.diff(a).add(function(t){if(n.hasValue(t)){var e=qp(n.getItemLayout(t),n,t,r,!0);n.setItemGraphicEl(t,e),o.add(e)}}).update(function(t,e){var i=a.getItemGraphicEl(e);if(n.hasValue(t)){var s=n.getItemLayout(t);iKp(s,i,n,t)i=qp(s,n,t,r),o.add(i),n.setItemGraphicEl(t,i)}else o.remove(i)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&o.remove(e)}).execute(),this._data=n},removefunction(t){var e=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(t){t&&e.remove(t)})},disposeB}),kn.extend({typeboxplotBoxPath,shape{},buildPathfunction(t,e){var i=e.points,n=0;for(t.moveTo(i[n][0],i[n][1]),n++;n4;n++)t.lineTo(i[n][0],i[n][1]);for(t.closePath();ni.length;n++)t.moveTo(i[n][0],i[n][1]),n++,t.lineTo(i[n][0],i[n][1])}})),_k=[itemStyle,borderColor],wk=d;Es(function(t,e){var i=t.get(color);t.eachRawSeriesByType(boxplot,function(e){var n=i[e.seriesIndex%i.length],o=e.getData();o.setVisual({legendSymbolroundRect,colore.get(_k)n}),t.isSeriesFiltered(e)o.each(function(t){var e=o.getItemModel(t);o.setItemVisual(t,{colore.get(_k,!0)})})})}),Os(function(t){var e=Jp(t);wk(e,function(t){var e=t.seriesModels;e.length&&(Qp(t),wk(e,function(e,i){tg(e,t.boxOffsetList[i],t.boxWidthList[i])}))})}),h(OI.extend({typeseries.candlestick,dependencies[xAxis,yAxis,grid],defaultValueDimensions[{nameopen,defaultTooltip!0},{nameclose,defaultTooltip!0},{namelowest,defaultTooltip!0},{namehighest,defaultTooltip!0}],dimensionsnull,defaultOption{zlevel0,z2,coordinateSystemcartesian2d,legendHoverLink!0,hoverAnimation!0,layoutnull,itemStyle{color#c23531,color0#314656,borderWidth1,borderColor#c23531,borderColor0#314656},emphasis{itemStyle{borderWidth2}},barMaxWidthnull,barMinWidthnull,barWidthnull,large!0,largeThreshold600,progressive3e3,progressiveThreshold1e4,progressiveChunkModemod,animationUpdate!1,animationEasinglinear,animationDuration300},getShadowDimfunction(){returnopen},brushSelectorfunction(t,e,i){var n=e.getItemLayout(t);return n&&i.rect(n.brushRect)}}),mk,!0);var bk=[itemStyle],Sk=[emphasis,itemStyle],Mk=[color,color0,borderColor,borderColor0],Ik=(Mr.extend({typecandlestick,renderfunction(t,e,i){this._updateDrawMode(t),this._isLargeDrawthis._renderLarge(t)this._renderNormal(t)},incrementalPrepareRenderfunction(t,e,i){this._clear(),this._updateDrawMode(t)},incrementalRenderfunction(t,e,i,n){this._isLargeDrawthis._incrementalRenderLarge(t,e)this._incrementalRenderNormal(t,e)},_updateDrawModefunction(t){var e=t.pipelineContext.large;(null==this._isLargeDrawe^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormalfunction(t){var e=t.getData(),i=this._data,n=this.group,o=e.getLayout(isSimpleBox);this._datan.removeAll(),e.diff(i).add(function(i){if(e.hasValue(i)){var a,r=e.getItemLayout(i);So(a=eg(r,0,!0),{shape{pointsr.ends}},t,i),ig(a,e,i,o),n.add(a),e.setItemGraphicEl(i,a)}}).update(function(a,r){var s=i.getItemGraphicEl(r);if(e.hasValue(a)){var l=e.getItemLayout(a);sbo(s,{shape{pointsl.ends}},t,a)s=eg(l),ig(s,e,a,o),n.add(s),e.setItemGraphicEl(a,s)}else n.remove(s)}).remove(function(t){var e=i.getItemGraphicEl(t);e&&n.remove(e)}).execute(),this._data=e},_renderLargefunction(t){this._clear(),og(t,this.group)},_incrementalRenderNormalfunction(t,e){for(var i,n=e.getData(),o=n.getLayout(isSimpleBox);null!=(i=t.next());){var a;ig(a=eg(n.getItemLayout(i)),n,i,o),a.incremental=!0,this.group.add(a)}},_incrementalRenderLargefunction(t,e){og(e,this.group,!0)},removefunction(t){this._clear()},_clearfunction(){this.group.removeAll(),this._data=null},disposeB}),kn.extend({typenormalCandlestickBox,shape{},buildPathfunction(t,e){var i=e.points;this.__simpleBox(t.moveTo(i[4][0],i[4][1]),t.lineTo(i[6][0],i[6][1]))(t.moveTo(i[0][0],i[0][1]),t.lineTo(i[1][0],i[1][1]),t.lineTo(i[2][0],i[2][1]),t.lineTo(i[3][0],i[3][1]),t.closePath(),t.moveTo(i[4][0],i[4][1]),t.lineTo(i[5][0],i[5][1]),t.moveTo(i[6][0],i[6][1]),t.lineTo(i[7][0],i[7][1]))}})),Tk=kn.extend({typelargeCandlestickBox,shape{},buildPathfunction(t,e){for(var i=e.points,n=0;ni.length;)if(this.__sign===i[n++]){var o=i[n++];t.moveTo(o,i[n++]),t.lineTo(o,i[n++])}else n+=3}}),Ak=[itemStyle,borderColor],Dk=[itemStyle,borderColor0],Ck=[itemStyle,color],Lk=[itemStyle,color0],kk={seriesTypecandlestick,planzI(),performRawSeries!0,resetfunction(t,e){function i(t,e){return e.get(t0CkLk)}function n(t,e){return e.get(t0AkDk)}var o=t.getData(),a=t.pipelineContext.large;if(o.setVisual({legendSymbolroundRect,colorPi(1,t),colorNi(-1,t),borderColorPn(1,t),borderColorNn(-1,t)}),!e.isSeriesFiltered(t))return!a&&{progressfunction(t,e){for(var o;null!=(o=t.next());){var a=e.getItemModel(o),r=e.getItemLayout(o).sign;e.setItemVisual(o,{colori(r,a),borderColorn(r,a)})}}}}},Pk=undefined!=typeof Float32ArrayFloat32ArrayArray,Nk={seriesTypecandlestick,planzI(),resetfunction(t){var e=t.coordinateSystem,i=t.getData(),n=sg(t,i),o=0,a=1,r=[x,y],s=i.mapDimension(r[o]),l=i.mapDimension(r[a],!0),u=l[0],h=l[1],c=l[2],d=l[3];if(i.setLayout({candleWidthn,isSimpleBoxn=1.3}),!(null==sl.length4))return{progresst.pipelineContext.largefunction(t,i){for(var n,r,l=new Pk(5t.count),f=0,p=[],g=[];null!=(r=t.next());){var m=i.get(s,r),v=i.get(u,r),y=i.get(h,r),x=i.get(c,r),_=i.get(d,r);isNaN(m)isNaN(x)isNaN(_)(l[f++]=NaN,f+=4)(l[f++]=rg(i,r,v,y,h),p[o]=m,p[a]=x,n=e.dataToPoint(p,null,g),l[f++]=nn[0]NaN,l[f++]=nn[1]NaN,p[a]=_,n=e.dataToPoint(p,null,g),l[f++]=nn[1]NaN)}i.setLayout(largePoints,l)}function(t,i){function r(t,i){var n=[];return n[o]=i,n[a]=t,isNaN(i)isNaN(t)[NaN,NaN]e.dataToPoint(n)}function l(t,e,i){var a=e.slice(),r=e.slice();a[o]=Yn(a[o]+n2,1,!1),r[o]=Yn(r[o]-n2,1,!0),it.push(a,r)t.push(r,a)}function f(t){return t[o]=Yn(t[o],1),t}for(var p;null!=(p=t.next());){var g=i.get(s,p),m=i.get(u,p),v=i.get(h,p),y=i.get(c,p),x=i.get(d,p),_=Math.min(m,v),w=Math.max(m,v),b=r(_,g),S=r(w,g),M=r(y,g),I=r(x,g),T=[];l(T,S,0),l(T,b,1),T.push(f(I),f(S),f(M),f(b)),i.setItemLayout(p,{signrg(i,p,m,v,h),initBaselinemvS[a]b[a],endsT,brushRectfunction(t,e,i){var s=r(t,i),l=r(e,i);return s[o]-=n2,l[o]-=n2,{xs[0],ys[1],widthanl[0]-s[0],heightal[1]-s[1]n}}(y,x,g)})}}}}};Ls(function(t){t&&y(t.series)&&d(t.series,function(t){w(t)&&k===t.type&&(t.type=candlestick)})}),Es(kk),Os(Nk),OI.extend({typeseries.effectScatter,dependencies[grid,polar],getInitialDatafunction(t,e){return dl(this.getSource(),this)},brushSelectorpoint,defaultOption{coordinateSystemcartesian2d,zlevel0,z2,legendHoverLink!0,effectTyperipple,progressive0,showEffectOnrender,rippleEffect{period4,scale2.5,brushTypefill},symbolSize10}});var Ok=hg.prototype;Ok.stopEffectAnimation=function(){this.childAt(1).removeAll()},Ok.startEffectAnimation=function(t){for(var e=t.symbolType,i=t.color,n=this.childAt(1),o=0;o3;o++){var a=Xl(e,-1,-1,2,2,i);a.attr({style{strokeNoScale!0},z299,silent!0,scale[.5,.5]});var r=-o3t.period+t.effectOffset;a.animate(,!0).when(t.period,{scale[t.rippleScale2,t.rippleScale2]}).delay(r).start(),a.animateStyle(!0).when(t.period,{opacity0}).delay(r).start(),n.add(a)}ug(n,t)},Ok.updateEffectAnimation=function(t){for(var e=this._effectCfg,i=this.childAt(1),n=[symbolType,period,rippleScale],o=0;on.length;o++){var a=n[o];if(e[a]!==t[a])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}ug(i,t)},Ok.highlight=function(){this.trigger(emphasis)},Ok.downplay=function(){this.trigger(normal)},Ok.updateData=function(t,e){var i=t.hostModel;this.childAt(0).updateData(t,e);var n=this.childAt(1),o=t.getItemModel(e),a=t.getItemVisual(e,symbol),r=lg(t.getItemVisual(e,symbolSize)),s=t.getItemVisual(e,color);n.attr(scale,r),n.traverse(function(t){t.attr({fills})});var l=o.getShallow(symbolOffset);if(l){var u=n.position;u[0]=Ro(l[0],r[0]),u[1]=Ro(l[1],r[1])}n.rotation=(o.getShallow(symbolRotate)0)Math.PI1800;var h={};if(h.showEffectOn=i.get(showEffectOn),h.rippleScale=o.get(rippleEffect.scale),h.brushType=o.get(rippleEffect.brushType),h.period=1e3o.get(rippleEffect.period),h.effectOffset=et.count(),h.z=o.getShallow(z)0,h.zlevel=o.getShallow(zlevel)0,h.symbolType=a,h.color=s,this.off(mouseover).off(mouseout).off(emphasis).off(normal),render===h.showEffectOn)this._effectCfgthis.updateEffectAnimation(h)this.startEffectAnimation(h),this._effectCfg=h;else{this._effectCfg=null,this.stopEffectAnimation();var c=this.childAt(0),d=function(){c.highlight(),render!==h.showEffectOn&&this.startEffectAnimation(h)},f=function(){c.downplay(),render!==h.showEffectOn&&this.stopEffectAnimation()};this.on(mouseover,d,this).on(mouseout,f,this).on(emphasis,d,this).on(normal,f,this)}this._effectCfg=h},Ok.fadeOut=function(t){this.off(mouseover).off(mouseout).off(emphasis).off(normal),t&&t()},u(hg,Zw),Fs({typeeffectScatter,initfunction(){this._symbolDraw=new Su(hg)},renderfunction(t,e,i){var n=t.getData(),o=this._symbolDraw;o.updateData(n),this.group.add(o.group)},updateTransformfunction(t,e,i){var n=t.getData();this.group.dirty();var o=cD().reset(t);o.progress&&o.progress({start0,endn.count()},n),this._symbolDraw.updateLayout(n)},_updateGroupTransformfunction(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=Mt(e.getRoamTransform()),this.group.decomposeTransform())},removefunction(t,e){this._symbolDraw&&this._symbolDraw.remove(e)},disposefunction(){}}),Es(hD(effectScatter,circle)),Os(cD(effectScatter));var Ek=undefined==typeof Uint32ArrayArrayUint32Array,Rk=undefined==typeof Float64ArrayArrayFloat64Array,zk=OI.extend({typeseries.lines,dependencies[grid,polar],visualColorAccessPathlineStyle.color,initfunction(t){t.data=t.data[],cg(t);var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),zk.superApply(this,init,arguments)},mergeOptionfunction(t){if(t.data=t.data[],cg(t),t.data){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count))}zk.superApply(this,mergeOption,arguments)},appendDatafunction(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords(this._flatCoords=z(this._flatCoords,e.flatCoords),this._flatCoordsOffset=z(this._flatCoordsOffset,e.flatCoordsOffset))(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModelfunction(t){var e=this.getData().getItemModel(t);return e.option instanceof Arraye.optione.getShallow(coords)},getLineCoordsCountfunction(t){return this._flatCoordsOffsetthis._flatCoordsOffset[2t+1]this._getCoordsFromItemModel(t).length},getLineCoordsfunction(t,e){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[2t],n=this._flatCoordsOffset[2t+1],o=0;on;o++)e[o]=e[o][],e[o][0]=this._flatCoords[i+2o],e[o][1]=this._flatCoords[i+2o+1];return n}for(var a=this._getCoordsFromItemModel(t),o=0;oa.length;o++)e[o]=e[o][],e[o][0]=a[o][0],e[o][1]=a[o][1];return a.length},_processFlatCoordsArrayfunction(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),number==typeof t[0]){for(var i=t.length,n=new Ek(i),o=new Rk(i),a=0,r=0,s=0,l=0;li;){s++;var u=t[l++];n[r++]=a+e,n[r++]=u;for(var h=0;hu;h++){var c=t[l++],d=t[l++];o[a++]=c,o[a++]=d}}return{flatCoordsOffsetnew Uint32Array(n.buffer,0,r),flatCoordso,counts}}return{flatCoordsOffsetnull,flatCoordsnull,countt.length}},getInitialDatafunction(t,e){var i=new eA([value],this);return i.hasItemOption=!1,i.initData(t.data,[],function(t,e,n,o){if(t instanceof Array)return NaN;i.hasItemOption=!0;var a=t.value;return null!=aa instanceof Arraya[o]avoid 0}),i},formatTooltipfunction(t){var e=this.getData().getItemModel(t),i=e.get(name);if(i)return i;var n=e.get(fromName),o=e.get(toName),a=[];return null!=n&&a.push(n),null!=o&&a.push(o),Qo(a.join(  ))},preventIncrementalfunction(){return!!this.get(effect.show)},getProgressivefunction(){var t=this.option.progressive;return null==tthis.option.large1e4this.get(progressive)t},getProgressiveThresholdfunction(){var t=this.option.progressiveThreshold;return null==tthis.option.large2e4this.get(progressiveThreshold)t},defaultOption{coordinateSystemgeo,zlevel0,z2,legendHoverLink!0,hoverAnimation!0,xAxisIndex0,yAxisIndex0,symbol[none,none],symbolSize[10,10],geoIndex0,effect{show!1,period4,constantSpeed0,symbolcircle,symbolSize3,loop!0,trailLength.2},large!1,largeThreshold2e3,polyline!1,label{show!1,positionend},lineStyle{opacity.5}}}),Bk=dg.prototype;Bk.createLine=function(t,e,i){return new $d(t,e,i)},Bk._updateEffectSymbol=function(t,e){var i=t.getItemModel(e).getModel(effect),n=i.get(symbolSize),o=i.get(symbol);y(n)(n=[n,n]);var a=i.get(color)t.getItemVisual(e,color),r=this.childAt(1);this._symbolType!==o&&(this.remove(r),(r=Xl(o,-.5,-.5,1,1,a)).z2=100,r.culling=!0,this.add(r)),r&&(r.setStyle(shadowColor,a),r.setStyle(i.getItemStyle([color])),r.attr(scale,n),r.setColor(a),r.attr(scale,n),this._symbolType=o,this._updateEffectAnimation(t,i,e))},Bk._updateEffectAnimation=function(t,e,i){var n=this.childAt(1);if(n){var o=this,a=t.getItemLayout(i),r=1e3e.get(period),s=e.get(loop),l=e.get(constantSpeed),u=T(e.get(delay),function(e){return et.count()r3}),h=function==typeof u;if(n.ignore=!0,this.updateAnimationPoints(n,a),l0&&(r=this.getLineLength(n)l1e3),r!==this._periods!==this._loop){n.stopAnimation();var c=u;h&&(c=u(i)),n.__t0&&(c=-rn.__t),n.__t=0;var d=n.animate(,s).when(r,{__t1}).delay(c).during(function(){o.updateSymbolPosition(n)});sd.done(function(){o.remove(n)}),d.start()}this._period=r,this._loop=s}},Bk.getLineLength=function(t){return ew(t.__p1,t.__cp1)+ew(t.__cp1,t.__p2)},Bk.updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2][(e[0][0]+e[1][0])2,(e[0][1]+e[1][1])2]},Bk.updateData=function(t,e,i){this.childAt(0).updateData(t,e,i),this._updateEffectSymbol(t,e)},Bk.updateSymbolPosition=function(t){var e=t.__p1,i=t.__p2,n=t.__cp1,o=t.__t,a=t.position,r=rn,s=sn;a[0]=r(e[0],n[0],i[0],o),a[1]=r(e[1],n[1],i[1],o);var l=s(e[0],n[0],i[0],o),u=s(e[1],n[1],i[1],o);t.rotation=-Math.atan2(u,l)-Math.PI2,t.ignore=!1},Bk.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var i=t.getItemModel(e).getModel(effect);this._updateEffectAnimation(t,i,e)},u(dg,Zw);var Vk=fg.prototype;Vk._createPolyline=function(t,e,i){var n=t.getItemLayout(e),o=new oM({shape{pointsn}});this.add(o),this._updateCommonStl(t,e,i)},Vk.updateData=function(t,e,i){var n=t.hostModel;bo(this.childAt(0),{shape{pointst.getItemLayout(e)}},n,e),this._updateCommonStl(t,e,i)},Vk._updateCommonStl=function(t,e,i){var n=this.childAt(0),o=t.getItemModel(e),a=t.getItemVisual(e,color),s=i&&i.lineStyle,l=i&&i.hoverLineStyle;i&&!t.hasItemOption(s=o.getModel(lineStyle).getLineStyle(),l=o.getModel(emphasis.lineStyle).getLineStyle()),n.useStyle(r({strokeNoScale!0,fillnone,strokea},s)),n.hoverStyle=l,uo(this)},Vk.updateLayout=function(t,e){this.childAt(0).setShape(points,t.getItemLayout(e))},u(fg,Zw);var Gk=pg.prototype;Gk.createLine=function(t,e,i){return new fg(t,e,i)},Gk.updateAnimationPoints=function(t,e){this._points=e;for(var i=[0],n=0,o=1;oe.length;o++){var a=e[o-1],r=e[o];n+=ew(a,r),i.push(n)}if(0!==n){for(o=0;oi.length;o++)i[o]=n;this._offsets=i,this._length=n}},Gk.getLineLength=function(t){return this._length},Gk.updateSymbolPosition=function(t){var e=t.__t,i=this._points,n=this._offsets,o=i.length;if(n){var a=this._lastFrame;if(ethis._lastFramePercent){for(r=Math.min(a+1,o-1);r=0&&!(n[r]=e);r--);r=Math.min(r,o-2)}else{for(var r=a;ro&&!(n[r]e);r++);r=Math.min(r-1,o-2)}J(t.position,i[r],i[r+1],(e-n[r])(n[r+1]-n[r]));var s=i[r+1][0]-i[r][0],l=i[r+1][1]-i[r][1];t.rotation=-Math.atan2(l,s)-Math.PI2,this._lastFrame=r,this._lastFramePercent=e,t.ignore=!1}},u(pg,dg);var Fk=Fn({shape{polyline!1,curveness0,segs[]},buildPathfunction(t,e){var i=e.segs,n=e.curveness;if(e.polyline)for(r=0;ri.length;){var o=i[r++];if(o0){t.moveTo(i[r++],i[r++]);for(var a=1;ao;a++)t.lineTo(i[r++],i[r++])}}else for(var r=0;ri.length;){var s=i[r++],l=i[r++],u=i[r++],h=i[r++];if(t.moveTo(s,l),n0){var c=(s+u)2-(l-h)n,d=(l+h)2-(u-s)n;t.quadraticCurveTo(c,d,u,h)}else t.lineTo(u,h)}},findDataIndexfunction(t,e){var i=this.shape,n=i.segs,o=i.curveness;if(i.polyline)for(var a=0,r=0;rn.length;){var s=n[r++];if(s0)for(var l=n[r++],u=n[r++],h=1;hs;h++)if(vn(l,u,c=n[r++],d=n[r++]))return a;a++}else for(var a=0,r=0;rn.length;){var l=n[r++],u=n[r++],c=n[r++],d=n[r++];if(o0){if(xn(l,u,(l+c)2-(u-d)o,(u+d)2-(c-l)o,c,d))return a}else if(vn(l,u,c,d))return a;a++}return-1}}),Wk=gg.prototype;Wk.isPersistent=function(){return!this._incremental},Wk.updateData=function(t){this.group.removeAll();var e=new Fk({rectHover!0,cursordefault});e.setShape({segst.getLayout(linesPoints)}),this._setCommon(e,t),this.group.add(e),this._incremental=null},Wk.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()5e5(this._incremental(this._incremental=new Gn({silent!0})),this.group.add(this._incremental))this._incremental=null},Wk.incrementalUpdate=function(t,e){var i=new Fk;i.setShape({segse.getLayout(linesPoints)}),this._setCommon(i,e,!!this._incremental),this._incrementalthis._incremental.addDisplayable(i,!0)(i.rectHover=!0,i.cursor=default,i.__startIndex=t.start,this.group.add(i))},Wk.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Wk._setCommon=function(t,e,i){var n=e.hostModel;t.setShape({polylinen.get(polyline),curvenessn.get(lineStyle.curveness)}),t.useStyle(n.getModel(lineStyle).getLineStyle()),t.style.strokeNoScale=!0;var o=e.getVisual(color);o&&t.setStyle(stroke,o),t.setStyle(fill),i(t.seriesIndex=n.seriesIndex,t.on(mousemove,function(e){t.dataIndex=null;var i=t.findDataIndex(e.offsetX,e.offsetY);i0&&(t.dataIndex=i+t.__startIndex)}))},Wk._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var Hk={seriesTypelines,planzI(),resetfunction(t){var e=t.coordinateSystem,i=t.get(polyline),n=t.pipelineContext.large;return{progressfunction(o,a){var r=[];if(n){var s,l=o.end-o.start;if(i){for(var u=0,h=o.start;ho.end;h++)u+=t.getLineCoordsCount(h);s=new Float32Array(l+2u)}else s=new Float32Array(4l);for(var c=0,d=[],h=o.start;ho.end;h++){g=t.getLineCoords(h,r),i&&(s[c++]=g);for(var f=0;fg;f++)d=e.dataToPoint(r[f],!1,d),s[c++]=d[0],s[c++]=d[1]}a.setLayout(linesPoints,s)}else for(h=o.start;ho.end;h++){var p=a.getItemModel(h),g=t.getLineCoords(h,r),m=[];if(i)for(var v=0;vg;v++)m.push(e.dataToPoint(r[v]));else{m[0]=e.dataToPoint(r[0]),m[1]=e.dataToPoint(r[1]);var y=p.get(lineStyle.curveness);+y&&(m[2]=[(m[0][0]+m[1][0])2-(m[0][1]-m[1][1])y,(m[0][1]+m[1][1])2-(m[1][0]-m[0][0])y])}a.setItemLayout(h,m)}}}}};Fs({typelines,initfunction(){},renderfunction(t,e,i){var n=t.getData(),o=this._updateLineDraw(n,t),a=t.get(zlevel),r=t.get(effect.trailLength),s=i.getZr(),l=svg===s.painter.getType();ls.painter.getLayer(a).clear(!0),null==this._lastZlevells.configLayer(this._lastZlevel,{motionBlur!1}),this._showEffect(t)&&r&&(ls.configLayer(a,{motionBlur!0,lastFrameAlphaMath.max(Math.min(r10+.9,1),0)})),o.updateData(n),this._lastZlevel=a,this._finished=!0},incrementalPrepareRenderfunction(t,e,i){var n=t.getData();this._updateLineDraw(n,t).incrementalPrepareUpdate(n),this._clearLayer(i),this._finished=!1},incrementalRenderfunction(t,e,i){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransformfunction(t,e,i){var n=t.getData(),o=t.pipelineContext;if(!this._finishedo.largeo.progressiveRender)return{update!0};var a=Hk.reset(t);a.progress&&a.progress({start0,endn.count()},n),this._lineDraw.updateLayout(),this._clearLayer(i)},_updateLineDrawfunction(t,e){var i=this._lineDraw,n=this._showEffect(e),o=!!e.get(polyline),a=e.pipelineContext.large;return i&&n===this._hasEffet&&o===this._isPolyline&&a===this._isLargeDraw(i&&i.remove(),i=this._lineDraw=anew ggnew Jd(onpgfgndg$d),this._hasEffet=n,this._isPolyline=o,this._isLargeDraw=a,this.group.removeAll()),this.group.add(i.group),i},_showEffectfunction(t){return!!t.get(effect.show)},_clearLayerfunction(t){var e=t.getZr();svg===e.painter.getType()null==this._lastZlevele.painter.getLayer(this._lastZlevel).clear(!0)},removefunction(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},disposefunction(){}});var Zk=lineStyle.opacity.split(.),Uk={seriesTypelines,resetfunction(t,e,i){var n=mg(t.get(symbol)),o=mg(t.get(symbolSize)),a=t.getData();return a.setVisual(fromSymbol,n&&n[0]),a.setVisual(toSymbol,n&&n[1]),a.setVisual(fromSymbolSize,o&&o[0]),a.setVisual(toSymbolSize,o&&o[1]),a.setVisual(opacity,t.get(Zk)),{dataEacha.hasItemOptionfunction(t,e){var i=t.getItemModel(e),n=mg(i.getShallow(symbol,!0)),o=mg(i.getShallow(symbolSize,!0)),a=i.get(Zk);n[0]&&t.setItemVisual(e,fromSymbol,n[0]),n[1]&&t.setItemVisual(e,toSymbol,n[1]),o[0]&&t.setItemVisual(e,fromSymbolSize,o[0]),o[1]&&t.setItemVisual(e,toSymbolSize,o[1]),t.setItemVisual(e,opacity,a)}null}}};Os(Hk),Es(Uk),OI.extend({typeseries.heatmap,getInitialDatafunction(t,e){return dl(this.getSource(),this,{generateCoordvalue})},preventIncrementalfunction(){var t=Ba.get(this.get(coordinateSystem));if(t&&t.dimensions)returnlng===t.dimensions[0]&&lat===t.dimensions[1]},defaultOption{coordinateSystemcartesian2d,zlevel0,z2,geoIndex0,blurSize30,pointSize20,maxOpacity1,minOpacity0}});vg.prototype={updatefunction(t,e,i,n,o,a){var r=this._getBrush(),s=this._getGradient(t,o,inRange),l=this._getGradient(t,o,outOfRange),u=this.pointSize+this.blurSize,h=this.canvas,c=h.getContext(2d),d=t.length;h.width=e,h.height=i;for(var f=0;fd;++f){var p=t[f],g=p[0],m=p[1],v=n(p[2]);c.globalAlpha=v,c.drawImage(r,g-u,m-u)}if(!h.width!h.height)return h;for(var y=c.getImageData(0,0,h.width,h.height),x=y.data,_=0,w=x.length,b=this.minOpacity,S=this.maxOpacity-b;_w;){var v=x[_+3]256,M=4Math.floor(255v);if(v0){var I=a(v)sl;v0&&(v=vS+b),x[_++]=I[M],x[_++]=I[M+1],x[_++]=I[M+2],x[_++]=I[M+3]v256}else _+=4}return c.putImageData(y,0,0),h},_getBrushfunction(){var t=this._brushCanvas(this._brushCanvas=Y_()),e=this.pointSize+this.blurSize,i=2e;t.width=i,t.height=i;var n=t.getContext(2d);return n.clearRect(0,0,i,i),n.shadowOffsetX=i,n.shadowBlur=this.blurSize,n.shadowColor=#000,n.beginPath(),n.arc(-e,e,this.pointSize,0,2Math.PI,!0),n.closePath(),n.fill(),t},_getGradientfunction(t,e,i){for(var n=this._gradientPixels,o=n[i](n[i]=new Uint8ClampedArray(1024)),a=[0,0,0,0],r=0,s=0;s256;s++)e[i](s255,!0,a),o[r++]=a[0],o[r++]=a[1],o[r++]=a[2],o[r++]=a[3];return o}},Fs({typeheatmap,renderfunction(t,e,i){var n;e.eachComponent(visualMap,function(e){e.eachTargetSeries(function(i){i===t&&(n=e)})}),this.group.removeAll(),this._incrementalDisplayable=null;var o=t.coordinateSystem;cartesian2d===o.typecalendar===o.typethis._renderOnCartesianAndCalendar(t,i,0,t.getData().count())_g(o)&&this._renderOnGeo(o,t,n,i)},incrementalPrepareRenderfunction(t,e,i){this.group.removeAll()},incrementalRenderfunction(t,e,i,n){e.coordinateSystem&&this._renderOnCartesianAndCalendar(e,n,t.start,t.end,!0)},_renderOnCartesianAndCalendarfunction(t,e,i,n,o){var r,s,l=t.coordinateSystem;if(cartesian2d===l.type){var u=l.getAxis(x),h=l.getAxis(y);r=u.getBandWidth(),s=h.getBandWidth()}for(var c=this.group,d=t.getData(),f=t.getModel(itemStyle).getItemStyle([color]),p=t.getModel(emphasis.itemStyle).getItemStyle(),g=t.getModel(label),m=t.getModel(emphasis.label),v=l.type,y=cartesian2d===v[d.mapDimension(x),d.mapDimension(y),d.mapDimension(value)][d.mapDimension(time),d.mapDimension(value)],x=i;xn;x++){var _;if(cartesian2d===v){if(isNaN(d.get(y[2],x)))continue;var w=l.dataToPoint([d.get(y[0],x),d.get(y[1],x)]);_=new aM({shape{xw[0]-r2,yw[1]-s2,widthr,heights},style{filld.getItemVisual(x,color),opacityd.getItemVisual(x,opacity)}})}else{if(isNaN(d.get(y[1],x)))continue;_=new aM({z21,shapel.dataToRect([d.get(y[0],x)]).contentShape,style{filld.getItemVisual(x,color),opacityd.getItemVisual(x,opacity)}})}var b=d.getItemModel(x);d.hasItemOption&&(f=b.getModel(itemStyle).getItemStyle([color]),p=b.getModel(emphasis.itemStyle).getItemStyle(),g=b.getModel(label),m=b.getModel(emphasis.label));var S=t.getRawValue(x),M=-;S&&null!=S[2]&&(M=S[2]),co(f,p,g,m,{labelFetchert,labelDataIndexx,defaultTextM,isRectText!0}),_.setStyle(f),uo(_,d.hasItemOptionpa({},p)),_.incremental=o,o&&(_.useHoverLayer=!0),c.add(_),d.setItemGraphicEl(x,_)}},_renderOnGeofunction(t,e,i,n){var o=i.targetVisuals.inRange,a=i.targetVisuals.outOfRange,r=e.getData(),s=this._hmLayerthis._hmLayernew vg;s.blurSize=e.get(blurSize),s.pointSize=e.get(pointSize),s.minOpacity=e.get(minOpacity),s.maxOpacity=e.get(maxOpacity);var l=t.getViewRect().clone(),u=t.getRoamTransform();l.applyTransform(u);var h=Math.max(l.x,0),c=Math.max(l.y,0),d=Math.min(l.width+l.x,n.getWidth()),f=Math.min(l.height+l.y,n.getHeight()),p=d-h,g=f-c,m=[r.mapDimension(lng),r.mapDimension(lat),r.mapDimension(value)],v=r.mapArray(m,function(e,i,n){var o=t.dataToPoint([e,i]);return o[0]-=h,o[1]-=c,o.push(n),o}),y=i.getExtent(),x=visualMap.continuous===i.typexg(y,i.option.range)yg(y,i.getPieceList(),i.option.selected);s.update(v,p,g,o.color.getNormalizer(),{inRangeo.color.getColorMapper(),outOfRangea.color.getColorMapper()},x);var _=new hi({style{widthp,heightg,xh,yc,images.canvas},silent!0});this.group.add(_)},disposefunction(){}});var Xk=ED.extend({typeseries.pictorialBar,dependencies[grid],defaultOption{symbolcircle,symbolSizenull,symbolRotatenull,symbolPositionnull,symbolOffsetnull,symbolMarginnull,symbolRepeat!1,symbolRepeatDirectionend,symbolClip!1,symbolBoundingDatanull,symbolPatternSize400,barGap-100%,progressive0,hoverAnimation!1},getInitialDatafunction(t){return t.stack=null,Xk.superApply(this,getInitialData,arguments)}}),jk=[itemStyle,borderWidth],Yk=[{xyx,whwidth,index0,posDesc[left,right]},{xyy,whheight,index1,posDesc[top,bottom]}],qk=new KS;Fs({typepictorialBar,renderfunction(t,e,i){var n=this.group,o=t.getData(),a=this._data,r=t.coordinateSystem,s=!!r.getBaseAxis().isHorizontal(),l=r.grid.getRect(),u={ecSize{widthi.getWidth(),heighti.getHeight()},seriesModelt,coordSysr,coordSysExtent[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontals,valueDimYk[+s],categoryDimYk[1-s]};return o.diff(a).add(function(t){if(o.hasValue(t)){var e=Pg(o,t),i=wg(o,t,e,u),a=Rg(o,u,i);o.setItemGraphicEl(t,a),n.add(a),Wg(a,u,i)}}).update(function(t,e){var i=a.getItemGraphicEl(e);if(o.hasValue(t)){var r=Pg(o,t),s=wg(o,t,r,u),l=Vg(o,s);i&&l!==i.__pictorialShapeStr&&(n.remove(i),o.setItemGraphicEl(t,null),i=null),izg(i,u,s)i=Rg(o,u,s,!0),o.setItemGraphicEl(t,i),i.__pictorialSymbolMeta=s,n.add(i),Wg(i,u,s)}else n.remove(i)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&Bg(a,t,e.__pictorialSymbolMeta.animationModel,e)}).execute(),this._data=o,this.group},disposeB,removefunction(t,e){var i=this.group,n=this._data;t.get(animation)n&&n.eachItemGraphicEl(function(e){Bg(n,e.dataIndex,t,e)})i.removeAll()}});Os(v(kl,pictorialBar)),Es(hD(pictorialBar,roundRect));var Kk=function(t,e,i,n,o){HA.call(this,t,e,i),this.type=nvalue,this.position=obottom,this.orient=null};Kk.prototype={constructorKk,modelnull,isHorizontalfunction(){var t=this.position;returntop===tbottom===t},pointToDatafunction(t,e){return this.coordinateSystem.pointToData(t,e)[0]},toGlobalCoordnull,toLocalCoordnull},u(Kk,HA),Zg.prototype={typesingleAxis,axisPointerEnabled!0,constructorZg,_initfunction(t,e,i){var n=this.dimension,o=new Kk(n,Vl(t),[0,0],t.get(type),t.get(position)),a=category===o.type;o.onBand=a&&t.get(boundaryGap),o.inverse=t.get(inverse),o.orient=t.get(orient),t.axis=o,o.model=t,o.coordinateSystem=this,this._axis=o},updatefunction(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();d(e.mapDimension(this.dimension,!0),function(t){this._axis.scale.unionExtentFromData(e,t)},this),Bl(this._axis.scale,this._axis.model)}},this)},resizefunction(t,e){this._rect=la({leftt.get(left),topt.get(top),rightt.get(right),bottomt.get(bottom),widtht.get(width),heightt.get(height)},{widthe.getWidth(),heighte.getHeight()}),this._adjustAxis()},getRectfunction(){return this._rect},_adjustAxisfunction(){var t=this._rect,e=this._axis,i=e.isHorizontal(),n=i[0,t.width][0,t.height],o=e.reverse10;e.setExtent(n[o],n[1-o]),this._updateAxisTransform(e,it.xt.y)},_updateAxisTransformfunction(t,e){var i=t.getExtent(),n=i[0]+i[1],o=t.isHorizontal();t.toGlobalCoord=ofunction(t){return t+e}function(t){return n-t+e},t.toLocalCoord=ofunction(t){return t-e}function(t){return n-t+e}},getAxisfunction(){return this._axis},getBaseAxisfunction(){return this._axis},getAxesfunction(){return[this._axis]},getTooltipAxesfunction(){return{baseAxes[this.getAxis()]}},containPointfunction(t){var e=this.getRect(),i=this.getAxis();returnhorizontal===i.orienti.contain(i.toLocalCoord(t[0]))&&t[1]=e.y&&t[1]=e.y+e.heighti.contain(i.toLocalCoord(t[1]))&&t[0]=e.y&&t[0]=e.y+e.height},pointToDatafunction(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t[horizontal===e.orient01]))]},dataToPointfunction(t){var e=this.getAxis(),i=this.getRect(),n=[],o=horizontal===e.orient01;return t instanceof Array&&(t=t[0]),n[o]=e.toGlobalCoord(e.dataToCoord(+t)),n[1-o]=0===oi.y+i.height2i.x+i.width2,n}},Ba.register(single,{createfunction(t,e){var i=[];return t.eachComponent(singleAxis,function(n,o){var a=new Zg(n,t,e);a.name=single_+o,a.resize(n,e),n.coordinateSystem=a,i.push(a)}),t.eachSeries(function(e){if(singleAxis===e.get(coordinateSystem)){var i=t.queryComponents({mainTypesingleAxis,indexe.get(singleAxisIndex),ide.get(singleAxisId)})[0];e.coordinateSystem=i&&i.coordinateSystem}}),i},dimensionsZg.prototype.dimensions});var $k=[axisLine,axisTickLabel,axisName],Jk=LD.extend({typesingleAxis,axisPointerClassSingleAxisPointer,renderfunction(t,e,i,n){var o=this.group;o.removeAll();var a=Ug(t),r=new ID(t,a);d($k,r.add,r),o.add(r.getGroup()),t.get(splitLine.show)&&this._splitLine(t),Jk.superCall(this,render,t,e,i,n)},_splitLinefunction(t){var e=t.axis;if(!e.scale.isBlank()){var i=t.getModel(splitLine),n=i.getModel(lineStyle),o=n.get(width),a=n.get(color);a=a instanceof Arraya[a];for(var r=t.coordinateSystem.getRect(),s=e.isHorizontal(),l=[],u=0,h=e.getTicksCoords({tickModeli}),c=[],d=[],f=0;fh.length;++f){var p=e.toGlobalCoord(h[f].coord);s(c[0]=p,c[1]=r.y,d[0]=p,d[1]=r.y+r.height)(c[0]=r.x,c[1]=p,d[0]=r.x+r.width,d[1]=p);var g=u++%a.length;l[g]=l[g][],l[g].push(new rM(Xn({shape{x1c[0],y1c[1],x2d[0],y2d[1]},style{lineWidtho},silent!0})))}for(f=0;fl.length;++f)this.group.add(xM(l[f],{style{strokea[f%a.length],lineDashn.getLineDash(o),lineWidtho},silent!0}))}}}),Qk=YM.extend({typesingleAxis,layoutModebox,axisnull,coordinateSystemnull,getCoordSysModelfunction(){return this}}),tP={left5%,top5%,right5%,bottom5%,typevalue,positionbottom,orienthorizontal,axisLine{show!0,lineStyle{width2,typesolid}},tooltip{show!0},axisTick{show!0,length6,lineStyle{width2}},axisLabel{show!0,intervalauto},splitLine{show!0,lineStyle{typedashed,opacity.2}}};n(Qk.prototype,CA),xD(single,Qk,function(t,e){return e.type(e.datacategoryvalue)},tP);var eP=function(t,e){var i,n=[],o=t.seriesIndex;if(null==o!(i=e.getSeriesByIndex(o)))return{point[]};var a=i.getData(),r=zi(a,t);if(null==rr0y(r))return{point[]};var s=a.getItemGraphicEl(r),l=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(r)[];else if(l&&l.dataToPoint)n=l.dataToPoint(a.getValues(f(l.dimensions,function(t){return a.mapDimension(t)}),r,!0))[];else if(s){var u=s.getBoundingRect().clone();u.applyTransform(s.transform),n=[u.x+u.width2,u.y+u.height2]}return{pointn,els}},iP=d,nP=v,oP=Bi(),aP=(Bs({typeaxisPointer,coordSysAxesInfonull,defaultOption{showauto,triggerOnnull,zlevel0,z50,typeline,snap!1,triggerTooltip!0,valuenull,statusnull,link[],animationnull,animationDurationUpdate200,lineStyle{color#aaa,width1,typesolid},shadowStyle{colorrgba(150,150,150,0.3)},label{show!0,formatternull,precisionauto,margin3,color#fff,padding[5,7,5,7],backgroundColorauto,borderColornull,borderWidth0,shadowBlur3,shadowColor#aaa},handle{show!1,iconM10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z,size45,margin50,color#333,shadowBlur3,shadowColor#aaa,shadowOffsetX0,shadowOffsetY2,throttle40}}}),Bi()),rP=d,sP=Vs({typeaxisPointer,renderfunction(t,e,i){var n=e.getComponent(tooltip),o=t.get(triggerOn)n&&n.get(triggerOn)mousemoveclick;im(axisPointer,i,function(t,e,i){none!==o&&(leave===to.indexOf(t)=0)&&i({typeupdateAxisPointer,currTriggert,xe&&e.offsetX,ye&&e.offsetY})})},removefunction(t,e){lm(e.getZr(),axisPointer),sP.superApply(this._model,remove,arguments)},disposefunction(t,e){lm(axisPointer,e),sP.superApply(this._model,dispose,arguments)}}),lP=Bi(),uP=i,hP=m;(um.prototype={_groupnull,_lastGraphicKeynull,_handlenull,_dragging!1,_lastValuenull,_lastStatusnull,_payloadInfonull,animationThreshold15,renderfunction(t,e,i,n){var o=e.get(value),a=e.get(status);if(this._axisModel=t,this._axisPointerModel=e,this._api=i,nthis._lastValue!==othis._lastStatus!==a){this._lastValue=o,this._lastStatus=a;var r=this._group,s=this._handle;if(!ahide===a)return r&&r.hide(),void(s&&s.hide());r&&r.show(),s&&s.show();var l={};this.makeElOption(l,o,t,e,i);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(t,e);if(r){var c=v(hm,e,h);this.updatePointerEl(r,l,c,e),this.updateLabelEl(r,l,c,e)}else r=this._group=new Zw,this.createPointerEl(r,l,t,e),this.createLabelEl(r,l,t,e),i.getZr().add(r);pm(r,e,!0),this._renderHandle(o)}},removefunction(t){this.clear(t)},disposefunction(t){this.clear(t)},determineAnimationfunction(t,e){var i=e.get(animation),n=t.axis,o=category===n.type,a=e.get(snap);if(!a&&!o)return!1;if(auto===inull==i){var r=this.animationThreshold;if(o&&n.getBandWidth()r)return!0;if(a){var s=xh(t).seriesDataCount,l=n.getExtent();return Math.abs(l[0]-l[1])sr}return!1}return!0===i},makeElOptionfunction(t,e,i,n,o){},createPointerElfunction(t,e,i,n){var o=e.pointer;if(o){var a=lP(t).pointerEl=new bM[o.type](uP(e.pointer));t.add(a)}},createLabelElfunction(t,e,i,n){if(e.label){var o=lP(t).labelEl=new aM(uP(e.label));t.add(o),dm(o,n)}},updatePointerElfunction(t,e,i){var n=lP(t).pointerEl;n&&(n.setStyle(e.pointer.style),i(n,{shapee.pointer.shape}))},updateLabelElfunction(t,e,i,n){var o=lP(t).labelEl;o&&(o.setStyle(e.label.style),i(o,{shapee.label.shape,positione.label.position}),dm(o,n))},_renderHandlefunction(t){if(!this._dragging&&this.updateHandleTransform){var e=this._axisPointerModel,i=this._api.getZr(),n=this._handle,o=e.getModel(handle),a=e.get(status);if(!o.get(show)!ahide===a)return n&&i.remove(n),void(this._handle=null);var r;this._handle(r=!0,n=this._handle=Co(o.get(icon),{cursormove,draggable!0,onmousemovefunction(t){lw(t.event)},onmousedownhP(this._onHandleDragMove,this,0,0),drifthP(this._onHandleDragMove,this),ondragendhP(this._onHandleDragEnd,this)}),i.add(n)),pm(n,e,!1);var s=[color,borderColor,borderWidth,opacity,shadowColor,shadowBlur,shadowOffsetX,shadowOffsetY];n.setStyle(o.getItemStyle(null,s));var l=o.get(size);y(l)(l=[l,l]),n.attr(scale,[l[0]2,l[1]2]),Lr(this,_doDispatchAxisPointer,o.get(throttle)0,fixRate),this._moveHandleToValue(t,r)}},_moveHandleToValuefunction(t,e){hm(this._axisPointerModel,!e&&this._moveAnimation,this._handle,fm(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMovefunction(t,e){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(fm(i),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(fm(n)),lP(i).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointerfunction(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({typeupdateAxisPointer,xt.cursorPoint[0],yt.cursorPoint[1],tooltipOptiont.tooltipOption,axesInfo[{axisDime.axis.dim,axisIndexe.componentIndex}]})}},_onHandleDragEndfunction(t){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get(value);this._moveHandleToValue(e),this._api.dispatchAction({typehideTip})}},getHandleTransformnull,updateHandleTransformnull,clearfunction(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),i=this._group,n=this._handle;e&&i&&(this._lastGraphicKey=null,i&&e.remove(i),n&&e.remove(n),this._group=null,this._handle=null,this._payloadInfo=null)},doClearfunction(){},buildLabelfunction(t,e,i){return i=i0,{xt[i],yt[1-i],widthe[i],heighte[1-i]}}}).constructor=um,Xi(um);var cP=um.extend({makeElOptionfunction(t,e,i,n,o){var a=i.axis,r=a.grid,s=n.get(type),l=Mm(r,a).getOtherAxis(a).getGlobalExtent(),u=a.toGlobalCoord(a.dataToCoord(e,!0));if(s&&none!==s){var h=gm(n),c=dP[s](a,u,l,h);c.style=h,t.graphicKey=c.type,t.pointer=c}_m(e,t,Ih(r.model,i),i,n,o)},getHandleTransformfunction(t,e,i){var n=Ih(e.axis.grid.model,e,{labelInside!1});return n.labelMargin=i.get(handle.margin),{positionxm(e.axis,t,n),rotationn.rotation+(n.labelDirection0Math.PI0)}},updateHandleTransformfunction(t,e,i,n){var o=i.axis,a=o.grid,r=o.getGlobalExtent(!0),s=Mm(a,o).getOtherAxis(o).getGlobalExtent(),l=x===o.dim01,u=t.position;u[l]+=e[l],u[l]=Math.min(r[1],u[l]),u[l]=Math.max(r[0],u[l]);var h=(s[1]+s[0])2,c=[h,h];c[l]=u[l];var d=[{verticalAlignmiddle},{aligncenter}];return{positionu,rotationt.rotation,cursorPointc,tooltipOptiond[l]}}}),dP={linefunction(t,e,i,n){var o=wm([e,i[0]],[e,i[1]],Im(t));return Xn({shapeo,stylen}),{typeLine,shapeo}},shadowfunction(t,e,i,n){var o=Math.max(1,t.getBandWidth()),a=i[1]-i[0];return{typeRect,shapebm([e-o2,i[0]],[o,a],Im(t))}}};LD.registerAxisPointerClass(CartesianAxisPointer,cP),Ls(function(t){if(t){(!t.axisPointer0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!y(e)&&(t.axisPointer.link=[e])}}),ks(IT.PROCESSOR.STATISTIC,function(t,e){t.getComponent(axisPointer).coordSysAxesInfo=dh(t,e)}),Ps({typeupdateAxisPointer,eventupdateAxisPointer,updateupdateAxisPointer},function(t,e,i){var n=t.currTrigger,o=[t.x,t.y],a=t,r=t.dispatchActionm(i.dispatchAction,i),s=e.getComponent(axisPointer).coordSysAxesInfo;if(s){em(o)&&(o=eP({seriesIndexa.seriesIndex,dataIndexa.dataIndex},e).point);var l=em(o),u=a.axesInfo,h=s.axesInfo,c=leave===nem(o),d={},f={},p={list[],map{}},g={showPointernP(Yg,f),showTooltipnP(qg,p)};iP(s.coordSysMap,function(t,e){var i=lt.containPoint(o);iP(s.coordSysAxesInfo[e],function(t,e){var n=t.axis,a=Qg(u,t);if(!c&&i&&(!ua)){var r=a&&a.value;null!=rl(r=n.pointToData(o)),null!=r&&Xg(t,r,g,!1,d)}})});var v={};return iP(h,function(t,e){var i=t.linkGroup;i&&!f[e]&&iP(i.axesInfo,function(e,n){var o=f[n];if(e!==t&&o){var a=o.value;i.mapper&&(a=t.axis.scale.parse(i.mapper(a,tm(e),tm(t)))),v[t.key]=a}})}),iP(v,function(t,e){Xg(h[e],t,g,!0,d)}),Kg(f,h,d),$g(p,o,t,r),Jg(h,0,i),d}});var fP=[x,y],pP=[width,height],gP=um.extend({makeElOptionfunction(t,e,i,n,o){var a=i.axis,r=a.coordinateSystem,s=Am(r,1-Tm(a)),l=r.dataToPoint(e)[0],u=n.get(type);if(u&&none!==u){var h=gm(n),c=mP[u](a,l,s,h);c.style=h,t.graphicKey=c.type,t.pointer=c}_m(e,t,Ug(i),i,n,o)},getHandleTransformfunction(t,e,i){var n=Ug(e,{labelInside!1});return n.labelMargin=i.get(handle.margin),{positionxm(e.axis,t,n),rotationn.rotation+(n.labelDirection0Math.PI0)}},updateHandleTransformfunction(t,e,i,n){var o=i.axis,a=o.coordinateSystem,r=Tm(o),s=Am(a,r),l=t.position;l[r]+=e[r],l[r]=Math.min(s[1],l[r]),l[r]=Math.max(s[0],l[r]);var u=Am(a,1-r),h=(u[1]+u[0])2,c=[h,h];return c[r]=l[r],{positionl,rotationt.rotation,cursorPointc,tooltipOption{verticalAlignmiddle}}}}),mP={linefunction(t,e,i,n){var o=wm([e,i[0]],[e,i[1]],Tm(t));return Xn({shapeo,stylen}),{typeLine,shapeo}},shadowfunction(t,e,i,n){var o=t.getBandWidth(),a=i[1]-i[0];return{typeRect,shapebm([e-o2,i[0]],[o,a],Tm(t))}}};LD.registerAxisPointerClass(SingleAxisPointer,gP),Vs({typesingle});var vP=OI.extend({typeseries.themeRiver,dependencies[singleAxis],nameMapnull,initfunction(t){vP.superApply(this,init,arguments),this.legendDataProvider=function(){return this.getRawData()}},fixDatafunction(t){for(var e=t.length,i=f(Lp().key(function(t){return t[2]}).entries(t),function(t){return{namet.key,dataListt.values}}),n=i.length,o=-1,a=-1,r=0;rn;++r){var s=i[r].dataList.length;so&&(o=s,a=r)}for(var l=0;ln;++l)if(l!==a)for(var u=i[l].name,h=0;ho;++h){for(var c=i[a].dataList[h][0],d=i[l].dataList.length,p=-1,g=0;gd;++g)if(i[l].dataList[g][0]===c){p=g;break}-1===p&&(t[e]=[],t[e][0]=c,t[e][1]=0,t[e][2]=u,e++)}return t},getInitialDatafunction(t,e){for(var i=e.queryComponents({mainTypesingleAxis,indexthis.get(singleAxisIndex),idthis.get(singleAxisId)})[0].get(type),n=g(t.data,function(t){return void 0!==t[2]}),o=this.fixData(n[]),a=[],r=this.nameMap=R(),s=0,l=0;lo.length;++l)a.push(o[l][2]),r.get(o[l][2])(r.set(o[l][2],s),s++);var u=oA(o,{coordDimensions[single],dimensionsDefine[{nametime,typeXs(i)},{namevalue,typefloat},{namename,typeordinal}],encodeDefine{single0,value1,itemName2}}),h=new eA(u,this);return h.initData(o),h},getLayerSeriesfunction(){for(var t=this.getData(),e=t.count(),i=[],n=0;ne;++n)i[n]=n;for(var o=f(Lp().key(function(e){return t.get(name,e)}).entries(i),function(t){return{namet.key,indicest.values}}),a=t.mapDimension(single),r=0;ro.length;++r)o[r].indices.sort(function(e,i){return t.get(a,e)-t.get(a,i)});return o},getAxisTooltipDatafunction(t,e,i){y(t)(t=t[t][]);for(var n,o=this.getData(),a=this.getLayerSeries(),r=[],s=a.length,l=0;ls;++l){for(var u=Number.MAX_VALUE,h=-1,c=a[l].indices.length,d=0;dc;++d){var f=o.get(t[0],a[l].indices[d]),p=Math.abs(f-e);p=u&&(n=f,u=p,h=a[l].indices[d])}r.push(h)}return{dataIndicesr,nestestValuen}},formatTooltipfunction(t){var e=this.getData(),i=e.getName(t),n=e.get(e.mapDimension(value),t);return(isNaN(n)null==n)&&(n=-),Qo(i+  +n)},defaultOption{zlevel0,z2,coordinateSystemsingleAxis,boundaryGap[10%,10%],singleAxisIndex0,animationEasinglinear,label{margin4,show!0,positionleft,color#000,fontSize11},emphasis{label{show!0}}}});Fs({typethemeRiver,initfunction(){this._layers=[]},renderfunction(t,e,i){function n(t){return t.name}function o(e,i,n){var o=this._layers;if(remove!==e){for(var u,h=[],c=[],f=l[i].indices,p=0;pf.length;p++){var g=r.getItemLayout(f[p]),m=g.x,v=g.y0,y=g.y;h.push([m,v]),c.push([m,v+y]),u=r.getItemVisual(f[p],color)}var x,_,w=r.getItemLayout(f[0]),b=r.getItemModel(f[p-1]),S=b.getModel(label),M=S.get(margin);if(add===e){I=d[i]=new Zw;x=new uD({shape{pointsh,stackedOnPointsc,smooth.4,stackedOnSmooth.4,smoothConstraint!1},z20}),_=new qS({style{xw.x-M,yw.y0+w.y2}}),I.add(x),I.add(_),s.add(I),x.setClipPath(Dm(x.getBoundingRect(),t,function(){x.removeClipPath()}))}else{var I=o[n];x=I.childAt(0),_=I.childAt(1),s.add(I),d[i]=I,bo(x,{shape{pointsh,stackedOnPointsc}},t),bo(_,{style{xw.x-M,yw.y0+w.y2}},t)}var T=b.getModel(emphasis.itemStyle),A=b.getModel(itemStyle);fo(_.style,S,{textS.get(show)t.getFormattedLabel(f[p-1],normal)r.getName(f[p-1])null,textVerticalAlignmiddle}),x.setStyle(a({fillu},A.getItemStyle([color]))),uo(x,T.getItemStyle())}else s.remove(o[i])}var r=t.getData(),s=this.group,l=t.getLayerSeries(),u=r.getLayout(layoutInfo),h=u.rect,c=u.boundaryGap;s.attr(position,[0,h.y+c[0]]);var d={};new Hs(this._layersSeries[],l,n,n).add(m(o,this,add)).update(m(o,this,update)).remove(m(o,this,remove)).execute(),this._layersSeries=l,this._layers=d},disposefunction(){}});Os(function(t,e){t.eachSeriesByType(themeRiver,function(t){var e=t.getData(),i=t.coordinateSystem,n={},o=i.getRect();n.rect=o;var a=t.get(boundaryGap),r=i.getAxis();n.boundaryGap=a,horizontal===r.orient(a[0]=Ro(a[0],o.height),a[1]=Ro(a[1],o.height),Cm(e,t,o.height-a[0]-a[1]))(a[0]=Ro(a[0],o.width),a[1]=Ro(a[1],o.width),Cm(e,t,o.width-a[0]-a[1])),e.setLayout(layoutInfo,n)})}),Es(function(t){t.eachSeriesByType(themeRiver,function(t){var e=t.getData(),i=t.getRawData(),n=t.get(color),o=R();e.each(function(t){o.set(e.getRawIndex(t),t)}),i.each(function(a){var r=i.getName(a),s=n[(t.nameMap.get(r)-1)%n.length];i.setItemVisual(a,color,s);var l=o.get(a);null!=l&&e.setItemVisual(l,color,s)})})}),ks($D(themeRiver)),OI.extend({typeseries.sunburst,_viewRootnull,getInitialDatafunction(t,e){var i={namet.name,childrent.data};km(i);var n=t.levels[],o={};return o.levels=n,kc.createTree(i,this,o).data},optionUpdatedfunction(){this.resetViewRoot()},getDataParamsfunction(t){var e=OI.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=nd(i,this),e},defaultOption{zlevel0,z2,center[50%,50%],radius[0,75%],clockwise!0,startAngle90,minAngle0,percentPrecision2,stillShowZeroSum!0,highlightPolicydescendant,nodeClickrootToNode,renderLabelForZeroData!1,label{rotateradial,show!0,opacity1,aligncenter,positioninside,distance5,silent!0,emphasis{}},itemStyle{borderWidth1,borderColorwhite,borderTypesolid,shadowBlur0,shadowColorrgba(0, 0, 0, 0.2),shadowOffsetX0,shadowOffsetY0,opacity1,emphasis{},highlight{opacity1},downplay{opacity.9}},animationTypeexpansion,animationDuration1e3,animationDurationUpdate500,animationEasingcubicOut,data[],levels[],sortdesc},getViewRootfunction(){return this._viewRoot},resetViewRootfunction(t){tthis._viewRoot=tt=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===ee.contains(t))(this._viewRoot=e)}});var yP={NONEnone,DESCENDANTdescendant,ANCESTORancestor,SELFself},xP=2,_P=4,wP=Pm.prototype;wP.updateData=function(t,e,i,o,s){this.node=e,e.piece=this,o=othis._seriesModel,s=sthis._ecModel;var l=this.childAt(0);l.dataIndex=e.dataIndex;var u=e.getModel(),h=e.getLayout();hconsole.log(e.getLayout());var c=a({},h);c.label=null;var d,f=Nm(e,0,s),p=u.getModel(itemStyle).getItemStyle();d=r({lineJoinbevel,fill(d=normal===ipn(u.getModel(i+.itemStyle).getItemStyle(),p)).fillf},d),t(l.setShape(c),l.shape.r=h.r0,bo(l,{shape{rh.r}},o,e.dataIndex),l.useStyle(d))object==typeof d.fill&&d.fill.typeobject==typeof l.style.fill&&l.style.fill.type(bo(l,{shapec},o),l.useStyle(d))bo(l,{shapec,styled},o),this._updateLabel(o,f,i);var g=u.getShallow(cursor);if(g&&l.attr(cursor,g),t){var m=o.getShallow(highlightPolicy);this._initEvents(l,e,o,m)}this._seriesModel=othis._seriesModel,this._ecModel=sthis._ecModel},wP.onEmphasis=function(t){var e=this;this.node.hostTree.root.eachNode(function(i){i.piece&&(e.node===ii.piece.updateData(!1,i,emphasis)Em(i,e.node,t)i.piece.childAt(0).trigger(highlight)t!==yP.NONE&&i.piece.childAt(0).trigger(downplay))})},wP.onNormal=function(){this.node.hostTree.root.eachNode(function(t){t.piece&&t.piece.updateData(!1,t,normal)})},wP.onHighlight=function(){this.updateData(!1,this.node,highlight)},wP.onDownplay=function(){this.updateData(!1,this.node,downplay)},wP._updateLabel=function(t,e,i){function n(t){var e=r.get(t);return null==ea.get(t)e}var o=this.node.getModel(),a=o.getModel(label),r=normal===iemphasis===iao.getModel(i+.label),s=o.getModel(emphasis.label),l=T(t.getFormattedLabel(this.node.dataIndex,normal,null,null,label),this.node.name);!1===n(show)&&(l=);var u=this.node.getLayout(),h=r.get(minAngle);null==h&&(h=a.get(minAngle)),h=h180Math.PI;var c=u.endAngle-u.startAngle;null!=h&&Math.abs(c)h&&(l=);var d=this.childAt(1);co(d.style,d.hoverStyle{},a,s,{defaultTextr.getShallow(show)lnull,autoColore,useInsideStyle!0});var f,p=(u.startAngle+u.endAngle)2,g=Math.cos(p),m=Math.sin(p),v=n(position),y=n(distance)0,x=n(align);outside===v(f=u.r+y,x=pMath.PI2rightleft)x&&center!==xleft===x(f=u.r0+y,pMath.PI2&&(x=right))right===x&&(f=u.r-y,pMath.PI2&&(x=left))(f=(u.r+u.r0)2,x=center),d.attr(style,{textl,textAlignx,textVerticalAlignn(verticalAlign)middle,opacityn(opacity)});var _=fg+u.cx,w=fm+u.cy;d.attr(position,[_,w]);var b=n(rotate),S=0;radial===b(S=-p)-Math.PI2&&(S+=Math.PI)tangential===b(S=Math.PI2-p)Math.PI2S-=Math.PIS-Math.PI2&&(S+=Math.PI)number==typeof b&&(S=bMath.PI180),d.attr(rotation,S)},wP._initEvents=function(t,e,i,n){t.off(mouseover).off(mouseout).off(emphasis).off(normal);var o=this,a=function(){o.onEmphasis(n)},r=function(){o.onNormal()};i.isAnimationEnabled()&&t.on(mouseover,a).on(mouseout,r).on(emphasis,a).on(normal,r).on(downplay,function(){o.onDownplay()}).on(highlight,function(){o.onHighlight()})},u(Pm,Zw);Mr.extend({typesunburst,initfunction(){},renderfunction(t,e,i,n){function o(i,n){if(c!ii.getValue()(i=null),i!==l&&n!==l)if(n&&n.piece)i(n.piece.updateData(!1,i,normal,t,e),s.setItemGraphicEl(i.dataIndex,n.piece))a(n);else if(i){var o=new Pm(i,t,e);h.add(o),s.setItemGraphicEl(i.dataIndex,o)}}function a(t){t&&t.piece&&(h.remove(t.piece),t.piece=null)}var r=this;this.seriesModel=t,this.api=i,this.ecModel=e;var s=t.getData(),l=s.tree.root,u=t.getViewRoot(),h=this.group,c=t.get(renderLabelForZeroData),d=[];u.eachNode(function(t){d.push(t)});var f=this._oldChildren[];if(function(t,e){function i(t){return t.getId()}function n(i,n){o(null==inullt[i],null==nnulle[n])}0===t.length&&0===e.lengthnew Hs(e,t,i,i).add(n).update(n).remove(v(n,null)).execute()}(d,f),function(i,n){if(n.depth0){r.virtualPiecer.virtualPiece.updateData(!1,i,normal,t,e)(r.virtualPiece=new Pm(i,t,e),h.add(r.virtualPiece)),n.piece._onclickEvent&&n.piece.off(click,n.piece._onclickEvent);var o=function(t){r._rootToNode(n.parentNode)};n.piece._onclickEvent=o,r.virtualPiece.on(click,o)}else r.virtualPiece&&(h.remove(r.virtualPiece),r.virtualPiece=null)}(l,u),n&&n.highlight&&n.highlight.piece){var p=t.getShallow(highlightPolicy);n.highlight.piece.onEmphasis(p)}else if(n&&n.unhighlight){var g=this.virtualPiece;!g&&l.children.length&&(g=l.children[0].piece),g&&g.onNormal()}this._initEvents(),this._oldChildren=d},disposefunction(){},_initEventsfunction(){var t=this,e=function(e){var i=!1;t.seriesModel.getViewRoot().eachNode(function(n){if(!i&&n.piece&&n.piece.childAt(0)===e.target){var o=n.getModel().get(nodeClick);if(rootToNode===o)t._rootToNode(n);else if(link===o){var a=n.getModel(),r=a.get(link);if(r){var s=a.get(target,!0)_blank;window.open(r,s)}}i=!0}})};this.group._onclickEvent&&this.group.off(click,this.group._onclickEvent),this.group.on(click,e),this.group._onclickEvent=e},_rootToNodefunction(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({typesunburstRootToNode,fromthis.uid,seriesIdthis.seriesModel.id,targetNodet})},containPointfunction(t,e){var i=e.getData().getItemLayout(0);if(i){var n=t[0]-i.cx,o=t[1]-i.cy,a=Math.sqrt(nn+oo);return a=i.r&&a=i.r0}}});var bP=sunburstRootToNode;Ps({typebP,updateupdateView},function(t,e){e.eachComponent({mainTypeseries,subTypesunburst,queryt},function(e,i){var n=td(t,[bP],e);if(n){var o=e.getViewRoot();o&&(t.direction=id(o,n.node)rollUpdrillDown),e.resetViewRoot(n.node)}})});var SP=sunburstHighlight;Ps({typeSP,updateupdateView},function(t,e){e.eachComponent({mainTypeseries,subTypesunburst,queryt},function(e,i){var n=td(t,[SP],e);n&&(t.highlight=n.node)})});Ps({typesunburstUnhighlight,updateupdateView},function(t,e){e.eachComponent({mainTypeseries,subTypesunburst,queryt},function(e,i){t.unhighlight=!0})});var MP=Math.PI180;Es(v(jD,sunburst)),Os(v(function(t,e,i,n){e.eachSeriesByType(t,function(t){var e=t.get(center),n=t.get(radius);y(n)(n=[0,n]),y(e)(e=[e,e]);var o=i.getWidth(),a=i.getHeight(),r=Math.min(o,a),s=Ro(e[0],o),l=Ro(e[1],a),u=Ro(n[0],r2),h=Ro(n[1],r2),c=-t.get(startAngle)MP,f=t.get(minAngle)MP,p=t.getData().tree.root,g=t.getViewRoot(),m=g.depth,v=t.get(sort);null!=v&&Rm(g,v);var x=0;d(g.children,function(t){!isNaN(t.getValue())&&x++});var _=g.getValue(),w=Math.PI(_x)2,b=g.depth0,S=g.height-(b-11),M=(h-u)(S1),I=t.get(clockwise),T=t.get(stillShowZeroSum),A=I1-1,D=function(t,e){if(t){var i=e;if(t!==p){var n=t.getValue(),o=0===_&&Twnw;of&&(o=f),i=e+Ao;var a=t.depth-m-(b-11),h=u+Ma,c=u+M(a+1),g=t.getModel();null!=g.get(r0)&&(h=Ro(g.get(r0),r2)),null!=g.get(r)&&(c=Ro(g.get(r),r2)),t.setLayout({angleo,startAnglee,endAnglei,clockwiseI,cxs,cyl,r0h,rc})}if(t.children&&t.children.length){var v=0;d(t.children,function(t){v+=D(t,e+v)})}return i-e}};if(b){var C=u,L=u+M,k=2Math.PI;p.setLayout({anglek,startAnglec,endAnglec+k,clockwiseI,cxs,cyl,r0C,rL})}D(g,c)})},sunburst)),ks(v($D,sunburst));var IP=[itemStyle],TP=[emphasis,itemStyle],AP=[label],DP=[emphasis,label],CP=e00,LP={cartesian2dfunction(t){var e=t.grid.getRect();return{coordSys{typecartesian2d,xe.x,ye.y,widthe.width,heighte.height},api{coordfunction(e){return t.dataToPoint(e)},sizem(Bm,t)}}},geofunction(t){var e=t.getBoundingRect();return{coordSys{typegeo,xe.x,ye.y,widthe.width,heighte.height,zoomt.getZoom()},api{coordfunction(e){return t.dataToPoint(e)},sizem(Vm,t)}}},singleAxisfunction(t){var e=t.getRect();return{coordSys{typesingleAxis,xe.x,ye.y,widthe.width,heighte.height},api{coordfunction(e){return t.dataToPoint(e)},sizem(Gm,t)}}},polarfunction(t){var e=t.getRadiusAxis(),i=t.getAngleAxis(),n=e.getExtent();return n[0]n[1]&&n.reverse(),{coordSys{typepolar,cxt.cx,cyt.cy,rn[1],r0n[0]},api{coordm(function(n){var o=e.dataToRadius(n[0]),a=i.dataToAngle(n[1]),r=t.coordToPoint([o,a]);return r.push(o,aMath.PI180),r}),sizem(Fm,t)}}},calendarfunction(t){var e=t.getRect(),i=t.getRangeInfo();return{coordSys{typecalendar,xe.x,ye.y,widthe.width,heighte.height,cellWidtht.getCellWidth(),cellHeightt.getCellHeight(),rangeInfo{starti.start,endi.end,weeksi.weeks,dayCounti.allDay}},api{coordfunction(e,i){return t.dataToPoint(e,i)}}}}};OI.extend({typeseries.custom,dependencies[grid,polar,geo,singleAxis,calendar],defaultOption{coordinateSystemcartesian2d,zlevel0,z2,legendHoverLink!0,useTransform!0},getInitialDatafunction(t,e){return dl(this.getSource(),this)},getDataParamsfunction(t,e,i){var n=OI.prototype.getDataParams.apply(this,arguments);return i&&(n.info=i.info),n}}),Mr.extend({typecustom,_datanull,renderfunction(t,e,i,n){var o=this._data,a=t.getData(),r=this.group,s=Um(t,a,e,i);a.diff(o).add(function(e){jm(null,e,s(e,n),t,r,a)}).update(function(e,i){jm(o.getItemGraphicEl(i),e,s(e,n),t,r,a)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&r.remove(e)}).execute(),this._data=a},incrementalPrepareRenderfunction(t,e,i){this.group.removeAll(),this._data=null},incrementalRenderfunction(t,e,i,n,o){for(var a=e.getData(),r=Um(e,a,i,n),s=t.start;st.end;s++)jm(null,s,r(s,o),e,this.group,a).traverse(function(t){t.isGroup(t.incremental=!0,t.useHoverLayer=!0)})},disposeB,filterForExposedEventfunction(t,e,i,n){var o=e.element;if(null==oi.name===o)return!0;for(;(i=i.parent)&&i!==this.group;)if(i.name===o)return!0;return!1}}),Ls(function(t){var e=t.graphic;y(e)e[0]&&e[0].elementst.graphic=[t.graphic[0]]t.graphic=[{elementse}]e&&!e.elements&&(t.graphic=[{elements[e]}])});var kP=Bs({typegraphic,defaultOption{elements[],parentIdnull},_elOptionsToUpdatenull,mergeOptionfunction(t){var e=this.option.elements;this.option.elements=null,kP.superApply(this,mergeOption,arguments),this.option.elements=e},optionUpdatedfunction(t,e){var i=this.option,n=(eit).elements,o=i.elements=e[]i.elements,a=[];this._flatten(n,a);var r=Pi(o,a);Ni(r);var s=this._elOptionsToUpdate=[];d(r,function(t,e){var i=t.option;i&&(s.push(i),sv(t,i),lv(o,e,i),uv(o[e],i))},this);for(var l=o.length-1;l=0;l--)null==o[l]o.splice(l,1)delete o[l].$action},_flattenfunction(t,e,i){d(t,function(t){if(t){i&&(t.parentOption=i),e.push(t);var n=t.children;group===t.type&&n&&this._flatten(n,e,t),delete t.children}},this)},useElOptionsToUpdatefunction(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t}});Vs({typegraphic,initfunction(t,e){this._elMap=R(),this._lastGraphicModel},renderfunction(t,e,i){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,i)},_updateElementsfunction(t){var e=t.useElOptionsToUpdate();if(e){var i=this._elMap,n=this.group;d(e,function(e){var o=e.$action,a=e.id,r=i.get(a),s=e.parentId,l=null!=si.get(s)n,u=e.style;text===e.type&&u&&(e.hv&&e.hv[1]&&(u.textVerticalAlign=u.textBaseline=null),!u.hasOwnProperty(textFill)&&u.fill&&(u.textFill=u.fill),!u.hasOwnProperty(textStroke)&&u.stroke&&(u.textStroke=u.stroke));var h=av(e);o&&merge!==oreplace===o(ov(r,i),nv(a,l,h,i))remove===o&&ov(r,i)rr.attr(h)nv(a,l,h,i);var c=i.get(a);c&&(c.__ecGraphicWidth=e.width,c.__ecGraphicHeight=e.height,hv(c,t))})}},_relocatefunction(t,e){for(var i=t.option.elements,n=this.group,o=this._elMap,a=i.length-1;a=0;a--){var r=i[a],s=o.get(r.id);if(s){var l=s.parent;ua(s,r,l===n{widthe.getWidth(),heighte.getHeight()}{widthl.__ecGraphicWidth0,heightl.__ecGraphicHeight0},null,{hvr.hv,boundingModer.bounding})}}},_clearfunction(){var t=this._elMap;t.each(function(e){ov(e,t)}),this._elMap=R()},disposefunction(){this._clear()}});var PP=Bs({typelegend.plain,dependencies[series],layoutMode{typebox,ignoreSize!0},initfunction(t,e,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected{}},mergeOptionfunction(t){PP.superCall(this,mergeOption,t)},optionUpdatedfunction(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&single===this.get(selectedMode)){for(var e=!1,i=0;it.length;i++){var n=t[i].get(name);if(this.isSelected(n)){this.select(n),e=!0;break}}!e&&this.select(t[0].get(name))}},_updateDatafunction(t){var e=[],i=[];t.eachRawSeries(function(n){var o=n.name;i.push(o);var a;if(n.legendDataProvider){var r=n.legendDataProvider(),s=r.mapArray(r.getName);t.isSeriesFiltered(n)(i=i.concat(s)),s.lengthe=e.concat(s)a=!0}else a=!0;a&&Oi(n)&&e.push(n.name)}),this._availableNames=i;var n=f(this.get(data)e,function(t){returnstring!=typeof t&&number!=typeof t(t={namet}),new Lo(t,this,this.ecModel)},this);this._data=n},getDatafunction(){return this._data},selectfunction(t){var e=this.option.selected;single===this.get(selectedMode)&&d(this._data,function(t){e[t.get(name)]=!1}),e[t]=!0},unSelectfunction(t){single!==this.get(selectedMode)&&(this.option.selected[t]=!1)},toggleSelectedfunction(t){var e=this.option.selected;e.hasOwnProperty(t)(e[t]=!0),this[e[t]unSelectselect](t)},isSelectedfunction(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&l(this._availableNames,t)=0},defaultOption{zlevel0,z4,show!0,orienthorizontal,leftcenter,top0,alignauto,backgroundColorrgba(0,0,0,0),borderColor#ccc,borderRadius0,borderWidth0,padding5,itemGap10,itemWidth25,itemHeight14,inactiveColor#ccc,textStyle{color#333},selectedMode!0,tooltip{show!1}}});Ps(legendToggleSelect,legendselectchanged,v(cv,toggleSelected)),Ps(legendSelect,legendselected,v(cv,select)),Ps(legendUnSelect,legendunselected,v(cv,unSelect));var NP=v,OP=d,EP=Zw,RP=Vs({typelegend.plain,newlineDisabled!1,initfunction(){this.group.add(this._contentGroup=new EP),this._backgroundEl},getContentGroupfunction(){return this._contentGroup},renderfunction(t,e,i){if(this.resetInner(),t.get(show,!0)){var n=t.get(align);n&&auto!==n(n=right===t.get(left)&&vertical===t.get(orient)rightleft),this.renderInner(n,t,e,i);var o=t.getBoxLayoutParams(),a={widthi.getWidth(),heighti.getHeight()},s=t.get(padding),l=la(o,a,s),u=this.layoutInner(t,n,l),h=la(r({widthu.width,heightu.height},o),a,s);this.group.attr(position,[h.x-u.x,h.y-u.y]),this.group.add(this._backgroundEl=fv(u,t))}},resetInnerfunction(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInnerfunction(t,e,i,n){var o=this.getContentGroup(),a=R(),r=e.get(selectedMode),s=[];i.eachRawSeries(function(t){!t.get(legendHoverLink)&&s.push(t.id)}),OP(e.getData(),function(l,u){var h=l.get(name);if(this.newlineDisabled!==h&&n!==h){var c=i.getSeriesByName(h)[0];if(!a.get(h))if(c){var d=c.getData(),f=d.getVisual(color);function==typeof f&&(f=f(c.getDataParams(0)));var p=d.getVisual(legendSymbol)roundRect,g=d.getVisual(symbol);this._createItem(h,u,l,e,p,g,t,f,r).on(click,NP(pv,h,n)).on(mouseover,NP(gv,c.name,null,n,s)).on(mouseout,NP(mv,c.name,null,n,s)),a.set(h,!0)}else i.eachRawSeries(function(i){if(!a.get(h)&&i.legendDataProvider){var o=i.legendDataProvider(),c=o.indexOfName(h);if(c0)return;var d=o.getItemVisual(c,color);this._createItem(h,u,l,e,roundRect,null,t,d,r).on(click,NP(pv,h,n)).on(mouseover,NP(gv,null,h,n,s)).on(mouseout,NP(mv,null,h,n,s)),a.set(h,!0)}},this)}else o.add(new EP({newline!0}))},this)},_createItemfunction(t,e,i,n,o,r,s,l,u){var h=n.get(itemWidth),c=n.get(itemHeight),d=n.get(inactiveColor),f=n.get(symbolKeepAspect),p=n.isSelected(t),g=new EP,m=i.getModel(textStyle),v=i.get(icon),y=i.getModel(tooltip),x=y.parentModel;if(o=vo,g.add(Xl(o,0,0,h,c,pld,null==ff)),!v&&r&&(r!==onone===r)){var _=.8c;none===r&&(r=circle),g.add(Xl(r,(h-_)2,(c-_)2,_,_,pld,null==ff))}var w=left===sh+5-5,b=s,S=n.get(formatter),M=t;string==typeof S&&SM=S.replace({name},null!=tt)function==typeof S&&(M=S(t)),g.add(new qS({stylefo({},m,{textM,xw,yc2,textFillpm.getTextColor()d,textAlignb,textVerticalAlignmiddle})}));var I=new aM({shapeg.getBoundingRect(),invisible!0,tooltipy.get(show)a({contentt,formatterx.get(formatter,!0)function(){return t},formatterParams{componentTypelegend,legendIndexn.componentIndex,namet,$vars[name]}},y.option)null});return g.add(I),g.eachChild(function(t){t.silent=!0}),I.silent=!u,this.getContentGroup().add(g),uo(g),g.__legendDataIndex=e,g},layoutInnerfunction(t,e,i){var n=this.getContentGroup();UM(t.get(orient),n,t.get(itemGap),i.width,i.height);var o=n.getBoundingRect();return n.attr(position,[-o.x,-o.y]),this.group.getBoundingRect()}});ks(function(t){var e=t.findComponents({mainTypelegend});e&&e.length&&t.filterSeries(function(t){for(var i=0;ie.length;i++)if(!e[i].isSelected(t.name))return!1;return!0})}),YM.registerSubTypeDefaulter(legend,function(){returnplain});var zP=PP.extend({typelegend.scroll,setScrollDataIndexfunction(t){this.option.scrollDataIndex=t},defaultOption{scrollDataIndex0,pageButtonItemGap5,pageButtonGapnull,pageButtonPositionend,pageFormatter{current}{total},pageIcons{horizontal[M0,0L12,-10L12,10z,M0,0L-12,-10L-12,10z],vertical[M0,0L20,0L10,-20z,M0,0L20,0L10,20z]},pageIconColor#2f4554,pageIconInactiveColor#aaa,pageIconSize15,pageTextStyle{color#333},animationDurationUpdate800},initfunction(t,e,i,n){var o=da(t);zP.superCall(this,init,t,e,i,n),vv(this,t,o)},mergeOptionfunction(t,e){zP.superCall(this,mergeOption,t,e),vv(this,this.option,t)},getOrientfunction(){returnvertical===this.get(orient){index1,namevertical}{index0,namehorizontal}}}),BP=Zw,VP=[width,height],GP=[x,y],FP=RP.extend({typelegend.scroll,newlineDisabled!0,initfunction(){FP.superCall(this,init),this._currentIndex=0,this.group.add(this._containerGroup=new BP),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new BP),this._showController},resetInnerfunction(){FP.superCall(this,resetInner),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInnerfunction(t,e,i,n){function o(t,i){var o=t+DataIndex,l=Co(e.get(pageIcons,!0)[e.getOrient().name][i],{onclickm(a._pageGo,a,o,e,n)},{x-s[0]2,y-s[1]2,widths[0],heights[1]});l.name=t,r.add(l)}var a=this;FP.superCall(this,renderInner,t,e,i,n);var r=this._controllerGroup,s=e.get(pageIconSize,!0);y(s)(s=[s,s]),o(pagePrev,0);var l=e.getModel(pageTextStyle);r.add(new qS({namepageText,style{textFilll.getTextColor(),fontl.getFont(),textVerticalAlignmiddle,textAligncenter},silent!0})),o(pageNext,1)},layoutInnerfunction(t,e,i){var n=this.getContentGroup(),o=this._containerGroup,a=this._controllerGroup,r=t.getOrient().index,s=VP[r],l=VP[1-r],u=GP[1-r];UM(t.get(orient),n,t.get(itemGap),ri.widthnull,rnulli.height),UM(horizontal,a,t.get(pageButtonItemGap,!0));var h=n.getBoundingRect(),c=a.getBoundingRect(),d=this._showController=h[s]i[s],f=[-h.x,-h.y];f[r]=n.position[r];var p=[0,0],g=[-c.x,-c.y],m=A(t.get(pageButtonGap,!0),t.get(itemGap,!0));d&&(end===t.get(pageButtonPosition,!0)g[r]+=i[s]-c[s]p[r]+=c[s]+m),g[1-r]+=h[l]2-c[l]2,n.attr(position,f),o.attr(position,p),a.attr(position,g);var v=this.group.getBoundingRect();if((v={x0,y0})[s]=di[s]h[s],v[l]=Math.max(h[l],c[l]),v[u]=Math.min(0,c[u]+g[1-r]),o.__rectSize=i[s],d){var y={x0,y0};y[s]=Math.max(i[s]-c[s]-m,0),y[l]=v[l],o.setClipPath(new aM({shapey})),o.__rectSize=y[s]}else a.eachChild(function(t){t.attr({invisible!0,silent!0})});var x=this._getPageInfo(t);return null!=x.pageIndex&&bo(n,{positionx.contentPosition},!!d&&t),this._updatePageInfoView(t,x),v},_pageGofunction(t,e,i){var n=this._getPageInfo(e)[t];null!=n&&i.dispatchAction({typelegendScroll,scrollDataIndexn,legendIde.id})},_updatePageInfoViewfunction(t,e){var i=this._controllerGroup;d([pagePrev,pageNext],function(n){var o=null!=e[n+DataIndex],a=i.childOfName(n);a&&(a.setStyle(fill,ot.get(pageIconColor,!0)t.get(pageIconInactiveColor,!0)),a.cursor=opointerdefault)});var n=i.childOfName(pageText),o=t.get(pageFormatter),a=e.pageIndex,r=null!=aa+10,s=e.pageCount;n&&o&&n.setStyle(text,_(o)o.replace({current},r).replace({total},s)o({currentr,totals}))},_getPageInfofunction(t){function e(t){var e=t.getBoundingRect().clone();return e[f]+=t.position[h],e}var i,n,o,a,r=t.get(scrollDataIndex,!0),s=this.getContentGroup(),l=s.getBoundingRect(),u=this._containerGroup.__rectSize,h=t.getOrient().index,c=VP[h],d=VP[1-h],f=GP[h],p=s.position.slice();this._showControllers.eachChild(function(t){t.__legendDataIndex===r&&(a=t)})a=s.childAt(0);var g=uMath.ceil(l[c]u)0;if(a){var m=a.getBoundingRect(),v=a.position[h]+m[f];p[h]=-v-l[f],i=Math.floor(g(v+m[f]+u2)l[c]),i=l[c]&&gMath.max(0,Math.min(g-1,i))-1;var y={x0,y0};y[c]=u,y[d]=l[d],y[f]=-p[h]-l[f];var x,_=s.children();if(s.eachChild(function(t,i){var n=e(t);n.intersect(y)&&(null==x&&(x=i),o=t.__legendDataIndex),i===_.length-1&&n[f]+n[c]=y[f]+y[c]&&(o=null)}),null!=x){var w=e(_[x]);if(y[f]=w[f]+w[c]-y[c],x=0&&w[f]=y[f])n=null;else{for(;x0&&e(_[x-1]).intersect(y);)x--;n=_[x].__legendDataIndex}}}return{contentPositionp,pageIndexi,pageCountg,pagePrevDataIndexn,pageNextDataIndexo}}});Ps(legendScroll,legendscroll,function(t,e){var i=t.scrollDataIndex;null!=i&&e.eachComponent({mainTypelegend,subTypescroll,queryt},function(t){t.setScrollDataIndex(i)})}),Bs({typetooltip,dependencies[axisPointer],defaultOption{zlevel0,z60,show!0,showContent!0,triggeritem,triggerOnmousemoveclick,alwaysShowContent!1,displayModesingle,renderModeauto,confine!1,showDelay0,hideDelay100,transitionDuration.4,enterable!1,backgroundColorrgba(50,50,50,0.7),borderColor#333,borderRadius4,borderWidth0,padding5,extraCssText,axisPointer{typeline,axisauto,animationauto,animationDurationUpdate200,animationEasingUpdateexponentialOut,crossStyle{color#999,width1,typedashed,textStyle{}}},textStyle{color#fff,fontSize14}}});var WP=d,HP=Jo,ZP=[,-webkit-,-moz-,-o-];wv.prototype={constructorwv,_enterable!0,updatefunction(){var t=this._container,e=t.currentStyledocument.defaultView.getComputedStyle(t),i=t.style;absolute!==i.position&&absolute!==e.position&&(i.position=relative)},showfunction(t){clearTimeout(this._hideTimeout);var e=this.el;e.style.cssText=positionabsolute;displayblock;border-stylesolid;white-spacenowrap;z-index9999999;+_v(t)+;left+this._x+px;top+this._y+px;+(t.get(extraCssText)),e.style.display=e.innerHTMLblocknone,e.style.pointerEvents=this._enterableautonone,this._show=!0},setContentfunction(t){this.el.innerHTML=null==tt},setEnterablefunction(t){this._enterable=t},getSizefunction(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTofunction(t,e){var i,n=this._zr;n&&n.painter&&(i=n.painter.getViewportRootOffset())&&(t+=i.offsetLeft,e+=i.offsetTop);var o=this.el.style;o.left=t+px,o.top=e+px,this._x=t,this._y=e},hidefunction(){this.el.style.display=none,this._show=!1},hideLaterfunction(t){!this._showthis._inContent&&this._enterable(t(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(m(this.hide,this),t))this.hide())},isShowfunction(){return this._show},getOuterSizefunction(){var t=this.el.clientWidth,e=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var i=document.defaultView.getComputedStyle(this.el);i&&(t+=parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10)+parseInt(i.borderLeftWidth,10)+parseInt(i.borderRightWidth,10),e+=parseInt(i.paddingTop,10)+parseInt(i.paddingBottom,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10))}return{widtht,heighte}}},bv.prototype={constructorbv,_enterable!0,updatefunction(){},showfunction(t){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr(show,!0),this._show=!0},setContentfunction(t,e,i){this.el&&this._zr.remove(this.el);for(var n={},o=t,a=o.indexOf({marker);a=0;){var r=o.indexOf(}),s=o.substr(a+{marker.length,r-a-{marker.length);s.indexOf(sub)-1n[marker+s]={textWidth4,textHeight4,textBorderRadius2,textBackgroundColore[s],textOffset[3,0]}n[marker+s]={textWidth10,textHeight10,textBorderRadius5,textBackgroundColore[s]},a=(o=o.substr(r+1)).indexOf({marker)}this.el=new qS({style{richn,textt,textLineHeight20,textBackgroundColori.get(backgroundColor),textBorderRadiusi.get(borderRadius),textFilli.get(textStyle.color),textPaddingi.get(padding)},zi.get(z)}),this._zr.add(this.el);var l=this;this.el.on(mouseover,function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on(mouseout,function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},setEnterablefunction(t){this._enterable=t},getSizefunction(){var t=this.el.getBoundingRect();return[t.width,t.height]},moveTofunction(t,e){this.el&&this.el.attr(position,[t,e])},hidefunction(){this.el.hide(),this._show=!1},hideLaterfunction(t){!this._showthis._inContent&&this._enterable(t(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(m(this.hide,this),t))this.hide())},isShowfunction(){return this._show},getOuterSizefunction(){return this.getSize()}};var UP=m,XP=d,jP=Ro,YP=new aM({shape{x-1,y-1,width2,height2}});Vs({typetooltip,initfunction(t,e){if(!z_.node){var i=t.getComponent(tooltip).get(renderMode);this._renderMode=Hi(i);var n;html===this._renderMode(n=new wv(e.getDom(),e),this._newLine=br)(n=new bv(e),this._newLine=n),this._tooltipContent=n}},renderfunction(t,e,i){if(!z_.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=i,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get(alwaysShowContent);var n=this._tooltipContent;n.update(),n.setEnterable(t.get(enterable)),this._initGlobalListener(),this._keepShow()}},_initGlobalListenerfunction(){var t=this._tooltipModel.get(triggerOn);im(itemTooltip,this._api,UP(function(e,i,n){none!==t&&(t.indexOf(e)=0this._tryShow(i,n)leave===e&&this._hide(n))},this))},_keepShowfunction(){var t=this._tooltipModel,e=this._ecModel,i=this._api;if(null!=this._lastX&&null!=this._lastY&&none!==t.get(triggerOn)){var n=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.manuallyShowTip(t,e,i,{xn._lastX,yn._lastY})})}},manuallyShowTipfunction(t,e,i,n){if(n.from!==this.uid&&!z_.node){var o=Mv(n,i);this._ticket=;var a=n.dataByCoordSys;if(n.tooltip&&null!=n.x&&null!=n.y){var r=YP;r.position=[n.x,n.y],r.update(),r.tooltip=n.tooltip,this._tryShow({offsetXn.x,offsetYn.y,targetr},o)}else if(a)this._tryShow({offsetXn.x,offsetYn.y,positionn.position,event{},dataByCoordSysn.dataByCoordSys,tooltipOptionn.tooltipOption},o);else if(null!=n.seriesIndex){if(this._manuallyAxisShowTip(t,e,i,n))return;var s=eP(n,e),l=s.point[0],u=s.point[1];null!=l&&null!=u&&this._tryShow({offsetXl,offsetYu,positionn.position,targets.el,event{}},o)}else null!=n.x&&null!=n.y&&(i.dispatchAction({typeupdateAxisPointer,xn.x,yn.y}),this._tryShow({offsetXn.x,offsetYn.y,positionn.position,targeti.getZr().findHover(n.x,n.y).target,event{}},o))}},manuallyHideTipfunction(t,e,i,n){var o=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&o.hideLater(this._tooltipModel.get(hideDelay)),this._lastX=this._lastY=null,n.from!==this.uid&&this._hide(Mv(n,i))},_manuallyAxisShowTipfunction(t,e,i,n){var o=n.seriesIndex,a=n.dataIndex,r=e.getComponent(axisPointer).coordSysAxesInfo;if(null!=o&&null!=a&&null!=r){var s=e.getSeriesByIndex(o);if(s&&axis===(t=Sv([s.getData().getItemModel(a),s,(s.coordinateSystem{}).model,t])).get(trigger))return i.dispatchAction({typeupdateAxisPointer,seriesIndexo,dataIndexa,positionn.position}),!0}},_tryShowfunction(t,e){var i=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var n=t.dataByCoordSys;n&&n.lengththis._showAxisTooltip(n,t)i&&null!=i.dataIndex(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,i,e))i&&i.tooltip(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,i,e))(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMovefunction(t,e){var i=t.get(showDelay);e=m(e,this),clearTimeout(this._showTimout),i0this._showTimout=setTimeout(e,i)e()},_showAxisTooltipfunction(t,e){var i=this._ecModel,o=this._tooltipModel,a=[e.offsetX,e.offsetY],r=[],s=[],l=Sv([e.tooltipOption,o]),u=this._renderMode,h=this._newLine,c={};XP(t,function(t){XP(t.dataByAxis,function(t){var e=i.getComponent(t.axisDim+Axis,t.axisIndex),o=t.value,a=[];if(e&&null!=o){var l=ym(o,e.axis,i,t.seriesDataIndices,t.valueLabelOpt);d(t.seriesDataIndices,function(r){var h=i.getSeriesByIndex(r.seriesIndex),d=r.dataIndexInside,f=h&&h.getDataParams(d);if(f.axisDim=t.axisDim,f.axisIndex=t.axisIndex,f.axisType=t.axisType,f.axisId=t.axisId,f.axisValue=Wl(e.axis,o),f.axisValueLabel=l,f){s.push(f);var p,g=h.formatTooltip(d,!0,null,u);if(w(g)){p=g.html;var m=g.markers;n(c,m)}else p=g;a.push(p)}});var f=l;html!==ur.push(a.join(h))r.push((fQo(f)+h)+a.join(h))}})},this),r.reverse(),r=r.join(this._newLine+this._newLine);var f=e.position;this._showOrMove(l,function(){this._updateContentNotChangedOnAxis(t)this._updatePosition(l,f,a[0],a[1],this._tooltipContent,s)this._showTooltipContent(l,r,s,Math.random(),a[0],a[1],f,void 0,c)})},_showSeriesItemTooltipfunction(t,e,i){var n=this._ecModel,o=e.seriesIndex,a=n.getSeriesByIndex(o),r=e.dataModela,s=e.dataIndex,l=e.dataType,u=r.getData(),h=Sv([u.getItemModel(s),r,a&&(a.coordinateSystem{}).model,this._tooltipModel]),c=h.get(trigger);if(null==citem===c){var d,f,p=r.getDataParams(s,l),g=r.formatTooltip(s,!1,l,this._renderMode);w(g)(d=g.html,f=g.markers)(d=g,f=null);var m=item_+r.name+_+s;this._showOrMove(h,function(){this._showTooltipContent(h,d,p,m,t.offsetX,t.offsetY,t.position,t.target,f)}),i({typeshowTip,dataIndexInsides,dataIndexu.getRawIndex(s),seriesIndexo,fromthis.uid})}},_showComponentItemTooltipfunction(t,e,i){var n=e.tooltip;if(string==typeof n){var o=n;n={contento,formattero}}var a=new Lo(n,this._tooltipModel,this._ecModel),r=a.get(content),s=Math.random();this._showOrMove(a,function(){this._showTooltipContent(a,r,a.get(formatterParams){},s,t.offsetX,t.offsetY,t.position,e)}),i({typeshowTip,fromthis.uid})},_showTooltipContentfunction(t,e,i,n,o,a,r,s,l){if(this._ticket=,t.get(showContent)&&t.get(show)){var u=this._tooltipContent,h=t.get(formatter);r=rt.get(position);var c=e;if(h&&string==typeof h)c=ta(h,i,!0);else if(function==typeof h){var d=UP(function(e,n){e===this._ticket&&(u.setContent(n,l,t),this._updatePosition(t,r,o,a,u,i,s))},this);this._ticket=n,c=h(i,n,d)}u.setContent(c,l,t),u.show(t),this._updatePosition(t,r,o,a,u,i,s)}},_updatePositionfunction(t,e,i,n,o,a,r){var s=this._api.getWidth(),l=this._api.getHeight();e=et.get(position);var u=o.getSize(),h=t.get(align),c=t.get(verticalAlign),d=r&&r.getBoundingRect().clone();if(r&&d.applyTransform(r.transform),function==typeof e&&(e=e([i,n],a,o.el,d,{viewSize[s,l],contentSizeu.slice()})),y(e))i=jP(e[0],s),n=jP(e[1],l);else if(w(e)){e.width=u[0],e.height=u[1];var f=la(e,{widths,heightl});i=f.x,n=f.y,h=null,c=null}elsestring==typeof e&&r(i=(p=Av(e,d,u))[0],n=p[1])(i=(p=Iv(i,n,o,s,l,hnull20,cnull20))[0],n=p[1]);if(h&&(i-=Dv(h)u[0]2right===hu[0]0),c&&(n-=Dv(c)u[1]2bottom===cu[1]0),t.get(confine)){var p=Tv(i,n,o,s,l);i=p[0],n=p[1]}o.moveTo(i,n)},_updateContentNotChangedOnAxisfunction(t){var e=this._lastDataByCoordSys,i=!!e&&e.length===t.length;return i&&XP(e,function(e,n){var o=e.dataByAxis{},a=(t[n]{}).dataByAxis[];(i&=o.length===a.length)&&XP(o,function(t,e){var n=a[e]{},o=t.seriesDataIndices[],r=n.seriesDataIndices[];(i&=t.value===n.value&&t.axisType===n.axisType&&t.axisId===n.axisId&&o.length===r.length)&&XP(o,function(t,e){var n=r[e];i&=t.seriesIndex===n.seriesIndex&&t.dataIndex===n.dataIndex})})}),this._lastDataByCoordSys=t,!!i},_hidefunction(t){this._lastDataByCoordSys=null,t({typehideTip,fromthis.uid})},disposefunction(t,e){z_.node(this._tooltipContent.hide(),lm(itemTooltip,e))}}),Ps({typeshowTip,eventshowTip,updatetooltipmanuallyShowTip},function(){}),Ps({typehideTip,eventhideTip,updatetooltipmanuallyHideTip},function(){}),Pv.prototype={constructorPv,pointToDatafunction(t,e){return this.polar.pointToData(t,e)[radius===this.dim01]},dataToRadiusHA.prototype.dataToCoord,radiusToDataHA.prototype.coordToData},u(Pv,HA);var qP=Bi();Nv.prototype={constructorNv,pointToDatafunction(t,e){return this.polar.pointToData(t,e)[radius===this.dim01]},dataToAngleHA.prototype.dataToCoord,angleToDataHA.prototype.coordToData,calculateCategoryIntervalfunction(){var t=this,e=t.getLabelModel(),i=t.scale,n=i.getExtent(),o=i.count();if(n[1]-n[0]1)return 0;var a=n[0],r=t.dataToCoord(a+1)-t.dataToCoord(a),s=Math.abs(r),l=De(a,e.getFont(),center,top),u=Math.max(l.height,7)s;isNaN(u)&&(u=10);var h=Math.max(0,Math.floor(u)),c=qP(t.model),d=c.lastAutoInterval,f=c.lastTickCount;return null!=d&&null!=f&&Math.abs(d-h)=1&&Math.abs(f-o)=1&&dhh=d(c.lastTickCount=o,c.lastAutoInterval=h),h}},u(Nv,HA);var KP=function(t){this.name=t,this.cx=0,this.cy=0,this._radiusAxis=new Pv,this._angleAxis=new Nv,this._radiusAxis.polar=this._angleAxis.polar=this};KP.prototype={typepolar,axisPointerEnabled!0,constructorKP,dimensions[radius,angle],modelnull,containPointfunction(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containDatafunction(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxisfunction(t){return this[_+t+Axis]},getAxesfunction(){return[this._radiusAxis,this._angleAxis]},getAxesByScalefunction(t){var e=[],i=this._angleAxis,n=this._radiusAxis;return i.scale.type===t&&e.push(i),n.scale.type===t&&e.push(n),e},getAngleAxisfunction(){return this._angleAxis},getRadiusAxisfunction(){return this._radiusAxis},getOtherAxisfunction(t){var e=this._angleAxis;return t===ethis._radiusAxise},getBaseAxisfunction(){return this.getAxesByScale(ordinal)[0]this.getAxesByScale(time)[0]this.getAngleAxis()},getTooltipAxesfunction(t){var e=null!=t&&auto!==tthis.getAxis(t)this.getBaseAxis();return{baseAxes[e],otherAxes[this.getOtherAxis(e)]}},dataToPointfunction(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToDatafunction(t,e){var i=this.pointToCoord(t);return[this._radiusAxis.radiusToData(i[0],e),this._angleAxis.angleToData(i[1],e)]},pointToCoordfunction(t){var e=t[0]-this.cx,i=t[1]-this.cy,n=this.getAngleAxis(),o=n.getExtent(),a=Math.min(o[0],o[1]),r=Math.max(o[0],o[1]);n.inversea=r-360r=a+360;var s=Math.sqrt(ee+ii);e=s,i=s;for(var l=Math.atan2(-i,e)Math.PI180,u=la1-1;lalr;)l+=360u;return[s,l]},coordToPointfunction(t){var e=t[0],i=t[1]180Math.PI;return[Math.cos(i)e+this.cx,-Math.sin(i)e+this.cy]}};var $P=YM.extend({typepolarAxis,axisnull,getCoordSysModelfunction(){return this.ecModel.queryComponents({mainTypepolar,indexthis.option.polarIndex,idthis.option.polarId})[0]}});n($P.prototype,CA);var JP={angle{startAngle90,clockwise!0,splitNumber12,axisLabel{rotate!1}},radius{splitNumber5}};xD(angle,$P,Ov,JP.angle),xD(radius,$P,Ov,JP.radius),Bs({typepolar,dependencies[polarAxis,angleAxis],coordinateSystemnull,findAxisModelfunction(t){var e;return this.ecModel.eachComponent(t,function(t){t.getCoordSysModel()===this&&(e=t)},this),e},defaultOption{zlevel0,z0,center[50%,50%],radius80%}});var QP={dimensionsKP.prototype.dimensions,createfunction(t,e){var i=[];return t.eachComponent(polar,function(t,n){var o=new KP(n);o.update=Rv;var a=o.getRadiusAxis(),r=o.getAngleAxis(),s=t.findAxisModel(radiusAxis),l=t.findAxisModel(angleAxis);zv(a,s),zv(r,l),Ev(o,t,e),i.push(o),t.coordinateSystem=o,o.model=t}),t.eachSeries(function(e){if(polar===e.get(coordinateSystem)){var i=t.queryComponents({mainTypepolar,indexe.get(polarIndex),ide.get(polarId)})[0];e.coordinateSystem=i.coordinateSystem}}),i}};Ba.register(polar,QP);var tN=[axisLine,axisLabel,axisTick,splitLine,splitArea];LD.extend({typeangleAxis,axisPointerClassPolarAxisPointer,renderfunction(t,e){if(this.group.removeAll(),t.get(show)){var n=t.axis,o=n.polar,a=o.getRadiusAxis().getExtent(),r=n.getTicksCoords(),s=f(n.getViewLabels(),function(t){return(t=i(t)).coord=n.dataToCoord(t.tickValue),t});Gv(s),Gv(r),d(tN,function(e){!t.get(e+.show)n.scale.isBlank()&&axisLine!==ethis[_+e](t,o,r,a,s)},this)}},_axisLinefunction(t,e,i,n){var o=t.getModel(axisLine.lineStyle),a=new KS({shape{cxe.cx,cye.cy,rn[Vv(e)]},styleo.getLineStyle(),z21,silent!0});a.style.fill=null,this.group.add(a)},_axisTickfunction(t,e,i,n){var o=t.getModel(axisTick),a=(o.get(inside)-11)o.get(length),s=n[Vv(e)],l=f(i,function(t){return new rM({shapeBv(e,[s,s+a],t.coord)})});this.group.add(xM(l,{styler(o.getModel(lineStyle).getLineStyle(),{stroket.get(axisLine.lineStyle.color)})}))},_axisLabelfunction(t,e,i,n,o){var a=t.getCategories(!0),r=t.getModel(axisLabel),s=r.get(margin);d(o,function(i,o){var l=r,u=i.tickValue,h=n[Vv(e)],c=e.coordToPoint([h+s,i.coord]),d=e.cx,f=e.cy,p=Math.abs(c[0]-d)h.3centerc[0]dleftright,g=Math.abs(c[1]-f)h.3middlec[1]ftopbottom;a&&a[u]&&a[u].textStyle&&(l=new Lo(a[u].textStyle,r,r.ecModel));var m=new qS({silent!0});this.group.add(m),fo(m.style,l,{xc[0],yc[1],textFilll.getTextColor()t.get(axisLine.lineStyle.color),texti.formattedLabel,textAlignp,textVerticalAligng})},this)},_splitLinefunction(t,e,i,n){var o=t.getModel(splitLine).getModel(lineStyle),a=o.get(color),s=0;a=a instanceof Arraya[a];for(var l=[],u=0;ui.length;u++){var h=s++%a.length;l[h]=l[h][],l[h].push(new rM({shapeBv(e,n,i[u].coord)}))}for(u=0;ul.length;u++)this.group.add(xM(l[u],{styler({strokea[u%a.length]},o.getLineStyle()),silent!0,zt.get(z)}))},_splitAreafunction(t,e,i,n){if(i.length){var o=t.getModel(splitArea).getModel(areaStyle),a=o.get(color),s=0;a=a instanceof Arraya[a];for(var l=[],u=Math.PI180,h=-i[0].coordu,c=Math.min(n[0],n[1]),d=Math.max(n[0],n[1]),f=t.get(clockwise),p=1;pi.length;p++){var g=s++%a.length;l[g]=l[g][],l[g].push(new QS({shape{cxe.cx,cye.cy,r0c,rd,startAngleh,endAngle-i[p].coordu,clockwisef},silent!0})),h=-i[p].coordu}for(p=0;pl.length;p++)this.group.add(xM(l[p],{styler({filla[p%a.length]},o.getAreaStyle()),silent!0}))}}});var eN=[axisLine,axisTickLabel,axisName],iN=[splitLine,splitArea];LD.extend({typeradiusAxis,axisPointerClassPolarAxisPointer,renderfunction(t,e){if(this.group.removeAll(),t.get(show)){var i=t.axis,n=i.polar,o=n.getAngleAxis(),a=i.getTicksCoords(),r=o.getExtent()[0],s=i.getExtent(),l=Fv(n,t,r),u=new ID(t,l);d(eN,u.add,u),this.group.add(u.getGroup()),d(iN,function(e){t.get(e+.show)&&!i.scale.isBlank()&&this[_+e](t,n,r,s,a)},this)}},_splitLinefunction(t,e,i,n,o){var a=t.getModel(splitLine).getModel(lineStyle),s=a.get(color),l=0;s=s instanceof Arrays[s];for(var u=[],h=0;ho.length;h++){var c=l++%s.length;u[c]=u[c][],u[c].push(new KS({shape{cxe.cx,cye.cy,ro[h].coord},silent!0}))}for(h=0;hu.length;h++)this.group.add(xM(u[h],{styler({strokes[h%s.length],fillnull},a.getLineStyle()),silent!0}))},_splitAreafunction(t,e,i,n,o){if(o.length){var a=t.getModel(splitArea).getModel(areaStyle),s=a.get(color),l=0;s=s instanceof Arrays[s];for(var u=[],h=o[0].coord,c=1;co.length;c++){var d=l++%s.length;u[d]=u[d][],u[d].push(new QS({shape{cxe.cx,cye.cy,r0h,ro[c].coord,startAngle0,endAngle2Math.PI},silent!0})),h=o[c].coord}for(c=0;cu.length;c++)this.group.add(xM(u[c],{styler({fills[c%s.length]},a.getAreaStyle()),silent!0}))}}});var nN=um.extend({makeElOptionfunction(t,e,i,n,o){var a=i.axis;angle===a.dim&&(this.animationThreshold=Math.PI18);var r,s=a.polar,l=s.getOtherAxis(a).getExtent();r=a[dataTo+aa(a.dim)](e);var u=n.get(type);if(u&&none!==u){var h=gm(n),c=oN[u](a,s,r,l,h);c.style=h,t.graphicKey=c.type,t.pointer=c}mm(t,i,n,o,Wv(e,i,0,s,n.get(label.margin)))}}),oN={linefunction(t,e,i,n,o){returnangle===t.dim{typeLine,shapewm(e.coordToPoint([n[0],i]),e.coordToPoint([n[1],i]))}{typeCircle,shape{cxe.cx,cye.cy,ri}}},shadowfunction(t,e,i,n,o){var a=Math.max(1,t.getBandWidth()),r=Math.PI180;returnangle===t.dim{typeSector,shapeSm(e.cx,e.cy,n[0],n[1],(-i-a2)r,(a2-i)r)}{typeSector,shapeSm(e.cx,e.cy,i-a2,i+a2,0,2Math.PI)}}};LD.registerAxisPointerClass(PolarAxisPointer,nN),Os(v(function(t,e,i){i.getWidth(),i.getHeight();var n={},o=kv(g(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&polar===t.coordinateSystem.type}));e.eachSeriesByType(t,function(t){if(polar===t.coordinateSystem.type){var e=t.getData(),i=t.coordinateSystem,a=i.getBaseAxis(),r=Cv(t),s=o[Lv(a)][r],l=s.offset,u=s.width,h=i.getOtherAxis(a),c=t.coordinateSystem.cx,d=t.coordinateSystem.cy,f=t.get(barMinHeight)0,p=t.get(barMinAngle)0;n[r]=n[r][];for(var g=e.mapDimension(h.dim),m=e.mapDimension(a.dim),v=hl(e,g),y=h.getExtent()[0],x=0,_=e.count();x_;x++){var w=e.get(g,x),b=e.get(m,x);if(!isNaN(w)){var S=w=0pn,M=y;v&&(n[r][b](n[r][b]={py,ny}),M=n[r][b][S]);var I,T,A,D;if(radius===h.dim){var C=h.dataToRadius(w)-y,L=a.dataToAngle(b);Math.abs(C)f&&(C=(C0-11)f),I=M,T=M+C,D=(A=L-l)-u,v&&(n[r][b][S]=T)}else{var k=h.dataToAngle(w,!0)-y,P=a.dataToRadius(b);Math.abs(k)p&&(k=(k0-11)p),T=(I=P+l)+u,A=M,D=M+k,v&&(n[r][b][S]=D)}e.setItemLayout(x,{cxc,cyd,r0I,rT,startAngle-AMath.PI180,endAngle-DMath.PI180})}}}},this)},bar)),Vs({typepolar}),h(YM.extend({typegeo,coordinateSystemnull,layoutModebox,initfunction(t){YM.prototype.init.apply(this,arguments),Ci(t,label,[show])},optionUpdatedfunction(){var t=this.option,e=this;t.regions=_C.getFilledRegions(t.regions,t.map,t.nameMap),this._optionModelMap=p(t.regions[],function(t,i){return i.name&&t.set(i.name,new Lo(i,e)),t},R()),this.updateSelectedMap(t.regions)},defaultOption{zlevel0,z0,show!0,leftcenter,topcenter,aspectScalenull,silent!1,map,boundingCoordsnull,centernull,zoom1,scaleLimitnull,label{show!1,color#000},itemStyle{borderWidth.5,borderColor#444,color#eee},emphasis{label{show!0,colorrgb(100,0,0)},itemStyle{colorrgba(255,215,0,0.8)}},regions[]},getRegionModelfunction(t){return this._optionModelMap.get(t)new Lo(null,this,this.ecModel)},getFormattedLabelfunction(t,e){var i=this.getRegionModel(t).get(label.+e+.formatter),n={namet};returnfunction==typeof i(n.status=e,i(n))string==typeof ii.replace({a},null!=tt)void 0},setZoomfunction(t){this.option.zoom=t},setCenterfunction(t){this.option.center=t}}),HD),Vs({typegeo,initfunction(t,e){var i=new _c(e,!0);this._mapDraw=i,this.group.add(i.group)},renderfunction(t,e,i,n){if(!ngeoToggleSelect!==n.typen.from!==this.uid){var o=this._mapDraw;t.get(show)o.draw(t,e,i,this,n)this._mapDraw.group.removeAll(),this.group.silent=t.get(silent)}},disposefunction(){this._mapDraw&&this._mapDraw.remove()}}),Hv(toggleSelected,{typegeoToggleSelect,eventgeoselectchanged}),Hv(select,{typegeoSelect,eventgeoselected}),Hv(unSelect,{typegeoUnSelect,eventgeounselected});var aN=[rect,polygon,keep,clear],rN=d,sN={lineXKv(0),lineYKv(1),rect{pointfunction(t,e,i){return t&&i.boundingRect.contain(t[0],t[1])},rectfunction(t,e,i){return t&&i.boundingRect.intersect(t)}},polygon{pointfunction(t,e,i){return t&&i.boundingRect.contain(t[0],t[1])&&Yl(i.range,t[0],t[1])},rectfunction(t,e,i){var n=i.range;if(!tn.length=1)return!1;var o=t.x,a=t.y,r=t.width,s=t.height,l=n[0];return!!(Yl(n,o,a)Yl(n,o+r,a)Yl(n,o,a+s)Yl(n,o+r,a+s)ue.create(t).contain(l[0],l[1])Jv(o,a,o+r,a,n)Jv(o,a,o,a+s,n)Jv(o+r,a,o+r,a+s,n)Jv(o,a+s,o+r,a+s,n))void 0}}},lN=d,uN=l,hN=v,cN=[dataToPoint,pointToData],dN=[grid,xAxis,yAxis,geo,graph,polar,radiusAxis,angleAxis,bmap],fN=iy.prototype;fN.setOutputRanges=function(t,e){this.matchOutputRanges(t,e,function(t,e,i){if((t.coordRanges(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var n=vN[t.brushType](0,i,e);t.__rangeOffset={offsetyN[t.brushType](n.values,t.range,[1,1]),xyMinMaxn.xyMinMax}}})},fN.matchOutputRanges=function(t,e,i){lN(t,function(t){var n=this.findTargetInfo(t,e);n&&!0!==n&&d(n.coordSyses,function(n){var o=vN[t.brushType](1,n,t.range);i(t,o.values,n,e)})},this)},fN.setInputRanges=function(t,e){lN(t,function(t){var i=this.findTargetInfo(t,e);if(t.range=t.range[],i&&!0!==i){t.panelId=i.panelId;var n=vN[t.brushType](0,i.coordSys,t.coordRange),o=t.__rangeOffset;t.range=oyN[t.brushType](n.values,o.offset,sy(n.xyMinMax,o.xyMinMax))n.values}},this)},fN.makePanelOpts=function(t,e){return f(this._targetInfoList,function(i){var n=i.getPanelRect();return{panelIdi.panelId,defaultBrushTypee&&e(i),clipPathhp(n),isTargetByCursordp(n,t,i.coordSysModel),getLinearBrushOtherExtentcp(n)}})},fN.controlSeries=function(t,e,i){var n=this.findTargetInfo(t,i);return!0===nn&&uN(n.coordSyses,e.coordinateSystem)=0},fN.findTargetInfo=function(t,e){for(var i=this._targetInfoList,n=oy(e,t),o=0;oi.length;o++){var a=i[o],r=t.panelId;if(r){if(a.panelId===r)return a}else for(o=0;ogN.length;o++)if(gN[o](n,a))return a}return!0};var pN={gridfunction(t,e){var i=t.xAxisModels,n=t.yAxisModels,o=t.gridModels,a=R(),r={},s={};(ino)&&(lN(i,function(t){var e=t.axis.grid.model;a.set(e.id,e),r[e.id]=!0}),lN(n,function(t){var e=t.axis.grid.model;a.set(e.id,e),s[e.id]=!0}),lN(o,function(t){a.set(t.id,t),r[t.id]=!0,s[t.id]=!0}),a.each(function(t){var o=t.coordinateSystem,a=[];lN(o.getCartesians(),function(t,e){(uN(i,t.getAxis(x).model)=0uN(n,t.getAxis(y).model)=0)&&a.push(t)}),e.push({panelIdgrid--+t.id,gridModelt,coordSysModelt,coordSysa[0],coordSysesa,getPanelRectmN.grid,xAxisDeclaredr[t.id],yAxisDeclareds[t.id]})}))},geofunction(t,e){lN(t.geoModels,function(t){var i=t.coordinateSystem;e.push({panelIdgeo--+t.id,geoModelt,coordSysModelt,coordSysi,coordSyses[i],getPanelRectmN.geo})})}},gN=[function(t,e){var i=t.xAxisModel,n=t.yAxisModel,o=t.gridModel;return!o&&i&&(o=i.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===e.gridModel},function(t,e){var i=t.geoModel;return i&&i===e.geoModel}],mN={gridfunction(){return this.coordSys.grid.getRect().clone()},geofunction(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Mo(t)),e}},vN={lineXhN(ay,0),lineYhN(ay,1),rectfunction(t,e,i){var n=e[cN[t]]([i[0][0],i[1][0]]),o=e[cN[t]]([i[0][1],i[1][1]]),a=[ny([n[0],o[0]]),ny([n[1],o[1]])];return{valuesa,xyMinMaxa}},polygonfunction(t,e,i){var n=[[10,-10],[10,-10]];return{valuesf(i,function(i){var o=e[cN[t]](i);return n[0][0]=Math.min(n[0][0],o[0]),n[1][0]=Math.min(n[1][0],o[1]),n[0][1]=Math.max(n[0][1],o[0]),n[1][1]=Math.max(n[1][1],o[1]),o}),xyMinMaxn}}},yN={lineXhN(ry,0),lineYhN(ry,1),rectfunction(t,e,i){return[[t[0][0]-i[0]e[0][0],t[0][1]-i[0]e[0][1]],[t[1][0]-i[1]e[1][0],t[1][1]-i[1]e[1][1]]]},polygonfunction(t,e,i){return f(t,function(t,n){return[t[0]-i[0]e[n][0],t[1]-i[1]e[n][1]]})}},xN=[inBrush,outOfBrush],_N=__ecBrushSelect,wN=__ecInBrushSelectEvent,bN=IT.VISUAL.BRUSH;Os(bN,function(t,e,i){t.eachComponent({mainTypebrush},function(e){i&&takeGlobalCursor===i.type&&e.setBrushOption(brush===i.keyi.brushOption{brushType!1}),(e.brushTargetManager=new iy(e.option,t)).setInputRanges(e.areas,t)})}),Es(bN,function(t,e,n){var o,a,s=[];t.eachComponent({mainTypebrush},function(e,n){function l(t){returnall===mv[t]}function u(t){return!!t.length}function h(t,e){var i=t.coordinateSystem;w=i.hasAxisBrushed(),l(e)&&i.eachActiveState(t.getData(),function(t,e){active===t&&(x[e]=1)})}function c(i,n,o){var a=dy(i);if(a&&!fy(e,n)&&(d(b,function(n){a[n.brushType]&&e.brushTargetManager.controlSeries(n,i,t)&&o.push(n),w=u(o)}),l(n)&&u(o))){var r=i.getData();r.each(function(t){cy(a,o,r,t)&&(x[t]=1)})}}var p={brushIde.id,brushIndexn,brushNamee.name,areasi(e.areas),selected[]};s.push(p);var g=e.option,m=g.brushLink,v=[],x=[],_=[],w=0;n(o=g.throttleType,a=g.throttleDelay);var b=f(e.areas,function(t){return py(r({boundingRectSN[t.brushType](t)},t))}),S=Xv(e.option,xN,function(t){t.mappingMethod=fixed});y(m)&&d(m,function(t){v[t]=1}),t.eachSeries(function(t,e){var i=_[e]=[];parallel===t.subTypeh(t,e)c(t,e,i)}),t.eachSeries(function(t,e){var i={seriesIdt.id,seriesIndexe,seriesNamet.name,dataIndex[]};p.selected.push(i);var n=dy(t),o=_[e],a=t.getData(),r=l(e)function(t){return x[t](i.dataIndex.push(a.getRawIndex(t)),inBrush)outOfBrush}function(t){return cy(n,o,a,t)(i.dataIndex.push(a.getRawIndex(t)),inBrush)outOfBrush};(l(e)wu(o))&&Yv(xN,S,a,r)})}),uy(e,o,a,s,n)});var SN={lineXB,lineYB,rectfunction(t){return gy(t.range)},polygonfunction(t){for(var e,i=t.range,n=0,o=i.length;no;n++){e=e[[10,-10],[10,-10]];var a=i[n];a[0]e[0][0]&&(e[0][0]=a[0]),a[0]e[0][1]&&(e[0][1]=a[0]),a[1]e[1][0]&&(e[1][0]=a[1]),a[1]e[1][1]&&(e[1][1]=a[1])}return e&&gy(e)}},MN=[#ddd];Bs({typebrush,dependencies[geo,grid,xAxis,yAxis,parallel,series],defaultOption{toolboxnull,brushLinknull,seriesIndexall,geoIndexnull,xAxisIndexnull,yAxisIndexnull,brushTyperect,brushModesingle,transformable!0,brushStyle{borderWidth1,colorrgba(120,140,180,0.3),borderColorrgba(120,140,180,0.8)},throttleTypefixRate,throttleDelay0,removeOnClick!0,z1e4},areas[],brushTypenull,brushOption{},coordInfoList[],optionUpdatedfunction(t,e){var i=this.option;!e&&jv(i,t,[inBrush,outOfBrush]);var n=i.inBrush=i.inBrush{};i.outOfBrush=i.outOfBrush{colorMN},n.hasOwnProperty(liftZ)(n.liftZ=5)},setAreasfunction(t){t&&(this.areas=f(t,function(t){return my(this.option,t)},this))},setBrushOptionfunction(t){this.brushOption=my(this.option,t),this.brushType=this.brushOption.brushType}});Vs({typebrush,initfunction(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new Cf(e.getZr())).on(brush,m(this._onBrush,this)).mount()},renderfunction(t){return this.model=t,vy.apply(this,arguments)},updateTransformvy,updateViewvy,disposefunction(){this._brushController.dispose()},_onBrushfunction(t,e){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(t,this.ecModel),(!e.isEnde.removeOnClick)&&this.api.dispatchAction({typebrush,brushIdn,areasi(t),$fromn})}}),Ps({typebrush,eventbrush},function(t,e){e.eachComponent({mainTypebrush,queryt},function(e){e.setAreas(t.areas)})}),Ps({typebrushSelect,eventbrushSelected,updatenone},function(){});var IN={},TN=XI.toolbox.brush;_y.defaultOption={show!0,type[rect,polygon,lineX,lineY,keep,clear],icon{rectM7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13,polygonM55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2,lineXM15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4,lineYM38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4,keepM4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z,clearM22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2},titlei(TN.title)};var AN=_y.prototype;AN.render=AN.updateView=function(t,e,i){var n,o,a;e.eachComponent({mainTypebrush},function(t){n=t.brushType,o=t.brushOption.brushModesingle,a=t.areas.length}),this._brushType=n,this._brushMode=o,d(t.get(type,!0),function(e){t.setIconStatus(e,(keep===emultiple===oclear===eae===n)emphasisnormal)})},AN.getIcons=function(){var t=this.model,e=t.get(icon,!0),i={};return d(t.get(type,!0),function(t){e[t]&&(i[t]=e[t])}),i},AN.onclick=function(t,e,i){var n=this._brushType,o=this._brushMode;clear===i(e.dispatchAction({typeaxisAreaSelect,intervals[]}),e.dispatchAction({typebrush,commandclear,areas[]}))e.dispatchAction({typetakeGlobalCursor,keybrush,brushOption{brushTypekeep===inn!==i&&i,brushModekeep===imultiple===osinglemultipleo}})},yy(brush,_y),Ls(function(t,e){var i=t&&t.brush;if(y(i)(i=i[i][]),i.length){var n=[];d(i,function(t){var e=t.hasOwnProperty(toolbox)t.toolbox[];e instanceof Array&&(n=n.concat(e))});var o=t&&t.toolbox;y(o)&&(o=o[0]),o(o={feature{}},t.toolbox=[o]);var a=o.feature(o.feature={}),r=a.brush(a.brush={}),s=r.type(r.type=[]);s.push.apply(s,n),Zv(s),e&&!s.length&&s.push.apply(s,aN)}});wy.prototype={constructorwy,typecalendar,dimensions[time,value],getDimensionsInfofunction(){return[{nametime,typetime},value]},getRangeInfofunction(){return this._rangeInfo},getModelfunction(){return this._model},getRectfunction(){return this._rect},getCellWidthfunction(){return this._sw},getCellHeightfunction(){return this._sh},getOrientfunction(){return this._orient},getFirstDayOfWeekfunction(){return this._firstDayOfWeek},getDateInfofunction(t){var e=(t=Uo(t)).getFullYear(),i=t.getMonth()+1;i=i100+ii;var n=t.getDate();n=n100+nn;var o=t.getDay();return o=Math.abs((o+7-this.getFirstDayOfWeek())%7),{ye,mi,dn,dayo,timet.getTime(),formatedDatee+-+i+-+n,datet}},getNextNDayfunction(t,e){return 0===(e=e0)this.getDateInfo(t)((t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t))},updatefunction(t,e){function i(t,e){return null!=t[e]&&auto!==t[e]}this._firstDayOfWeek=+this._model.getModel(dayLabel).get(firstDay),this._orient=this._model.get(orient),this._lineWidth=this._model.getModel(itemStyle).getItemStyle().lineWidth0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks1,o=[width,height],a=this._model.get(cellSize).slice(),r=this._model.getBoxLayoutParams(),s=horizontal===this._orient[n,7][7,n];d([0,1],function(t){i(a,t)&&(r[o[t]]=a[t]s[t])});var l={widthe.getWidth(),heighte.getHeight()},u=this._rect=la(r,l);d([0,1],function(t){i(a,t)(a[t]=u[o[t]]s[t])}),this._sw=a[0],this._sh=a[1]},dataToPointfunction(t,e){y(t)&&(t=t[0]),null==e&&(e=!0);var i=this.getDateInfo(t),n=this._rangeInfo,o=i.formatedDate;if(e&&!(i.time=n.start.time&&i.timen.end.time+864e5))return[NaN,NaN];var a=i.day,r=this._getRangeInfo([n.start.time,o]).nthWeek;returnvertical===this._orient[this._rect.x+athis._sw+this._sw2,this._rect.y+rthis._sh+this._sh2][this._rect.x+rthis._sw+this._sw2,this._rect.y+athis._sh+this._sh2]},pointToDatafunction(t){var e=this.pointToDate(t);return e&&e.time},dataToRectfunction(t,e){var i=this.dataToPoint(t,e);return{contentShape{xi[0]-(this._sw-this._lineWidth)2,yi[1]-(this._sh-this._lineWidth)2,widththis._sw-this._lineWidth,heightthis._sh-this._lineWidth},centeri,tl[i[0]-this._sw2,i[1]-this._sh2],tr[i[0]+this._sw2,i[1]-this._sh2],br[i[0]+this._sw2,i[1]+this._sh2],bl[i[0]-this._sw2,i[1]+this._sh2]}},pointToDatefunction(t){var e=Math.floor((t[0]-this._rect.x)this._sw)+1,i=Math.floor((t[1]-this._rect.y)this._sh)+1,n=this._rangeInfo.range;returnvertical===this._orientthis._getDateByWeeksAndDay(i,e-1,n)this._getDateByWeeksAndDay(e,i-1,n)},convertToPixelv(by,dataToPoint),convertFromPixelv(by,pointToData),_initRangeOptionfunction(){var t=this._model.get(range),e=t;if(y(e)&&1===e.length&&(e=e[0]),^d{4}$.test(e)&&(t=[e+-01-01,e+-12-31]),^d{4}[-]d{1,2}$.test(e)){var i=this.getDateInfo(e),n=i.date;n.setMonth(n.getMonth()+1);var o=this.getNextNDay(n,-1);t=[i.formatedDate,o.formatedDate]}^d{4}[-]d{1,2}[-]d{1,2}$.test(e)&&(t=[e,e]);var a=this._getRangeInfo(t);return a.start.timea.end.time&&t.reverse(),t},_getRangeInfofunction(t){var e;(t=[this.getDateInfo(t[0]),this.getDateInfo(t[1])])[0].timet[1].time&&(e=!0,t.reverse());var i=Math.floor(t[1].time864e5)-Math.floor(t[0].time864e5)+1,n=new Date(t[0].time),o=n.getDate(),a=t[1].date.getDate();if(n.setDate(o+i-1),n.getDate()!==a)for(var r=n.getTime()-t[1].time01-1;n.getDate()!==a&&(n.getTime()-t[1].time)r0;)i-=r,n.setDate(o+i-1);var s=Math.floor((i+t[0].day+6)7),l=e1-ss-1;return e&&t.reverse(),{range[t[0].formatedDate,t[1].formatedDate],startt[0],endt[1],allDayi,weekss,nthWeekl,fweekt[0].day,lweekt[1].day}},_getDateByWeeksAndDayfunction(t,e,i){var n=this._getRangeInfo(i);if(tn.weeks0===t&&en.fweekt===n.weeks&&en.lweek)return!1;var o=7(t-1)-n.fweek+e,a=new Date(n.start.time);return a.setDate(n.start.d+o),this.getDateInfo(a)}},wy.dimensions=wy.prototype.dimensions,wy.getDimensionsInfo=wy.prototype.getDimensionsInfo,wy.create=function(t,e){var i=[];return t.eachComponent(calendar,function(n){var o=new wy(n,t,e);i.push(o),n.coordinateSystem=o}),t.eachSeries(function(t){calendar===t.get(coordinateSystem)&&(t.coordinateSystem=i[t.get(calendarIndex)0])}),i},Ba.register(calendar,wy);var DN=YM.extend({typecalendar,coordinateSystemnull,defaultOption{zlevel0,z2,left80,top60,cellSize20,orienthorizontal,splitLine{show!0,lineStyle{color#000,width1,typesolid}},itemStyle{color#fff,borderWidth1,borderColor#ccc},dayLabel{show!0,firstDay0,positionstart,margin50%,nameMapen,color#000},monthLabel{show!0,positionstart,margin5,aligncenter,nameMapen,formatternull,color#000},yearLabel{show!0,positionnull,margin30,formatternull,color#ccc,fontFamilysans-serif,fontWeightbolder,fontSize20}},initfunction(t,e,i,n){var o=da(t);DN.superApply(this,init,arguments),Sy(t,o)},mergeOptionfunction(t,e){DN.superApply(this,mergeOption,arguments),Sy(this.option,t)}}),CN={EN[Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec],CN[涓€鏈�,浜屾湀,涓夋湀,鍥涙湀,浜旀湀,鍏湀,涓冩湀,鍏湀,涔濇湀,鍗佹湀,鍗佷竴鏈�,鍗佷簩鏈�]},LN={EN[S,M,T,W,T,F,S],CN[鏃�,涓€,浜�,涓�,鍥�,浜�,鍏�]};Vs({typecalendar,_tlpointsnull,_blpointsnull,_firstDayOfMonthnull,_firstDayPointsnull,renderfunction(t,e,i){var n=this.group;n.removeAll();var o=t.coordinateSystem,a=o.getRangeInfo(),r=o.getOrient();this._renderDayRect(t,a,n),this._renderLines(t,a,r,n),this._renderYearText(t,a,r,n),this._renderMonthText(t,r,n),this._renderWeekText(t,a,r,n)},_renderDayRectfunction(t,e,i){for(var n=t.coordinateSystem,o=t.getModel(itemStyle).getItemStyle(),a=n.getCellWidth(),r=n.getCellHeight(),s=e.start.time;s=e.end.time;s=n.getNextNDay(s,1).time){var l=n.dataToRect([s],!1).tl,u=new aM({shape{xl[0],yl[1],widtha,heightr},cursordefault,styleo});i.add(u)}},_renderLinesfunction(t,e,i,n){function o(e){a._firstDayOfMonth.push(r.getDateInfo(e)),a._firstDayPoints.push(r.dataToRect([e],!1).tl);var o=a._getLinePointsOfOneWeek(t,e,i);a._tlpoints.push(o[0]),a._blpoints.push(o[o.length-1]),l&&a._drawSplitline(o,s,n)}var a=this,r=t.coordinateSystem,s=t.getModel(splitLine.lineStyle).getLineStyle(),l=t.get(splitLine.show),u=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=e.start,c=0;h.time=e.end.time;c++){o(h.formatedDate),0===c&&(h=r.getDateInfo(e.start.y+-+e.start.m));var d=h.date;d.setMonth(d.getMonth()+1),h=r.getDateInfo(d)}o(r.getNextNDay(e.end.time,1).formatedDate),l&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,u,i),s,n),l&&this._drawSplitline(a._getEdgesPoints(a._blpoints,u,i),s,n)},_getEdgesPointsfunction(t,e,i){var n=[t[0].slice(),t[t.length-1].slice()],o=horizontal===i01;return n[0][o]=n[0][o]-e2,n[1][o]=n[1][o]+e2,n},_drawSplitlinefunction(t,e,i){var n=new oM({z220,shape{pointst},stylee});i.add(n)},_getLinePointsOfOneWeekfunction(t,e,i){var n=t.coordinateSystem;e=n.getDateInfo(e);for(var o=[],a=0;a7;a++){var r=n.getNextNDay(e.time,a),s=n.dataToRect([r.time],!1);o[2r.day]=s.tl,o[2r.day+1]=s[horizontal===ibltr]}return o},_formatterLabelfunction(t,e){returnstring==typeof t&&tea(t,e)function==typeof tt(e)e.nameMap},_yearTextPositionControlfunction(t,e,i,n,o){e=e.slice();var a=[center,bottom];bottom===n(e[1]+=o,a=[center,top])left===ne[0]-=oright===n(e[0]+=o,a=[center,top])e[1]-=o;var r=0;returnleft!==n&&right!==n(r=Math.PI2),{rotationr,positione,style{textAligna[0],textVerticalAligna[1]}}},_renderYearTextfunction(t,e,i,n){var o=t.getModel(yearLabel);if(o.get(show)){var a=o.get(margin),r=o.get(position);r(r=horizontal!==itopleft);var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])2,u=(s[0][1]+s[1][1])2,h=horizontal===i01,c={top[l,s[h][1]],bottom[l,s[1-h][1]],left[s[1-h][0],u],right[s[h][0],u]},d=e.start.y;+e.end.y+e.start.y&&(d=d+-+e.end.y);var f=o.get(formatter),p={starte.start.y,ende.end.y,nameMapd},g=this._formatterLabel(f,p),m=new qS({z230});fo(m.style,o,{textg}),m.attr(this._yearTextPositionControl(m,c[r],i,r,a)),n.add(m)}},_monthTextPositionControlfunction(t,e,i,n,o){var a=left,r=top,s=t[0],l=t[1];returnhorizontal===i(l+=o,e&&(a=center),start===n&&(r=bottom))(s+=o,e&&(r=middle),start===n&&(a=right)),{xs,yl,textAligna,textVerticalAlignr}},_renderMonthTextfunction(t,e,i){var n=t.getModel(monthLabel);if(n.get(show)){var o=n.get(nameMap),r=n.get(margin),s=n.get(position),l=n.get(align),u=[this._tlpoints,this._blpoints];_(o)&&(o=CN[o.toUpperCase()][]);var h=start===s01,c=horizontal===e01;r=start===s-rr;for(var d=center===l,f=0;fu[h].length-1;f++){var p=u[h][f].slice(),g=this._firstDayOfMonth[f];if(d){var m=this._firstDayPoints[f];p[c]=(m[c]+u[0][f+1][c])2}var v=n.get(formatter),y=o[+g.m-1],x={yyyyg.y,yy(g.y+).slice(2),MMg.m,M+g.m,nameMapy},w=this._formatterLabel(v,x),b=new qS({z230});a(fo(b.style,n,{textw}),this._monthTextPositionControl(p,d,e,s,r)),i.add(b)}}},_weekTextPositionControlfunction(t,e,i,n,o){var a=center,r=middle,s=t[0],l=t[1],u=start===i;returnhorizontal===e(s=s+n+(u1-1)o[0]2,a=urightleft)(l=l+n+(u1-1)o[1]2,r=ubottomtop),{xs,yl,textAligna,textVerticalAlignr}},_renderWeekTextfunction(t,e,i,n){var o=t.getModel(dayLabel);if(o.get(show)){var r=t.coordinateSystem,s=o.get(position),l=o.get(nameMap),u=o.get(margin),h=r.getFirstDayOfWeek();_(l)&&(l=LN[l.toUpperCase()][]);var c=r.getNextNDay(e.end.time,7-e.lweek).time,d=[r.getCellWidth(),r.getCellHeight()];u=Ro(u,d[horizontal===i01]),start===s&&(c=r.getNextNDay(e.start.time,-(7+e.fweek)).time,u=-u);for(var f=0;f7;f++){var p=r.getNextNDay(c,f),g=r.dataToRect([p.time],!1).center,m=f;m=Math.abs((f+h)%7);var v=new qS({z230});a(fo(v.style,o,{textl[m]}),this._weekTextPositionControl(g,i,s,u,d)),n.add(v)}}}}),Bs({typetitle,layoutMode{typebox,ignoreSize!0},defaultOption{zlevel0,z6,show!0,text,targetblank,subtext,subtargetblank,left0,top0,backgroundColorrgba(0,0,0,0),borderColor#ccc,borderWidth0,padding5,itemGap10,textStyle{fontSize18,fontWeightbolder,color#333},subtextStyle{color#aaa}}}),Vs({typetitle,renderfunction(t,e,i){if(this.group.removeAll(),t.get(show)){var n=this.group,o=t.getModel(textStyle),a=t.getModel(subtextStyle),r=t.get(textAlign),s=t.get(textBaseline),l=new qS({stylefo({},o,{textt.get(text),textFillo.getTextColor()},{disableBox!0}),z210}),u=l.getBoundingRect(),h=t.get(subtext),c=new qS({stylefo({},a,{texth,textFilla.getTextColor(),yu.height+t.get(itemGap),textVerticalAligntop},{disableBox!0}),z210}),d=t.get(link),f=t.get(sublink),p=t.get(triggerEvent,!0);l.silent=!d&&!p,c.silent=!f&&!p,d&&l.on(click,function(){window.open(d,_+t.get(target))}),f&&c.on(click,function(){window.open(f,_+t.get(subtarget))}),l.eventData=c.eventData=p{componentTypetitle,componentIndext.componentIndex}null,n.add(l),h&&n.add(c);var g=n.getBoundingRect(),m=t.getBoxLayoutParams();m.width=g.width,m.height=g.height;var v=la(m,{widthi.getWidth(),heighti.getHeight()},t.get(padding));r(middle===(r=t.get(left)t.get(right))&&(r=center),right===rv.x+=v.widthcenter===r&&(v.x+=v.width2)),s(center===(s=t.get(top)t.get(bottom))&&(s=middle),bottom===sv.y+=v.heightmiddle===s&&(v.y+=v.height2),s=stop),n.attr(position,[v.x,v.y]);var y={textAlignr,textVerticalAligns};l.setStyle(y),c.setStyle(y),g=n.getBoundingRect();var x=v.margin,_=t.getItemStyle([color,opacity]);_.fill=t.get(backgroundColor);var w=new aM({shape{xg.x-x[3],yg.y-x[0],widthg.width+x[1]+x[3],heightg.height+x[0]+x[2],rt.get(borderRadius)},style_,silent!0});jn(w),n.add(w)}}}),YM.registerSubTypeDefaulter(dataZoom,function(){returnslider});var kN=[cartesian2d,polar,singleAxis],PN=function(t,e){var i=f(t=t.slice(),aa),n=f(e=(e[]).slice(),aa);return function(o,a){d(t,function(t,r){for(var s={namet,capitali[r]},l=0;le.length;l++)s[e[l]]=t+n[l];o.call(a,s)})}}([x,y,z,radius,angle,single],[axisIndex,axis,index,id]),NN=d,ON=Bo,EN=function(t,e,i,n){this._dimName=t,this._axisIndex=e,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=n,this._dataZoomModel=i};EN.prototype={constructorEN,hostedByfunction(t){return this._dataZoomModel===t},getDataValueWindowfunction(){return this._valueWindow.slice()},getDataPercentWindowfunction(){return this._percentWindow.slice()},getTargetSeriesModelsfunction(){var t=[],e=this.ecModel;return e.eachSeries(function(i){if(My(i.get(coordinateSystem))){var n=this._dimName,o=e.queryComponents({mainTypen+Axis,indexi.get(n+AxisIndex),idi.get(n+AxisId)})[0];this._axisIndex===(o&&o.componentIndex)&&t.push(i)}},this),t},getAxisModelfunction(){return this.ecModel.getComponent(this._dimName+Axis,this._axisIndex)},getOtherAxisModelfunction(){var t,e,i=this._dimName,n=this.ecModel,o=this.getAxisModel();x===iy===i(e=gridIndex,t=x===iyx)(e=polarIndex,t=angle===iradiusangle);var a;return n.eachComponent(t+Axis,function(t){(t.get(e)0)===(o.get(e)0)&&(a=t)}),a},getMinMaxSpanfunction(){return i(this._minMaxSpan)},calculateDataWindowfunction(t){var e=this._dataExtent,i=this.getAxisModel().axis.scale,n=this._dataZoomModel.getRangePropMode(),o=[0,100],a=[t.start,t.end],r=[];return NN([startValue,endValue],function(e){r.push(null!=t[e]i.parse(t[e])null)}),NN([0,1],function(t){var s=r[t],l=a[t];percent===n[t](null==l&&(l=o[t]),s=i.parse(Eo(l,o,e,!0)))l=Eo(s,e,o,!0),r[t]=s,a[t]=l}),{valueWindowON(r),percentWindowON(a)}},resetfunction(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=Ty(this,this._dimName,e);var i=this.calculateDataWindow(t.option);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,Cy(this),Dy(this)}},restorefunction(t){t===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,Dy(this,!0))},filterDatafunction(t,e){function i(t){return t=r[0]&&t=r[1]}if(t===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),a=t.get(filterMode),r=this._valueWindow;none!==a&&NN(o,function(t){var e=t.getData(),o=e.mapDimension(n,!0);o.length&&(weakFilter===ae.filterSelf(function(t){for(var i,n,a,s=0;so.length;s++){var l=e.get(o[s],t),u=!isNaN(l),h=lr[0],c=lr[1];if(u&&!h&&!c)return!0;u&&(a=!0),h&&(i=!0),c&&(n=!0)}return a&&i&&n})NN(o,function(n){if(empty===a)t.setData(e.map(n,function(t){return i(t)tNaN}));else{var o={};o[n]=r,e.selectRange(o)}}),NN(o,function(t){e.setApproximateExtent(r,t)}))})}}};var RN=d,zN=PN,BN=Bs({typedataZoom,dependencies[xAxis,yAxis,zAxis,radiusAxis,angleAxis,singleAxis,series],defaultOption{zlevel0,z4,orientnull,xAxisIndexnull,yAxisIndexnull,filterModefilter,throttlenull,start0,end100,startValuenull,endValuenull,minSpannull,maxSpannull,minValueSpannull,maxValueSpannull,rangeModenull},initfunction(t,e,i){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=[percent,percent];var n=Ly(t);this.mergeDefaultAndTheme(t,i),this.doInit(n)},mergeOptionfunction(t){var e=Ly(t);n(this.option,t,!0),this.doInit(e)},doInitfunction(t){var e=this.option;z_.canvasSupported(e.realtime=!1),this._setDefaultThrottle(t),ky(this,t),RN([[start,startValue],[end,endValue]],function(t,i){value===this._rangePropMode[i]&&(e[t[0]]=null)},this),this.textStyleModel=this.getModel(textStyle),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxiesfunction(){var t=this._axisProxies;this.eachTargetAxis(function(e,i,n,o){var a=this.dependentModels[e.axis][i],r=a.__dzAxisProxy(a.__dzAxisProxy=new EN(e.name,i,this,o));t[e.name+_+i]=r},this)},_resetTargetfunction(){var t=this.option,e=this._judgeAutoMode();zN(function(e){var i=e.axisIndex;t[i]=Di(t[i])},this),axisIndex===ethis._autoSetAxisIndex()orient===e&&this._autoSetOrient()},_judgeAutoModefunction(){var t=this.option,e=!1;zN(function(i){null!=t[i.axisIndex]&&(e=!0)},this);var i=t.orient;return null==i&&eorientevoid 0(null==i&&(t.orient=horizontal),axisIndex)},_autoSetAxisIndexfunction(){var t=!0,e=this.get(orient,!0),i=this.option,n=this.dependentModels;if(t){var o=vertical===eyx;n[o+Axis].length(i[o+AxisIndex]=[0],t=!1)RN(n.singleAxis,function(n){t&&n.get(orient,!0)===e&&(i.singleAxisIndex=[n.componentIndex],t=!1)})}t&&zN(function(e){if(t){var n=[],o=this.dependentModels[e.axis];if(o.length&&!n.length)for(var a=0,r=o.length;ar;a++)category===o[a].get(type)&&n.push(a);i[e.axisIndex]=n,n.length&&(t=!1)}},this),t&&this.ecModel.eachSeries(function(t){this._isSeriesHasAllAxesTypeOf(t,value)&&zN(function(e){var n=i[e.axisIndex],o=t.get(e.axisIndex),a=t.get(e.axisId);l(n,o=t.ecModel.queryComponents({mainTypee.axis,indexo,ida})[0].componentIndex)0&&n.push(o)})},this)},_autoSetOrientfunction(){var t;this.eachTargetAxis(function(e){!t&&(t=e.name)},this),this.option.orient=y===tverticalhorizontal},_isSeriesHasAllAxesTypeOffunction(t,e){var i=!0;return zN(function(n){var o=t.get(n.axisIndex),a=this.dependentModels[n.axis][o];a&&a.get(type)===e(i=!1)},this),i},_setDefaultThrottlefunction(t){if(t.hasOwnProperty(throttle)&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate010020}},getFirstTargetAxisModelfunction(){var t;return zN(function(e){if(null==t){var i=this.get(e.axisIndex);i.length&&(t=this.dependentModels[e.axis][i[0]])}},this),t},eachTargetAxisfunction(t,e){var i=this.ecModel;zN(function(n){RN(this.get(n.axisIndex),function(o){t.call(e,n,o,this,i)},this)},this)},getAxisProxyfunction(t,e){return this._axisProxies[t+_+e]},getAxisModelfunction(t,e){var i=this.getAxisProxy(t,e);return i&&i.getAxisModel()},setRawRangefunction(t,e){var i=this.option;RN([[start,startValue],[end,endValue]],function(e){null==t[e[0]]&&null==t[e[1]](i[e[0]]=t[e[0]],i[e[1]]=t[e[1]])},this),!e&&ky(this,t)},getPercentRangefunction(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},getValueRangefunction(t,e){if(null!=tnull!=e)return this.getAxisProxy(t,e).getDataValueWindow();var i=this.findRepresentativeAxisProxy();return ii.getDataValueWindow()void 0},findRepresentativeAxisProxyfunction(t){if(t)return t.__dzAxisProxy;var e=this._axisProxies;for(var i in e)if(e.hasOwnProperty(i)&&e[i].hostedBy(this))return e[i];for(var i in e)if(e.hasOwnProperty(i)&&!e[i].hostedBy(this))return e[i]},getRangePropModefunction(){return this._rangePropMode.slice()}}),VN=EI.extend({typedataZoom,renderfunction(t,e,i,n){this.dataZoomModel=t,this.ecModel=e,this.api=i},getTargetCoordInfofunction(){function t(t,e,i,n){for(var o,a=0;ai.length;a++)if(i[a].model===t){o=i[a];break}oi.push(o={modelt,axisModels[],coordIndexn}),o.axisModels.push(e)}var e=this.dataZoomModel,i=this.ecModel,n={};return e.eachTargetAxis(function(e,o){var a=i.getComponent(e.axis,o);if(a){var r=a.getCoordSysModel();r&&t(r,a,n[r.mainType](n[r.mainType]=[]),r.componentIndex)}},this),n}}),GN=(BN.extend({typedataZoom.slider,layoutModebox,defaultOption{show!0,rightph,topph,widthph,heightph,leftnull,bottomnull,backgroundColorrgba(47,69,84,0),dataBackground{lineStyle{color#2f4554,width.5,opacity.3},areaStyle{colorrgba(47,69,84,0.3),opacity.3}},borderColor#ddd,fillerColorrgba(167,183,204,0.4),handleIconM8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z,handleSize100%,handleStyle{color#a7b7cc},labelPrecisionnull,labelFormatternull,showDetail!0,showDataShadowauto,realtime!0,zoomLock!1,textStyle{color#333}}}),aM),FN=Eo,WN=Bo,HN=m,ZN=d,UN=horizontal,XN=5,jN=[line,bar,candlestick,scatter],YN=VN.extend({typedataZoom.slider,initfunction(t,e){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=e},renderfunction(t,e,i,n){YN.superApply(this,render,arguments),Lr(this,_dispatchZoomAction,this.dataZoomModel.get(throttle),fixRate),this._orient=t.get(orient),!1!==this.dataZoomModel.get(show)(n&&dataZoom===n.type&&n.from===this.uidthis._buildView(),this._updateView())this.group.removeAll()},removefunction(){YN.superApply(this,remove,arguments),kr(this,_dispatchZoomAction)},disposefunction(){YN.superApply(this,dispose,arguments),kr(this,_dispatchZoomAction)},_buildViewfunction(){var t=this.group;t.removeAll(),this._resetLocation(),this._resetInterval();var e=this._displayables.barGroup=new Zw;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},_resetLocationfunction(){var t=this.dataZoomModel,e=this.api,i=this._findCoordRect(),n={widthe.getWidth(),heighte.getHeight()},o=this._orient===UN{rightn.width-i.x-i.width,topn.height-30-7,widthi.width,height30}{right7,topi.y,width30,heighti.height},a=da(t.option);d([right,top,width,height],function(t){ph===a[t]&&(a[t]=o[t])});var r=la(a,n,t.padding);this._location={xr.x,yr.y},this._size=[r.width,r.height],vertical===this._orient&&this._size.reverse()},_positionGroupfunction(){var t=this.group,e=this._location,i=this._orient,n=this.dataZoomModel.getFirstTargetAxisModel(),o=n&&n.get(inverse),a=this._displayables.barGroup,r=(this._dataShadowInfo{}).otherAxisInverse;a.attr(i!==UNoi===UN&&o{scaler[-1,1][-1,-1]}vertical!==io{scaler[-1,-1][-1,1],rotationMath.PI2}{scaler[1,-1][1,1],rotationMath.PI2}{scaler[1,1][1,-1]});var s=t.getBoundingRect([a]);t.attr(position,[e.x-s.x,e.y-s.y])},_getViewExtentfunction(){return[0,this._size[0]]},_renderBackgroundfunction(){var t=this.dataZoomModel,e=this._size,i=this._displayables.barGroup;i.add(new GN({silent!0,shape{x0,y0,widthe[0],heighte[1]},style{fillt.get(backgroundColor)},z2-40})),i.add(new GN({shape{x0,y0,widthe[0],heighte[1]},style{filltransparent},z20,onclickm(this._onClickPanelClick,this)}))},_renderDataShadowfunction(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(t){var e=this._size,i=t.series,n=i.getRawData(),o=i.getShadowDimi.getShadowDim()t.otherDim;if(null!=o){var a=n.getDataExtent(o),s=.3(a[1]-a[0]);a=[a[0]-s,a[1]+s];var l,u=[0,e[1]],h=[0,e[0]],c=[[e[0],0],[0,0]],d=[],f=h[1](n.count()-1),p=0,g=Math.round(n.count()e[0]);n.each([o],function(t,e){if(g0&&e%g)p+=f;else{var i=null==tisNaN(t)===t,n=i0FN(t,a,u,!0);i&&!l&&e(c.push([c[c.length-1][0],0]),d.push([d[d.length-1][0],0]))!i&&l&&(c.push([p,0]),d.push([p,0])),c.push([p,n]),d.push([p,n]),p+=f,l=i}});var m=this.dataZoomModel;this._displayables.barGroup.add(new nM({shape{pointsc},styler({fillm.get(dataBackgroundColor)},m.getModel(dataBackground.areaStyle).getAreaStyle()),silent!0,z2-20})),this._displayables.barGroup.add(new oM({shape{pointsd},stylem.getModel(dataBackground.lineStyle).getLineStyle(),silent!0,z2-19}))}}},_prepareDataShadowInfofunction(){var t=this.dataZoomModel,e=t.get(showDataShadow);if(!1!==e){var i,n=this.ecModel;return t.eachTargetAxis(function(o,a){d(t.getAxisProxy(o.name,a).getTargetSeriesModels(),function(t){if(!(i!0!==e&&l(jN,t.get(type))0)){var r,s=n.getComponent(o.axis,a).axis,u=Py(o.name),h=t.coordinateSystem;null!=u&&h.getOtherAxis&&(r=h.getOtherAxis(s).inverse),u=t.getData().mapDimension(u),i={thisAxiss,seriest,thisDimo.name,otherDimu,otherAxisInverser}}},this)},this),i}},_renderHandlefunction(){var t=this._displayables,e=t.handles=[],i=t.handleLabels=[],n=this._displayables.barGroup,o=this._size,a=this.dataZoomModel;n.add(t.filler=new GN({draggable!0,cursorNy(this._orient),driftHN(this._onDragMove,this,all),onmousemovefunction(t){lw(t.event)},ondragstartHN(this._showDataInfo,this,!0),ondragendHN(this._onDragEnd,this),onmouseoverHN(this._showDataInfo,this,!0),onmouseoutHN(this._showDataInfo,this,!1),style{filla.get(fillerColor),textPositioninside}})),n.add(new GN(jn({silent!0,shape{x0,y0,widtho[0],heighto[1]},style{strokea.get(dataBackgroundColor)a.get(borderColor),lineWidth1,fillrgba(0,0,0,0)}}))),ZN([0,1],function(t){var o=Co(a.get(handleIcon),{cursorNy(this._orient),draggable!0,driftHN(this._onDragMove,this,t),onmousemovefunction(t){lw(t.event)},ondragendHN(this._onDragEnd,this),onmouseoverHN(this._showDataInfo,this,!0),onmouseoutHN(this._showDataInfo,this,!1)},{x-1,y0,width2,height2}),r=o.getBoundingRect();this._handleHeight=Ro(a.get(handleSize),this._size[1]),this._handleWidth=r.widthr.heightthis._handleHeight,o.setStyle(a.getModel(handleStyle).getItemStyle());var s=a.get(handleColor);null!=s&&(o.style.fill=s),n.add(e[t]=o);var l=a.textStyleModel;this.group.add(i[t]=new qS({silent!0,invisible!0,style{x0,y0,text,textVerticalAlignmiddle,textAligncenter,textFilll.getTextColor(),textFontl.getFont()},z210}))},this)},_resetIntervalfunction(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[FN(t[0],[0,100],e,!0),FN(t[1],[0,100],e,!0)]},_updateIntervalfunction(t,e){var i=this.dataZoomModel,n=this._handleEnds,o=this._getViewExtent(),a=i.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];EL(e,n,o,i.get(zoomLock)allt,null!=a.minSpanFN(a.minSpan,r,o,!0)null,null!=a.maxSpanFN(a.maxSpan,r,o,!0)null);var s=this._range,l=this._range=WN([FN(n[0],o,r,!0),FN(n[1],o,r,!0)]);return!ss[0]!==l[0]s[1]!==l[1]},_updateViewfunction(t){var e=this._displayables,i=this._handleEnds,n=WN(i.slice()),o=this._size;ZN([0,1],function(t){var n=e.handles[t],a=this._handleHeight;n.attr({scale[a2,a2],position[i[t],o[1]2-a2]})},this),e.filler.setShape({xn[0],y0,widthn[1]-n[0],heighto[1]}),this._updateDataInfo(t)},_updateDataInfofunction(t){function e(t){var e=Mo(n.handles[t].parent,this.group),i=To(0===trightleft,e),s=this._handleWidth2+XN,l=Io([c[t]+(0===t-ss),this._size[1]2],e);o[t].setStyle({xl[0],yl[1],textVerticalAligna===UNmiddlei,textAligna===UNicenter,textr[t]})}var i=this.dataZoomModel,n=this._displayables,o=n.handleLabels,a=this._orient,r=[,];if(i.get(showDetail)){var s=i.findRepresentativeAxisProxy();if(s){var l=s.getAxisModel().axis,u=this._range,h=ts.calculateDataWindow({startu[0],endu[1]}).valueWindows.getDataValueWindow();r=[this._formatLabel(h[0],l),this._formatLabel(h[1],l)]}}var c=WN(this._handleEnds.slice());e.call(this,0),e.call(this,1)},_formatLabelfunction(t,e){var i=this.dataZoomModel,n=i.get(labelFormatter),o=i.get(labelPrecision);null!=o&&auto!==o(o=e.getPixelPrecision());var a=null==tisNaN(t)category===e.typetime===e.typee.scale.getLabel(Math.round(t))t.toFixed(Math.min(o,20));return x(n)n(t,a)_(n)n.replace({value},a)a},_showDataInfofunction(t){t=this._draggingt;var e=this._displayables.handleLabels;e[0].attr(invisible,!t),e[1].attr(invisible,!t)},_onDragMovefunction(t,e,i){this._dragging=!0;var n=Io([e,i],this._displayables.barGroup.getLocalTransform(),!0),o=this._updateInterval(t,n[0]),a=this.dataZoomModel.get(realtime);this._updateView(!a),o&&a&&this._dispatchZoomAction()},_onDragEndfunction(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get(realtime)&&this._dispatchZoomAction()},_onClickPanelClickfunction(t){var e=this._size,i=this._displayables.barGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(i[0]0i[0]e[0]i[1]0i[1]e[1])){var n=this._handleEnds,o=(n[0]+n[1])2,a=this._updateInterval(all,i[0]-o);this._updateView(),a&&this._dispatchZoomAction()}},_dispatchZoomActionfunction(){var t=this._range;this.api.dispatchAction({typedataZoom,fromthis.uid,dataZoomIdthis.dataZoomModel.id,startt[0],endt[1]})},_findCoordRectfunction(){var t;if(ZN(this.getTargetCoordInfo(),function(e){if(!t&&e.length){var i=e[0].model.coordinateSystem;t=i.getRect&&i.getRect()}}),!t){var e=this.api.getWidth(),i=this.api.getHeight();t={x.2e,y.2i,width.6e,height.6i}}return t}});BN.extend({typedataZoom.inside,defaultOption{disabled!1,zoomLock!1,zoomOnMouseWheel!0,moveOnMouseMove!0,moveOnMouseWheel!1,preventDefaultMouseMove!0}});var qN=0_ec_dataZoom_roams,KN=m,$N=VN.extend({typedataZoom.inside,initfunction(t,e){this._range},renderfunction(t,e,i,n){$N.superApply(this,render,arguments),this._range=t.getPercentRange(),d(this.getTargetCoordInfo(),function(e,n){var o=f(e,function(t){return Ry(t.model)});d(e,function(e){var a=e.model,r={};d([pan,zoom,scrollMove],function(t){r[t]=KN(JN[t],this,e,n)},this),Oy(i,{coordIdRy(a),allCoordIdso,containsPointfunction(t,e,i){return a.coordinateSystem.containPoint([e,i])},dataZoomIdt.id,dataZoomModelt,getRanger})},this)},this)},disposefunction(){Ey(this.api,this.dataZoomModel.id),$N.superApply(this,dispose,arguments),this._range=null}}),JN={zoomfunction(t,e,i,n){var o=this._range,a=o.slice(),r=t.axisModels[0];if(r){var s=QN[e](null,[n.originX,n.originY],r,i,t),l=(s.signal0s.pixelStart+s.pixelLength-s.pixels.pixel-s.pixelStart)s.pixelLength(a[1]-a[0])+a[0],u=Math.max(1n.scale,0);a[0]=(a[0]-l)u+l,a[1]=(a[1]-l)u+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return EL(0,a,[0,100],0,h.minSpan,h.maxSpan),this._range=a,o[0]!==a[0]o[1]!==a[1]avoid 0}},panWy(function(t,e,i,n,o,a){var r=QN[n]([a.oldX,a.oldY],[a.newX,a.newY],e,o,i);return r.signal(t[1]-t[0])r.pixelr.pixelLength}),scrollMoveWy(function(t,e,i,n,o,a){return QN[n]([0,0],[a.scrollDelta,a.scrollDelta],e,o,i).signal(t[1]-t[0])a.scrollDelta})},QN={gridfunction(t,e,i,n,o){var a=i.axis,r={},s=o.model.coordinateSystem.getRect();return t=t[0,0],x===a.dim(r.pixel=e[0]-t[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse1-1)(r.pixel=e[1]-t[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse-11),r},polarfunction(t,e,i,n,o){var a=i.axis,r={},s=o.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return t=ts.pointToCoord(t)[0,0],e=s.pointToCoord(e),radiusAxis===i.mainType(r.pixel=e[0]-t[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=a.inverse1-1)(r.pixel=e[1]-t[1],r.pixelLength=u[1]-u[0],r.pixelStart=u[0],r.signal=a.inverse-11),r},singleAxisfunction(t,e,i,n,o){var a=i.axis,r=o.model.coordinateSystem.getRect(),s={};return t=t[0,0],horizontal===a.orient(s.pixel=e[0]-t[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse1-1)(s.pixel=e[1]-t[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse-11),s}};ks({getTargetSeriesfunction(t){var e=R();return t.eachComponent(dataZoom,function(t){t.eachTargetAxis(function(t,i,n){d(n.getAxisProxy(t.name,i).getTargetSeriesModels(),function(t){e.set(t.uid,t)})})}),e},modifyOutputEnd!0,overallResetfunction(t,e){t.eachComponent(dataZoom,function(t){t.eachTargetAxis(function(t,i,n){n.getAxisProxy(t.name,i).reset(n,e)}),t.eachTargetAxis(function(t,i,n){n.getAxisProxy(t.name,i).filterData(n,e)})}),t.eachComponent(dataZoom,function(t){var e=t.findRepresentativeAxisProxy(),i=e.getDataPercentWindow(),n=e.getDataValueWindow();t.setRawRange({starti[0],endi[1],startValuen[0],endValuen[1]},!0)})}}),Ps(dataZoom,function(t,e){var i=Iy(m(e.eachComponent,e,dataZoom),PN,function(t,e){return t.get(e.axisIndex)}),n=[];e.eachComponent({mainTypedataZoom,queryt},function(t,e){n.push.apply(n,i(t).nodes)}),d(n,function(e,i){e.setRawRange({startt.start,endt.end,startValuet.startValue,endValuet.endValue})})});var tO=d,eO=function(t){var e=t&&t.visualMap;y(e)(e=e[e][]),tO(e,function(t){if(t){Hy(t,splitList)&&!Hy(t,pieces)&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&y(e)&&tO(e,function(t){w(t)&&(Hy(t,start)&&!Hy(t,min)&&(t.min=t.start),Hy(t,end)&&!Hy(t,max)&&(t.max=t.end))})}})};YM.registerSubTypeDefaulter(visualMap,function(t){return t.categories(t.piecest.pieces.length0t.splitNumber0)&&!t.calculablepiecewisecontinuous});var iO=IT.VISUAL.COMPONENT;Es(iO,{createOnAllSeries!0,resetfunction(t,e){var i=[];return e.eachComponent(visualMap,function(e){var n=t.pipelineContext;!e.isTargetSeries(t)n&&n.largei.push(qv(e.stateList,e.targetVisuals,m(e.getValueState,e),e.getDataDimension(t.getData())))}),i}}),Es(iO,{createOnAllSeries!0,resetfunction(t,e){var i=t.getData(),n=[];e.eachComponent(visualMap,function(e){if(e.isTargetSeries(t)){var o=e.getVisualMeta(m(Zy,null,t,e)){stops[],outerColors[]},a=e.getDataDimension(i),r=i.getDimensionInfo(a);null!=r&&(o.dimension=r.index,n.push(o))}}),t.getData().setVisual(visualMeta,n)}});var nO={getfunction(t,e,n){var o=i((oO[t]{})[e]);return n&&y(o)o[o.length-1]o}},oO={color{active[#006edd,#e0ffff],inactive[rgba(0,0,0,0)]},colorHue{active[0,360],inactive[0,0]},colorSaturation{active[.3,1],inactive[0,0]},colorLightness{active[.9,.5],inactive[0,0]},colorAlpha{active[.3,1],inactive[0,0]},opacity{active[.3,1],inactive[0,0]},symbol{active[circle,roundRect,diamond],inactive[none]},symbolSize{active[10,50],inactive[0,0]}},aO=jC.mapVisual,rO=jC.eachVisual,sO=y,lO=d,uO=Bo,hO=Eo,cO=B,dO=Bs({typevisualMap,dependencies[series],stateList[inRange,outOfRange],replacableOptionKeys[inRange,outOfRange,target,controller,color],dataBound[-10,10],layoutMode{typebox,ignoreSize!0},defaultOption{show!0,zlevel0,z4,seriesIndexall,min0,max200,dimensionnull,inRangenull,outOfRangenull,left0,rightnull,topnull,bottom0,itemWidthnull,itemHeightnull,inverse!1,orientvertical,backgroundColorrgba(0,0,0,0),borderColor#ccc,contentColor#5793f3,inactiveColor#aaa,borderWidth0,padding5,textGap10,precision0,colornull,formatternull,textnull,textStyle{color#333}},initfunction(t,e,i){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(t,i)},optionUpdatedfunction(t,e){var i=this.option;z_.canvasSupported(i.realtime=!1),!e&&jv(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel(textStyle),this.resetItemSize(),this.completeVisualOption()},resetVisualfunction(t){var e=this.stateList;t=m(t,this),this.controllerVisuals=Xv(this.option.controller,e,t),this.targetVisuals=Xv(this.option.target,e,t)},getTargetSeriesIndicesfunction(){var t=this.option.seriesIndex,e=[];return null==tall===tthis.ecModel.eachSeries(function(t,i){e.push(i)})e=Di(t),e},eachTargetSeriesfunction(t,e){d(this.getTargetSeriesIndices(),function(i){t.call(e,this.ecModel.getSeriesByIndex(i))},this)},isTargetSeriesfunction(t){var e=!1;return this.eachTargetSeries(function(i){i===t&&(e=!0)}),e},formatValueTextfunction(t,e,i){function n(t){return t===l[0]mint===l[1]max(+t).toFixed(Math.min(s,20))}var o,a,r=this.option,s=r.precision,l=this.dataBound,u=r.formatter;return i=i[,],y(t)&&(t=t.slice(),o=!0),a=eto[n(t[0]),n(t[1])]n(t),_(u)u.replace({value},oa[0]a).replace({value2},oa[1]a)x(u)ou(t[0],t[1])u(t)ot[0]===l[0]i[0]+ +a[1]t[1]===l[1]i[1]+ +a[0]a[0]+ - +a[1]a},resetExtentfunction(){var t=this.option,e=uO([t.min,t.max]);this._dataExtent=e},getDataDimensionfunction(t){var e=this.option.dimension,i=t.dimensions;if(null!=ei.length){if(null!=e)return t.getDimension(e);for(var n=t.dimensions,o=n.length-1;o=0;o--){var a=n[o];if(!t.getDimensionInfo(a).isCalculationCoord)return a}}},getExtentfunction(){return this._dataExtent.slice()},completeVisualOptionfunction(){function t(t){sO(o.color)&&!t.inRange&&(t.inRange={coloro.color.slice().reverse()}),t.inRange=t.inRange{colore.get(gradientColor)},lO(this.stateList,function(e){var i=t[e];if(_(i)){var n=nO.get(i,active,l);n(t[e]={},t[e][i]=n)delete t[e]}},this)}var e=this.ecModel,o=this.option,a={inRangeo.inRange,outOfRangeo.outOfRange},r=o.target(o.target={}),s=o.controller(o.controller={});n(r,a),n(s,a);var l=this.isCategory();t.call(this,r),t.call(this,s),function(t,e,i){var n=t[e],o=t[i];n&&!o&&(o=t[i]={},lO(n,function(t,e){if(jC.isValidType(e)){var i=nO.get(e,inactive,l);null!=i&&(o[e]=i,color!==eo.hasOwnProperty(opacity)o.hasOwnProperty(colorAlpha)(o.opacity=[0,0]))}}))}.call(this,r,inRange,outOfRange),function(t){var e=(t.inRange{}).symbol(t.outOfRange{}).symbol,n=(t.inRange{}).symbolSize(t.outOfRange{}).symbolSize,o=this.get(inactiveColor);lO(this.stateList,function(a){var r=this.itemSize,s=t[a];s(s=t[a]={colorlo[o]}),null==s.symbol&&(s.symbol=e&&i(e)(lroundRect[roundRect])),null==s.symbolSize&&(s.symbolSize=n&&i(n)(lr[0][r[0],r[0]])),s.symbol=aO(s.symbol,function(t){returnnone===tsquare===troundRectt});var u=s.symbolSize;if(null!=u){var h=-10;rO(u,function(t){th&&(h=t)}),s.symbolSize=aO(u,function(t){return hO(t,[0,h],[0,r[0]],!0)})}},this)}.call(this,s)},resetItemSizefunction(){this.itemSize=[parseFloat(this.get(itemWidth)),parseFloat(this.get(itemHeight))]},isCategoryfunction(){return!!this.option.categories},setSelectedcO,getValueStatecO,getVisualMetacO}),fO=[20,140],pO=dO.extend({typevisualMap.continuous,defaultOption{alignauto,calculable!1,rangenull,realtime!0,itemHeightnull,itemWidthnull,hoverLink!0,hoverLinkDataSizenull,hoverLinkOnHandlenull},optionUpdatedfunction(t,e){pO.superApply(this,optionUpdated,arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod=linear,t.dataExtent=this.getExtent()}),this._resetRange()},resetItemSizefunction(){pO.superApply(this,resetItemSize,arguments);var t=this.itemSize;horizontal===this._orient&&t.reverse(),(null==t[0]isNaN(t[0]))&&(t[0]=fO[0]),(null==t[1]isNaN(t[1]))&&(t[1]=fO[1])},_resetRangefunction(){var t=this.getExtent(),e=this.option.range;!ee.auto(t.auto=1,this.option.range=t)y(e)&&(e[0]e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},completeVisualOptionfunction(){dO.prototype.completeVisualOption.apply(this,arguments),d(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=0)},this)},setSelectedfunction(t){this.option.range=t.slice(),this._resetRange()},getSelectedfunction(){var t=this.getExtent(),e=Bo((this.get(range)[]).slice());return e[0]t[1]&&(e[0]=t[1]),e[1]t[1]&&(e[1]=t[1]),e[0]t[0]&&(e[0]=t[0]),e[1]t[0]&&(e[1]=t[0]),e},getValueStatefunction(t){var e=this.option.range,i=this.getExtent();return(e[0]=i[0]e[0]=t)&&(e[1]=i[1]t=e[1])inRangeoutOfRange},findTargetDataIndicesfunction(t){var e=[];return this.eachTargetSeries(function(i){var n=[],o=i.getData();o.each(this.getDataDimension(o),function(e,i){t[0]=e&&e=t[1]&&n.push(i)},this),e.push({seriesIdi.id,dataIndexn})},this),e},getVisualMetafunction(t){function e(e,i){o.push({valuee,colort(e,i)})}for(var i=Uy(0,0,this.getExtent()),n=Uy(0,0,this.option.range.slice()),o=[],a=0,r=0,s=n.length,l=i.length;rl&&(!n.lengthi[r]=n[0]);r++)i[r]n[a]&&e(i[r],outOfRange);for(u=1;as;a++,u=0)u&&o.length&&e(n[a],outOfRange),e(n[a],inRange);for(var u=1;rl;r++)(!n.lengthn[n.length-1]i[r])&&(u&&(o.length&&e(o[o.length-1].value,outOfRange),u=0),e(i[r],outOfRange));var h=o.length;return{stopso,outerColors[ho[0].colortransparent,ho[h-1].colortransparent]}}}),gO=Vs({typevisualMap,autoPositionValues{left1,right1,top1,bottom1},initfunction(t,e){this.ecModel=t,this.api=e,this.visualMapModel},renderfunction(t,e,i,n){this.visualMapModel=t,!1!==t.get(show)this.doRender.apply(this,arguments)this.group.removeAll()},renderBackgroundfunction(t){var e=this.visualMapModel,i=OM(e.get(padding)0),n=t.getBoundingRect();t.add(new aM({z2-1,silent!0,shape{xn.x-i[3],yn.y-i[0],widthn.width+i[3]+i[1],heightn.height+i[0]+i[2]},style{fille.get(backgroundColor),strokee.get(borderColor),lineWidthe.get(borderWidth)}}))},getControllerVisualfunction(t,e,i){function n(t){return s[t]}function o(t,e){s[t]=e}var a=(i=i{}).forceState,r=this.visualMapModel,s={};if(symbol===e&&(s.symbol=r.get(itemSymbol)),color===e){var l=r.get(contentColor);s.color=l}var u=r.controllerVisuals[ar.getValueState(t)];return d(jC.prepareVisualTypes(u),function(a){var r=u[a];i.convertOpacityToAlpha&&opacity===a&&(a=colorAlpha,r=u.__alphaForOpacity),jC.dependsOn(a,e)&&r&&r.applyVisual(t,n,o)}),s[e]},positionGroupfunction(t){var e=this.visualMapModel,i=this.api;ua(t,e.getBoxLayoutParams(),{widthi.getWidth(),heighti.getHeight()})},doRenderB}),mO=Eo,vO=d,yO=Math.min,xO=Math.max,_O=12,wO=6,bO=gO.extend({typevisualMap.continuous,initfunction(){bO.superApply(this,init,arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRenderfunction(t,e,i,n){n&&selectDataRange===n.type&&n.from===this.uidthis._buildView()},_buildViewfunction(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get(orient),this._useHandle=t.get(calculable),this._resetInterval(),this._renderBar(e);var i=t.get(text);this._renderEndsText(e,i,0),this._renderEndsText(e,i,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},_renderEndsTextfunction(t,e,i){if(e){var n=e[1-i];n=null!=nn+;var o=this.visualMapModel,a=o.get(textGap),r=o.itemSize,s=this._shapes.barGroup,l=this._applyTransform([r[0]2,0===i-ar[1]+a],s),u=this._applyTransform(0===ibottomtop,s),h=this._orient,c=this.visualMapModel.textStyleModel;this.group.add(new qS({style{xl[0],yl[1],textVerticalAlignhorizontal===hmiddleu,textAlignhorizontal===hucenter,textn,textFontc.getFont(),textFillc.getTextColor()}}))}},_renderBarfunction(t){var e=this.visualMapModel,i=this._shapes,n=e.itemSize,o=this._orient,a=this._useHandle,r=Xy(e,this.api,n),s=i.barGroup=this._createBarGroup(r);s.add(i.outOfRange=Yy()),s.add(i.inRange=Yy(null,aQy(this._orient)null,m(this._dragHandle,this,all,!1),m(this._dragHandle,this,all,!0)));var l=e.textStyleModel.getTextRect(鍥�),u=xO(l.width,l.height);a&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(s,0,n,u,o,r),this._createHandle(s,1,n,u,o,r)),this._createIndicator(s,n,u,o),t.add(s)},_createHandlefunction(t,e,i,n,o){var a=m(this._dragHandle,this,e,!1),r=m(this._dragHandle,this,e,!0),s=Yy(qy(e,n),Qy(this._orient),a,r);s.position[0]=i[0],t.add(s);var l=this.visualMapModel.textStyleModel,u=new qS({draggable!0,drifta,onmousemovefunction(t){lw(t.event)},ondragendr,style{x0,y0,text,textFontl.getFont(),textFilll.getTextColor()}});this.group.add(u);var h=[horizontal===on21.5n,horizontal===o0===e-1.5n1.5n0===e-n2n2],c=this._shapes;c.handleThumbs[e]=s,c.handleLabelPoints[e]=h,c.handleLabels[e]=u},_createIndicatorfunction(t,e,i,n){var o=Yy([[0,0]],move);o.position[0]=e[0],o.attr({invisible!0,silent!0}),t.add(o);var a=this.visualMapModel.textStyleModel,r=new qS({silent!0,invisible!0,style{x0,y0,text,textFonta.getFont(),textFilla.getTextColor()}});this.group.add(r);var s=[horizontal===ni2wO+3,0],l=this._shapes;l.indicator=o,l.indicatorLabel=r,l.indicatorLabelPoint=s},_dragHandlefunction(t,e,i,n){if(this._useHandle){if(this._dragging=!e,!e){var o=this._applyTransform([i,n],this._shapes.barGroup,!0);this._updateInterval(t,o[1]),this._updateView()}e===!this.visualMapModel.get(realtime)&&this.api.dispatchAction({typeselectDataRange,fromthis.uid,visualMapIdthis.visualMapModel.id,selectedthis._dataInterval.slice()}),e!this._hovering&&this._clearHoverLinkToSeries()Jy(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},_resetIntervalfunction(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),i=t.getExtent(),n=[0,t.itemSize[1]];this._handleEnds=[mO(e[0],i,n,!0),mO(e[1],i,n,!0)]},_updateIntervalfunction(t,e){e=e0;var i=this.visualMapModel,n=this._handleEnds,o=[0,i.itemSize[1]];EL(e,n,o,t,0);var a=i.getExtent();this._dataInterval=[mO(n[0],o,a,!0),mO(n[1],o,a,!0)]},_updateViewfunction(t){var e=this.visualMapModel,i=e.getExtent(),n=this._shapes,o=[0,e.itemSize[1]],a=tothis._handleEnds,r=this._createBarVisual(this._dataInterval,i,a,inRange),s=this._createBarVisual(i,i,o,outOfRange);n.inRange.setStyle({fillr.barColor,opacityr.opacity}).setShape(points,r.barPoints),n.outOfRange.setStyle({fills.barColor,opacitys.opacity}).setShape(points,s.barPoints),this._updateHandle(a,r)},_createBarVisualfunction(t,e,i,n){var o={forceStaten,convertOpacityToAlpha!0},a=this._makeColorGradient(t,o),r=[this.getControllerVisual(t[0],symbolSize,o),this.getControllerVisual(t[1],symbolSize,o)],s=this._createBarPoints(i,r);return{barColornew dM(0,0,0,1,a),barPointss,handlesColor[a[0].color,a[a.length-1].color]}},_makeColorGradientfunction(t,e){var i=[],n=(t[1]-t[0])100;i.push({colorthis.getControllerVisual(t[0],color,e),offset0});for(var o=1;o100;o++){var a=t[0]+no;if(at[1])break;i.push({colorthis.getControllerVisual(a,color,e),offseto100})}return i.push({colorthis.getControllerVisual(t[1],color,e),offset1}),i},_createBarPointsfunction(t,e){var i=this.visualMapModel.itemSize;return[[i[0]-e[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-e[1],t[1]]]},_createBarGroupfunction(t){var e=this._orient,i=this.visualMapModel.get(inverse);return new Zw(horizontal!==eihorizontal===e&&i{scalebottom===t[-1,1][1,1],rotation-Math.PI2}vertical!==ei{scaleleft===t[1,1][-1,1]}{scaleleft===t[1,-1][-1,-1]}{scalebottom===t[1,1][-1,1],rotationMath.PI2})},_updateHandlefunction(t,e){if(this._useHandle){var i=this._shapes,n=this.visualMapModel,o=i.handleThumbs,a=i.handleLabels;vO([0,1],function(r){var s=o[r];s.setStyle(fill,e.handlesColor[r]),s.position[1]=t[r];var l=Io(i.handleLabelPoints[r],Mo(s,this.group));a[r].setStyle({xl[0],yl[1],textn.formatValueText(this._dataInterval[r]),textVerticalAlignmiddle,textAlignthis._applyTransform(horizontal===this._orient0===rbottomtopleft,i.barGroup)})},this)}},_showIndicatorfunction(t,e,i,n){var o=this.visualMapModel,a=o.getExtent(),r=o.itemSize,s=[0,r[1]],l=mO(t,a,s,!0),u=this._shapes,h=u.indicator;if(h){h.position[1]=l,h.attr(invisible,!1),h.setShape(points,Ky(!!i,n,l,r[1]));var c={convertOpacityToAlpha!0},d=this.getControllerVisual(t,color,c);h.setStyle(fill,d);var f=Io(u.indicatorLabelPoint,Mo(h,this.group)),p=u.indicatorLabel;p.attr(invisible,!1);var g=this._applyTransform(left,u.barGroup),m=this._orient;p.setStyle({text(i)+o.formatValueText(e),textVerticalAlignhorizontal===mgmiddle,textAlignhorizontal===mcenterg,xf[0],yf[1]})}},_enableHoverLinkToSeriesfunction(){var t=this;this._shapes.barGroup.on(mousemove,function(e){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,n=t._applyTransform([e.offsetX,e.offsetY],t._shapes.barGroup,!0,!0);n[1]=yO(xO(0,n[1]),i[1]),t._doHoverLinkToSeries(n[1],0=n[0]&&n[0]=i[0])}}).on(mouseout,function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},_enableHoverLinkFromSeriesfunction(){var t=this.api.getZr();this.visualMapModel.option.hoverLink(t.on(mouseover,this._hoverLinkFromSeriesMouseOver,this),t.on(mouseout,this._hideIndicator,this))this._clearHoverLinkFromSeries()},_doHoverLinkToSeriesfunction(t,e){var i=this.visualMapModel,n=i.itemSize;if(i.option.hoverLink){var o=[0,n[1]],a=i.getExtent();t=yO(xO(o[0],t),o[1]);var r=$y(i,a,o),s=[t-r,t+r],l=mO(t,o,a,!0),u=[mO(s[0],o,a,!0),mO(s[1],o,a,!0)];s[0]o[0]&&(u[0]=-10),s[1]o[1]&&(u[1]=10),e&&(u[0]===-10this._showIndicator(l,u[1], ,r)u[1]===10this._showIndicator(l,u[0], ,r)this._showIndicator(l,l,鈮� ,r));var h=this._hoverLinkDataIndices,c=[];(eJy(i))&&(c=this._hoverLinkDataIndices=i.findTargetDataIndices(u));var d=Ri(h,c);this._dispatchHighDown(downplay,jy(d[0])),this._dispatchHighDown(highlight,jy(d[1]))}},_hoverLinkFromSeriesMouseOverfunction(t){var e=t.target,i=this.visualMapModel;if(e&&null!=e.dataIndex){var n=this.ecModel.getSeriesByIndex(e.seriesIndex);if(i.isTargetSeries(n)){var o=n.getData(e.dataType),a=o.get(i.getDataDimension(o),e.dataIndex,!0);isNaN(a)this._showIndicator(a,a)}}},_hideIndicatorfunction(){var t=this._shapes;t.indicator&&t.indicator.attr(invisible,!0),t.indicatorLabel&&t.indicatorLabel.attr(invisible,!0)},_clearHoverLinkToSeriesfunction(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown(downplay,jy(t)),t.length=0},_clearHoverLinkFromSeriesfunction(){this._hideIndicator();var t=this.api.getZr();t.off(mouseover,this._hoverLinkFromSeriesMouseOver),t.off(mouseout,this._hideIndicator)},_applyTransformfunction(t,e,i,n){var o=Mo(e,nnullthis.group);return bM[y(t)applyTransformtransformDirection](t,o,i)},_dispatchHighDownfunction(t,e){e&&e.length&&this.api.dispatchAction({typet,batche})},disposefunction(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},removefunction(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});Ps({typeselectDataRange,eventdataRangeSelected,updateupdate},function(t,e){e.eachComponent({mainTypevisualMap,queryt},function(e){e.setSelected(t.selected)})}),Ls(eO);var SO=dO.extend({typevisualMap.piecewise,defaultOption{selectednull,minOpen!1,maxOpen!1,alignauto,itemWidth20,itemHeight14,itemSymbolroundRect,pieceListnull,categoriesnull,splitNumber5,selectedModemultiple,itemGap10,hoverLink!0,showLabelnull},optionUpdatedfunction(t,e){SO.superApply(this,optionUpdated,arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();MO[this._mode].call(this),this._resetSelected(t,e);var o=this.option.categories;this.resetVisual(function(t,e){categories===n(t.mappingMethod=category,t.categories=i(o))(t.dataExtent=this.getExtent(),t.mappingMethod=piecewise,t.pieceList=f(this._pieceList,function(t){var t=i(t);returninRange!==e&&(t.visual=null),t}))})},completeVisualOptionfunction(){function t(t,e,i){return t&&t[e]&&(w(t[e])t[e].hasOwnProperty(i)t[e]===i)}var e=this.option,i={},n=jC.listVisualTypes(),o=this.isCategory();d(e.pieces,function(t){d(n,function(e){t.hasOwnProperty(e)&&(i[e]=1)})}),d(i,function(i,n){var a=0;d(this.stateList,function(i){a=t(e,i,n)t(e.target,i,n)},this),!a&&d(this.stateList,function(t){(e[t](e[t]={}))[n]=nO.get(n,inRange===tactiveinactive,o)})},this),dO.prototype.completeVisualOption.apply(this,arguments)},_resetSelectedfunction(t,e){var i=this.option,n=this._pieceList,o=(eit).selected{};if(i.selected=o,d(n,function(t,e){var i=this.getSelectedMapKey(t);o.hasOwnProperty(i)(o[i]=!0)},this),single===i.selectedMode){var a=!1;d(n,function(t,e){var i=this.getSelectedMapKey(t);o[i]&&(ao[i]=!1a=!0)},this)}},getSelectedMapKeyfunction(t){returncategories===this._modet.value+t.index+},getPieceListfunction(){return this._pieceList},_determineModefunction(){var t=this.option;return t.pieces&&t.pieces.length0piecesthis.option.categoriescategoriessplitNumber},setSelectedfunction(t){this.option.selected=i(t)},getValueStatefunction(t){var e=jC.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]inRangeoutOfRange},findTargetDataIndicesfunction(t){var e=[];return this.eachTargetSeries(function(i){var n=[],o=i.getData();o.each(this.getDataDimension(o),function(e,i){jC.findPieceIndex(e,this._pieceList)===t&&n.push(i)},this),e.push({seriesIdi.id,dataIndexn})},this),e},getRepresentValuefunction(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var i=t.interval[];e=i[0]===-10&&i[1]===100(i[0]+i[1])2}return e},getVisualMetafunction(t){function e(e,a){var r=o.getRepresentValue({intervale});a(a=o.getValueState(r));var s=t(r,a);e[0]===-10n[0]=se[1]===10n[1]=si.push({valuee[0],colors},{valuee[1],colors})}if(!this.isCategory()){var i=[],n=[],o=this,a=this._pieceList.slice();if(a.length){var r=a[0].interval[0];r!==-10&&a.unshift({interval[-10,r]}),(r=a[a.length-1].interval[1])!==10&&a.push({interval[r,10]})}else a.push({interval[-10,10]});var s=-10;return d(a,function(t){var i=t.interval;i&&(i[0]s&&e([s,i[0]],outOfRange),e(i.slice()),s=i[1])},this),{stopsi,outerColorsn}}}}),MO={splitNumberfunction(){var t=this.option,e=this._pieceList,i=Math.min(t.precision,20),n=this.getExtent(),o=t.splitNumber;o=Math.max(parseInt(o,10),1),t.splitNumber=o;for(var a=(n[1]-n[0])o;+a.toFixed(i)!==a&&i5;)i++;t.precision=i,a=+a.toFixed(i);var r=0;t.minOpen&&e.push({indexr++,interval[-10,n[0]],close[0,0]});for(var s=n[0],l=r+o;rl;s+=a){var u=r===o-1n[1]s+a;e.push({indexr++,interval[s,u],close[1,1]})}t.maxOpen&&e.push({indexr++,interval[n[1],10],close[0,0]}),qo(e),d(e,function(t){t.text=this.formatValueText(t.interval)},this)},categoriesfunction(){var t=this.option;d(t.categories,function(t){this._pieceList.push({textthis.formatValueText(t,!0),valuet})},this),tx(t,this._pieceList)},piecesfunction(){var t=this.option,e=this._pieceList;d(t.pieces,function(t,i){w(t)(t={valuet});var n={text,indexi};if(null!=t.label&&(n.text=t.label),t.hasOwnProperty(value)){var o=n.value=t.value;n.interval=[o,o],n.close=[1,1]}else{for(var a=n.interval=[],r=n.close=[0,0],s=[1,0,1],l=[-10,10],u=[],h=0;h2;h++){for(var c=[[gte,gt,min],[lte,lt,max]][h],d=0;d3&&null==a[h];d++)a[h]=t[c[d]],r[h]=s[d],u[h]=2===d;null==a[h]&&(a[h]=l[h])}u[0]&&a[1]===10&&(r[0]=0),u[1]&&a[0]===-10&&(r[1]=0),a[0]===a[1]&&r[0]&&r[1]&&(n.value=a[0])}n.visual=jC.retrieveVisuals(t),e.push(n)},this),tx(t,e),qo(e),d(e,function(t){var e=t.close,i=[[,鈮�][e[1]],[,鈮�][e[0]]];t.text=t.textthis.formatValueText(null!=t.valuet.valuet.interval,!1,i)},this)}};gO.extend({typevisualMap.piecewise,doRenderfunction(){var t=this.group;t.removeAll();var e=this.visualMapModel,i=e.get(textGap),n=e.textStyleModel,o=n.getFont(),a=n.getTextColor(),r=this._getItemAlign(),s=e.itemSize,l=this._getViewData(),u=l.endsText,h=T(e.get(showLabel,!0),!u);u&&this._renderEndsText(t,u[0],s,h,r),d(l.viewPieceList,function(n){var l=n.piece,u=new Zw;u.onclick=m(this._onItemClick,this,l),this._enableHoverLink(u,n.indexInModelPieceList);var c=e.getRepresentValue(l);if(this._createItemSymbol(u,c,[0,0,s[0],s[1]]),h){var d=this.visualMapModel.getValueState(c);u.add(new qS({style{xright===r-is[0]+i,ys[1]2,textl.text,textVerticalAlignmiddle,textAlignr,textFonto,textFilla,opacityoutOfRange===d.51}}))}t.add(u)},this),u&&this._renderEndsText(t,u[1],s,h,r),UM(e.get(orient),t,e.get(itemGap)),this.renderBackground(t),this.positionGroup(t)},_enableHoverLinkfunction(t,e){function i(t){var i=this.visualMapModel;i.option.hoverLink&&this.api.dispatchAction({typet,batchjy(i.findTargetDataIndices(e))})}t.on(mouseover,m(i,this,highlight)).on(mouseout,m(i,this,downplay))},_getItemAlignfunction(){var t=this.visualMapModel,e=t.option;if(vertical===e.orient)return Xy(t,this.api,t.itemSize);var i=e.align;return i&&auto!==i(i=left),i},_renderEndsTextfunction(t,e,i,n,o){if(e){var a=new Zw,r=this.visualMapModel.textStyleModel;a.add(new qS({style{xnright===oi[0]0i[0]2,yi[1]2,textVerticalAlignmiddle,textAlignnocenter,texte,textFontr.getFont(),textFillr.getTextColor()}})),t.add(a)}},_getViewDatafunction(){var t=this.visualMapModel,e=f(t.getPieceList(),function(t,e){return{piecet,indexInModelPieceListe}}),i=t.get(text),n=t.get(orient),o=t.get(inverse);return(horizontal===no!o)e.reverse()i&&(i=i.slice().reverse()),{viewPieceListe,endsTexti}},_createItemSymbolfunction(t,e,i){t.add(Xl(this.getControllerVisual(e,symbol),i[0],i[1],i[2],i[3],this.getControllerVisual(e,color)))},_onItemClickfunction(t){var e=this.visualMapModel,n=e.option,o=i(n.selected),a=e.getSelectedMapKey(t);single===n.selectedMode(o[a]=!0,d(o,function(t,e){o[e]=e===a}))o[a]=!o[a],this.api.dispatchAction({typeselectDataRange,fromthis.uid,visualMapIdthis.visualMapModel.id,selectedo})}});Ls(eO);var IO=$o,TO=Qo,AO=Bs({typemarker,dependencies[series,grid,polar,geo],initfunction(t,e,i,n){this.mergeDefaultAndTheme(t,i),this.mergeOption(t,i,n.createdBySelf,!0)},isAnimationEnabledfunction(){if(z_.node)return!1;var t=this.__hostSeries;return this.getShallow(animation)&&t&&t.isAnimationEnabled()},mergeOptionfunction(t,e,i,n){var o=this.constructor,r=this.mainType+Model;ie.eachSeries(function(t){var i=t.get(this.mainType,!0),s=t[r];i&&i.data(ss.mergeOption(i,e,!0)(n&&ex(i),d(i.data,function(t){t instanceof Array(ex(t[0]),ex(t[1]))ex(t)}),a(s=new o(i,this,e),{mainTypethis.mainType,seriesIndext.seriesIndex,namet.name,createdBySelf!0}),s.__hostSeries=t),t[r]=s)t[r]=null},this)},formatTooltipfunction(t){var e=this.getData(),i=this.getRawValue(t),n=y(i)f(i,IO).join(, )IO(i),o=e.getName(t),a=TO(this.name);return(null!=io)&&(a+=br ),o&&(a+=TO(o),null!=i&&(a+=  )),null!=i&&(a+=TO(n)),a},getDatafunction(){return this._data},setDatafunction(t){this._data=t}});h(AO,LI),AO.extend({typemarkPoint,defaultOption{zlevel0,z5,symbolpin,symbolSize50,tooltip{triggeritem},label{show!0,positioninside},itemStyle{borderWidth2},emphasis{label{show!0}}}});var DO=l,CO=v,LO={minCO(ox,min),maxCO(ox,max),averageCO(ox,average)},kO=Vs({typemarker,initfunction(){this.markerGroupMap=R()},renderfunction(t,e,i){var n=this.markerGroupMap;n.each(function(t){t.__keep=!1});var o=this.type+Model;e.eachSeries(function(t){var n=t[o];n&&this.renderSeries(t,n,e,i)},this),n.each(function(t){!t.__keep&&this.group.remove(t.group)},this)},renderSeriesfunction(){}});kO.extend({typemarkPoint,updateTransformfunction(t,e,i){e.eachSeries(function(t){var e=t.markPointModel;e&&(cx(e.getData(),t,i),this.markerGroupMap.get(t.id).updateLayout(e))},this)},renderSeriesfunction(t,e,i,n){var o=t.coordinateSystem,a=t.id,r=t.getData(),s=this.markerGroupMap,l=s.get(a)s.set(a,new Su),u=dx(o,t,e);e.setData(u),cx(e.getData(),t,n),u.each(function(t){var i=u.getItemModel(t),n=i.getShallow(symbolSize);function==typeof n&&(n=n(e.getRawValue(t),e.getDataParams(t))),u.setItemVisual(t,{symbolSizen,colori.get(itemStyle.color)r.getVisual(color),symboli.getShallow(symbol)})}),l.updateData(u),this.group.add(l.group),u.eachItemGraphicEl(function(t){t.traverse(function(t){t.dataModel=e})}),l.__keep=!0,l.group.silent=e.get(silent)t.get(silent)}}),Ls(function(t){t.markPoint=t.markPoint{}}),AO.extend({typemarkLine,defaultOption{zlevel0,z5,symbol[circle,arrow],symbolSize[8,16],precision2,tooltip{triggeritem},label{show!0,positionend},lineStyle{typedashed},emphasis{label{show!0},lineStyle{width3}},animationEasinglinear}});var PO=function(t,e,o,r){var s=t.getData(),l=r.type;if(!y(r)&&(min===lmax===laverage===lmedian===lnull!=r.xAxisnull!=r.yAxis)){var u,h;if(null!=r.yAxisnull!=r.xAxis)u=null!=r.yAxisyx,e.getAxis(u),h=T(r.yAxis,r.xAxis);else{var c=rx(r,s,e,t);u=c.valueDataDim,c.valueAxis,h=hx(s,u,l)}var d=x===u01,f=1-d,p=i(r),g={};p.type=null,p.coord=[],g.coord=[],p.coord[f]=-10,g.coord[f]=10;var m=o.get(precision);m=0&&number==typeof h&&(h=+h.toFixed(Math.min(m,20))),p.coord[d]=g.coord[d]=h,r=[p,g,{typel,valueIndexr.valueIndex,valueh}]}return r=[ax(t,r[0]),ax(t,r[1]),a({},r[2])],r[2].type=r[2].type,n(r[2],r[0]),n(r[2],r[1]),r};kO.extend({typemarkLine,updateTransformfunction(t,e,i){e.eachSeries(function(t){var e=t.markLineModel;if(e){var n=e.getData(),o=e.__from,a=e.__to;o.each(function(e){mx(o,e,!0,t,i),mx(a,e,!1,t,i)}),n.each(function(t){n.setItemLayout(t,[o.getItemLayout(t),a.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},renderSeriesfunction(t,e,i,n){function o(e,i,o){var a=e.getItemModel(i);mx(e,i,o,t,n),e.setItemVisual(i,{symbolSizea.get(symbolSize)g[o01],symbola.get(symbol,!0)p[o01],colora.get(itemStyle.color)s.getVisual(color)})}var a=t.coordinateSystem,r=t.id,s=t.getData(),l=this.markerGroupMap,u=l.get(r)l.set(r,new Jd);this.group.add(u.group);var h=vx(a,t,e),c=h.from,d=h.to,f=h.line;e.__from=c,e.__to=d,e.setData(f);var p=e.get(symbol),g=e.get(symbolSize);y(p)(p=[p,p]),number==typeof g&&(g=[g,g]),h.from.each(function(t){o(c,t,!0),o(d,t,!1)}),f.each(function(t){var e=f.getItemModel(t).get(lineStyle.color);f.setItemVisual(t,{colorec.getItemVisual(t,color)}),f.setItemLayout(t,[c.getItemLayout(t),d.getItemLayout(t)]),f.setItemVisual(t,{fromSymbolSizec.getItemVisual(t,symbolSize),fromSymbolc.getItemVisual(t,symbol),toSymbolSized.getItemVisual(t,symbolSize),toSymbold.getItemVisual(t,symbol)})}),u.updateData(f),h.line.eachItemGraphicEl(function(t,i){t.traverse(function(t){t.dataModel=e})}),u.__keep=!0,u.group.silent=e.get(silent)t.get(silent)}}),Ls(function(t){t.markLine=t.markLine{}}),AO.extend({typemarkArea,defaultOption{zlevel0,z1,tooltip{triggeritem},animation!1,label{show!0,positiontop},itemStyle{borderWidth0},emphasis{label{show!0,positiontop}}}});var NO=function(t,e,i,n){var a=ax(t,n[0]),r=ax(t,n[1]),s=T,l=a.coord,u=r.coord;l[0]=s(l[0],-10),l[1]=s(l[1],-10),u[0]=s(u[0],10),u[1]=s(u[1],10);var h=o([{},a,r]);return h.coord=[a.coord,r.coord],h.x0=a.x,h.y0=a.y,h.x1=r.x,h.y1=r.y,h},OO=[[x0,y0],[x1,y0],[x1,y1],[x0,y1]];kO.extend({typemarkArea,updateTransformfunction(t,e,i){e.eachSeries(function(t){var e=t.markAreaModel;if(e){var n=e.getData();n.each(function(e){var o=f(OO,function(o){return bx(n,e,o,t,i)});n.setItemLayout(e,o),n.getItemGraphicEl(e).setShape(points,o)})}},this)},renderSeriesfunction(t,e,i,n){var o=t.coordinateSystem,a=t.id,s=t.getData(),l=this.markerGroupMap,u=l.get(a)l.set(a,{groupnew Zw});this.group.add(u.group),u.__keep=!0;var h=Sx(o,t,e);e.setData(h),h.each(function(e){h.setItemLayout(e,f(OO,function(i){return bx(h,e,i,t,n)})),h.setItemVisual(e,{colors.getVisual(color)})}),h.diff(u.__data).add(function(t){var e=new nM({shape{pointsh.getItemLayout(t)}});h.setItemGraphicEl(t,e),u.group.add(e)}).update(function(t,i){var n=u.__data.getItemGraphicEl(i);bo(n,{shape{pointsh.getItemLayout(t)}},e,t),u.group.add(n),h.setItemGraphicEl(t,n)}).remove(function(t){var e=u.__data.getItemGraphicEl(t);u.group.remove(e)}).execute(),h.eachItemGraphicEl(function(t,i){var n=h.getItemModel(i),o=n.getModel(label),a=n.getModel(emphasis.label),s=h.getItemVisual(i,color);t.useStyle(r(n.getModel(itemStyle).getItemStyle(),{fillUt(s,.4),strokes})),t.hoverStyle=n.getModel(emphasis.itemStyle).getItemStyle(),co(t.style,t.hoverStyle,o,a,{labelFetchere,labelDataIndexi,defaultTexth.getName(i),isRectText!0,autoColors}),uo(t,{}),t.dataModel=e}),u.__data=h,u.group.silent=e.get(silent)t.get(silent)}}),Ls(function(t){t.markArea=t.markArea{}});YM.registerSubTypeDefaulter(timeline,function(){returnslider}),Ps({typetimelineChange,eventtimelineChanged,updateprepareAndUpdate},function(t,e){var i=e.getComponent(timeline);return i&&null!=t.currentIndex&&(i.setCurrentIndex(t.currentIndex),!i.get(loop,!0)&&i.isIndexMax()&&i.setPlayState(!1)),e.resetOption(timeline),r({currentIndexi.option.currentIndex},t)}),Ps({typetimelinePlayChange,eventtimelinePlayChanged,updateupdate},function(t,e){var i=e.getComponent(timeline);i&&null!=t.playState&&i.setPlayState(t.playState)});var EO=YM.extend({typetimeline,layoutModebox,defaultOption{zlevel0,z4,show!0,axisTypetime,realtime!0,left20%,topnull,right20%,bottom0,widthnull,height40,padding5,controlPositionleft,autoPlay!1,rewind!1,loop!0,playInterval2e3,currentIndex0,itemStyle{},label{color#000},data[]},initfunction(t,e,i){this._data,this._names,this.mergeDefaultAndTheme(t,i),this._initData()},mergeOptionfunction(t){EO.superApply(this,mergeOption,arguments),this._initData()},setCurrentIndexfunction(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loopt=(t%e+e)%e(t=e&&(t=e-1),t0&&(t=0)),this.option.currentIndex=t},getCurrentIndexfunction(){return this.option.currentIndex},isIndexMaxfunction(){return this.getCurrentIndex()=this._data.count()-1},setPlayStatefunction(t){this.option.autoPlay=!!t},getPlayStatefunction(){return!!this.option.autoPlay},_initDatafunction(){var t=this.option,e=t.data[],n=t.axisType,o=this._names=[];if(category===n){var a=[];d(e,function(t,e){var n,r=Li(t);w(t)(n=i(t)).value=en=e,a.push(n),_(r)null!=r&&!isNaN(r)(r=),o.push(r+)}),e=a}var r={categoryordinal,timetime}[n]number;(this._data=new eA([{namevalue,typer}],this)).initData(e,o)},getDatafunction(){return this._data},getCategoriesfunction(){if(category===this.get(axisType))return this._names.slice()}});h(EO.extend({typetimeline.slider,defaultOption{backgroundColorrgba(0,0,0,0),borderColor#ccc,borderWidth0,orienthorizontal,inverse!1,tooltip{triggeritem},symbolemptyCircle,symbolSize10,lineStyle{show!0,width2,color#304654},label{positionauto,show!0,intervalauto,rotate0,color#304654},itemStyle{color#304654,borderWidth1},checkpointStyle{symbolcircle,symbolSize13,color#c23531,borderWidth5,borderColorrgba(194,53,49, 0.5),animation!0,animationDuration300,animationEasingquinticInOut},controlStyle{show!0,showPlayBtn!0,showPrevBtn!0,showNextBtn!0,itemSize22,itemGap12,positionleft,playIconpathM31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z,stopIconpathM30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z,nextIconpathM18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z,prevIconpathM43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z,color#304654,borderColor#304654,borderWidth1},emphasis{label{show!0,color#c23531},itemStyle{color#c23531},controlStyle{color#c23531,borderColor#c23531,borderWidth2}},data[]}}),LI);var RO=EI.extend({typetimeline}),zO=function(t,e,i,n){HA.call(this,t,e,i),this.type=nvalue,this.model=null};zO.prototype={constructorzO,getLabelModelfunction(){return this.model.getModel(label)},isHorizontalfunction(){returnhorizontal===this.model.get(orient)}},u(zO,HA);var BO=m,VO=d,GO=Math.PI;RO.extend({typetimeline.slider,initfunction(t,e){this.api=e,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},renderfunction(t,e,i,n){if(this.model=t,this.api=i,this.ecModel=e,this.group.removeAll(),t.get(show,!0)){var o=this._layout(t,i),a=this._createGroup(mainGroup),r=this._createGroup(labelGroup),s=this._axis=this._createAxis(o,t);t.formatTooltip=function(t){return Qo(s.scale.getLabel(t))},VO([AxisLine,AxisTick,Control,CurrentPointer],function(e){this[_render+e](o,a,s,t)},this),this._renderAxisLabel(o,r,s,t),this._position(o,t)}this._doPlayStop()},removefunction(){this._clearTimer(),this.group.removeAll()},disposefunction(){this._clearTimer()},_layoutfunction(t,e){var i=t.get(label.position),n=t.get(orient),o=Ax(t,e);null==iauto===ii=horizontal===no.y+o.height2e.getHeight()2-+o.x+o.width2e.getWidth()2+-isNaN(i)&&(i={horizontal{top-,bottom+},vertical{left-,right+}}[n][i]);var a={horizontalcenter,verticali=0+===ileftright},r={horizontali=0+===itopbottom,verticalmiddle},s={horizontal0,verticalGO2},l=vertical===no.heighto.width,u=t.getModel(controlStyle),h=u.get(show,!0),c=hu.get(itemSize)0,d=hu.get(itemGap)0,f=c+d,p=t.get(label.rotate)0;p=pGO180;var g,m,v,y,x=u.get(position,!0),_=h&&u.get(showPlayBtn,!0),w=h&&u.get(showPrevBtn,!0),b=h&&u.get(showNextBtn,!0),S=0,M=l;returnleft===xbottom===x(_&&(g=[0,0],S+=f),w&&(m=[S,0],S+=f),b&&(v=[M-c,0],M-=f))(_&&(g=[M-c,0],M-=f),w&&(m=[0,0],S+=f),b&&(v=[M-c,0],M-=f)),y=[S,M],t.get(inverse)&&y.reverse(),{viewRecto,mainLengthl,orientn,rotations[n],labelRotationp,labelPosOpti,labelAlignt.get(label.align)a[n],labelBaselinet.get(label.verticalAlign)t.get(label.baseline)r[n],playPositiong,prevBtnPositionm,nextBtnPositionv,axisExtenty,controlSizec,controlGapd}},_positionfunction(t,e){function i(t){var e=t.position;t.origin=[c[0][0]-e[0],c[1][0]-e[1]]}function n(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function o(t,e,i,n,o){t[n]+=i[n][o]-e[n][o]}var a=this._mainGroup,r=this._labelGroup,s=t.viewRect;if(vertical===t.orient){var l=mt(),u=s.x,h=s.y+s.height;_t(l,l,[-u,-h]),wt(l,l,-GO2),_t(l,l,[u,h]),(s=s.clone()).applyTransform(l)}var c=n(s),d=n(a.getBoundingRect()),f=n(r.getBoundingRect()),p=a.position,g=r.position;g[0]=p[0]=c[0][0];var m=t.labelPosOpt;if(isNaN(m))o(p,d,c,1,v=+===m01),o(g,f,c,1,1-v);else{var v=m=001;o(p,d,c,1,v),g[1]=p[1]+m}a.attr(position,p),r.attr(position,g),a.rotation=r.rotation=t.rotation,i(a),i(r)},_createAxisfunction(t,e){var i=e.getData(),n=e.get(axisType),o=Vl(e,n);o.getTicks=function(){return i.mapArray([value],function(t){return t})};var a=i.getDataExtent(value);o.setExtent(a[0],a[1]),o.niceTicks();var r=new zO(value,o,t.axisExtent,n);return r.model=e,r},_createGroupfunction(t){var e=this[_+t]=new Zw;return this.group.add(e),e},_renderAxisLinefunction(t,e,i,n){var o=i.getExtent();n.get(lineStyle.show)&&e.add(new rM({shape{x1o[0],y10,x2o[1],y20},stylea({lineCapround},n.getModel(lineStyle).getLineStyle()),silent!0,z21}))},_renderAxisTickfunction(t,e,i,n){var o=n.getData(),a=i.scale.getTicks();VO(a,function(t){var a=i.dataToCoord(t),r=o.getItemModel(t),s=r.getModel(itemStyle),l=r.getModel(emphasis.itemStyle),u={position[a,0],onclickBO(this._changeTimeline,this,t)},h=Cx(r,s,e,u);uo(h,l.getItemStyle()),r.get(tooltip)(h.dataIndex=t,h.dataModel=n)h.dataIndex=h.dataModel=null},this)},_renderAxisLabelfunction(t,e,i,n){if(i.getLabelModel().get(show)){var o=n.getData(),a=i.getViewLabels();VO(a,function(n){var a=n.tickValue,r=o.getItemModel(a),s=r.getModel(label),l=r.getModel(emphasis.label),u=i.dataToCoord(n.tickValue),h=new qS({position[u,0],rotationt.labelRotation-t.rotation,onclickBO(this._changeTimeline,this,a),silent!1});fo(h.style,s,{textn.formattedLabel,textAlignt.labelAlign,textVerticalAlignt.labelBaseline}),e.add(h),uo(h,fo({},l))},this)}},_renderControlfunction(t,e,i,n){function o(t,i,o,h){if(t){var c=Dx(n,i,u,{positiont,origin[a2,0],rotationh-r0,rectHover!0,styles,onclicko});e.add(c),uo(c,l)}}var a=t.controlSize,r=t.rotation,s=n.getModel(controlStyle).getItemStyle(),l=n.getModel(emphasis.controlStyle).getItemStyle(),u=[0,-a2,a,a],h=n.getPlayState(),c=n.get(inverse,!0);o(t.nextBtnPosition,controlStyle.nextIcon,BO(this._changeTimeline,this,c-+)),o(t.prevBtnPosition,controlStyle.prevIcon,BO(this._changeTimeline,this,c+-)),o(t.playPosition,controlStyle.+(hstopIconplayIcon),BO(this._handlePlayClick,this,!h),!0)},_renderCurrentPointerfunction(t,e,i,n){var o=n.getData(),a=n.getCurrentIndex(),r=o.getItemModel(a).getModel(checkpointStyle),s=this,l={onCreatefunction(t){t.draggable=!0,t.drift=BO(s._handlePointerDrag,s),t.ondragend=BO(s._handlePointerDragend,s),Lx(t,a,i,n,!0)},onUpdatefunction(t){Lx(t,a,i,n)}};this._currentPointer=Cx(r,r,this._mainGroup,{},this._currentPointer,l)},_handlePlayClickfunction(t){this._clearTimer(),this.api.dispatchAction({typetimelinePlayChange,playStatet,fromthis.uid})},_handlePointerDragfunction(t,e,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},_handlePointerDragendfunction(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},_pointerChangeTimelinefunction(t,e){var i=this._toAxisCoord(t)[0],n=Bo(this._axis.getExtent().slice());in[1]&&(i=n[1]),in[0]&&(i=n[0]),this._currentPointer.position[0]=i,this._currentPointer.dirty();var o=this._findNearestTick(i),a=this.model;(eo!==a.getCurrentIndex()&&a.get(realtime))&&this._changeTimeline(o)},_doPlayStopfunction(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(BO(function(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get(rewind,!0)-11))},this),this.model.get(playInterval)))},_toAxisCoordfunction(t){return Io(t,this._mainGroup.getLocalTransform(),!0)},_findNearestTickfunction(t){var e,i=this.model.getData(),n=10,o=this._axis;return i.each([value],function(i,a){var r=o.dataToCoord(i),s=Math.abs(r-t);sn&&(n=s,e=a)}),e},_clearTimerfunction(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimelinefunction(t){var e=this.model.getCurrentIndex();+===tt=e+1-===t&&(t=e-1),this.api.dispatchAction({typetimelineChange,currentIndext,fromthis.uid})}}),Ls(function(t){var e=t&&t.timeline;y(e)(e=e[e][]),d(e,function(t){t&&Mx(t)})});var FO=Bs({typetoolbox,layoutMode{typebox,ignoreSize!0},optionUpdatedfunction(){FO.superApply(this,optionUpdated,arguments),d(this.option.feature,function(t,e){var i=xy(e);i&&n(t,i.defaultOption)})},defaultOption{show!0,z6,zlevel0,orienthorizontal,leftright,toptop,backgroundColortransparent,borderColor#ccc,borderRadius0,borderWidth0,padding5,itemSize15,itemGap8,showTitle!0,iconStyle{borderColor#666,colornone},emphasis{iconStyle{borderColor#3E98C5}}}});Vs({typetoolbox,renderfunction(t,e,i,n){function o(o,r){var s,c=h[o],d=h[r],f=new Lo(l[c],t,t.ecModel);if(c&&!d){if(kx(c))s={modelf,onclickf.option.onclick,featureNamec};else{var p=xy(c);if(!p)return;s=new p(f,e,i)}u[c]=s}else{if(!(s=u[d]))return;s.model=f,s.ecModel=e,s.api=i}c!df.get(show)&&!s.unusable(a(f,s,c),f.setIconStatus=function(t,e){var i=this.option,n=this.iconPaths;i.iconStatus=i.iconStatus{},i.iconStatus[t]=e,n[t]&&n[t].trigger(e)},s.render&&s.render(f,e,i,n))s.remove&&s.remove(e,i)s.dispose&&s.dispose(e,i)}function a(n,o,a){var l=n.getModel(iconStyle),u=n.getModel(emphasis.iconStyle),h=o.getIconso.getIcons()n.get(icon),c=n.get(title){};if(string==typeof h){var f=h,p=c;c={},(h={})[a]=f,c[a]=p}var g=n.iconPaths={};d(h,function(a,h){var d=Co(a,{},{x-s2,y-s2,widths,heights});d.setStyle(l.getItemStyle()),d.hoverStyle=u.getItemStyle(),uo(d),t.get(showTitle)&&(d.__title=c[h],d.on(mouseover,function(){var t=u.getItemStyle();d.setStyle({textc[h],textPositiont.textPositionbottom,textFillt.fillt.stroke#000,textAlignt.textAligncenter})}).on(mouseout,function(){d.setStyle({textFillnull})})),d.trigger(n.get(iconStatus.+h)normal),r.add(d),d.on(click,m(o.onclick,o,e,i,h)),g[h]=d})}var r=this.group;if(r.removeAll(),t.get(show)){var s=+t.get(itemSize),l=t.get(feature){},u=this._features(this._features={}),h=[];d(l,function(t,e){h.push(e)}),new Hs(this._featureNames[],h).add(o).update(o).remove(v(o,null)).execute(),this._featureNames=h,dv(r,t,i),r.add(fv(r.getBoundingRect(),t)),r.eachChild(function(t){var e=t.__title,n=t.hoverStyle;if(n&&e){var o=De(e,He(n)),a=t.position[0]+r.position[0],l=!1;t.position[1]+r.position[1]+s+o.heighti.getHeight()&&(n.textPosition=top,l=!0);var u=l-5-o.heights+8;a+o.width2i.getWidth()(n.textPosition=[100%,u],n.textAlign=right)a-o.width20&&(n.textPosition=[0,u],n.textAlign=left)}})}},updateViewfunction(t,e,i,n){d(this._features,function(t){t.updateView&&t.updateView(t.model,e,i,n)})},removefunction(t,e){d(this._features,function(i){i.remove&&i.remove(t,e)}),this.group.removeAll()},disposefunction(t,e){d(this._features,function(i){i.dispose&&i.dispose(t,e)})}});var WO=XI.toolbox.saveAsImage;Px.defaultOption={show!0,iconM4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0,titleWO.title,typepng,name,excludeComponents[toolbox],pixelRatio1,langWO.lang.slice()},Px.prototype.unusable=!z_.canvasSupported,Px.prototype.onclick=function(t,e){var i=this.model,n=i.get(name)t.get(title.0.text)echarts,o=document.createElement(a),a=i.get(type,!0)png;o.download=n+.+a,o.target=_blank;var r=e.getConnectedDataURL({typea,backgroundColori.get(backgroundColor,!0)t.get(backgroundColor)#fff,excludeComponentsi.get(excludeComponents),pixelRatioi.get(pixelRatio)});if(o.href=r,function!=typeof MouseEventz_.browser.iez_.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(r.split(,)[1]),l=s.length,u=new Uint8Array(l);l--;)u[l]=s.charCodeAt(l);var h=new Blob([u]);window.navigator.msSaveOrOpenBlob(h,n+.+a)}else{var c=i.get(lang),d='body style=margin0;img src='+r+' style=max-width100%; title='+(c&&c[0])+' body';window.open().document.write(d)}else{var f=new MouseEvent(click,{viewwindow,bubbles!0,cancelable!1});o.dispatchEvent(f)}},yy(saveAsImage,Px);var HO=XI.toolbox.magicType;Nx.defaultOption={show!0,type[],icon{lineM4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4,barM6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7,stackM8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z,tiledM2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z},titlei(HO.title),option{},seriesIndex{}};var ZO=Nx.prototype;ZO.getIcons=function(){var t=this.model,e=t.get(icon),i={};return d(t.get(type),function(t){e[t]&&(i[t]=e[t])}),i};var UO={linefunction(t,e,i,o){if(bar===t)return n({ide,typeline,datai.get(data),stacki.get(stack),markPointi.get(markPoint),markLinei.get(markLine)},o.get(option.line){},!0)},barfunction(t,e,i,o){if(line===t)return n({ide,typebar,datai.get(data),stacki.get(stack),markPointi.get(markPoint),markLinei.get(markLine)},o.get(option.bar){},!0)},stackfunction(t,e,i,o){if(line===tbar===t)return n({ide,stack__ec_magicType_stack__},o.get(option.stack){},!0)},tiledfunction(t,e,i,o){if(line===tbar===t)return n({ide,stack},o.get(option.tiled){},!0)}},XO=[[line,bar],[stack,tiled]];ZO.onclick=function(t,e,i){var n=this.model,o=n.get(seriesIndex.+i);if(UO[i]){var a={series[]};d(XO,function(t){l(t,i)=0&&d(t,function(t){n.setIconStatus(t,normal)})}),n.setIconStatus(i,emphasis),t.eachComponent({mainTypeseries,querynull==onull{seriesIndexo}},function(e){var o=e.subType,s=e.id,l=UO[i](o,s,e,n);l&&(r(l,e.option),a.series.push(l));var u=e.coordinateSystem;if(u&&cartesian2d===u.type&&(line===ibar===i)){var h=u.getAxesByScale(ordinal)[0];if(h){var c=h.dim+Axis,d=t.queryComponents({mainTypec,indexe.get(name+Index),ide.get(name+Id)})[0].componentIndex;a[c]=a[c][];for(var f=0;f=d;f++)a[c][d]=a[c][d]{};a[c][d].boundaryGap=bar===i}}}),e.dispatchAction({typechangeMagicType,currentTypei,newOptiona})}},Ps({typechangeMagicType,eventmagicTypeChanged,updateprepareAndUpdate},function(t,e){e.mergeOption(t.newOption)}),yy(magicType,Nx);var jO=XI.toolbox.dataView,YO=new Array(60).join(-),qO=t,KO=new RegExp([+qO+]+,g);Hx.defaultOption={show!0,readOnly!1,optionToContentnull,contentToOptionnull,iconM17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28,titlei(jO.title),langi(jO.lang),backgroundColor#fff,textColor#000,textareaColor#fff,textareaBorderColor#333,buttonColor#c23531,buttonTextColor#fff},Hx.prototype.onclick=function(t,e){function i(){n.removeChild(a),x._dom=null}var n=e.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var a=document.createElement(div);a.style.cssText=positionabsolute;left5px;top5px;bottom5px;right5px;,a.style.backgroundColor=o.get(backgroundColor)#fff;var r=document.createElement(h4),s=o.get(lang)[];r.innerHTML=s[0]o.get(title),r.style.cssText=margin 10px 20px;,r.style.color=o.get(textColor);var l=document.createElement(div),u=document.createElement(textarea);l.style.cssText=displayblock;width100%;overflowauto;;var h=o.get(optionToContent),c=o.get(contentToOption),d=zx(t);if(function==typeof h){var f=h(e.getOption());string==typeof fl.innerHTML=fM(f)&&l.appendChild(f)}else l.appendChild(u),u.readOnly=o.get(readOnly),u.style.cssText=width100%;height100%;font-familymonospace;font-size14px;line-height1.6rem;,u.style.color=o.get(textColor),u.style.borderColor=o.get(textareaBorderColor),u.style.backgroundColor=o.get(textareaColor),u.value=d.value;var p=d.meta,g=document.createElement(div);g.style.cssText=positionabsolute;bottom0;left0;right0;;var m=floatright;margin-right20px;bordernone;cursorpointer;padding2px 5px;font-size12px;border-radius3px,v=document.createElement(div),y=document.createElement(div);m+=;background-color+o.get(buttonColor),m+=;color+o.get(buttonTextColor);var x=this;ut(v,click,i),ut(y,click,function(){var t;try{t=function==typeof cc(l,e.getOption())Wx(u.value,p)}catch(t){throw i(),new Error(Data view format error +t)}t&&e.dispatchAction({typechangeDataView,newOptiont}),i()}),v.innerHTML=s[1],y.innerHTML=s[2],y.style.cssText=m,v.style.cssText=m,!o.get(readOnly)&&g.appendChild(y),g.appendChild(v),ut(u,keydown,function(t){if(9===(t.keyCodet.which)){var e=this.value,i=this.selectionStart,n=this.selectionEnd;this.value=e.substring(0,i)+qO+e.substring(n),this.selectionStart=this.selectionEnd=i+1,lw(t)}}),a.appendChild(r),a.appendChild(l),a.appendChild(g),l.style.height=n.clientHeight-80+px,n.appendChild(a),this._dom=a},Hx.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},Hx.prototype.dispose=function(t,e){this.remove(t,e)},yy(dataView,Hx),Ps({typechangeDataView,eventdataViewChanged,updateprepareAndUpdate},function(t,e){var i=[];d(t.newOption.series,function(t){var n=e.getSeriesByName(t.name)[0];if(n){var o=n.get(data);i.push({namet.name,dataZx(t.data,o)})}else i.push(a({typescatter},t))}),e.mergeOption(r({seriesi},t.newOption))});var $O=d,JO=0_ec_hist_store;BN.extend({typedataZoom.select}),VN.extend({typedataZoom.select});var QO=XI.toolbox.dataZoom,tE=d,eE=0_ec_0toolbox-dataZoom_;Kx.defaultOption={show!0,icon{zoomM0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1,backM22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26},titlei(QO.title)};var iE=Kx.prototype;iE.render=function(t,e,i,n){this.model=t,this.ecModel=e,this.api=i,Qx(t,e,this,n,i),Jx(t,e)},iE.onclick=function(t,e,i){nE[i].call(this)},iE.remove=function(t,e){this._brushController.unmount()},iE.dispose=function(t,e){this._brushController.dispose()};var nE={zoomfunction(){var t=!this._isZoomActive;this.api.dispatchAction({typetakeGlobalCursor,keydataZoomSelect,dataZoomSelectActivet})},backfunction(){this._dispatchZoomAction(Xx(this.ecModel))}};iE._onBrush=function(t,e){function i(t,e,i){var r=e.getAxis(t),s=r.model,l=n(t,s,a),u=l.findRepresentativeAxisProxy(s).getMinMaxSpan();null==u.minValueSpan&&null==u.maxValueSpan(i=EL(0,i.slice(),r.scale.getExtent(),0,u.minValueSpan,u.maxValueSpan)),l&&(o[l.id]={dataZoomIdl.id,startValuei[0],endValuei[1]})}function n(t,e,i){var n;return i.eachComponent({mainTypedataZoom,subTypeselect},function(i){i.getAxisModel(t,e.componentIndex)&&(n=i)}),n}if(e.isEnd&&t.length){var o={},a=this.ecModel;this._brushController.updateCovers([]),new iy($x(this.model.option),a,{include[grid]}).matchOutputRanges(t,a,function(t,e,n){if(cartesian2d===n.type){var o=t.brushType;rect===o(i(x,n,e[0]),i(y,n,e[1]))i({lineXx,lineYy}[o],n,e)}}),Ux(a,o),this._dispatchZoomAction(o)}},iE._dispatchZoomAction=function(t){var e=[];tE(t,function(t,n){e.push(i(t))}),e.length&&this.api.dispatchAction({typedataZoom,fromthis.uid,batche})},yy(dataZoom,Kx),Ls(function(t){function e(t,e){if(e){var o=t+Index,a=e[o];null==aall===ay(a)(a=!1===anone===a[][a]),i(t,function(e,i){if(null==aall===a-1!==l(a,i)){var r={typeselect,$fromToolbox!0,ideE+t+i};r[o]=i,n.push(r)}})}}function i(e,i){var n=t[e];y(n)(n=n[n][]),tE(n,i)}if(t){var n=t.dataZoom(t.dataZoom=[]);y(n)(t.dataZoom=n=[n]);var o=t.toolbox;if(o&&(y(o)&&(o=o[0]),o&&o.feature)){var a=o.feature.dataZoom;e(xAxis,a),e(yAxis,a)}}});var oE=XI.toolbox.restore;t_.defaultOption={show!0,iconM3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5,titleoE.title},t_.prototype.onclick=function(t,e,i){jx(t),e.dispatchAction({typerestore,fromthis.uid})},yy(restore,t_),Ps({typerestore,eventrestore,updateprepareAndUpdate},function(t,e){e.resetOption(recreate)});var aE,rE=urnschemas-microsoft-comvml,sE=undefined==typeof windownullwindow,lE=!1,uE=sE&&sE.document;if(uE&&!z_.canvasSupported)try{!uE.namespaces.zrvml&&uE.namespaces.add(zrvml,rE),aE=function(t){return uE.createElement(zrvml+t+' class=zrvml')}}catch(t){aE=function(t){return uE.createElement(+t+' xmlns='+rE+' class=zrvml')}}var hE=MS.CMD,cE=Math.round,dE=Math.sqrt,fE=Math.abs,pE=Math.cos,gE=Math.sin,mE=Math.max;if(!z_.canvasSupported){var vE=21600,yE=vE2,xE=function(t){t.style.cssText=positionabsolute;left0;top0;width1px;height1px;,t.coordsize=vE+,+vE,t.coordorigin=0,0},_E=function(t){return String(t).replace(&g,&amp;).replace(g,&quot;)},wE=function(t,e,i){returnrgb(+[t,e,i].join(,)+)},bE=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},SE=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},ME=function(t,e,i){return 1e5(parseFloat(t)0)+1e3(parseFloat(e)0)+i},IE=function(t,e){returnstring==typeof tt.lastIndexOf(%)=0parseFloat(t)100eparseFloat(t)t},TE=function(t,e,i){var n=zt(e);i=+i,isNaN(i)&&(i=1),n&&(t.color=wE(n[0],n[1],n[2]),t.opacity=in[3])},AE=function(t){var e=zt(t);return[wE(e[0],e[1],e[2]),e[3]]},DE=function(t,e,i){var n=e.fill;if(null!=n)if(n instanceof cM){var o,a=0,r=[0,0],s=0,l=1,u=i.getBoundingRect(),h=u.width,c=u.height;if(linear===n.type){o=gradient;var d=i.transform,f=[n.xh,n.yc],p=[n.x2h,n.y2c];d&&(Q(f,f,d),Q(p,p,d));var g=p[0]-f[0],m=p[1]-f[1];(a=180Math.atan2(g,m)Math.PI)0&&(a+=360),a1e-6&&(a=0)}else{o=gradientradial;var f=[n.xh,n.yc],d=i.transform,v=i.scale,y=h,x=c;r=[(f[0]-u.x)y,(f[1]-u.y)x],d&&Q(f,f,d),y=v[0]vE,x=v[1]vE;var _=mE(y,x);s=0_,l=2n.r_-s}var w=n.colorStops.slice();w.sort(function(t,e){return t.offset-e.offset});for(var b=w.length,S=[],M=[],I=0;Ib;I++){var T=w[I],A=AE(T.color);M.push(T.offsetl+s+ +A[0]),0!==I&&I!==b-1S.push(A)}if(b=2){var D=S[0][0],C=S[1][0],L=S[0][1]e.opacity,k=S[1][1]e.opacity;t.type=o,t.method=none,t.focus=100%,t.angle=a,t.color=D,t.color2=C,t.colors=M.join(,),t.opacity=k,t.opacity2=L}radial===o&&(t.focusposition=r.join(,))}else TE(t,n,e.opacity)},CE=function(t,e){null!=e.lineDash&&(t.dashstyle=e.lineDash.join( )),null==e.strokee.stroke instanceof cMTE(t,e.stroke,e.opacity)},LE=function(t,e,i,n){var o=fill==e,a=t.getElementsByTagName(e)[0];null!=i[e]&&none!==i[e]&&(o!o&&i.lineWidth)(t[ofilledstroked]=true,i[e]instanceof cM&&SE(t,a),a(a=e_(e)),oDE(a,i,n)CE(a,i),bE(t,a))(t[ofilledstroked]=false,SE(t,a))},kE=[[],[],[]],PE=function(t,e){var i,n,o,a,r,s,l=hE.M,u=hE.C,h=hE.L,c=hE.A,d=hE.Q,f=[],p=t.data,g=t.len();for(a=0;ag;){switch(o=p[a++],n=,i=0,o){case ln= m ,i=1,r=p[a++],s=p[a++],kE[0][0]=r,kE[0][1]=s;break;case hn= l ,i=1,r=p[a++],s=p[a++],kE[0][0]=r,kE[0][1]=s;break;case dcase un= c ,i=3;var m,v,y=p[a++],x=p[a++],_=p[a++],w=p[a++];o===d(m=_,v=w,_=(_+2y)3,w=(w+2x)3,y=(r+2y)3,x=(s+2x)3)(m=p[a++],v=p[a++]),kE[0][0]=y,kE[0][1]=x,kE[1][0]=_,kE[1][1]=w,kE[2][0]=m,kE[2][1]=v,r=m,s=v;break;case cvar b=0,S=0,M=1,I=1,T=0;e&&(b=e[4],S=e[5],M=dE(e[0]e[0]+e[1]e[1]),I=dE(e[2]e[2]+e[3]e[3]),T=Math.atan2(-e[1]I,e[0]M));var A=p[a++],D=p[a++],C=p[a++],L=p[a++],k=p[a++]+T,P=p[a++]+k+T;a++;var N=p[a++],O=A+pE(k)C,E=D+gE(k)L,y=A+pE(P)C,x=D+gE(P)L,R=N wa  at ;Math.abs(O-y)1e-4&&(Math.abs(P-k).01N&&(O+=.0125)Math.abs(E-D)1e-4N&&OA!N&&OAx-=.0125x+=.0125N&&ED!N&&EDy+=.0125y-=.0125),f.push(R,cE(((A-C)M+b)vE-yE),,,cE(((D-L)I+S)vE-yE),,,cE(((A+C)M+b)vE-yE),,,cE(((D+L)I+S)vE-yE),,,cE((OM+b)vE-yE),,,cE((EI+S)vE-yE),,,cE((yM+b)vE-yE),,,cE((xI+S)vE-yE)),r=y,s=x;break;case hE.Rvar z=kE[0],B=kE[1];z[0]=p[a++],z[1]=p[a++],B[0]=z[0]+p[a++],B[1]=z[1]+p[a++],e&&(Q(z,z,e),Q(B,B,e)),z[0]=cE(z[0]vE-yE),B[0]=cE(B[0]vE-yE),z[1]=cE(z[1]vE-yE),B[1]=cE(B[1]vE-yE),f.push( m ,z[0],,,z[1], l ,B[0],,,z[1], l ,B[0],,,B[1], l ,z[0],,,B[1]);break;case hE.Zf.push( x )}if(i0){f.push(n);for(var V=0;Vi;V++){var G=kE[V];e&&Q(G,G,e),f.push(cE(G[0]vE-yE),,,cE(G[1]vE-yE),Vi-1,)}}}return f.join()};kn.prototype.brushVML=function(t){var e=this.style,i=this._vmlEl;i(i=e_(shape),xE(i),this._vmlEl=i),LE(i,fill,e,this),LE(i,stroke,e,this);var n=this.transform,o=null!=n,a=i.getElementsByTagName(stroke)[0];if(a){var r=e.lineWidth;if(o&&!e.strokeNoScale){var s=n[0]n[3]-n[1]n[2];r=dE(fE(s))}a.weight=r+px}var l=this.path(this.path=new MS);this.__dirtyPath&&(l.beginPath(),this.buildPath(l,this.shape),l.toStatic(),this.__dirtyPath=!1),i.path=PE(l,this.transform),i.style.zIndex=ME(this.zlevel,this.z,this.z2),bE(t,i),null!=e.textthis.drawRectText(t,this.getBoundingRect())this.removeRectText(t)},kn.prototype.onRemove=function(t){SE(t,this._vmlEl),this.removeRectText(t)},kn.prototype.onAdd=function(t){bE(t,this._vmlEl),this.appendRectText(t)};var NE=function(t){returnobject==typeof t&&t.tagName&&IMG===t.tagName.toUpperCase()};hi.prototype.brushVML=function(t){var e,i,n=this.style,o=n.image;if(NE(o)){var a=o.src;if(a===this._imageSrc)e=this._imageWidth,i=this._imageHeight;else{var r=o.runtimeStyle,s=r.width,l=r.height;r.width=auto,r.height=auto,e=o.width,i=o.height,r.width=s,r.height=l,this._imageSrc=a,this._imageWidth=e,this._imageHeight=i}o=a}else o===this._imageSrc&&(e=this._imageWidth,i=this._imageHeight);if(o){var u=n.x0,h=n.y0,c=n.width,d=n.height,f=n.sWidth,p=n.sHeight,g=n.sx0,m=n.sy0,v=f&&p,y=this._vmlEl;y(y=uE.createElement(div),xE(y),this._vmlEl=y);var x,_=y.style,w=!1,b=1,S=1;if(this.transform&&(x=this.transform,b=dE(x[0]x[0]+x[1]x[1]),S=dE(x[2]x[2]+x[3]x[3]),w=x[1]x[2]),w){var M=[u,h],I=[u+c,h],T=[u,h+d],A=[u+c,h+d];Q(M,M,x),Q(I,I,x),Q(T,T,x),Q(A,A,x);var D=mE(M[0],I[0],T[0],A[0]),C=mE(M[1],I[1],T[1],A[1]),L=[];L.push(M11=,x[0]b,,,M12=,x[2]S,,,M21=,x[1]b,,,M22=,x[3]S,,,Dx=,cE(ub+x[4]),,,Dy=,cE(hS+x[5])),_.padding=0 +cE(D)+px +cE(C)+px 0,_.filter=progidDXImageTransform.Microsoft.Matrix(+L.join()+, SizingMethod=clip)}else x&&(u=ub+x[4],h=hS+x[5]),_.filter=,_.left=cE(u)+px,_.top=cE(h)+px;var k=this._imageEl,P=this._cropEl;k(k=uE.createElement(div),this._imageEl=k);var N=k.style;if(v){if(e&&i)N.width=cE(becf)+px,N.height=cE(Sidp)+px;else{var O=new Image,E=this;O.onload=function(){O.onload=null,e=O.width,i=O.height,N.width=cE(becf)+px,N.height=cE(Sidp)+px,E._imageWidth=e,E._imageHeight=i,E._imageSrc=o},O.src=o}P((P=uE.createElement(div)).style.overflow=hidden,this._cropEl=P);var R=P.style;R.width=cE((c+gcf)b),R.height=cE((d+mdp)S),R.filter=progidDXImageTransform.Microsoft.Matrix(Dx=+-gcfb+,Dy=+-mdpS+),P.parentNodey.appendChild(P),k.parentNode!=P&&P.appendChild(k)}else N.width=cE(bc)+px,N.height=cE(Sd)+px,y.appendChild(k),P&&P.parentNode&&(y.removeChild(P),this._cropEl=null);var z=,B=n.opacity;B1&&(z+=.Alpha(opacity=+cE(100B)+) ),z+=progidDXImageTransform.Microsoft.AlphaImageLoader(src=+o+, SizingMethod=scale),N.filter=z,y.style.zIndex=ME(this.zlevel,this.z,this.z2),bE(t,y),null!=n.text&&this.drawRectText(t,this.getBoundingRect())}},hi.prototype.onRemove=function(t){SE(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},hi.prototype.onAdd=function(t){bE(t,this._vmlEl),this.appendRectText(t)};var OE,EE={},RE=0,zE=document.createElement(div),BE=function(t){var e=EE[t];if(!e){RE100&&(RE=0,EE={});var i,n=zE.style;try{n.font=t,i=n.fontFamily.split(,)[0]}catch(t){}e={stylen.fontStylenormal,variantn.fontVariantnormal,weightn.fontWeightnormal,size0parseFloat(n.fontSize12),familyiMicrosoft YaHei},EE[t]=e,RE++}return e};!function(t,e){hb[t]=e}(measureText,function(t,e){var i=uE;OE((OE=i.createElement(div)).style.cssText=positionabsolute;top-20000px;left0;padding0;margin0;bordernone;white-spacepre;,uE.body.appendChild(OE));try{OE.style.font=e}catch(t){}return OE.innerHTML=,OE.appendChild(i.createTextNode(t)),{widthOE.offsetWidth}});for(var VE=new ue,GE=[gb,ui,hi,kn,qS],FE=0;FEGE.length;FE++){var WE=GE[FE].prototype;WE.drawRectText=function(t,e,i,n){var o=this.style;this.__dirty&&Ue(o);var a=o.text;if(null!=a&&(a+=),a){if(o.rich){var r=Fe(a,o);a=[];for(var s=0;sr.lines.length;s++){for(var l=r.lines[s].tokens,u=[],h=0;hl.length;h++)u.push(l[h].text);a.push(u.join())}a=a.join(n)}var c,d,f=o.textAlign,p=o.textVerticalAlign,g=BE(o.font),m=g.style+ +g.variant+ +g.weight+ +g.size+'px '+g.family+'';i=iDe(a,m,f,p);var v=this.transform;if(v&&!n&&(VE.copy(e),VE.applyTransform(v),e=VE),n)c=e.x,d=e.y;else{var y=o.textPosition,x=o.textDistance;if(y instanceof Array)c=e.x+IE(y[0],e.width),d=e.y+IE(y[1],e.height),f=fleft;else{var _=Ne(y,e,x);c=_.x,d=_.y,f=f_.textAlign,p=p_.textVerticalAlign}}c=ke(c,i.width,f),d=Pe(d,i.height,p),d+=i.height2;var w,b,S,M=e_,I=this._textVmlEl;Ib=(w=(S=I.firstChild).nextSibling).nextSibling(I=M(line),w=M(path),b=M(textpath),S=M(skew),b.style[v-text-align]=left,xE(I),w.textpathok=!0,b.on=!0,I.from=0 0,I.to=1000 0.05,bE(I,S),bE(I,w),bE(I,b),this._textVmlEl=I);var T=[c,d],A=I.style;v&&n(Q(T,T,v),S.on=!0,S.matrix=v[0].toFixed(3)+,+v[2].toFixed(3)+,+v[1].toFixed(3)+,+v[3].toFixed(3)+,0,0,S.offset=(cE(T[0])0)+,+(cE(T[1])0),S.origin=0 0,A.left=0px,A.top=0px)(S.on=!1,A.left=cE(c)+px,A.top=cE(d)+px),b.string=_E(a);try{b.style.font=m}catch(t){}LE(I,fill,{fillo.textFill,opacityo.opacity},this),LE(I,stroke,{strokeo.textStroke,opacityo.opacity,lineDasho.lineDash},this),I.style.zIndex=ME(this.zlevel,this.z,this.z2),bE(t,I)}},WE.removeRectText=function(t){SE(t,this._textVmlEl),this._textVmlEl=null},WE.appendRectText=function(t){bE(t,this._textVmlEl)}}qS.prototype.brushVML=function(t){var e=this.style;null!=e.textthis.drawRectText(t,{xe.x0,ye.y0,width0,height0},this.getBoundingRect(),!0)this.removeRectText(t)},qS.prototype.onRemove=function(t){this.removeRectText(t)},qS.prototype.onAdd=function(t){this.appendRectText(t)}}o_.prototype={constructoro_,getTypefunction(){returnvml},getViewportRootfunction(){return this._vmlViewport},getViewportRootOffsetfunction(){var t=this.getViewportRoot();if(t)return{offsetLeftt.offsetLeft0,offsetTopt.offsetTop0}},refreshfunction(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintListfunction(t){for(var e=this._vmlRoot,i=0;it.length;i++){var n=t[i];n.invisiblen.ignore(n.__alreadyNotVisiblen.onRemove(e),n.__alreadyNotVisible=!0)(n.__alreadyNotVisible&&n.onAdd(e),n.__alreadyNotVisible=!1,n.__dirty&&(n.beforeBrush&&n.beforeBrush(),(n.brushVMLn.brush).call(n,e),n.afterBrush&&n.afterBrush())),n.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resizefunction(t,e){var t=null==tthis._getWidth()t,e=null==ethis._getHeight()e;if(this._width!=tthis._height!=e){this._width=t,this._height=e;var i=this._vmlViewport.style;i.width=t+px,i.height=e+px}},disposefunction(){this.root.innerHTML=,this._vmlRoot=this._vmlViewport=this.storage=null},getWidthfunction(){return this._width},getHeightfunction(){return this._height},clearfunction(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidthfunction(){var t=this.root,e=t.currentStyle;return(t.clientWidthn_(e.width))-n_(e.paddingLeft)-n_(e.paddingRight)0},_getHeightfunction(){var t=this.root,e=t.currentStyle;return(t.clientHeightn_(e.height))-n_(e.paddingTop)-n_(e.paddingBottom)0}},d([getLayer,insertLayer,eachLayer,eachBuiltinLayer,eachOtherLayer,getLayers,modLayer,delLayer,clearLayer,toDataURL,pathToImage],function(t){o_.prototype[t]=a_(t)}),Ti(vml,o_);var HE=httpwww.w3.org2000svg,ZE=MS.CMD,UE=Array.prototype.join,XE=none,jE=Math.round,YE=Math.sin,qE=Math.cos,KE=Math.PI,$E=2Math.PI,JE=180KE,QE=1e-4,tR={};tR.brush=function(t){var e=t.style,i=t.__svgEl;i(i=r_(path),t.__svgEl=i),t.patht.createPathProxy();var n=t.path;if(t.__dirtyPath){n.beginPath(),t.buildPath(n,t.shape),t.__dirtyPath=!1;var o=g_(n);o.indexOf(NaN)0&&d_(i,d,o)}p_(i,e,!1,t),c_(i,t.transform),null!=e.text&&oR(t,t.getBoundingRect())};var eR={};eR.brush=function(t){var e=t.style,i=e.image;if(i instanceof HTMLImageElement&&(i=i.src),i){var n=e.x0,o=e.y0,a=e.width,r=e.height,s=t.__svgEl;s(s=r_(image),t.__svgEl=s),i!==t.__imageSrc&&(f_(s,href,i),t.__imageSrc=i),d_(s,width,a),d_(s,height,r),d_(s,x,n),d_(s,y,o),c_(s,t.transform),null!=e.text&&oR(t,t.getBoundingRect())}};var iR={},nR=new ue,oR=function(t,e,i){var n=t.style;t.__dirty&&Ue(n);var o=n.text;if(null!=o){o+=;var a=t.__textSvgEl;a(a=r_(text),t.__textSvgEl=a);var r,s,l=n.textPosition,u=n.textDistance,h=n.textAlignleft;number==typeof n.fontSize&&(n.fontSize+=px);var c=n.font[n.fontStyle,n.fontWeight,n.fontSize,n.fontFamily].join( )ub,d=m_(n.textVerticalAlign),f=(i=De(o,c,h,d)).lineHeight;if(l instanceof Array)r=e.x+l[0],s=e.y+l[1];else{var p=Ne(l,e,u);r=p.x,s=p.y,d=m_(p.textVerticalAlign),h=p.textAlign}d_(a,alignment-baseline,d),c&&(a.style.font=c);var g=n.textPadding;if(d_(a,x,r),d_(a,y,s),p_(a,n,!0,t),t instanceof qSt.style.transformText)c_(a,t.transform);else{if(t.transform)nR.copy(e),nR.applyTransform(t.transform),e=nR;else{var m=t.transformCoordToGlobal(e.x,e.y);e.x=m[0],e.y=m[1],t.transform=vt(mt())}var v=n.textOrigin;center===v(r=i.width2+r,s=i.height2+s)v&&(r=v[0]+r,s=v[1]+s);var y=-n.textRotation0,x=mt();wt(x,x,y),_t(x,x,m=[t.transform[4],t.transform[5]]),c_(a,x)}var _=o.split(n),w=_.length,b=h;left===b(b=start,g&&(r+=g[3]))right===b(b=end,g&&(r-=g[1]))center===b&&(b=middle,g&&(r+=(g[3]-g[1])2));var S=0;if(after-edge===d(S=-i.height+f,g&&(S-=g[2]))middle===d(S=(-i.height+f)2,g&&(s+=(g[0]-g[2])2))g&&(S+=g[0]),t.__text!==ot.__textFont!==c){var M=t.__tspanList[];t.__tspanList=M;for(T=0;Tw;T++)(A=M[T])A.innerHTML=(A=M[T]=r_(tspan),a.appendChild(A),d_(A,alignment-baseline,d),d_(A,text-anchor,b)),d_(A,x,r),d_(A,y,s+Tf+S),A.appendChild(document.createTextNode(_[T]));for(;TM.length;T++)a.removeChild(M[T]);M.length=w,t.__text=o,t.__textFont=c}else if(t.__tspanList.length)for(var I=t.__tspanList.length,T=0;TI;++T){var A=t.__tspanList[T];A&&(d_(A,x,r),d_(A,y,s+Tf+S))}}};iR.drawRectText=oR,iR.brush=function(t){var e=t.style;null!=e.text&&(e.textPosition=[0,0],oR(t,{xe.x0,ye.y0,width0,height0},t.getBoundingRect()))},v_.prototype={difffunction(t,e,i){i(i=function(t,e){return t===e}),this.equals=i;var n=this;t=t.slice();var o=(e=e.slice()).length,a=t.length,r=1,s=o+a,l=[{newPos-1,components[]}],u=this.extractCommon(l[0],e,t,0);if(l[0].newPos+1=o&&u+1=a){for(var h=[],c=0;ce.length;c++)h.push(c);return[{indicesh,counte.length}]}for(;r=s;){var d=function(){for(var i=-1r;i=r;i+=2){var s,u=l[i-1],h=l[i+1],c=(hh.newPos0)-i;u&&(l[i-1]=void 0);var d=u&&u.newPos+1o,f=h&&0=c&&ca;if(df){if(!df&&u.newPosh.newPos(s=x_(h),n.pushComponent(s.components,void 0,!0))((s=u).newPos++,n.pushComponent(s.components,!0,void 0)),c=n.extractCommon(s,e,t,i),s.newPos+1=o&&c+1=a)return y_(0,s.components);l[i]=s}else l[i]=void 0}r++}();if(d)return d}},pushComponentfunction(t,e,i){var n=t[t.length-1];n&&n.added===e&&n.removed===it[t.length-1]={countn.count+1,addede,removedi}t.push({count1,addede,removedi})},extractCommonfunction(t,e,i,n){for(var o=e.length,a=i.length,r=t.newPos,s=r-n,l=0;r+1o&&s+1a&&this.equals(e[r+1],i[s+1]);)r++,s++,l++;return l&&t.components.push({countl}),t.newPos=r,s},tokenizefunction(t){return t.slice()},joinfunction(t){return t.slice()}};var aR=new v_,rR=function(t,e,i){return aR.diff(t,e,i)};__.prototype.createElement=r_,__.prototype.getDefs=function(t){var e=this._svgRoot,i=this._svgRoot.getElementsByTagName(defs);return 0===i.lengtht((i=e.insertBefore(this.createElement(defs),e.firstChild)).contains(i.contains=function(t){var e=i.children;if(!e)return!1;for(var n=e.length-1;n=0;--n)if(e[n]===t)return!0;return!1}),i)nulli[0]},__.prototype.update=function(t,e){if(t){var i=this.getDefs(!1);if(t[this._domName]&&i.contains(t[this._domName]))function==typeof e&&e(t);else{var n=this.add(t);n&&(t[this._domName]=n)}}},__.prototype.addDom=function(t){this.getDefs(!0).appendChild(t)},__.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},__.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return d(this._tagNames,function(i){var n=t.getElementsByTagName(i);e=e.concat([].slice.call(n))}),e},__.prototype.markAllUnused=function(){var t=this;d(this.getDoms(),function(e){e[t._markLabel]=0})},__.prototype.markUsed=function(t){t&&(t[this._markLabel]=1)},__.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this;d(this.getDoms(),function(i){1!==i[e._markLabel]&&t.removeChild(i)})}},__.prototype.getSvgProxy=function(t){return t instanceof kntRt instanceof hieRt instanceof qSiRtR},__.prototype.getTextSvgElement=function(t){return t.__textSvgEl},__.prototype.getSvgElement=function(t){return t.__svgEl},u(w_,__),w_.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var i=this;d([fill,stroke],function(n){if(e.style[n]&&(linear===e.style[n].typeradial===e.style[n].type)){var o,a=e.style[n],r=i.getDefs(!0);a._dom(o=a._dom,r.contains(a._dom)i.addDom(o))o=i.add(a),i.markUsed(e);var s=o.getAttribute(id);t.setAttribute(n,url(#+s+))}})}},w_.prototype.add=function(t){var e;if(linear===t.type)e=this.createElement(linearGradient);else{if(radial!==t.type)return Bw(Illegal gradient type.),null;e=this.createElement(radialGradient)}return t.id=t.idthis.nextId++,e.setAttribute(id,zr+this._zrId+-gradient-+t.id),this.updateDom(t,e),this.addDom(e),e},w_.prototype.update=function(t){var e=this;__.prototype.update.call(this,t,function(){var i=t.type,n=t._dom.tagName;linear===i&&linearGradient===nradial===i&&radialGradient===ne.updateDom(t,t._dom)(e.removeDom(t),e.add(t))})},w_.prototype.updateDom=function(t,e){if(linear===t.type)e.setAttribute(x1,t.x),e.setAttribute(y1,t.y),e.setAttribute(x2,t.x2),e.setAttribute(y2,t.y2);else{if(radial!==t.type)return void Bw(Illegal gradient type.);e.setAttribute(cx,t.x),e.setAttribute(cy,t.y),e.setAttribute(r,t.r)}t.globale.setAttribute(gradientUnits,userSpaceOnUse)e.setAttribute(gradientUnits,objectBoundingBox),e.innerHTML=;for(var i=t.colorStops,n=0,o=i.length;no;++n){var a=this.createElement(stop);a.setAttribute(offset,100i[n].offset+%),a.setAttribute(stop-color,i[n].color),e.appendChild(a)}t._dom=e},w_.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&__.prototype.markUsed.call(this,e._dom),(e=t.style.stroke)&&e._dom&&__.prototype.markUsed.call(this,e._dom)}},u(b_,__),b_.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var i=this.getTextSvgElement(t);i&&this.updateDom(i,t.__clipPaths,!0),this.markUsed(t)},b_.prototype.updateDom=function(t,e,i){if(e&&e.length0){var n,o,a=this.getDefs(!0),r=e[0],s=i_textDom_dom;r[s](o=r[s].getAttribute(id),n=r[s],a.contains(n)a.appendChild(n))(o=zr+this._zrId+-clip-+this.nextId,++this.nextId,(n=this.createElement(clipPath)).setAttribute(id,o),a.appendChild(n),r[s]=n);var l=this.getSvgProxy(r);if(r.transform&&r.parent.invTransform&&!i){var u=Array.prototype.slice.call(r.transform);xt(r.transform,r.parent.invTransform,r.transform),l.brush(r),r.transform=u}else l.brush(r);var h=this.getSvgElement(r);n.innerHTML=,n.appendChild(h.cloneNode()),t.setAttribute(clip-path,url(#+o+)),e.length1&&this.updateDom(n,e.slice(1),i)}else t&&t.setAttribute(clip-path,none)},b_.prototype.markUsed=function(t){var e=this;t.__clipPaths&&t.__clipPaths.length0&&d(t.__clipPaths,function(t){t._dom&&__.prototype.markUsed.call(e,t._dom),t._textDom&&__.prototype.markUsed.call(e,t._textDom)})},u(S_,__),S_.prototype.addWithoutUpdate=function(t,e){if(e&&M_(e.style)){var i,n=e.style;n._shadowDom(i=n._shadowDom,this.getDefs(!0).contains(n._shadowDom)this.addDom(i))i=this.add(e),this.markUsed(e);var o=i.getAttribute(id);t.style.filter=url(#+o+)}},S_.prototype.add=function(t){var e=this.createElement(filter),i=t.style;return i._shadowDomId=i._shadowDomIdthis.nextId++,e.setAttribute(id,zr+this._zrId+-shadow-+i._shadowDomId),this.updateDom(t,e),this.addDom(e),e},S_.prototype.update=function(t,e){var i=e.style;if(M_(i)){var n=this;__.prototype.update.call(this,e,function(t){n.updateDom(e,t._shadowDom)})}else this.remove(t,i)},S_.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(e),t.style.filter=)},S_.prototype.updateDom=function(t,e){var i=e.getElementsByTagName(feDropShadow);i=0===i.lengththis.createElement(feDropShadow)i[0];var n,o,a,r,s=t.style,l=t.scalet.scale[0]11,u=t.scalet.scale[1]11;if(s.shadowBlurs.shadowOffsetXs.shadowOffsetY)n=s.shadowOffsetX0,o=s.shadowOffsetY0,a=s.shadowBlur,r=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(e,s);n=s.textShadowOffsetX0,o=s.textShadowOffsetY0,a=s.textShadowBlur,r=s.textShadowColor}i.setAttribute(dx,nl),i.setAttribute(dy,ou),i.setAttribute(flood-color,r);var h=a2l+ +a2u;i.setAttribute(stdDeviation,h),e.setAttribute(x,-100%),e.setAttribute(y,-100%),e.setAttribute(width,Math.ceil(a2200)+%),e.setAttribute(height,Math.ceil(a2200)+%),e.appendChild(i),s._shadowDom=e},S_.prototype.markUsed=function(t){var e=t.style;e&&e._shadowDom&&__.prototype.markUsed.call(this,e._shadowDom)};var sR=function(t,e,i,n){this.root=t,this.storage=e,this._opts=i=a({},i{});var o=r_(svg);o.setAttribute(xmlns,httpwww.w3.org2000svg),o.setAttribute(version,1.1),o.setAttribute(baseProfile,full),o.style.cssText=user-selectnone;positionabsolute;left0;top0;,this.gradientManager=new w_(n,o),this.clipPathManager=new b_(n,o),this.shadowManager=new S_(n,o);var r=document.createElement(div);r.style.cssText=overflowhidden;positionrelative,this._svgRoot=o,this._viewport=r,t.appendChild(r),r.appendChild(o),this.resize(i.width,i.height),this._visibleList=[]};sR.prototype={constructorsR,getTypefunction(){returnsvg},getViewportRootfunction(){return this._viewport},getViewportRootOffsetfunction(){var t=this.getViewportRoot();if(t)return{offsetLeftt.offsetLeft0,offsetTopt.offsetTop0}},refreshfunction(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColorfunction(t){this._viewport.style.background=t},_paintListfunction(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,i=this._svgRoot,n=this._visibleList,o=t.length,a=[];for(e=0;eo;e++){var r=T_(f=t[e]),s=P_(f)k_(f);f.invisible(f.__dirty&&(r&&r.brush(f),this.clipPathManager.update(f),f.style&&(this.gradientManager.update(f.style.fill),this.gradientManager.update(f.style.stroke),this.shadowManager.update(s,f)),f.__dirty=!1),a.push(f))}var l,u=rR(n,a);for(e=0;eu.length;e++)if((c=u[e]).removed)for(d=0;dc.count;d++){var s=P_(f=n[c.indices[d]]),h=k_(f);L_(i,s),L_(i,h)}for(e=0;eu.length;e++){var c=u[e];if(c.added)for(d=0;dc.count;d++){var s=P_(f=a[c.indices[d]]),h=k_(f);lD_(i,s,l)C_(i,s),sD_(i,h,s)lD_(i,h,l)C_(i,h),D_(i,h,s),l=hsl,this.gradientManager.addWithoutUpdate(s,f),this.shadowManager.addWithoutUpdate(l,f),this.clipPathManager.markUsed(f)}else if(!c.removed)for(var d=0;dc.count;d++){var f=a[c.indices[d]];l=s=k_(f)P_(f)l,this.gradientManager.markUsed(f),this.gradientManager.addWithoutUpdate(s,f),this.shadowManager.markUsed(f),this.shadowManager.addWithoutUpdate(s,f),this.clipPathManager.markUsed(f)}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefsfunction(t){var e=this._svgRoot,i=this._svgRoot.getElementsByTagName(defs);return 0===i.lengtht((i=e.insertBefore(r_(defs),e.firstChild)).contains(i.contains=function(t){var e=i.children;if(!e)return!1;for(var n=e.length-1;n=0;--n)if(e[n]===t)return!0;return!1}),i)nulli[0]},resizefunction(t,e){var i=this._viewport;i.style.display=none;var n=this._opts;if(null!=t&&(n.width=t),null!=e&&(n.height=e),t=this._getSize(0),e=this._getSize(1),i.style.display=,this._width!==tthis._height!==e){this._width=t,this._height=e;var o=i.style;o.width=t+px,o.height=e+px;var a=this._svgRoot;a.setAttribute(width,t),a.setAttribute(height,e)}},getWidthfunction(){return this._width},getHeightfunction(){return this._height},_getSizefunction(t){var e=this._opts,i=[width,height][t],n=[clientWidth,clientHeight][t],o=[paddingLeft,paddingTop][t],a=[paddingRight,paddingBottom][t];if(null!=e[i]&&auto!==e[i])return parseFloat(e[i]);var r=this.root,s=document.defaultView.getComputedStyle(r);return(r[n]I_(s[i])I_(r.style[i]))-(I_(s[o])0)-(I_(s[a])0)0},disposefunction(){this.root.innerHTML=,this._svgRoot=this._viewport=this.storage=null},clearfunction(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrlfunction(){return this.refresh(),dataimagesvg+xml;charset=UTF-8,+this._svgRoot.outerHTML}},d([getLayer,insertLayer,eachLayer,eachBuiltinLayer,eachOtherLayer,getLayers,modLayer,delLayer,clearLayer,toDataURL,pathToImage],function(t){sR.prototype[t]=N_(t)}),Ti(svg,sR),t.version=4.2.0,t.dependencies=wT,t.PRIORITY=IT,t.init=function(t,e,i){var n=Ds(t);if(n)return n;var o=new rs(t,e,i);return o.id=ec_+WT++,GT[o.id]=o,Fi(t,ZT,o.id),Ts(o),o},t.connect=function(t){if(y(t)){var e=t;t=null,vT(e,function(e){null!=e.group&&(t=e.group)}),t=tg_+HT++,vT(e,function(e){e.group=t})}return FT[t]=!0,t},t.disConnect=As,t.disconnect=UT,t.dispose=function(t){string==typeof tt=GT[t]t instanceof rs(t=Ds(t)),t instanceof rs&&!t.isDisposed()&&t.dispose()},t.getInstanceByDom=Ds,t.getInstanceById=function(t){return GT[t]},t.registerTheme=Cs,t.registerPreprocessor=Ls,t.registerProcessor=ks,t.registerPostUpdate=function(t){RT.push(t)},t.registerAction=Ps,t.registerCoordinateSystem=Ns,t.getCoordinateSystemDimensions=function(t){var e=Ba.get(t);if(e)return e.getDimensionsInfoe.getDimensionsInfo()e.dimensions.slice()},t.registerLayout=Os,t.registerVisual=Es,t.registerLoading=zs,t.extendComponentModel=Bs,t.extendComponentView=Vs,t.extendSeriesModel=Gs,t.extendChartView=Fs,t.setCanvasCreator=function(t){e(createCanvas,t)},t.registerMap=function(t,e,i){pT.registerMap(t,e,i)},t.getMap=function(t){var e=pT.retrieveMap(t);return e&&e[0]&&{geoJsone[0].geoJSON,specialArease[0].specialAreas}},t.dataTool=XT,t.zrender=Pb,t.number=NM,t.format=FM,t.throttle=Cr,t.helper=BA,t.matrix=fw,t.vector=nw,t.color=Pw,t.parseGeoJSON=GA,t.parseGeoJson=ZA,t.util=UA,t.graphic=XA,t.List=eA,t.Model=Lo,t.Axis=HA,t.env=z_});